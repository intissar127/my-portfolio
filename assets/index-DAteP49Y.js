(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Dx(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Jb(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var g0={exports:{}},dd={},v0={exports:{}},fn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wS;function $b(){if(wS)return fn;wS=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),s=Symbol.for("react.provider"),a=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),g=Symbol.iterator;function v(L){return L===null||typeof L!="object"?null:(L=g&&L[g]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,T={};function w(L,B,te){this.props=L,this.context=B,this.refs=T,this.updater=te||y}w.prototype.isReactComponent={},w.prototype.setState=function(L,B){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,B,"setState")},w.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function M(){}M.prototype=w.prototype;function A(L,B,te){this.props=L,this.context=B,this.refs=T,this.updater=te||y}var b=A.prototype=new M;b.constructor=A,S(b,w.prototype),b.isPureReactComponent=!0;var R=Array.isArray,I=Object.prototype.hasOwnProperty,k={current:null},F={key:!0,ref:!0,__self:!0,__source:!0};function z(L,B,te){var ie,re={},de=null,he=null;if(B!=null)for(ie in B.ref!==void 0&&(he=B.ref),B.key!==void 0&&(de=""+B.key),B)I.call(B,ie)&&!F.hasOwnProperty(ie)&&(re[ie]=B[ie]);var ve=arguments.length-2;if(ve===1)re.children=te;else if(1<ve){for(var Ve=Array(ve),rt=0;rt<ve;rt++)Ve[rt]=arguments[rt+2];re.children=Ve}if(L&&L.defaultProps)for(ie in ve=L.defaultProps,ve)re[ie]===void 0&&(re[ie]=ve[ie]);return{$$typeof:n,type:L,key:de,ref:he,props:re,_owner:k.current}}function U(L,B){return{$$typeof:n,type:L.type,key:B,ref:L.ref,props:L.props,_owner:L._owner}}function O(L){return typeof L=="object"&&L!==null&&L.$$typeof===n}function $(L){var B={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(te){return B[te]})}var Y=/\/+/g;function q(L,B){return typeof L=="object"&&L!==null&&L.key!=null?$(""+L.key):B.toString(36)}function J(L,B,te,ie,re){var de=typeof L;(de==="undefined"||de==="boolean")&&(L=null);var he=!1;if(L===null)he=!0;else switch(de){case"string":case"number":he=!0;break;case"object":switch(L.$$typeof){case n:case e:he=!0}}if(he)return he=L,re=re(he),L=ie===""?"."+q(he,0):ie,R(re)?(te="",L!=null&&(te=L.replace(Y,"$&/")+"/"),J(re,B,te,"",function(rt){return rt})):re!=null&&(O(re)&&(re=U(re,te+(!re.key||he&&he.key===re.key?"":(""+re.key).replace(Y,"$&/")+"/")+L)),B.push(re)),1;if(he=0,ie=ie===""?".":ie+":",R(L))for(var ve=0;ve<L.length;ve++){de=L[ve];var Ve=ie+q(de,ve);he+=J(de,B,te,Ve,re)}else if(Ve=v(L),typeof Ve=="function")for(L=Ve.call(L),ve=0;!(de=L.next()).done;)de=de.value,Ve=ie+q(de,ve++),he+=J(de,B,te,Ve,re);else if(de==="object")throw B=String(L),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return he}function ae(L,B,te){if(L==null)return L;var ie=[],re=0;return J(L,ie,"","",function(de){return B.call(te,de,re++)}),ie}function oe(L){if(L._status===-1){var B=L._result;B=B(),B.then(function(te){(L._status===0||L._status===-1)&&(L._status=1,L._result=te)},function(te){(L._status===0||L._status===-1)&&(L._status=2,L._result=te)}),L._status===-1&&(L._status=0,L._result=B)}if(L._status===1)return L._result.default;throw L._result}var ue={current:null},V={transition:null},j={ReactCurrentDispatcher:ue,ReactCurrentBatchConfig:V,ReactCurrentOwner:k};function W(){throw Error("act(...) is not supported in production builds of React.")}return fn.Children={map:ae,forEach:function(L,B,te){ae(L,function(){B.apply(this,arguments)},te)},count:function(L){var B=0;return ae(L,function(){B++}),B},toArray:function(L){return ae(L,function(B){return B})||[]},only:function(L){if(!O(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},fn.Component=w,fn.Fragment=t,fn.Profiler=r,fn.PureComponent=A,fn.StrictMode=i,fn.Suspense=c,fn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j,fn.act=W,fn.cloneElement=function(L,B,te){if(L==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+L+".");var ie=S({},L.props),re=L.key,de=L.ref,he=L._owner;if(B!=null){if(B.ref!==void 0&&(de=B.ref,he=k.current),B.key!==void 0&&(re=""+B.key),L.type&&L.type.defaultProps)var ve=L.type.defaultProps;for(Ve in B)I.call(B,Ve)&&!F.hasOwnProperty(Ve)&&(ie[Ve]=B[Ve]===void 0&&ve!==void 0?ve[Ve]:B[Ve])}var Ve=arguments.length-2;if(Ve===1)ie.children=te;else if(1<Ve){ve=Array(Ve);for(var rt=0;rt<Ve;rt++)ve[rt]=arguments[rt+2];ie.children=ve}return{$$typeof:n,type:L.type,key:re,ref:de,props:ie,_owner:he}},fn.createContext=function(L){return L={$$typeof:a,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},L.Provider={$$typeof:s,_context:L},L.Consumer=L},fn.createElement=z,fn.createFactory=function(L){var B=z.bind(null,L);return B.type=L,B},fn.createRef=function(){return{current:null}},fn.forwardRef=function(L){return{$$typeof:l,render:L}},fn.isValidElement=O,fn.lazy=function(L){return{$$typeof:p,_payload:{_status:-1,_result:L},_init:oe}},fn.memo=function(L,B){return{$$typeof:f,type:L,compare:B===void 0?null:B}},fn.startTransition=function(L){var B=V.transition;V.transition={};try{L()}finally{V.transition=B}},fn.unstable_act=W,fn.useCallback=function(L,B){return ue.current.useCallback(L,B)},fn.useContext=function(L){return ue.current.useContext(L)},fn.useDebugValue=function(){},fn.useDeferredValue=function(L){return ue.current.useDeferredValue(L)},fn.useEffect=function(L,B){return ue.current.useEffect(L,B)},fn.useId=function(){return ue.current.useId()},fn.useImperativeHandle=function(L,B,te){return ue.current.useImperativeHandle(L,B,te)},fn.useInsertionEffect=function(L,B){return ue.current.useInsertionEffect(L,B)},fn.useLayoutEffect=function(L,B){return ue.current.useLayoutEffect(L,B)},fn.useMemo=function(L,B){return ue.current.useMemo(L,B)},fn.useReducer=function(L,B,te){return ue.current.useReducer(L,B,te)},fn.useRef=function(L){return ue.current.useRef(L)},fn.useState=function(L){return ue.current.useState(L)},fn.useSyncExternalStore=function(L,B,te){return ue.current.useSyncExternalStore(L,B,te)},fn.useTransition=function(){return ue.current.useTransition()},fn.version="18.3.1",fn}var TS;function oh(){return TS||(TS=1,v0.exports=$b()),v0.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ES;function eA(){if(ES)return dd;ES=1;var n=oh(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,r=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,s={key:!0,ref:!0,__self:!0,__source:!0};function a(l,c,f){var p,g={},v=null,y=null;f!==void 0&&(v=""+f),c.key!==void 0&&(v=""+c.key),c.ref!==void 0&&(y=c.ref);for(p in c)i.call(c,p)&&!s.hasOwnProperty(p)&&(g[p]=c[p]);if(l&&l.defaultProps)for(p in c=l.defaultProps,c)g[p]===void 0&&(g[p]=c[p]);return{$$typeof:e,type:l,key:v,ref:y,props:g,_owner:r.current}}return dd.Fragment=t,dd.jsx=a,dd.jsxs=a,dd}var bS;function tA(){return bS||(bS=1,g0.exports=eA()),g0.exports}var pe=tA(),K=oh();const np=Dx(K);var Pm={},y0={exports:{}},ps={},x0={exports:{}},S0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function nA(){return AS||(AS=1,function(n){function e(V,j){var W=V.length;V.push(j);e:for(;0<W;){var L=W-1>>>1,B=V[L];if(0<r(B,j))V[L]=j,V[W]=B,W=L;else break e}}function t(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var j=V[0],W=V.pop();if(W!==j){V[0]=W;e:for(var L=0,B=V.length,te=B>>>1;L<te;){var ie=2*(L+1)-1,re=V[ie],de=ie+1,he=V[de];if(0>r(re,W))de<B&&0>r(he,re)?(V[L]=he,V[de]=W,L=de):(V[L]=re,V[ie]=W,L=ie);else if(de<B&&0>r(he,W))V[L]=he,V[de]=W,L=de;else break e}}return j}function r(V,j){var W=V.sortIndex-j.sortIndex;return W!==0?W:V.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,g=null,v=3,y=!1,S=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var j=t(f);j!==null;){if(j.callback===null)i(f);else if(j.startTime<=V)i(f),j.sortIndex=j.expirationTime,e(c,j);else break;j=t(f)}}function R(V){if(T=!1,b(V),!S)if(t(c)!==null)S=!0,oe(I);else{var j=t(f);j!==null&&ue(R,j.startTime-V)}}function I(V,j){S=!1,T&&(T=!1,M(z),z=-1),y=!0;var W=v;try{for(b(j),g=t(c);g!==null&&(!(g.expirationTime>j)||V&&!$());){var L=g.callback;if(typeof L=="function"){g.callback=null,v=g.priorityLevel;var B=L(g.expirationTime<=j);j=n.unstable_now(),typeof B=="function"?g.callback=B:g===t(c)&&i(c),b(j)}else i(c);g=t(c)}if(g!==null)var te=!0;else{var ie=t(f);ie!==null&&ue(R,ie.startTime-j),te=!1}return te}finally{g=null,v=W,y=!1}}var k=!1,F=null,z=-1,U=5,O=-1;function $(){return!(n.unstable_now()-O<U)}function Y(){if(F!==null){var V=n.unstable_now();O=V;var j=!0;try{j=F(!0,V)}finally{j?q():(k=!1,F=null)}}else k=!1}var q;if(typeof A=="function")q=function(){A(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=Y,q=function(){ae.postMessage(null)}}else q=function(){w(Y,0)};function oe(V){F=V,k||(k=!0,q())}function ue(V,j){z=w(function(){V(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,oe(I))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(V){switch(v){case 1:case 2:case 3:var j=3;break;default:j=v}var W=v;v=j;try{return V()}finally{v=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,j){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var W=v;v=V;try{return j()}finally{v=W}},n.unstable_scheduleCallback=function(V,j,W){var L=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,V){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,V={id:p++,callback:j,priorityLevel:V,startTime:W,expirationTime:B,sortIndex:-1},W>L?(V.sortIndex=W,e(f,V),t(c)===null&&V===t(f)&&(T?(M(z),z=-1):T=!0,ue(R,W-L))):(V.sortIndex=B,e(c,V),S||y||(S=!0,oe(I))),V},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(V){var j=v;return function(){var W=v;v=j;try{return V.apply(this,arguments)}finally{v=W}}}}(S0)),S0}var CS;function iA(){return CS||(CS=1,x0.exports=nA()),x0.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var RS;function rA(){if(RS)return ps;RS=1;var n=oh(),e=iA();function t(o){for(var u="https://reactjs.org/docs/error-decoder.html?invariant="+o,m=1;m<arguments.length;m++)u+="&args[]="+encodeURIComponent(arguments[m]);return"Minified React error #"+o+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,r={};function s(o,u){a(o,u),a(o+"Capture",u)}function a(o,u){for(r[o]=u,o=0;o<u.length;o++)i.add(u[o])}var l=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c=Object.prototype.hasOwnProperty,f=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},g={};function v(o){return c.call(g,o)?!0:c.call(p,o)?!1:f.test(o)?g[o]=!0:(p[o]=!0,!1)}function y(o,u,m,_){if(m!==null&&m.type===0)return!1;switch(typeof u){case"function":case"symbol":return!0;case"boolean":return _?!1:m!==null?!m.acceptsBooleans:(o=o.toLowerCase().slice(0,5),o!=="data-"&&o!=="aria-");default:return!1}}function S(o,u,m,_){if(u===null||typeof u>"u"||y(o,u,m,_))return!0;if(_)return!1;if(m!==null)switch(m.type){case 3:return!u;case 4:return u===!1;case 5:return isNaN(u);case 6:return isNaN(u)||1>u}return!1}function T(o,u,m,_,C,D,G){this.acceptsBooleans=u===2||u===3||u===4,this.attributeName=_,this.attributeNamespace=C,this.mustUseProperty=m,this.propertyName=o,this.type=u,this.sanitizeURL=D,this.removeEmptyString=G}var w={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(o){w[o]=new T(o,0,!1,o,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(o){var u=o[0];w[u]=new T(u,1,!1,o[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(o){w[o]=new T(o,2,!1,o.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(o){w[o]=new T(o,2,!1,o,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(o){w[o]=new T(o,3,!1,o.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(o){w[o]=new T(o,3,!0,o,null,!1,!1)}),["capture","download"].forEach(function(o){w[o]=new T(o,4,!1,o,null,!1,!1)}),["cols","rows","size","span"].forEach(function(o){w[o]=new T(o,6,!1,o,null,!1,!1)}),["rowSpan","start"].forEach(function(o){w[o]=new T(o,5,!1,o.toLowerCase(),null,!1,!1)});var M=/[\-:]([a-z])/g;function A(o){return o[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(o){var u=o.replace(M,A);w[u]=new T(u,1,!1,o,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(o){var u=o.replace(M,A);w[u]=new T(u,1,!1,o,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(o){var u=o.replace(M,A);w[u]=new T(u,1,!1,o,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(o){w[o]=new T(o,1,!1,o.toLowerCase(),null,!1,!1)}),w.xlinkHref=new T("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(o){w[o]=new T(o,1,!1,o.toLowerCase(),null,!0,!0)});function b(o,u,m,_){var C=w.hasOwnProperty(u)?w[u]:null;(C!==null?C.type!==0:_||!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(S(u,m,C,_)&&(m=null),_||C===null?v(u)&&(m===null?o.removeAttribute(u):o.setAttribute(u,""+m)):C.mustUseProperty?o[C.propertyName]=m===null?C.type===3?!1:"":m:(u=C.attributeName,_=C.attributeNamespace,m===null?o.removeAttribute(u):(C=C.type,m=C===3||C===4&&m===!0?"":""+m,_?o.setAttributeNS(_,u,m):o.setAttribute(u,m))))}var R=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),k=Symbol.for("react.portal"),F=Symbol.for("react.fragment"),z=Symbol.for("react.strict_mode"),U=Symbol.for("react.profiler"),O=Symbol.for("react.provider"),$=Symbol.for("react.context"),Y=Symbol.for("react.forward_ref"),q=Symbol.for("react.suspense"),J=Symbol.for("react.suspense_list"),ae=Symbol.for("react.memo"),oe=Symbol.for("react.lazy"),ue=Symbol.for("react.offscreen"),V=Symbol.iterator;function j(o){return o===null||typeof o!="object"?null:(o=V&&o[V]||o["@@iterator"],typeof o=="function"?o:null)}var W=Object.assign,L;function B(o){if(L===void 0)try{throw Error()}catch(m){var u=m.stack.trim().match(/\n( *(at )?)/);L=u&&u[1]||""}return`
`+L+o}var te=!1;function ie(o,u){if(!o||te)return"";te=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(u)if(u=function(){throw Error()},Object.defineProperty(u.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(u,[])}catch(Ie){var _=Ie}Reflect.construct(o,[],u)}else{try{u.call()}catch(Ie){_=Ie}o.call(u.prototype)}else{try{throw Error()}catch(Ie){_=Ie}o()}}catch(Ie){if(Ie&&_&&typeof Ie.stack=="string"){for(var C=Ie.stack.split(`
`),D=_.stack.split(`
`),G=C.length-1,se=D.length-1;1<=G&&0<=se&&C[G]!==D[se];)se--;for(;1<=G&&0<=se;G--,se--)if(C[G]!==D[se]){if(G!==1||se!==1)do if(G--,se--,0>se||C[G]!==D[se]){var fe=`
`+C[G].replace(" at new "," at ");return o.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",o.displayName)),fe}while(1<=G&&0<=se);break}}}finally{te=!1,Error.prepareStackTrace=m}return(o=o?o.displayName||o.name:"")?B(o):""}function re(o){switch(o.tag){case 5:return B(o.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return o=ie(o.type,!1),o;case 11:return o=ie(o.type.render,!1),o;case 1:return o=ie(o.type,!0),o;default:return""}}function de(o){if(o==null)return null;if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case F:return"Fragment";case k:return"Portal";case U:return"Profiler";case z:return"StrictMode";case q:return"Suspense";case J:return"SuspenseList"}if(typeof o=="object")switch(o.$$typeof){case $:return(o.displayName||"Context")+".Consumer";case O:return(o._context.displayName||"Context")+".Provider";case Y:var u=o.render;return o=o.displayName,o||(o=u.displayName||u.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case ae:return u=o.displayName||null,u!==null?u:de(o.type)||"Memo";case oe:u=o._payload,o=o._init;try{return de(o(u))}catch{}}return null}function he(o){var u=o.type;switch(o.tag){case 24:return"Cache";case 9:return(u.displayName||"Context")+".Consumer";case 10:return(u._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return o=u.render,o=o.displayName||o.name||"",u.displayName||(o!==""?"ForwardRef("+o+")":"ForwardRef");case 7:return"Fragment";case 5:return u;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return de(u);case 8:return u===z?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof u=="function")return u.displayName||u.name||null;if(typeof u=="string")return u}return null}function ve(o){switch(typeof o){case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ve(o){var u=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function rt(o){var u=Ve(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,u),_=""+o[u];if(!o.hasOwnProperty(u)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var C=m.get,D=m.set;return Object.defineProperty(o,u,{configurable:!0,get:function(){return C.call(this)},set:function(G){_=""+G,D.call(this,G)}}),Object.defineProperty(o,u,{enumerable:m.enumerable}),{getValue:function(){return _},setValue:function(G){_=""+G},stopTracking:function(){o._valueTracker=null,delete o[u]}}}}function Ue(o){o._valueTracker||(o._valueTracker=rt(o))}function Z(o){if(!o)return!1;var u=o._valueTracker;if(!u)return!0;var m=u.getValue(),_="";return o&&(_=Ve(o)?o.checked?"true":"false":o.value),o=_,o!==m?(u.setValue(o),!0):!1}function Fe(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}function we(o,u){var m=u.checked;return W({},u,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:m??o._wrapperState.initialChecked})}function ke(o,u){var m=u.defaultValue==null?"":u.defaultValue,_=u.checked!=null?u.checked:u.defaultChecked;m=ve(u.value!=null?u.value:m),o._wrapperState={initialChecked:_,initialValue:m,controlled:u.type==="checkbox"||u.type==="radio"?u.checked!=null:u.value!=null}}function Pe(o,u){u=u.checked,u!=null&&b(o,"checked",u,!1)}function et(o,u){Pe(o,u);var m=ve(u.value),_=u.type;if(m!=null)_==="number"?(m===0&&o.value===""||o.value!=m)&&(o.value=""+m):o.value!==""+m&&(o.value=""+m);else if(_==="submit"||_==="reset"){o.removeAttribute("value");return}u.hasOwnProperty("value")?Xe(o,u.type,m):u.hasOwnProperty("defaultValue")&&Xe(o,u.type,ve(u.defaultValue)),u.checked==null&&u.defaultChecked!=null&&(o.defaultChecked=!!u.defaultChecked)}function Le(o,u,m){if(u.hasOwnProperty("value")||u.hasOwnProperty("defaultValue")){var _=u.type;if(!(_!=="submit"&&_!=="reset"||u.value!==void 0&&u.value!==null))return;u=""+o._wrapperState.initialValue,m||u===o.value||(o.value=u),o.defaultValue=u}m=o.name,m!==""&&(o.name=""),o.defaultChecked=!!o._wrapperState.initialChecked,m!==""&&(o.name=m)}function Xe(o,u,m){(u!=="number"||Fe(o.ownerDocument)!==o)&&(m==null?o.defaultValue=""+o._wrapperState.initialValue:o.defaultValue!==""+m&&(o.defaultValue=""+m))}var Ze=Array.isArray;function Ae(o,u,m,_){if(o=o.options,u){u={};for(var C=0;C<m.length;C++)u["$"+m[C]]=!0;for(m=0;m<o.length;m++)C=u.hasOwnProperty("$"+o[m].value),o[m].selected!==C&&(o[m].selected=C),C&&_&&(o[m].defaultSelected=!0)}else{for(m=""+ve(m),u=null,C=0;C<o.length;C++){if(o[C].value===m){o[C].selected=!0,_&&(o[C].defaultSelected=!0);return}u!==null||o[C].disabled||(u=o[C])}u!==null&&(u.selected=!0)}}function ht(o,u){if(u.dangerouslySetInnerHTML!=null)throw Error(t(91));return W({},u,{value:void 0,defaultValue:void 0,children:""+o._wrapperState.initialValue})}function X(o,u){var m=u.value;if(m==null){if(m=u.children,u=u.defaultValue,m!=null){if(u!=null)throw Error(t(92));if(Ze(m)){if(1<m.length)throw Error(t(93));m=m[0]}u=m}u==null&&(u=""),m=u}o._wrapperState={initialValue:ve(m)}}function H(o,u){var m=ve(u.value),_=ve(u.defaultValue);m!=null&&(m=""+m,m!==o.value&&(o.value=m),u.defaultValue==null&&o.defaultValue!==m&&(o.defaultValue=m)),_!=null&&(o.defaultValue=""+_)}function ce(o){var u=o.textContent;u===o._wrapperState.initialValue&&u!==""&&u!==null&&(o.value=u)}function qe(o){switch(o){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function be(o,u){return o==null||o==="http://www.w3.org/1999/xhtml"?qe(u):o==="http://www.w3.org/2000/svg"&&u==="foreignObject"?"http://www.w3.org/1999/xhtml":o}var Ne,Ke=function(o){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(u,m,_,C){MSApp.execUnsafeLocalFunction(function(){return o(u,m,_,C)})}:o}(function(o,u){if(o.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in o)o.innerHTML=u;else{for(Ne=Ne||document.createElement("div"),Ne.innerHTML="<svg>"+u.valueOf().toString()+"</svg>",u=Ne.firstChild;o.firstChild;)o.removeChild(o.firstChild);for(;u.firstChild;)o.appendChild(u.firstChild)}});function We(o,u){if(u){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=u;return}}o.textContent=u}var xe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ct=["Webkit","ms","Moz","O"];Object.keys(xe).forEach(function(o){ct.forEach(function(u){u=u+o.charAt(0).toUpperCase()+o.substring(1),xe[u]=xe[o]})});function nt(o,u,m){return u==null||typeof u=="boolean"||u===""?"":m||typeof u!="number"||u===0||xe.hasOwnProperty(o)&&xe[o]?(""+u).trim():u+"px"}function tt(o,u){o=o.style;for(var m in u)if(u.hasOwnProperty(m)){var _=m.indexOf("--")===0,C=nt(m,u[m],_);m==="float"&&(m="cssFloat"),_?o.setProperty(m,C):o[m]=C}}var Ye=W({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function st(o,u){if(u){if(Ye[o]&&(u.children!=null||u.dangerouslySetInnerHTML!=null))throw Error(t(137,o));if(u.dangerouslySetInnerHTML!=null){if(u.children!=null)throw Error(t(60));if(typeof u.dangerouslySetInnerHTML!="object"||!("__html"in u.dangerouslySetInnerHTML))throw Error(t(61))}if(u.style!=null&&typeof u.style!="object")throw Error(t(62))}}function _t(o,u){if(o.indexOf("-")===-1)return typeof u.is=="string";switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Wt=null;function le(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var je=null,Se=null,at=null;function Qe(o){if(o=ya(o)){if(typeof je!="function")throw Error(t(280));var u=o.stateNode;u&&(u=Jc(u),je(o.stateNode,o.type,u))}}function mt(o){Se?at?at.push(o):at=[o]:Se=o}function Gt(){if(Se){var o=Se,u=at;if(at=Se=null,Qe(o),u)for(o=0;o<u.length;o++)Qe(u[o])}}function Vt(o,u){return o(u)}function Lt(){}var Dt=!1;function wn(o,u,m){if(Dt)return o(u,m);Dt=!0;try{return Vt(o,u,m)}finally{Dt=!1,(Se!==null||at!==null)&&(Lt(),Gt())}}function ln(o,u){var m=o.stateNode;if(m===null)return null;var _=Jc(m);if(_===null)return null;m=_[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(_=!_.disabled)||(o=o.type,_=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!_;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(t(231,u,typeof m));return m}var Un=!1;if(l)try{var hi={};Object.defineProperty(hi,"passive",{get:function(){Un=!0}}),window.addEventListener("test",hi,hi),window.removeEventListener("test",hi,hi)}catch{Un=!1}function Fr(o,u,m,_,C,D,G,se,fe){var Ie=Array.prototype.slice.call(arguments,3);try{u.apply(m,Ie)}catch(it){this.onError(it)}}var Jn=!1,tr=null,ri=!1,nr=null,Si={onError:function(o){Jn=!0,tr=o}};function _s(o,u,m,_,C,D,G,se,fe){Jn=!1,tr=null,Fr.apply(Si,arguments)}function hl(o,u,m,_,C,D,G,se,fe){if(_s.apply(this,arguments),Jn){if(Jn){var Ie=tr;Jn=!1,tr=null}else throw Error(t(198));ri||(ri=!0,nr=Ie)}}function ee(o){var u=o,m=o;if(o.alternate)for(;u.return;)u=u.return;else{o=u;do u=o,u.flags&4098&&(m=u.return),o=u.return;while(o)}return u.tag===3?m:null}function Ce(o){if(o.tag===13){var u=o.memoizedState;if(u===null&&(o=o.alternate,o!==null&&(u=o.memoizedState)),u!==null)return u.dehydrated}return null}function ze(o){if(ee(o)!==o)throw Error(t(188))}function Me(o){var u=o.alternate;if(!u){if(u=ee(o),u===null)throw Error(t(188));return u!==o?null:o}for(var m=o,_=u;;){var C=m.return;if(C===null)break;var D=C.alternate;if(D===null){if(_=C.return,_!==null){m=_;continue}break}if(C.child===D.child){for(D=C.child;D;){if(D===m)return ze(C),o;if(D===_)return ze(C),u;D=D.sibling}throw Error(t(188))}if(m.return!==_.return)m=C,_=D;else{for(var G=!1,se=C.child;se;){if(se===m){G=!0,m=C,_=D;break}if(se===_){G=!0,_=C,m=D;break}se=se.sibling}if(!G){for(se=D.child;se;){if(se===m){G=!0,m=D,_=C;break}if(se===_){G=!0,_=D,m=C;break}se=se.sibling}if(!G)throw Error(t(189))}}if(m.alternate!==_)throw Error(t(190))}if(m.tag!==3)throw Error(t(188));return m.stateNode.current===m?o:u}function Be(o){return o=Me(o),o!==null?xt(o):null}function xt(o){if(o.tag===5||o.tag===6)return o;for(o=o.child;o!==null;){var u=xt(o);if(u!==null)return u;o=o.sibling}return null}var Pt=e.unstable_scheduleCallback,It=e.unstable_cancelCallback,Ot=e.unstable_shouldYield,Kt=e.unstable_requestPaint,Ge=e.unstable_now,Ft=e.unstable_getCurrentPriorityLevel,Tn=e.unstable_ImmediatePriority,pn=e.unstable_UserBlockingPriority,$n=e.unstable_NormalPriority,ir=e.unstable_LowPriority,gn=e.unstable_IdlePriority,Ut=null,Qt=null;function Bt(o){if(Qt&&typeof Qt.onCommitFiberRoot=="function")try{Qt.onCommitFiberRoot(Ut,o,void 0,(o.current.flags&128)===128)}catch{}}var yn=Math.clz32?Math.clz32:Er,ei=Math.log,Hn=Math.LN2;function Er(o){return o>>>=0,o===0?32:31-(ei(o)/Hn|0)|0}var xn=64,An=4194304;function _i(o){switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return o&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return o}}function Xn(o,u){var m=o.pendingLanes;if(m===0)return 0;var _=0,C=o.suspendedLanes,D=o.pingedLanes,G=m&268435455;if(G!==0){var se=G&~C;se!==0?_=_i(se):(D&=G,D!==0&&(_=_i(D)))}else G=m&~C,G!==0?_=_i(G):D!==0&&(_=_i(D));if(_===0)return 0;if(u!==0&&u!==_&&!(u&C)&&(C=_&-_,D=u&-u,C>=D||C===16&&(D&4194240)!==0))return u;if(_&4&&(_|=m&16),u=o.entangledLanes,u!==0)for(o=o.entanglements,u&=_;0<u;)m=31-yn(u),C=1<<m,_|=o[m],u&=~C;return _}function Bs(o,u){switch(o){case 1:case 2:case 4:return u+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zs(o,u){for(var m=o.suspendedLanes,_=o.pingedLanes,C=o.expirationTimes,D=o.pendingLanes;0<D;){var G=31-yn(D),se=1<<G,fe=C[G];fe===-1?(!(se&m)||se&_)&&(C[G]=Bs(se,u)):fe<=u&&(o.expiredLanes|=se),D&=~se}}function Ci(o){return o=o.pendingLanes&-1073741825,o!==0?o:o&1073741824?1073741824:0}function br(){var o=xn;return xn<<=1,!(xn&4194240)&&(xn=64),o}function ja(o){for(var u=[],m=0;31>m;m++)u.push(o);return u}function Ms(o,u,m){o.pendingLanes|=u,u!==536870912&&(o.suspendedLanes=0,o.pingedLanes=0),o=o.eventTimes,u=31-yn(u),o[u]=m}function bc(o,u){var m=o.pendingLanes&~u;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.expiredLanes&=u,o.mutableReadLanes&=u,o.entangledLanes&=u,u=o.entanglements;var _=o.eventTimes;for(o=o.expirationTimes;0<m;){var C=31-yn(m),D=1<<C;u[C]=0,_[C]=-1,o[C]=-1,m&=~D}}function ws(o,u){var m=o.entangledLanes|=u;for(o=o.entanglements;m;){var _=31-yn(m),C=1<<_;C&u|o[_]&u&&(o[_]|=u),m&=~C}}var un=0;function Hs(o){return o&=-o,1<o?4<o?o&268435455?16:536870912:4:1}var Xa,dl,pl,Gs,So,ns=!1,Ts=[],zi=null,jt=null,is=null,kr=new Map,Vs=new Map,rs=[],Ac="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Gn(o,u){switch(o){case"focusin":case"focusout":zi=null;break;case"dragenter":case"dragleave":jt=null;break;case"mouseover":case"mouseout":is=null;break;case"pointerover":case"pointerout":kr.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vs.delete(u.pointerId)}}function Es(o,u,m,_,C,D){return o===null||o.nativeEvent!==D?(o={blockedOn:u,domEventName:m,eventSystemFlags:_,nativeEvent:D,targetContainers:[C]},u!==null&&(u=ya(u),u!==null&&dl(u)),o):(o.eventSystemFlags|=_,u=o.targetContainers,C!==null&&u.indexOf(C)===-1&&u.push(C),o)}function Cc(o,u,m,_,C){switch(u){case"focusin":return zi=Es(zi,o,u,m,_,C),!0;case"dragenter":return jt=Es(jt,o,u,m,_,C),!0;case"mouseover":return is=Es(is,o,u,m,_,C),!0;case"pointerover":var D=C.pointerId;return kr.set(D,Es(kr.get(D)||null,o,u,m,_,C)),!0;case"gotpointercapture":return D=C.pointerId,Vs.set(D,Es(Vs.get(D)||null,o,u,m,_,C)),!0}return!1}function rr(o){var u=ro(o.target);if(u!==null){var m=ee(u);if(m!==null){if(u=m.tag,u===13){if(u=Ce(m),u!==null){o.blockedOn=u,So(o.priority,function(){pl(m)});return}}else if(u===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Ya(o){if(o.blockedOn!==null)return!1;for(var u=o.targetContainers;0<u.length;){var m=sr(o.domEventName,o.eventSystemFlags,u[0],o.nativeEvent);if(m===null){m=o.nativeEvent;var _=new m.constructor(m.type,m);Wt=_,m.target.dispatchEvent(_),Wt=null}else return u=ya(m),u!==null&&dl(u),o.blockedOn=m,!1;u.shift()}return!0}function qa(o,u,m){Ya(o)&&m.delete(u)}function Or(){ns=!1,zi!==null&&Ya(zi)&&(zi=null),jt!==null&&Ya(jt)&&(jt=null),is!==null&&Ya(is)&&(is=null),kr.forEach(qa),Vs.forEach(qa)}function oa(o,u){o.blockedOn===u&&(o.blockedOn=null,ns||(ns=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Or)))}function Za(o){function u(C){return oa(C,o)}if(0<Ts.length){oa(Ts[0],o);for(var m=1;m<Ts.length;m++){var _=Ts[m];_.blockedOn===o&&(_.blockedOn=null)}}for(zi!==null&&oa(zi,o),jt!==null&&oa(jt,o),is!==null&&oa(is,o),kr.forEach(u),Vs.forEach(u),m=0;m<rs.length;m++)_=rs[m],_.blockedOn===o&&(_.blockedOn=null);for(;0<rs.length&&(m=rs[0],m.blockedOn===null);)rr(m),m.blockedOn===null&&rs.shift()}var Ri=R.ReactCurrentBatchConfig,Pi=!0;function Ws(o,u,m,_){var C=un,D=Ri.transition;Ri.transition=null;try{un=1,_o(o,u,m,_)}finally{un=C,Ri.transition=D}}function ss(o,u,m,_){var C=un,D=Ri.transition;Ri.transition=null;try{un=4,_o(o,u,m,_)}finally{un=C,Ri.transition=D}}function _o(o,u,m,_){if(Pi){var C=sr(o,u,m,_);if(C===null)Xc(o,u,_,Ka,m),Gn(o,_);else if(Cc(C,o,u,m,_))_.stopPropagation();else if(Gn(o,_),u&4&&-1<Ac.indexOf(o)){for(;C!==null;){var D=ya(C);if(D!==null&&Xa(D),D=sr(o,u,m,_),D===null&&Xc(o,u,_,Ka,m),D===C)break;C=D}C!==null&&_.stopPropagation()}else Xc(o,u,_,null,m)}}var Ka=null;function sr(o,u,m,_){if(Ka=null,o=le(_),o=ro(o),o!==null)if(u=ee(o),u===null)o=null;else if(m=u.tag,m===13){if(o=Ce(u),o!==null)return o;o=null}else if(m===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;o=null}else u!==o&&(o=null);return Ka=o,null}function Qa(o){switch(o){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Ft()){case Tn:return 1;case pn:return 4;case $n:case ir:return 16;case gn:return 536870912;default:return 16}default:return 16}}var Ar=null,la=null,Di=null;function Mi(){if(Di)return Di;var o,u=la,m=u.length,_,C="value"in Ar?Ar.value:Ar.textContent,D=C.length;for(o=0;o<m&&u[o]===C[o];o++);var G=m-o;for(_=1;_<=G&&u[m-_]===C[D-_];_++);return Di=C.slice(o,1<_?1-_:void 0)}function ua(o){var u=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&u===13&&(o=13)):o=u,o===10&&(o=13),32<=o||o===13?o:0}function Cr(){return!0}function ca(){return!1}function Li(o){function u(m,_,C,D,G){this._reactName=m,this._targetInst=C,this.type=_,this.nativeEvent=D,this.target=G,this.currentTarget=null;for(var se in o)o.hasOwnProperty(se)&&(m=o[se],this[se]=m?m(D):D[se]);return this.isDefaultPrevented=(D.defaultPrevented!=null?D.defaultPrevented:D.returnValue===!1)?Cr:ca,this.isPropagationStopped=ca,this}return W(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=Cr)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=Cr)},persist:function(){},isPersistent:Cr}),u}var fa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},di=Li(fa),wi=W({},fa,{view:0,detail:0}),si=Li(wi),Yn,dr,as,ml=W({},wi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:$a,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==as&&(as&&o.type==="mousemove"?(Yn=o.screenX-as.screenX,dr=o.screenY-as.screenY):dr=Yn=0,as=o),Yn)},movementY:function(o){return"movementY"in o?o.movementY:dr}}),Mh=Li(ml),ha=W({},ml,{dataTransfer:0}),Ja=Li(ha),Rc=W({},wi,{relatedTarget:0}),Pc=Li(Rc),Dc=W({},fa,{animationName:0,elapsedTime:0,pseudoElement:0}),zp=Li(Dc),Hp=W({},fa,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),wh=Li(Hp),Lc=W({},fa,{data:0}),Th=Li(Lc),Gp={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Vp={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Eh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function gl(o){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(o):(o=Eh[o])?!!u[o]:!1}function $a(){return gl}var Ic=W({},wi,{key:function(o){if(o.key){var u=Gp[o.key]||o.key;if(u!=="Unidentified")return u}return o.type==="keypress"?(o=ua(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Vp[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:$a,charCode:function(o){return o.type==="keypress"?ua(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?ua(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Uc=Li(Ic),os=W({},ml,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Br=Li(os),Mo=W({},wi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:$a}),da=Li(Mo),pa=W({},fa,{propertyName:0,elapsedTime:0,pseudoElement:0}),wo=Li(pa),Wp=W({},ml,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),bh=Li(Wp),Ah=[9,13,27,32],pr=l&&"CompositionEvent"in window,Hi=null;l&&"documentMode"in document&&(Hi=document.documentMode);var Vn=l&&"TextEvent"in window&&!Hi,vl=l&&(!pr||Hi&&8<Hi&&11>=Hi),ls=" ",Ch=!1;function Rh(o,u){switch(o){case"keyup":return Ah.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Nc(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var eo=!1;function jp(o,u){switch(o){case"compositionend":return Nc(u);case"keypress":return u.which!==32?null:(Ch=!0,ls);case"textInput":return o=u.data,o===ls&&Ch?null:o;default:return null}}function uu(o,u){if(eo)return o==="compositionend"||!pr&&Rh(o,u)?(o=Mi(),Di=la=Ar=null,eo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return vl&&u.locale!=="ko"?null:u.data;default:return null}}var yl={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fc(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u==="input"?!!yl[o.type]:u==="textarea"}function xl(o,u,m,_){mt(_),u=Yc(u,"onChange"),0<u.length&&(m=new di("onChange","change",null,m,_),o.push({event:m,listeners:u}))}var to=null,Sl=null;function Xp(o){Tl(o,0)}function ma(o){var u=ai(o);if(Z(u))return o}function Yp(o,u){if(o==="change")return u}var _l=!1;if(l){var Rr;if(l){var To="oninput"in document;if(!To){var Eo=document.createElement("div");Eo.setAttribute("oninput","return;"),To=typeof Eo.oninput=="function"}Rr=To}else Rr=!1;_l=Rr&&(!document.documentMode||9<document.documentMode)}function bs(){to&&(to.detachEvent("onpropertychange",kc),Sl=to=null)}function kc(o){if(o.propertyName==="value"&&ma(Sl)){var u=[];xl(u,Sl,o,le(o)),wn(Xp,u)}}function Ml(o,u,m){o==="focusin"?(bs(),to=u,Sl=m,to.attachEvent("onpropertychange",kc)):o==="focusout"&&bs()}function qp(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return ma(Sl)}function Ph(o,u){if(o==="click")return ma(u)}function qn(o,u){if(o==="input"||o==="change")return ma(u)}function Oc(o,u){return o===u&&(o!==0||1/o===1/u)||o!==o&&u!==u}var zr=typeof Object.is=="function"?Object.is:Oc;function bo(o,u){if(zr(o,u))return!0;if(typeof o!="object"||o===null||typeof u!="object"||u===null)return!1;var m=Object.keys(o),_=Object.keys(u);if(m.length!==_.length)return!1;for(_=0;_<m.length;_++){var C=m[_];if(!c.call(u,C)||!zr(o[C],u[C]))return!1}return!0}function cu(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Hr(o,u){var m=cu(o);o=0;for(var _;m;){if(m.nodeType===3){if(_=o+m.textContent.length,o<=u&&_>=u)return{node:m,offset:u-o};o=_}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=cu(m)}}function Ao(o,u){return o&&u?o===u?!0:o&&o.nodeType===3?!1:u&&u.nodeType===3?Ao(o,u.parentNode):"contains"in o?o.contains(u):o.compareDocumentPosition?!!(o.compareDocumentPosition(u)&16):!1:!1}function Zn(){for(var o=window,u=Fe();u instanceof o.HTMLIFrameElement;){try{var m=typeof u.contentWindow.location.href=="string"}catch{m=!1}if(m)o=u.contentWindow;else break;u=Fe(o.document)}return u}function Ii(o){var u=o&&o.nodeName&&o.nodeName.toLowerCase();return u&&(u==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||u==="textarea"||o.contentEditable==="true")}function Ui(o){var u=Zn(),m=o.focusedElem,_=o.selectionRange;if(u!==m&&m&&m.ownerDocument&&Ao(m.ownerDocument.documentElement,m)){if(_!==null&&Ii(m)){if(u=_.start,o=_.end,o===void 0&&(o=u),"selectionStart"in m)m.selectionStart=u,m.selectionEnd=Math.min(o,m.value.length);else if(o=(u=m.ownerDocument||document)&&u.defaultView||window,o.getSelection){o=o.getSelection();var C=m.textContent.length,D=Math.min(_.start,C);_=_.end===void 0?D:Math.min(_.end,C),!o.extend&&D>_&&(C=_,_=D,D=C),C=Hr(m,D);var G=Hr(m,_);C&&G&&(o.rangeCount!==1||o.anchorNode!==C.node||o.anchorOffset!==C.offset||o.focusNode!==G.node||o.focusOffset!==G.offset)&&(u=u.createRange(),u.setStart(C.node,C.offset),o.removeAllRanges(),D>_?(o.addRange(u),o.extend(G.node,G.offset)):(u.setEnd(G.node,G.offset),o.addRange(u)))}}for(u=[],o=m;o=o.parentNode;)o.nodeType===1&&u.push({element:o,left:o.scrollLeft,top:o.scrollTop});for(typeof m.focus=="function"&&m.focus(),m=0;m<u.length;m++)o=u[m],o.element.scrollLeft=o.left,o.element.scrollTop=o.top}}var Bc=l&&"documentMode"in document&&11>=document.documentMode,js=null,Co=null,fu=null,Ni=!1;function zc(o,u,m){var _=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;Ni||js==null||js!==Fe(_)||(_=js,"selectionStart"in _&&Ii(_)?_={start:_.selectionStart,end:_.selectionEnd}:(_=(_.ownerDocument&&_.ownerDocument.defaultView||window).getSelection(),_={anchorNode:_.anchorNode,anchorOffset:_.anchorOffset,focusNode:_.focusNode,focusOffset:_.focusOffset}),fu&&bo(fu,_)||(fu=_,_=Yc(Co,"onSelect"),0<_.length&&(u=new di("onSelect","select",null,u,m),o.push({event:u,listeners:_}),u.target=js)))}function wl(o,u){var m={};return m[o.toLowerCase()]=u.toLowerCase(),m["Webkit"+o]="webkit"+u,m["Moz"+o]="moz"+u,m}var no={animationend:wl("Animation","AnimationEnd"),animationiteration:wl("Animation","AnimationIteration"),animationstart:wl("Animation","AnimationStart"),transitionend:wl("Transition","TransitionEnd")},As={},Cs={};l&&(Cs=document.createElement("div").style,"AnimationEvent"in window||(delete no.animationend.animation,delete no.animationiteration.animation,delete no.animationstart.animation),"TransitionEvent"in window||delete no.transitionend.transition);function Xs(o){if(As[o])return As[o];if(!no[o])return o;var u=no[o],m;for(m in u)if(u.hasOwnProperty(m)&&m in Cs)return As[o]=u[m];return o}var hu=Xs("animationend"),du=Xs("animationiteration"),Dh=Xs("animationstart"),Lh=Xs("transitionend"),Ih=new Map,Uh="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ga(o,u){Ih.set(o,u),s(u,[o])}for(var Hc=0;Hc<Uh.length;Hc++){var pu=Uh[Hc],mu=pu.toLowerCase(),Zp=pu[0].toUpperCase()+pu.slice(1);ga(mu,"on"+Zp)}ga(hu,"onAnimationEnd"),ga(du,"onAnimationIteration"),ga(Dh,"onAnimationStart"),ga("dblclick","onDoubleClick"),ga("focusin","onFocus"),ga("focusout","onBlur"),ga(Lh,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),s("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),s("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),s("onBeforeInput",["compositionend","keypress","textInput","paste"]),s("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),s("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var io="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Gc=new Set("cancel close invalid load scroll toggle".split(" ").concat(io));function Vc(o,u,m){var _=o.type||"unknown-event";o.currentTarget=m,hl(_,u,void 0,o),o.currentTarget=null}function Tl(o,u){u=(u&4)!==0;for(var m=0;m<o.length;m++){var _=o[m],C=_.event;_=_.listeners;e:{var D=void 0;if(u)for(var G=_.length-1;0<=G;G--){var se=_[G],fe=se.instance,Ie=se.currentTarget;if(se=se.listener,fe!==D&&C.isPropagationStopped())break e;Vc(C,se,Ie),D=fe}else for(G=0;G<_.length;G++){if(se=_[G],fe=se.instance,Ie=se.currentTarget,se=se.listener,fe!==D&&C.isPropagationStopped())break e;Vc(C,se,Ie),D=fe}}}if(ri)throw o=nr,ri=!1,nr=null,o}function Nn(o,u){var m=u[Do];m===void 0&&(m=u[Do]=new Set);var _=o+"__bubble";m.has(_)||(jc(u,o,2,!1),m.add(_))}function Wc(o,u,m){var _=0;u&&(_|=4),jc(m,o,_,u)}var gu="_reactListening"+Math.random().toString(36).slice(2);function El(o){if(!o[gu]){o[gu]=!0,i.forEach(function(m){m!=="selectionchange"&&(Gc.has(m)||Wc(m,!1,o),Wc(m,!0,o))});var u=o.nodeType===9?o:o.ownerDocument;u===null||u[gu]||(u[gu]=!0,Wc("selectionchange",!1,u))}}function jc(o,u,m,_){switch(Qa(u)){case 1:var C=Ws;break;case 4:C=ss;break;default:C=_o}m=C.bind(null,u,m,o),C=void 0,!Un||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(C=!0),_?C!==void 0?o.addEventListener(u,m,{capture:!0,passive:C}):o.addEventListener(u,m,!0):C!==void 0?o.addEventListener(u,m,{passive:C}):o.addEventListener(u,m,!1)}function Xc(o,u,m,_,C){var D=_;if(!(u&1)&&!(u&2)&&_!==null)e:for(;;){if(_===null)return;var G=_.tag;if(G===3||G===4){var se=_.stateNode.containerInfo;if(se===C||se.nodeType===8&&se.parentNode===C)break;if(G===4)for(G=_.return;G!==null;){var fe=G.tag;if((fe===3||fe===4)&&(fe=G.stateNode.containerInfo,fe===C||fe.nodeType===8&&fe.parentNode===C))return;G=G.return}for(;se!==null;){if(G=ro(se),G===null)return;if(fe=G.tag,fe===5||fe===6){_=D=G;continue e}se=se.parentNode}}_=_.return}wn(function(){var Ie=D,it=le(m),ot=[];e:{var $e=Ih.get(o);if($e!==void 0){var St=di,Tt=o;switch(o){case"keypress":if(ua(m)===0)break e;case"keydown":case"keyup":St=Uc;break;case"focusin":Tt="focus",St=Pc;break;case"focusout":Tt="blur",St=Pc;break;case"beforeblur":case"afterblur":St=Pc;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":St=Mh;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":St=Ja;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":St=da;break;case hu:case du:case Dh:St=zp;break;case Lh:St=wo;break;case"scroll":St=si;break;case"wheel":St=bh;break;case"copy":case"cut":case"paste":St=wh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":St=Br}var bt=(u&4)!==0,Ei=!bt&&o==="scroll",Te=bt?$e!==null?$e+"Capture":null:$e;bt=[];for(var me=Ie,Re;me!==null;){Re=me;var ut=Re.stateNode;if(Re.tag===5&&ut!==null&&(Re=ut,Te!==null&&(ut=ln(me,Te),ut!=null&&bt.push(bl(me,ut,Re)))),Ei)break;me=me.return}0<bt.length&&($e=new St($e,Tt,null,m,it),ot.push({event:$e,listeners:bt}))}}if(!(u&7)){e:{if($e=o==="mouseover"||o==="pointerover",St=o==="mouseout"||o==="pointerout",$e&&m!==Wt&&(Tt=m.relatedTarget||m.fromElement)&&(ro(Tt)||Tt[Gr]))break e;if((St||$e)&&($e=it.window===it?it:($e=it.ownerDocument)?$e.defaultView||$e.parentWindow:window,St?(Tt=m.relatedTarget||m.toElement,St=Ie,Tt=Tt?ro(Tt):null,Tt!==null&&(Ei=ee(Tt),Tt!==Ei||Tt.tag!==5&&Tt.tag!==6)&&(Tt=null)):(St=null,Tt=Ie),St!==Tt)){if(bt=Mh,ut="onMouseLeave",Te="onMouseEnter",me="mouse",(o==="pointerout"||o==="pointerover")&&(bt=Br,ut="onPointerLeave",Te="onPointerEnter",me="pointer"),Ei=St==null?$e:ai(St),Re=Tt==null?$e:ai(Tt),$e=new bt(ut,me+"leave",St,m,it),$e.target=Ei,$e.relatedTarget=Re,ut=null,ro(it)===Ie&&(bt=new bt(Te,me+"enter",Tt,m,it),bt.target=Re,bt.relatedTarget=Ei,ut=bt),Ei=ut,St&&Tt)t:{for(bt=St,Te=Tt,me=0,Re=bt;Re;Re=Ro(Re))me++;for(Re=0,ut=Te;ut;ut=Ro(ut))Re++;for(;0<me-Re;)bt=Ro(bt),me--;for(;0<Re-me;)Te=Ro(Te),Re--;for(;me--;){if(bt===Te||Te!==null&&bt===Te.alternate)break t;bt=Ro(bt),Te=Ro(Te)}bt=null}else bt=null;St!==null&&Kp(ot,$e,St,bt,!1),Tt!==null&&Ei!==null&&Kp(ot,Ei,Tt,bt,!0)}}e:{if($e=Ie?ai(Ie):window,St=$e.nodeName&&$e.nodeName.toLowerCase(),St==="select"||St==="input"&&$e.type==="file")var Rt=Yp;else if(Fc($e))if(_l)Rt=qn;else{Rt=qp;var zt=Ml}else(St=$e.nodeName)&&St.toLowerCase()==="input"&&($e.type==="checkbox"||$e.type==="radio")&&(Rt=Ph);if(Rt&&(Rt=Rt(o,Ie))){xl(ot,Rt,m,it);break e}zt&&zt(o,$e,Ie),o==="focusout"&&(zt=$e._wrapperState)&&zt.controlled&&$e.type==="number"&&Xe($e,"number",$e.value)}switch(zt=Ie?ai(Ie):window,o){case"focusin":(Fc(zt)||zt.contentEditable==="true")&&(js=zt,Co=Ie,fu=null);break;case"focusout":fu=Co=js=null;break;case"mousedown":Ni=!0;break;case"contextmenu":case"mouseup":case"dragend":Ni=!1,zc(ot,m,it);break;case"selectionchange":if(Bc)break;case"keydown":case"keyup":zc(ot,m,it)}var Ht;if(pr)e:{switch(o){case"compositionstart":var Xt="onCompositionStart";break e;case"compositionend":Xt="onCompositionEnd";break e;case"compositionupdate":Xt="onCompositionUpdate";break e}Xt=void 0}else eo?Rh(o,m)&&(Xt="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(Xt="onCompositionStart");Xt&&(vl&&m.locale!=="ko"&&(eo||Xt!=="onCompositionStart"?Xt==="onCompositionEnd"&&eo&&(Ht=Mi()):(Ar=it,la="value"in Ar?Ar.value:Ar.textContent,eo=!0)),zt=Yc(Ie,Xt),0<zt.length&&(Xt=new Th(Xt,o,null,m,it),ot.push({event:Xt,listeners:zt}),Ht?Xt.data=Ht:(Ht=Nc(m),Ht!==null&&(Xt.data=Ht)))),(Ht=Vn?jp(o,m):uu(o,m))&&(Ie=Yc(Ie,"onBeforeInput"),0<Ie.length&&(it=new Th("onBeforeInput","beforeinput",null,m,it),ot.push({event:it,listeners:Ie}),it.data=Ht))}Tl(ot,u)})}function bl(o,u,m){return{instance:o,listener:u,currentTarget:m}}function Yc(o,u){for(var m=u+"Capture",_=[];o!==null;){var C=o,D=C.stateNode;C.tag===5&&D!==null&&(C=D,D=ln(o,m),D!=null&&_.unshift(bl(o,D,C)),D=ln(o,u),D!=null&&_.push(bl(o,D,C))),o=o.return}return _}function Ro(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5);return o||null}function Kp(o,u,m,_,C){for(var D=u._reactName,G=[];m!==null&&m!==_;){var se=m,fe=se.alternate,Ie=se.stateNode;if(fe!==null&&fe===_)break;se.tag===5&&Ie!==null&&(se=Ie,C?(fe=ln(m,D),fe!=null&&G.unshift(bl(m,fe,se))):C||(fe=ln(m,D),fe!=null&&G.push(bl(m,fe,se)))),m=m.return}G.length!==0&&o.push({event:u,listeners:G})}var Vv=/\r\n?/g,Qp=/\u0000|\uFFFD/g;function Nh(o){return(typeof o=="string"?o:""+o).replace(Vv,`
`).replace(Qp,"")}function vu(o,u,m){if(u=Nh(u),Nh(o)!==u&&m)throw Error(t(425))}function yu(){}var Al=null,Fh=null;function kh(o,u){return o==="textarea"||o==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var Oh=typeof setTimeout=="function"?setTimeout:void 0,Bh=typeof clearTimeout=="function"?clearTimeout:void 0,qc=typeof Promise=="function"?Promise:void 0,Wv=typeof queueMicrotask=="function"?queueMicrotask:typeof qc<"u"?function(o){return qc.resolve(null).then(o).catch(Jp)}:Oh;function Jp(o){setTimeout(function(){throw o})}function Zc(o,u){var m=u,_=0;do{var C=m.nextSibling;if(o.removeChild(m),C&&C.nodeType===8)if(m=C.data,m==="/$"){if(_===0){o.removeChild(C),Za(u);return}_--}else m!=="$"&&m!=="$?"&&m!=="$!"||_++;m=C}while(m);Za(u)}function va(o){for(;o!=null;o=o.nextSibling){var u=o.nodeType;if(u===1||u===3)break;if(u===8){if(u=o.data,u==="$"||u==="$!"||u==="$?")break;if(u==="/$")return null}}return o}function zh(o){o=o.previousSibling;for(var u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(u===0)return o;u--}else m==="/$"&&u++}o=o.previousSibling}return null}var Po=Math.random().toString(36).slice(2),Ti="__reactFiber$"+Po,Cl="__reactProps$"+Po,Gr="__reactContainer$"+Po,Do="__reactEvents$"+Po,Kc="__reactListeners$"+Po,Qc="__reactHandles$"+Po;function ro(o){var u=o[Ti];if(u)return u;for(var m=o.parentNode;m;){if(u=m[Gr]||m[Ti]){if(m=u.alternate,u.child!==null||m!==null&&m.child!==null)for(o=zh(o);o!==null;){if(m=o[Ti])return m;o=zh(o)}return u}o=m,m=o.parentNode}return null}function ya(o){return o=o[Ti]||o[Gr],!o||o.tag!==5&&o.tag!==6&&o.tag!==13&&o.tag!==3?null:o}function ai(o){if(o.tag===5||o.tag===6)return o.stateNode;throw Error(t(33))}function Jc(o){return o[Cl]||null}var Hh=[],Fi=-1;function ti(o){return{current:o}}function Fn(o){0>Fi||(o.current=Hh[Fi],Hh[Fi]=null,Fi--)}function In(o,u){Fi++,Hh[Fi]=o.current,o.current=u}var xa={},Gi=ti(xa),mr=ti(!1),Sa=xa;function Lo(o,u){var m=o.type.contextTypes;if(!m)return xa;var _=o.stateNode;if(_&&_.__reactInternalMemoizedUnmaskedChildContext===u)return _.__reactInternalMemoizedMaskedChildContext;var C={},D;for(D in m)C[D]=u[D];return _&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=u,o.__reactInternalMemoizedMaskedChildContext=C),C}function ar(o){return o=o.childContextTypes,o!=null}function xu(){Fn(mr),Fn(Gi)}function Gh(o,u,m){if(Gi.current!==xa)throw Error(t(168));In(Gi,u),In(mr,m)}function Su(o,u,m){var _=o.stateNode;if(u=u.childContextTypes,typeof _.getChildContext!="function")return m;_=_.getChildContext();for(var C in _)if(!(C in u))throw Error(t(108,he(o)||"Unknown",C));return W({},m,_)}function Io(o){return o=(o=o.stateNode)&&o.__reactInternalMemoizedMergedChildContext||xa,Sa=Gi.current,In(Gi,o),In(mr,mr.current),!0}function Vh(o,u,m){var _=o.stateNode;if(!_)throw Error(t(169));m?(o=Su(o,u,Sa),_.__reactInternalMemoizedMergedChildContext=o,Fn(mr),Fn(Gi),In(Gi,o)):Fn(mr),In(mr,m)}var Rs=null,_u=!1,$c=!1;function Mu(o){Rs===null?Rs=[o]:Rs.push(o)}function $p(o){_u=!0,Mu(o)}function Ys(){if(!$c&&Rs!==null){$c=!0;var o=0,u=un;try{var m=Rs;for(un=1;o<m.length;o++){var _=m[o];do _=_(!0);while(_!==null)}Rs=null,_u=!1}catch(C){throw Rs!==null&&(Rs=Rs.slice(o+1)),Pt(Tn,Ys),C}finally{un=u,$c=!1}}return null}var Uo=[],Pr=0,ef=null,tf=0,gr=[],ki=0,No=null,ft=1,us="";function _a(o,u){Uo[Pr++]=tf,Uo[Pr++]=ef,ef=o,tf=u}function Wh(o,u,m){gr[ki++]=ft,gr[ki++]=us,gr[ki++]=No,No=o;var _=ft;o=us;var C=32-yn(_)-1;_&=~(1<<C),m+=1;var D=32-yn(u)+C;if(30<D){var G=C-C%5;D=(_&(1<<G)-1).toString(32),_>>=G,C-=G,ft=1<<32-yn(u)+C|m<<C|_,us=D+o}else ft=1<<D|m<<C|_,us=o}function jh(o){o.return!==null&&(_a(o,1),Wh(o,1,0))}function Ma(o){for(;o===ef;)ef=Uo[--Pr],Uo[Pr]=null,tf=Uo[--Pr],Uo[Pr]=null;for(;o===No;)No=gr[--ki],gr[ki]=null,us=gr[--ki],gr[ki]=null,ft=gr[--ki],gr[ki]=null}var Vi=null,vr=null,On=!1,cs=null;function Xh(o,u){var m=Js(5,null,null,0);m.elementType="DELETED",m.stateNode=u,m.return=o,u=o.deletions,u===null?(o.deletions=[m],o.flags|=16):u.push(m)}function Yh(o,u){switch(o.tag){case 5:var m=o.type;return u=u.nodeType!==1||m.toLowerCase()!==u.nodeName.toLowerCase()?null:u,u!==null?(o.stateNode=u,Vi=o,vr=va(u.firstChild),!0):!1;case 6:return u=o.pendingProps===""||u.nodeType!==3?null:u,u!==null?(o.stateNode=u,Vi=o,vr=null,!0):!1;case 13:return u=u.nodeType!==8?null:u,u!==null?(m=No!==null?{id:ft,overflow:us}:null,o.memoizedState={dehydrated:u,treeContext:m,retryLane:1073741824},m=Js(18,null,null,0),m.stateNode=u,m.return=o,o.child=m,Vi=o,vr=null,!0):!1;default:return!1}}function nf(o){return(o.mode&1)!==0&&(o.flags&128)===0}function rf(o){if(On){var u=vr;if(u){var m=u;if(!Yh(o,u)){if(nf(o))throw Error(t(418));u=va(m.nextSibling);var _=Vi;u&&Yh(o,u)?Xh(_,m):(o.flags=o.flags&-4097|2,On=!1,Vi=o)}}else{if(nf(o))throw Error(t(418));o.flags=o.flags&-4097|2,On=!1,Vi=o}}}function sf(o){for(o=o.return;o!==null&&o.tag!==5&&o.tag!==3&&o.tag!==13;)o=o.return;Vi=o}function Rl(o){if(o!==Vi)return!1;if(!On)return sf(o),On=!0,!1;var u;if((u=o.tag!==3)&&!(u=o.tag!==5)&&(u=o.type,u=u!=="head"&&u!=="body"&&!kh(o.type,o.memoizedProps)),u&&(u=vr)){if(nf(o))throw qh(),Error(t(418));for(;u;)Xh(o,u),u=va(u.nextSibling)}if(sf(o),o.tag===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(t(317));e:{for(o=o.nextSibling,u=0;o;){if(o.nodeType===8){var m=o.data;if(m==="/$"){if(u===0){vr=va(o.nextSibling);break e}u--}else m!=="$"&&m!=="$!"&&m!=="$?"||u++}o=o.nextSibling}vr=null}}else vr=Vi?va(o.stateNode.nextSibling):null;return!0}function qh(){for(var o=vr;o;)o=va(o.nextSibling)}function so(){vr=Vi=null,On=!1}function Pl(o){cs===null?cs=[o]:cs.push(o)}var jv=R.ReactCurrentBatchConfig;function wu(o,u,m){if(o=m.ref,o!==null&&typeof o!="function"&&typeof o!="object"){if(m._owner){if(m=m._owner,m){if(m.tag!==1)throw Error(t(309));var _=m.stateNode}if(!_)throw Error(t(147,o));var C=_,D=""+o;return u!==null&&u.ref!==null&&typeof u.ref=="function"&&u.ref._stringRef===D?u.ref:(u=function(G){var se=C.refs;G===null?delete se[D]:se[D]=G},u._stringRef=D,u)}if(typeof o!="string")throw Error(t(284));if(!m._owner)throw Error(t(290,o))}return o}function Tu(o,u){throw o=Object.prototype.toString.call(u),Error(t(31,o==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":o))}function Zh(o){var u=o._init;return u(o._payload)}function Kh(o){function u(Te,me){if(o){var Re=Te.deletions;Re===null?(Te.deletions=[me],Te.flags|=16):Re.push(me)}}function m(Te,me){if(!o)return null;for(;me!==null;)u(Te,me),me=me.sibling;return null}function _(Te,me){for(Te=new Map;me!==null;)me.key!==null?Te.set(me.key,me):Te.set(me.index,me),me=me.sibling;return Te}function C(Te,me){return Te=Hl(Te,me),Te.index=0,Te.sibling=null,Te}function D(Te,me,Re){return Te.index=Re,o?(Re=Te.alternate,Re!==null?(Re=Re.index,Re<me?(Te.flags|=2,me):Re):(Te.flags|=2,me)):(Te.flags|=1048576,me)}function G(Te){return o&&Te.alternate===null&&(Te.flags|=2),Te}function se(Te,me,Re,ut){return me===null||me.tag!==6?(me=c0(Re,Te.mode,ut),me.return=Te,me):(me=C(me,Re),me.return=Te,me)}function fe(Te,me,Re,ut){var Rt=Re.type;return Rt===F?it(Te,me,Re.props.children,ut,Re.key):me!==null&&(me.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===oe&&Zh(Rt)===me.type)?(ut=C(me,Re.props),ut.ref=wu(Te,me,Re),ut.return=Te,ut):(ut=Mm(Re.type,Re.key,Re.props,null,Te.mode,ut),ut.ref=wu(Te,me,Re),ut.return=Te,ut)}function Ie(Te,me,Re,ut){return me===null||me.tag!==4||me.stateNode.containerInfo!==Re.containerInfo||me.stateNode.implementation!==Re.implementation?(me=f0(Re,Te.mode,ut),me.return=Te,me):(me=C(me,Re.children||[]),me.return=Te,me)}function it(Te,me,Re,ut,Rt){return me===null||me.tag!==7?(me=Hu(Re,Te.mode,ut,Rt),me.return=Te,me):(me=C(me,Re),me.return=Te,me)}function ot(Te,me,Re){if(typeof me=="string"&&me!==""||typeof me=="number")return me=c0(""+me,Te.mode,Re),me.return=Te,me;if(typeof me=="object"&&me!==null){switch(me.$$typeof){case I:return Re=Mm(me.type,me.key,me.props,null,Te.mode,Re),Re.ref=wu(Te,null,me),Re.return=Te,Re;case k:return me=f0(me,Te.mode,Re),me.return=Te,me;case oe:var ut=me._init;return ot(Te,ut(me._payload),Re)}if(Ze(me)||j(me))return me=Hu(me,Te.mode,Re,null),me.return=Te,me;Tu(Te,me)}return null}function $e(Te,me,Re,ut){var Rt=me!==null?me.key:null;if(typeof Re=="string"&&Re!==""||typeof Re=="number")return Rt!==null?null:se(Te,me,""+Re,ut);if(typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case I:return Re.key===Rt?fe(Te,me,Re,ut):null;case k:return Re.key===Rt?Ie(Te,me,Re,ut):null;case oe:return Rt=Re._init,$e(Te,me,Rt(Re._payload),ut)}if(Ze(Re)||j(Re))return Rt!==null?null:it(Te,me,Re,ut,null);Tu(Te,Re)}return null}function St(Te,me,Re,ut,Rt){if(typeof ut=="string"&&ut!==""||typeof ut=="number")return Te=Te.get(Re)||null,se(me,Te,""+ut,Rt);if(typeof ut=="object"&&ut!==null){switch(ut.$$typeof){case I:return Te=Te.get(ut.key===null?Re:ut.key)||null,fe(me,Te,ut,Rt);case k:return Te=Te.get(ut.key===null?Re:ut.key)||null,Ie(me,Te,ut,Rt);case oe:var zt=ut._init;return St(Te,me,Re,zt(ut._payload),Rt)}if(Ze(ut)||j(ut))return Te=Te.get(Re)||null,it(me,Te,ut,Rt,null);Tu(me,ut)}return null}function Tt(Te,me,Re,ut){for(var Rt=null,zt=null,Ht=me,Xt=me=0,cr=null;Ht!==null&&Xt<Re.length;Xt++){Ht.index>Xt?(cr=Ht,Ht=null):cr=Ht.sibling;var En=$e(Te,Ht,Re[Xt],ut);if(En===null){Ht===null&&(Ht=cr);break}o&&Ht&&En.alternate===null&&u(Te,Ht),me=D(En,me,Xt),zt===null?Rt=En:zt.sibling=En,zt=En,Ht=cr}if(Xt===Re.length)return m(Te,Ht),On&&_a(Te,Xt),Rt;if(Ht===null){for(;Xt<Re.length;Xt++)Ht=ot(Te,Re[Xt],ut),Ht!==null&&(me=D(Ht,me,Xt),zt===null?Rt=Ht:zt.sibling=Ht,zt=Ht);return On&&_a(Te,Xt),Rt}for(Ht=_(Te,Ht);Xt<Re.length;Xt++)cr=St(Ht,Te,Xt,Re[Xt],ut),cr!==null&&(o&&cr.alternate!==null&&Ht.delete(cr.key===null?Xt:cr.key),me=D(cr,me,Xt),zt===null?Rt=cr:zt.sibling=cr,zt=cr);return o&&Ht.forEach(function(Gl){return u(Te,Gl)}),On&&_a(Te,Xt),Rt}function bt(Te,me,Re,ut){var Rt=j(Re);if(typeof Rt!="function")throw Error(t(150));if(Re=Rt.call(Re),Re==null)throw Error(t(151));for(var zt=Rt=null,Ht=me,Xt=me=0,cr=null,En=Re.next();Ht!==null&&!En.done;Xt++,En=Re.next()){Ht.index>Xt?(cr=Ht,Ht=null):cr=Ht.sibling;var Gl=$e(Te,Ht,En.value,ut);if(Gl===null){Ht===null&&(Ht=cr);break}o&&Ht&&Gl.alternate===null&&u(Te,Ht),me=D(Gl,me,Xt),zt===null?Rt=Gl:zt.sibling=Gl,zt=Gl,Ht=cr}if(En.done)return m(Te,Ht),On&&_a(Te,Xt),Rt;if(Ht===null){for(;!En.done;Xt++,En=Re.next())En=ot(Te,En.value,ut),En!==null&&(me=D(En,me,Xt),zt===null?Rt=En:zt.sibling=En,zt=En);return On&&_a(Te,Xt),Rt}for(Ht=_(Te,Ht);!En.done;Xt++,En=Re.next())En=St(Ht,Te,Xt,En.value,ut),En!==null&&(o&&En.alternate!==null&&Ht.delete(En.key===null?Xt:En.key),me=D(En,me,Xt),zt===null?Rt=En:zt.sibling=En,zt=En);return o&&Ht.forEach(function(Qb){return u(Te,Qb)}),On&&_a(Te,Xt),Rt}function Ei(Te,me,Re,ut){if(typeof Re=="object"&&Re!==null&&Re.type===F&&Re.key===null&&(Re=Re.props.children),typeof Re=="object"&&Re!==null){switch(Re.$$typeof){case I:e:{for(var Rt=Re.key,zt=me;zt!==null;){if(zt.key===Rt){if(Rt=Re.type,Rt===F){if(zt.tag===7){m(Te,zt.sibling),me=C(zt,Re.props.children),me.return=Te,Te=me;break e}}else if(zt.elementType===Rt||typeof Rt=="object"&&Rt!==null&&Rt.$$typeof===oe&&Zh(Rt)===zt.type){m(Te,zt.sibling),me=C(zt,Re.props),me.ref=wu(Te,zt,Re),me.return=Te,Te=me;break e}m(Te,zt);break}else u(Te,zt);zt=zt.sibling}Re.type===F?(me=Hu(Re.props.children,Te.mode,ut,Re.key),me.return=Te,Te=me):(ut=Mm(Re.type,Re.key,Re.props,null,Te.mode,ut),ut.ref=wu(Te,me,Re),ut.return=Te,Te=ut)}return G(Te);case k:e:{for(zt=Re.key;me!==null;){if(me.key===zt)if(me.tag===4&&me.stateNode.containerInfo===Re.containerInfo&&me.stateNode.implementation===Re.implementation){m(Te,me.sibling),me=C(me,Re.children||[]),me.return=Te,Te=me;break e}else{m(Te,me);break}else u(Te,me);me=me.sibling}me=f0(Re,Te.mode,ut),me.return=Te,Te=me}return G(Te);case oe:return zt=Re._init,Ei(Te,me,zt(Re._payload),ut)}if(Ze(Re))return Tt(Te,me,Re,ut);if(j(Re))return bt(Te,me,Re,ut);Tu(Te,Re)}return typeof Re=="string"&&Re!==""||typeof Re=="number"?(Re=""+Re,me!==null&&me.tag===6?(m(Te,me.sibling),me=C(me,Re),me.return=Te,Te=me):(m(Te,me),me=c0(Re,Te.mode,ut),me.return=Te,Te=me),G(Te)):m(Te,me)}return Ei}var Fo=Kh(!0),Eu=Kh(!1),ko=ti(null),Oo=null,wa=null,Dl=null;function Bo(){Dl=wa=Oo=null}function bu(o){var u=ko.current;Fn(ko),o._currentValue=u}function Au(o,u,m){for(;o!==null;){var _=o.alternate;if((o.childLanes&u)!==u?(o.childLanes|=u,_!==null&&(_.childLanes|=u)):_!==null&&(_.childLanes&u)!==u&&(_.childLanes|=u),o===m)break;o=o.return}}function ao(o,u){Oo=o,Dl=wa=null,o=o.dependencies,o!==null&&o.firstContext!==null&&(o.lanes&u&&(rn=!0),o.firstContext=null)}function Vr(o){var u=o._currentValue;if(Dl!==o)if(o={context:o,memoizedValue:u,next:null},wa===null){if(Oo===null)throw Error(t(308));wa=o,Oo.dependencies={lanes:0,firstContext:o}}else wa=wa.next=o;return u}var Ta=null;function Qh(o){Ta===null?Ta=[o]:Ta.push(o)}function Cu(o,u,m,_){var C=u.interleaved;return C===null?(m.next=m,Qh(u)):(m.next=C.next,C.next=m),u.interleaved=m,Ps(o,_)}function Ps(o,u){o.lanes|=u;var m=o.alternate;for(m!==null&&(m.lanes|=u),m=o,o=o.return;o!==null;)o.childLanes|=u,m=o.alternate,m!==null&&(m.childLanes|=u),m=o,o=o.return;return m.tag===3?m.stateNode:null}var Rn=!1;function en(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oi(o,u){o=o.updateQueue,u.updateQueue===o&&(u.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,effects:o.effects})}function Pn(o,u){return{eventTime:o,lane:u,tag:0,payload:null,callback:null,next:null}}function Wn(o,u,m){var _=o.updateQueue;if(_===null)return null;if(_=_.shared,Sn&2){var C=_.pending;return C===null?u.next=u:(u.next=C.next,C.next=u),_.pending=u,Ps(o,m)}return C=_.interleaved,C===null?(u.next=u,Qh(_)):(u.next=C.next,C.next=u),_.interleaved=u,Ps(o,m)}function or(o,u,m){if(u=u.updateQueue,u!==null&&(u=u.shared,(m&4194240)!==0)){var _=u.lanes;_&=o.pendingLanes,m|=_,u.lanes=m,ws(o,m)}}function zo(o,u){var m=o.updateQueue,_=o.alternate;if(_!==null&&(_=_.updateQueue,m===_)){var C=null,D=null;if(m=m.firstBaseUpdate,m!==null){do{var G={eventTime:m.eventTime,lane:m.lane,tag:m.tag,payload:m.payload,callback:m.callback,next:null};D===null?C=D=G:D=D.next=G,m=m.next}while(m!==null);D===null?C=D=u:D=D.next=u}else C=D=u;m={baseState:_.baseState,firstBaseUpdate:C,lastBaseUpdate:D,shared:_.shared,effects:_.effects},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=u:o.next=u,m.lastBaseUpdate=u}function ni(o,u,m,_){var C=o.updateQueue;Rn=!1;var D=C.firstBaseUpdate,G=C.lastBaseUpdate,se=C.shared.pending;if(se!==null){C.shared.pending=null;var fe=se,Ie=fe.next;fe.next=null,G===null?D=Ie:G.next=Ie,G=fe;var it=o.alternate;it!==null&&(it=it.updateQueue,se=it.lastBaseUpdate,se!==G&&(se===null?it.firstBaseUpdate=Ie:se.next=Ie,it.lastBaseUpdate=fe))}if(D!==null){var ot=C.baseState;G=0,it=Ie=fe=null,se=D;do{var $e=se.lane,St=se.eventTime;if((_&$e)===$e){it!==null&&(it=it.next={eventTime:St,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var Tt=o,bt=se;switch($e=u,St=m,bt.tag){case 1:if(Tt=bt.payload,typeof Tt=="function"){ot=Tt.call(St,ot,$e);break e}ot=Tt;break e;case 3:Tt.flags=Tt.flags&-65537|128;case 0:if(Tt=bt.payload,$e=typeof Tt=="function"?Tt.call(St,ot,$e):Tt,$e==null)break e;ot=W({},ot,$e);break e;case 2:Rn=!0}}se.callback!==null&&se.lane!==0&&(o.flags|=64,$e=C.effects,$e===null?C.effects=[se]:$e.push(se))}else St={eventTime:St,lane:$e,tag:se.tag,payload:se.payload,callback:se.callback,next:null},it===null?(Ie=it=St,fe=ot):it=it.next=St,G|=$e;if(se=se.next,se===null){if(se=C.shared.pending,se===null)break;$e=se,se=$e.next,$e.next=null,C.lastBaseUpdate=$e,C.shared.pending=null}}while(!0);if(it===null&&(fe=ot),C.baseState=fe,C.firstBaseUpdate=Ie,C.lastBaseUpdate=it,u=C.shared.interleaved,u!==null){C=u;do G|=C.lane,C=C.next;while(C!==u)}else D===null&&(C.shared.lanes=0);ku|=G,o.lanes=G,o.memoizedState=ot}}function Ll(o,u,m){if(o=u.effects,u.effects=null,o!==null)for(u=0;u<o.length;u++){var _=o[u],C=_.callback;if(C!==null){if(_.callback=null,_=m,typeof C!="function")throw Error(t(191,C));C.call(_)}}}var qs={},Wr=ti(qs),Ho=ti(qs),Ea=ti(qs);function pi(o){if(o===qs)throw Error(t(174));return o}function Ru(o,u){switch(In(Ea,u),In(Ho,o),In(Wr,qs),o=u.nodeType,o){case 9:case 11:u=(u=u.documentElement)?u.namespaceURI:be(null,"");break;default:o=o===8?u.parentNode:u,u=o.namespaceURI||null,o=o.tagName,u=be(u,o)}Fn(Wr),In(Wr,u)}function oo(){Fn(Wr),Fn(Ho),Fn(Ea)}function Go(o){pi(Ea.current);var u=pi(Wr.current),m=be(u,o.type);u!==m&&(In(Ho,o),In(Wr,m))}function Il(o){Ho.current===o&&(Fn(Wr),Fn(Ho))}var Bn=ti(0);function Ds(o){for(var u=o;u!==null;){if(u.tag===13){var m=u.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||m.data==="$!"))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if(u.flags&128)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}var Ul=[];function Zs(){for(var o=0;o<Ul.length;o++)Ul[o]._workInProgressVersionPrimary=null;Ul.length=0}var Vo=R.ReactCurrentDispatcher,Wo=R.ReactCurrentBatchConfig,ba=0,kn=null,ii=null,vn=null,Ls=!1,lr=!1,lo=0,Dr=0;function Wi(){throw Error(t(321))}function Pu(o,u){if(u===null)return!1;for(var m=0;m<u.length&&m<o.length;m++)if(!zr(o[m],u[m]))return!1;return!0}function Du(o,u,m,_,C,D){if(ba=D,kn=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,Vo.current=o===null||o.memoizedState===null?am:om,o=m(_,C),lr){D=0;do{if(lr=!1,lo=0,25<=D)throw Error(t(301));D+=1,vn=ii=null,u.updateQueue=null,Vo.current=lm,o=m(_,C)}while(lr)}if(Vo.current=hf,u=ii!==null&&ii.next!==null,ba=0,vn=ii=kn=null,Ls=!1,u)throw Error(t(300));return o}function Jh(){var o=lo!==0;return lo=0,o}function ji(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?kn.memoizedState=vn=o:vn=vn.next=o,vn}function jr(){if(ii===null){var o=kn.alternate;o=o!==null?o.memoizedState:null}else o=ii.next;var u=vn===null?kn.memoizedState:vn.next;if(u!==null)vn=u,ii=o;else{if(o===null)throw Error(t(310));ii=o,o={memoizedState:ii.memoizedState,baseState:ii.baseState,baseQueue:ii.baseQueue,queue:ii.queue,next:null},vn===null?kn.memoizedState=vn=o:vn=vn.next=o}return vn}function Nl(o,u){return typeof u=="function"?u(o):u}function Lu(o){var u=jr(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var _=ii,C=_.baseQueue,D=m.pending;if(D!==null){if(C!==null){var G=C.next;C.next=D.next,D.next=G}_.baseQueue=C=D,m.pending=null}if(C!==null){D=C.next,_=_.baseState;var se=G=null,fe=null,Ie=D;do{var it=Ie.lane;if((ba&it)===it)fe!==null&&(fe=fe.next={lane:0,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null}),_=Ie.hasEagerState?Ie.eagerState:o(_,Ie.action);else{var ot={lane:it,action:Ie.action,hasEagerState:Ie.hasEagerState,eagerState:Ie.eagerState,next:null};fe===null?(se=fe=ot,G=_):fe=fe.next=ot,kn.lanes|=it,ku|=it}Ie=Ie.next}while(Ie!==null&&Ie!==D);fe===null?G=_:fe.next=se,zr(_,u.memoizedState)||(rn=!0),u.memoizedState=_,u.baseState=G,u.baseQueue=fe,m.lastRenderedState=_}if(o=m.interleaved,o!==null){C=o;do D=C.lane,kn.lanes|=D,ku|=D,C=C.next;while(C!==o)}else C===null&&(m.lanes=0);return[u.memoizedState,m.dispatch]}function Aa(o){var u=jr(),m=u.queue;if(m===null)throw Error(t(311));m.lastRenderedReducer=o;var _=m.dispatch,C=m.pending,D=u.memoizedState;if(C!==null){m.pending=null;var G=C=C.next;do D=o(D,G.action),G=G.next;while(G!==C);zr(D,u.memoizedState)||(rn=!0),u.memoizedState=D,u.baseQueue===null&&(u.baseState=D),m.lastRenderedState=D}return[D,_]}function $h(){}function ed(o,u){var m=kn,_=jr(),C=u(),D=!zr(_.memoizedState,C);if(D&&(_.memoizedState=C,rn=!0),_=_.queue,id(em.bind(null,m,_,o),[o]),_.getSnapshot!==u||D||vn!==null&&vn.memoizedState.tag&1){if(m.flags|=2048,Is(9,Iu.bind(null,m,_,C,u),void 0,null),ur===null)throw Error(t(349));ba&30||af(m,u,C)}return C}function af(o,u,m){o.flags|=16384,o={getSnapshot:u,value:m},u=kn.updateQueue,u===null?(u={lastEffect:null,stores:null},kn.updateQueue=u,u.stores=[o]):(m=u.stores,m===null?u.stores=[o]:m.push(o))}function Iu(o,u,m,_){u.value=m,u.getSnapshot=_,tm(u)&&td(o)}function em(o,u,m){return m(function(){tm(u)&&td(o)})}function tm(o){var u=o.getSnapshot;o=o.value;try{var m=u();return!zr(o,m)}catch{return!0}}function td(o){var u=Ps(o,1);u!==null&&La(u,o,1,-1)}function nd(o){var u=ji();return typeof o=="function"&&(o=o()),u.memoizedState=u.baseState=o,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Nl,lastRenderedState:o},u.queue=o,o=o.dispatch=jo.bind(null,kn,o),[u.memoizedState,o]}function Is(o,u,m,_){return o={tag:o,create:u,destroy:m,deps:_,next:null},u=kn.updateQueue,u===null?(u={lastEffect:null,stores:null},kn.updateQueue=u,u.lastEffect=o.next=o):(m=u.lastEffect,m===null?u.lastEffect=o.next=o:(_=m.next,m.next=o,o.next=_,u.lastEffect=o)),o}function nm(){return jr().memoizedState}function Ks(o,u,m,_){var C=ji();kn.flags|=o,C.memoizedState=Is(1|u,m,void 0,_===void 0?null:_)}function Uu(o,u,m,_){var C=jr();_=_===void 0?null:_;var D=void 0;if(ii!==null){var G=ii.memoizedState;if(D=G.destroy,_!==null&&Pu(_,G.deps)){C.memoizedState=Is(u,m,D,_);return}}kn.flags|=o,C.memoizedState=Is(1|u,m,D,_)}function yr(o,u){return Ks(8390656,8,o,u)}function id(o,u){return Uu(2048,8,o,u)}function rd(o,u){return Uu(4,2,o,u)}function im(o,u){return Uu(4,4,o,u)}function rm(o,u){if(typeof u=="function")return o=o(),u(o),function(){u(null)};if(u!=null)return o=o(),u.current=o,function(){u.current=null}}function sd(o,u,m){return m=m!=null?m.concat([o]):null,Uu(4,4,rm.bind(null,u,o),m)}function of(){}function sm(o,u){var m=jr();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&Pu(u,_[1])?_[0]:(m.memoizedState=[o,u],o)}function Xr(o,u){var m=jr();u=u===void 0?null:u;var _=m.memoizedState;return _!==null&&u!==null&&Pu(u,_[1])?_[0]:(o=o(),m.memoizedState=[o,u],o)}function lf(o,u,m){return ba&21?(zr(m,u)||(m=br(),kn.lanes|=m,ku|=m,o.baseState=!0),u):(o.baseState&&(o.baseState=!1,rn=!0),o.memoizedState=m)}function Xv(o,u){var m=un;un=m!==0&&4>m?m:4,o(!0);var _=Wo.transition;Wo.transition={};try{o(!1),u()}finally{un=m,Wo.transition=_}}function Ca(){return jr().memoizedState}function uf(o,u,m){var _=Bl(o);if(m={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null},Nu(o))cf(u,m);else if(m=Cu(o,u,m,_),m!==null){var C=qr();La(m,o,_,C),ff(m,u,_)}}function jo(o,u,m){var _=Bl(o),C={lane:_,action:m,hasEagerState:!1,eagerState:null,next:null};if(Nu(o))cf(u,C);else{var D=o.alternate;if(o.lanes===0&&(D===null||D.lanes===0)&&(D=u.lastRenderedReducer,D!==null))try{var G=u.lastRenderedState,se=D(G,m);if(C.hasEagerState=!0,C.eagerState=se,zr(se,G)){var fe=u.interleaved;fe===null?(C.next=C,Qh(u)):(C.next=fe.next,fe.next=C),u.interleaved=C;return}}catch{}finally{}m=Cu(o,u,C,_),m!==null&&(C=qr(),La(m,o,_,C),ff(m,u,_))}}function Nu(o){var u=o.alternate;return o===kn||u!==null&&u===kn}function cf(o,u){lr=Ls=!0;var m=o.pending;m===null?u.next=u:(u.next=m.next,m.next=u),o.pending=u}function ff(o,u,m){if(m&4194240){var _=u.lanes;_&=o.pendingLanes,m|=_,u.lanes=m,ws(o,m)}}var hf={readContext:Vr,useCallback:Wi,useContext:Wi,useEffect:Wi,useImperativeHandle:Wi,useInsertionEffect:Wi,useLayoutEffect:Wi,useMemo:Wi,useReducer:Wi,useRef:Wi,useState:Wi,useDebugValue:Wi,useDeferredValue:Wi,useTransition:Wi,useMutableSource:Wi,useSyncExternalStore:Wi,useId:Wi,unstable_isNewReconciler:!1},am={readContext:Vr,useCallback:function(o,u){return ji().memoizedState=[o,u===void 0?null:u],o},useContext:Vr,useEffect:yr,useImperativeHandle:function(o,u,m){return m=m!=null?m.concat([o]):null,Ks(4194308,4,rm.bind(null,u,o),m)},useLayoutEffect:function(o,u){return Ks(4194308,4,o,u)},useInsertionEffect:function(o,u){return Ks(4,2,o,u)},useMemo:function(o,u){var m=ji();return u=u===void 0?null:u,o=o(),m.memoizedState=[o,u],o},useReducer:function(o,u,m){var _=ji();return u=m!==void 0?m(u):u,_.memoizedState=_.baseState=u,o={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:u},_.queue=o,o=o.dispatch=uf.bind(null,kn,o),[_.memoizedState,o]},useRef:function(o){var u=ji();return o={current:o},u.memoizedState=o},useState:nd,useDebugValue:of,useDeferredValue:function(o){return ji().memoizedState=o},useTransition:function(){var o=nd(!1),u=o[0];return o=Xv.bind(null,o[1]),ji().memoizedState=o,[u,o]},useMutableSource:function(){},useSyncExternalStore:function(o,u,m){var _=kn,C=ji();if(On){if(m===void 0)throw Error(t(407));m=m()}else{if(m=u(),ur===null)throw Error(t(349));ba&30||af(_,u,m)}C.memoizedState=m;var D={value:m,getSnapshot:u};return C.queue=D,yr(em.bind(null,_,D,o),[o]),_.flags|=2048,Is(9,Iu.bind(null,_,D,m,u),void 0,null),m},useId:function(){var o=ji(),u=ur.identifierPrefix;if(On){var m=us,_=ft;m=(_&~(1<<32-yn(_)-1)).toString(32)+m,u=":"+u+"R"+m,m=lo++,0<m&&(u+="H"+m.toString(32)),u+=":"}else m=Dr++,u=":"+u+"r"+m.toString(32)+":";return o.memoizedState=u},unstable_isNewReconciler:!1},om={readContext:Vr,useCallback:sm,useContext:Vr,useEffect:id,useImperativeHandle:sd,useInsertionEffect:rd,useLayoutEffect:im,useMemo:Xr,useReducer:Lu,useRef:nm,useState:function(){return Lu(Nl)},useDebugValue:of,useDeferredValue:function(o){var u=jr();return lf(u,ii.memoizedState,o)},useTransition:function(){var o=Lu(Nl)[0],u=jr().memoizedState;return[o,u]},useMutableSource:$h,useSyncExternalStore:ed,useId:Ca,unstable_isNewReconciler:!1},lm={readContext:Vr,useCallback:sm,useContext:Vr,useEffect:id,useImperativeHandle:sd,useInsertionEffect:rd,useLayoutEffect:im,useMemo:Xr,useReducer:Aa,useRef:nm,useState:function(){return Aa(Nl)},useDebugValue:of,useDeferredValue:function(o){var u=jr();return ii===null?u.memoizedState=o:lf(u,ii.memoizedState,o)},useTransition:function(){var o=Aa(Nl)[0],u=jr().memoizedState;return[o,u]},useMutableSource:$h,useSyncExternalStore:ed,useId:Ca,unstable_isNewReconciler:!1};function fs(o,u){if(o&&o.defaultProps){u=W({},u),o=o.defaultProps;for(var m in o)u[m]===void 0&&(u[m]=o[m]);return u}return u}function Fu(o,u,m,_){u=o.memoizedState,m=m(_,u),m=m==null?u:W({},u,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var df={isMounted:function(o){return(o=o._reactInternals)?ee(o)===o:!1},enqueueSetState:function(o,u,m){o=o._reactInternals;var _=qr(),C=Bl(o),D=Pn(_,C);D.payload=u,m!=null&&(D.callback=m),u=Wn(o,D,C),u!==null&&(La(u,o,C,_),or(u,o,C))},enqueueReplaceState:function(o,u,m){o=o._reactInternals;var _=qr(),C=Bl(o),D=Pn(_,C);D.tag=1,D.payload=u,m!=null&&(D.callback=m),u=Wn(o,D,C),u!==null&&(La(u,o,C,_),or(u,o,C))},enqueueForceUpdate:function(o,u){o=o._reactInternals;var m=qr(),_=Bl(o),C=Pn(m,_);C.tag=2,u!=null&&(C.callback=u),u=Wn(o,C,_),u!==null&&(La(u,o,_,m),or(u,o,_))}};function um(o,u,m,_,C,D,G){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(_,D,G):u.prototype&&u.prototype.isPureReactComponent?!bo(m,_)||!bo(C,D):!0}function h(o,u,m){var _=!1,C=xa,D=u.contextType;return typeof D=="object"&&D!==null?D=Vr(D):(C=ar(u)?Sa:Gi.current,_=u.contextTypes,D=(_=_!=null)?Lo(o,C):xa),u=new u(m,D),o.memoizedState=u.state!==null&&u.state!==void 0?u.state:null,u.updater=df,o.stateNode=u,u._reactInternals=o,_&&(o=o.stateNode,o.__reactInternalMemoizedUnmaskedChildContext=C,o.__reactInternalMemoizedMaskedChildContext=D),u}function d(o,u,m,_){o=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(m,_),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(m,_),u.state!==o&&df.enqueueReplaceState(u,u.state,null)}function x(o,u,m,_){var C=o.stateNode;C.props=m,C.state=o.memoizedState,C.refs={},en(o);var D=u.contextType;typeof D=="object"&&D!==null?C.context=Vr(D):(D=ar(u)?Sa:Gi.current,C.context=Lo(o,D)),C.state=o.memoizedState,D=u.getDerivedStateFromProps,typeof D=="function"&&(Fu(o,u,D,m),C.state=o.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(u=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),u!==C.state&&df.enqueueReplaceState(C,C.state,null),ni(o,m,C,_),C.state=o.memoizedState),typeof C.componentDidMount=="function"&&(o.flags|=4194308)}function E(o,u){try{var m="",_=u;do m+=re(_),_=_.return;while(_);var C=m}catch(D){C=`
Error generating stack: `+D.message+`
`+D.stack}return{value:o,source:u,stack:C,digest:null}}function P(o,u,m){return{value:o,source:null,stack:m??null,digest:u??null}}function N(o,u){try{console.error(u.value)}catch(m){setTimeout(function(){throw m})}}var ne=typeof WeakMap=="function"?WeakMap:Map;function ge(o,u,m){m=Pn(-1,m),m.tag=3,m.payload={element:null};var _=u.value;return m.callback=function(){gm||(gm=!0,n0=_),N(o,u)},m}function He(o,u,m){m=Pn(-1,m),m.tag=3;var _=o.type.getDerivedStateFromError;if(typeof _=="function"){var C=u.value;m.payload=function(){return _(C)},m.callback=function(){N(o,u)}}var D=o.stateNode;return D!==null&&typeof D.componentDidCatch=="function"&&(m.callback=function(){N(o,u),typeof _!="function"&&(kl===null?kl=new Set([this]):kl.add(this));var G=u.stack;this.componentDidCatch(u.value,{componentStack:G!==null?G:""})}),m}function lt(o,u,m){var _=o.pingCache;if(_===null){_=o.pingCache=new ne;var C=new Set;_.set(u,C)}else C=_.get(u),C===void 0&&(C=new Set,_.set(u,C));C.has(m)||(C.add(m),o=zb.bind(null,o,u,m),u.then(o,o))}function Mt(o){do{var u;if((u=o.tag===13)&&(u=o.memoizedState,u=u!==null?u.dehydrated!==null:!0),u)return o;o=o.return}while(o!==null);return null}function Yt(o,u,m,_,C){return o.mode&1?(o.flags|=65536,o.lanes=C,o):(o===u?o.flags|=65536:(o.flags|=128,m.flags|=131072,m.flags&=-52805,m.tag===1&&(m.alternate===null?m.tag=17:(u=Pn(-1,1),u.tag=2,Wn(m,u,1))),m.lanes|=1),o)}var kt=R.ReactCurrentOwner,rn=!1;function gt(o,u,m,_){u.child=o===null?Eu(u,null,m,_):Fo(u,o.child,m,_)}function Xi(o,u,m,_,C){m=m.render;var D=u.ref;return ao(u,C),_=Du(o,u,m,_,D,C),m=Jh(),o!==null&&!rn?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~C,Xo(o,u,C)):(On&&m&&jh(u),u.flags|=1,gt(o,u,_,C),u.child)}function Yr(o,u,m,_,C){if(o===null){var D=m.type;return typeof D=="function"&&!u0(D)&&D.defaultProps===void 0&&m.compare===null&&m.defaultProps===void 0?(u.tag=15,u.type=D,De(o,u,D,_,C)):(o=Mm(m.type,null,_,u,u.mode,C),o.ref=u.ref,o.return=u,u.child=o)}if(D=o.child,!(o.lanes&C)){var G=D.memoizedProps;if(m=m.compare,m=m!==null?m:bo,m(G,_)&&o.ref===u.ref)return Xo(o,u,C)}return u.flags|=1,o=Hl(D,_),o.ref=u.ref,o.return=u,u.child=o}function De(o,u,m,_,C){if(o!==null){var D=o.memoizedProps;if(bo(D,_)&&o.ref===u.ref)if(rn=!1,u.pendingProps=_=D,(o.lanes&C)!==0)o.flags&131072&&(rn=!0);else return u.lanes=o.lanes,Xo(o,u,C)}return pt(o,u,m,_,C)}function ye(o,u,m){var _=u.pendingProps,C=_.children,D=o!==null?o.memoizedState:null;if(_.mode==="hidden")if(!(u.mode&1))u.memoizedState={baseLanes:0,cachePool:null,transitions:null},In(mf,Us),Us|=m;else{if(!(m&1073741824))return o=D!==null?D.baseLanes|m:m,u.lanes=u.childLanes=1073741824,u.memoizedState={baseLanes:o,cachePool:null,transitions:null},u.updateQueue=null,In(mf,Us),Us|=o,null;u.memoizedState={baseLanes:0,cachePool:null,transitions:null},_=D!==null?D.baseLanes:m,In(mf,Us),Us|=_}else D!==null?(_=D.baseLanes|m,u.memoizedState=null):_=m,In(mf,Us),Us|=_;return gt(o,u,C,m),u.child}function Oe(o,u){var m=u.ref;(o===null&&m!==null||o!==null&&o.ref!==m)&&(u.flags|=512,u.flags|=2097152)}function pt(o,u,m,_,C){var D=ar(m)?Sa:Gi.current;return D=Lo(u,D),ao(u,C),m=Du(o,u,m,_,D,C),_=Jh(),o!==null&&!rn?(u.updateQueue=o.updateQueue,u.flags&=-2053,o.lanes&=~C,Xo(o,u,C)):(On&&_&&jh(u),u.flags|=1,gt(o,u,m,C),u.child)}function At(o,u,m,_,C){if(ar(m)){var D=!0;Io(u)}else D=!1;if(ao(u,C),u.stateNode===null)fm(o,u),h(u,m,_),x(u,m,_,C),_=!0;else if(o===null){var G=u.stateNode,se=u.memoizedProps;G.props=se;var fe=G.context,Ie=m.contextType;typeof Ie=="object"&&Ie!==null?Ie=Vr(Ie):(Ie=ar(m)?Sa:Gi.current,Ie=Lo(u,Ie));var it=m.getDerivedStateFromProps,ot=typeof it=="function"||typeof G.getSnapshotBeforeUpdate=="function";ot||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(se!==_||fe!==Ie)&&d(u,G,_,Ie),Rn=!1;var $e=u.memoizedState;G.state=$e,ni(u,_,G,C),fe=u.memoizedState,se!==_||$e!==fe||mr.current||Rn?(typeof it=="function"&&(Fu(u,m,it,_),fe=u.memoizedState),(se=Rn||um(u,m,se,_,$e,fe,Ie))?(ot||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount()),typeof G.componentDidMount=="function"&&(u.flags|=4194308)):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=_,u.memoizedState=fe),G.props=_,G.state=fe,G.context=Ie,_=se):(typeof G.componentDidMount=="function"&&(u.flags|=4194308),_=!1)}else{G=u.stateNode,oi(o,u),se=u.memoizedProps,Ie=u.type===u.elementType?se:fs(u.type,se),G.props=Ie,ot=u.pendingProps,$e=G.context,fe=m.contextType,typeof fe=="object"&&fe!==null?fe=Vr(fe):(fe=ar(m)?Sa:Gi.current,fe=Lo(u,fe));var St=m.getDerivedStateFromProps;(it=typeof St=="function"||typeof G.getSnapshotBeforeUpdate=="function")||typeof G.UNSAFE_componentWillReceiveProps!="function"&&typeof G.componentWillReceiveProps!="function"||(se!==ot||$e!==fe)&&d(u,G,_,fe),Rn=!1,$e=u.memoizedState,G.state=$e,ni(u,_,G,C);var Tt=u.memoizedState;se!==ot||$e!==Tt||mr.current||Rn?(typeof St=="function"&&(Fu(u,m,St,_),Tt=u.memoizedState),(Ie=Rn||um(u,m,Ie,_,$e,Tt,fe)||!1)?(it||typeof G.UNSAFE_componentWillUpdate!="function"&&typeof G.componentWillUpdate!="function"||(typeof G.componentWillUpdate=="function"&&G.componentWillUpdate(_,Tt,fe),typeof G.UNSAFE_componentWillUpdate=="function"&&G.UNSAFE_componentWillUpdate(_,Tt,fe)),typeof G.componentDidUpdate=="function"&&(u.flags|=4),typeof G.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof G.componentDidUpdate!="function"||se===o.memoizedProps&&$e===o.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||se===o.memoizedProps&&$e===o.memoizedState||(u.flags|=1024),u.memoizedProps=_,u.memoizedState=Tt),G.props=_,G.state=Tt,G.context=fe,_=Ie):(typeof G.componentDidUpdate!="function"||se===o.memoizedProps&&$e===o.memoizedState||(u.flags|=4),typeof G.getSnapshotBeforeUpdate!="function"||se===o.memoizedProps&&$e===o.memoizedState||(u.flags|=1024),_=!1)}return Jt(o,u,m,_,D,C)}function Jt(o,u,m,_,C,D){Oe(o,u);var G=(u.flags&128)!==0;if(!_&&!G)return C&&Vh(u,m,!1),Xo(o,u,D);_=u.stateNode,kt.current=u;var se=G&&typeof m.getDerivedStateFromError!="function"?null:_.render();return u.flags|=1,o!==null&&G?(u.child=Fo(u,o.child,null,D),u.child=Fo(u,null,se,D)):gt(o,u,se,D),u.memoizedState=_.state,C&&Vh(u,m,!0),u.child}function qt(o){var u=o.stateNode;u.pendingContext?Gh(o,u.pendingContext,u.pendingContext!==u.context):u.context&&Gh(o,u.context,!1),Ru(o,u.containerInfo)}function mn(o,u,m,_,C){return so(),Pl(C),u.flags|=256,gt(o,u,m,_),u.child}var mi={dehydrated:null,treeContext:null,retryLane:0};function dn(o){return{baseLanes:o,cachePool:null,transitions:null}}function Ra(o,u,m){var _=u.pendingProps,C=Bn.current,D=!1,G=(u.flags&128)!==0,se;if((se=G)||(se=o!==null&&o.memoizedState===null?!1:(C&2)!==0),se?(D=!0,u.flags&=-129):(o===null||o.memoizedState!==null)&&(C|=1),In(Bn,C&1),o===null)return rf(u),o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null)?(u.mode&1?o.data==="$!"?u.lanes=8:u.lanes=1073741824:u.lanes=1,null):(G=_.children,o=_.fallback,D?(_=u.mode,D=u.child,G={mode:"hidden",children:G},!(_&1)&&D!==null?(D.childLanes=0,D.pendingProps=G):D=wm(G,_,0,null),o=Hu(o,_,m,null),D.return=u,o.return=u,D.sibling=o,u.child=D,u.child.memoizedState=dn(m),u.memoizedState=mi,o):ad(u,G));if(C=o.memoizedState,C!==null&&(se=C.dehydrated,se!==null))return Cb(o,u,G,_,se,C,m);if(D){D=_.fallback,G=u.mode,C=o.child,se=C.sibling;var fe={mode:"hidden",children:_.children};return!(G&1)&&u.child!==C?(_=u.child,_.childLanes=0,_.pendingProps=fe,u.deletions=null):(_=Hl(C,fe),_.subtreeFlags=C.subtreeFlags&14680064),se!==null?D=Hl(se,D):(D=Hu(D,G,m,null),D.flags|=2),D.return=u,_.return=u,_.sibling=D,u.child=_,_=D,D=u.child,G=o.child.memoizedState,G=G===null?dn(m):{baseLanes:G.baseLanes|m,cachePool:null,transitions:G.transitions},D.memoizedState=G,D.childLanes=o.childLanes&~m,u.memoizedState=mi,_}return D=o.child,o=D.sibling,_=Hl(D,{mode:"visible",children:_.children}),!(u.mode&1)&&(_.lanes=m),_.return=u,_.sibling=null,o!==null&&(m=u.deletions,m===null?(u.deletions=[o],u.flags|=16):m.push(o)),u.child=_,u.memoizedState=null,_}function ad(o,u){return u=wm({mode:"visible",children:u},o.mode,0,null),u.return=o,o.child=u}function cm(o,u,m,_){return _!==null&&Pl(_),Fo(u,o.child,null,m),o=ad(u,u.pendingProps.children),o.flags|=2,u.memoizedState=null,o}function Cb(o,u,m,_,C,D,G){if(m)return u.flags&256?(u.flags&=-257,_=P(Error(t(422))),cm(o,u,G,_)):u.memoizedState!==null?(u.child=o.child,u.flags|=128,null):(D=_.fallback,C=u.mode,_=wm({mode:"visible",children:_.children},C,0,null),D=Hu(D,C,G,null),D.flags|=2,_.return=u,D.return=u,_.sibling=D,u.child=_,u.mode&1&&Fo(u,o.child,null,G),u.child.memoizedState=dn(G),u.memoizedState=mi,D);if(!(u.mode&1))return cm(o,u,G,null);if(C.data==="$!"){if(_=C.nextSibling&&C.nextSibling.dataset,_)var se=_.dgst;return _=se,D=Error(t(419)),_=P(D,_,void 0),cm(o,u,G,_)}if(se=(G&o.childLanes)!==0,rn||se){if(_=ur,_!==null){switch(G&-G){case 4:C=2;break;case 16:C=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:C=32;break;case 536870912:C=268435456;break;default:C=0}C=C&(_.suspendedLanes|G)?0:C,C!==0&&C!==D.retryLane&&(D.retryLane=C,Ps(o,C),La(_,o,C,-1))}return l0(),_=P(Error(t(421))),cm(o,u,G,_)}return C.data==="$?"?(u.flags|=128,u.child=o.child,u=Hb.bind(null,o),C._reactRetry=u,null):(o=D.treeContext,vr=va(C.nextSibling),Vi=u,On=!0,cs=null,o!==null&&(gr[ki++]=ft,gr[ki++]=us,gr[ki++]=No,ft=o.id,us=o.overflow,No=u),u=ad(u,_.children),u.flags|=4096,u)}function X1(o,u,m){o.lanes|=u;var _=o.alternate;_!==null&&(_.lanes|=u),Au(o.return,u,m)}function Yv(o,u,m,_,C){var D=o.memoizedState;D===null?o.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:_,tail:m,tailMode:C}:(D.isBackwards=u,D.rendering=null,D.renderingStartTime=0,D.last=_,D.tail=m,D.tailMode=C)}function Y1(o,u,m){var _=u.pendingProps,C=_.revealOrder,D=_.tail;if(gt(o,u,_.children,m),_=Bn.current,_&2)_=_&1|2,u.flags|=128;else{if(o!==null&&o.flags&128)e:for(o=u.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&X1(o,m,u);else if(o.tag===19)X1(o,m,u);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===u)break e;for(;o.sibling===null;){if(o.return===null||o.return===u)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}_&=1}if(In(Bn,_),!(u.mode&1))u.memoizedState=null;else switch(C){case"forwards":for(m=u.child,C=null;m!==null;)o=m.alternate,o!==null&&Ds(o)===null&&(C=m),m=m.sibling;m=C,m===null?(C=u.child,u.child=null):(C=m.sibling,m.sibling=null),Yv(u,!1,C,m,D);break;case"backwards":for(m=null,C=u.child,u.child=null;C!==null;){if(o=C.alternate,o!==null&&Ds(o)===null){u.child=C;break}o=C.sibling,C.sibling=m,m=C,C=o}Yv(u,!0,m,null,D);break;case"together":Yv(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function fm(o,u){!(u.mode&1)&&o!==null&&(o.alternate=null,u.alternate=null,u.flags|=2)}function Xo(o,u,m){if(o!==null&&(u.dependencies=o.dependencies),ku|=u.lanes,!(m&u.childLanes))return null;if(o!==null&&u.child!==o.child)throw Error(t(153));if(u.child!==null){for(o=u.child,m=Hl(o,o.pendingProps),u.child=m,m.return=u;o.sibling!==null;)o=o.sibling,m=m.sibling=Hl(o,o.pendingProps),m.return=u;m.sibling=null}return u.child}function Rb(o,u,m){switch(u.tag){case 3:qt(u),so();break;case 5:Go(u);break;case 1:ar(u.type)&&Io(u);break;case 4:Ru(u,u.stateNode.containerInfo);break;case 10:var _=u.type._context,C=u.memoizedProps.value;In(ko,_._currentValue),_._currentValue=C;break;case 13:if(_=u.memoizedState,_!==null)return _.dehydrated!==null?(In(Bn,Bn.current&1),u.flags|=128,null):m&u.child.childLanes?Ra(o,u,m):(In(Bn,Bn.current&1),o=Xo(o,u,m),o!==null?o.sibling:null);In(Bn,Bn.current&1);break;case 19:if(_=(m&u.childLanes)!==0,o.flags&128){if(_)return Y1(o,u,m);u.flags|=128}if(C=u.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),In(Bn,Bn.current),_)break;return null;case 22:case 23:return u.lanes=0,ye(o,u,m)}return Xo(o,u,m)}var q1,qv,Z1,K1;q1=function(o,u){for(var m=u.child;m!==null;){if(m.tag===5||m.tag===6)o.appendChild(m.stateNode);else if(m.tag!==4&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===u)break;for(;m.sibling===null;){if(m.return===null||m.return===u)return;m=m.return}m.sibling.return=m.return,m=m.sibling}},qv=function(){},Z1=function(o,u,m,_){var C=o.memoizedProps;if(C!==_){o=u.stateNode,pi(Wr.current);var D=null;switch(m){case"input":C=we(o,C),_=we(o,_),D=[];break;case"select":C=W({},C,{value:void 0}),_=W({},_,{value:void 0}),D=[];break;case"textarea":C=ht(o,C),_=ht(o,_),D=[];break;default:typeof C.onClick!="function"&&typeof _.onClick=="function"&&(o.onclick=yu)}st(m,_);var G;m=null;for(Ie in C)if(!_.hasOwnProperty(Ie)&&C.hasOwnProperty(Ie)&&C[Ie]!=null)if(Ie==="style"){var se=C[Ie];for(G in se)se.hasOwnProperty(G)&&(m||(m={}),m[G]="")}else Ie!=="dangerouslySetInnerHTML"&&Ie!=="children"&&Ie!=="suppressContentEditableWarning"&&Ie!=="suppressHydrationWarning"&&Ie!=="autoFocus"&&(r.hasOwnProperty(Ie)?D||(D=[]):(D=D||[]).push(Ie,null));for(Ie in _){var fe=_[Ie];if(se=C!=null?C[Ie]:void 0,_.hasOwnProperty(Ie)&&fe!==se&&(fe!=null||se!=null))if(Ie==="style")if(se){for(G in se)!se.hasOwnProperty(G)||fe&&fe.hasOwnProperty(G)||(m||(m={}),m[G]="");for(G in fe)fe.hasOwnProperty(G)&&se[G]!==fe[G]&&(m||(m={}),m[G]=fe[G])}else m||(D||(D=[]),D.push(Ie,m)),m=fe;else Ie==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,se=se?se.__html:void 0,fe!=null&&se!==fe&&(D=D||[]).push(Ie,fe)):Ie==="children"?typeof fe!="string"&&typeof fe!="number"||(D=D||[]).push(Ie,""+fe):Ie!=="suppressContentEditableWarning"&&Ie!=="suppressHydrationWarning"&&(r.hasOwnProperty(Ie)?(fe!=null&&Ie==="onScroll"&&Nn("scroll",o),D||se===fe||(D=[])):(D=D||[]).push(Ie,fe))}m&&(D=D||[]).push("style",m);var Ie=D;(u.updateQueue=Ie)&&(u.flags|=4)}},K1=function(o,u,m,_){m!==_&&(u.flags|=4)};function od(o,u){if(!On)switch(o.tailMode){case"hidden":u=o.tail;for(var m=null;u!==null;)u.alternate!==null&&(m=u),u=u.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var _=null;m!==null;)m.alternate!==null&&(_=m),m=m.sibling;_===null?u||o.tail===null?o.tail=null:o.tail.sibling=null:_.sibling=null}}function Lr(o){var u=o.alternate!==null&&o.alternate.child===o.child,m=0,_=0;if(u)for(var C=o.child;C!==null;)m|=C.lanes|C.childLanes,_|=C.subtreeFlags&14680064,_|=C.flags&14680064,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)m|=C.lanes|C.childLanes,_|=C.subtreeFlags,_|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=_,o.childLanes=m,u}function Pb(o,u,m){var _=u.pendingProps;switch(Ma(u),u.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Lr(u),null;case 1:return ar(u.type)&&xu(),Lr(u),null;case 3:return _=u.stateNode,oo(),Fn(mr),Fn(Gi),Zs(),_.pendingContext&&(_.context=_.pendingContext,_.pendingContext=null),(o===null||o.child===null)&&(Rl(u)?u.flags|=4:o===null||o.memoizedState.isDehydrated&&!(u.flags&256)||(u.flags|=1024,cs!==null&&(s0(cs),cs=null))),qv(o,u),Lr(u),null;case 5:Il(u);var C=pi(Ea.current);if(m=u.type,o!==null&&u.stateNode!=null)Z1(o,u,m,_,C),o.ref!==u.ref&&(u.flags|=512,u.flags|=2097152);else{if(!_){if(u.stateNode===null)throw Error(t(166));return Lr(u),null}if(o=pi(Wr.current),Rl(u)){_=u.stateNode,m=u.type;var D=u.memoizedProps;switch(_[Ti]=u,_[Cl]=D,o=(u.mode&1)!==0,m){case"dialog":Nn("cancel",_),Nn("close",_);break;case"iframe":case"object":case"embed":Nn("load",_);break;case"video":case"audio":for(C=0;C<io.length;C++)Nn(io[C],_);break;case"source":Nn("error",_);break;case"img":case"image":case"link":Nn("error",_),Nn("load",_);break;case"details":Nn("toggle",_);break;case"input":ke(_,D),Nn("invalid",_);break;case"select":_._wrapperState={wasMultiple:!!D.multiple},Nn("invalid",_);break;case"textarea":X(_,D),Nn("invalid",_)}st(m,D),C=null;for(var G in D)if(D.hasOwnProperty(G)){var se=D[G];G==="children"?typeof se=="string"?_.textContent!==se&&(D.suppressHydrationWarning!==!0&&vu(_.textContent,se,o),C=["children",se]):typeof se=="number"&&_.textContent!==""+se&&(D.suppressHydrationWarning!==!0&&vu(_.textContent,se,o),C=["children",""+se]):r.hasOwnProperty(G)&&se!=null&&G==="onScroll"&&Nn("scroll",_)}switch(m){case"input":Ue(_),Le(_,D,!0);break;case"textarea":Ue(_),ce(_);break;case"select":case"option":break;default:typeof D.onClick=="function"&&(_.onclick=yu)}_=C,u.updateQueue=_,_!==null&&(u.flags|=4)}else{G=C.nodeType===9?C:C.ownerDocument,o==="http://www.w3.org/1999/xhtml"&&(o=qe(m)),o==="http://www.w3.org/1999/xhtml"?m==="script"?(o=G.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild)):typeof _.is=="string"?o=G.createElement(m,{is:_.is}):(o=G.createElement(m),m==="select"&&(G=o,_.multiple?G.multiple=!0:_.size&&(G.size=_.size))):o=G.createElementNS(o,m),o[Ti]=u,o[Cl]=_,q1(o,u,!1,!1),u.stateNode=o;e:{switch(G=_t(m,_),m){case"dialog":Nn("cancel",o),Nn("close",o),C=_;break;case"iframe":case"object":case"embed":Nn("load",o),C=_;break;case"video":case"audio":for(C=0;C<io.length;C++)Nn(io[C],o);C=_;break;case"source":Nn("error",o),C=_;break;case"img":case"image":case"link":Nn("error",o),Nn("load",o),C=_;break;case"details":Nn("toggle",o),C=_;break;case"input":ke(o,_),C=we(o,_),Nn("invalid",o);break;case"option":C=_;break;case"select":o._wrapperState={wasMultiple:!!_.multiple},C=W({},_,{value:void 0}),Nn("invalid",o);break;case"textarea":X(o,_),C=ht(o,_),Nn("invalid",o);break;default:C=_}st(m,C),se=C;for(D in se)if(se.hasOwnProperty(D)){var fe=se[D];D==="style"?tt(o,fe):D==="dangerouslySetInnerHTML"?(fe=fe?fe.__html:void 0,fe!=null&&Ke(o,fe)):D==="children"?typeof fe=="string"?(m!=="textarea"||fe!=="")&&We(o,fe):typeof fe=="number"&&We(o,""+fe):D!=="suppressContentEditableWarning"&&D!=="suppressHydrationWarning"&&D!=="autoFocus"&&(r.hasOwnProperty(D)?fe!=null&&D==="onScroll"&&Nn("scroll",o):fe!=null&&b(o,D,fe,G))}switch(m){case"input":Ue(o),Le(o,_,!1);break;case"textarea":Ue(o),ce(o);break;case"option":_.value!=null&&o.setAttribute("value",""+ve(_.value));break;case"select":o.multiple=!!_.multiple,D=_.value,D!=null?Ae(o,!!_.multiple,D,!1):_.defaultValue!=null&&Ae(o,!!_.multiple,_.defaultValue,!0);break;default:typeof C.onClick=="function"&&(o.onclick=yu)}switch(m){case"button":case"input":case"select":case"textarea":_=!!_.autoFocus;break e;case"img":_=!0;break e;default:_=!1}}_&&(u.flags|=4)}u.ref!==null&&(u.flags|=512,u.flags|=2097152)}return Lr(u),null;case 6:if(o&&u.stateNode!=null)K1(o,u,o.memoizedProps,_);else{if(typeof _!="string"&&u.stateNode===null)throw Error(t(166));if(m=pi(Ea.current),pi(Wr.current),Rl(u)){if(_=u.stateNode,m=u.memoizedProps,_[Ti]=u,(D=_.nodeValue!==m)&&(o=Vi,o!==null))switch(o.tag){case 3:vu(_.nodeValue,m,(o.mode&1)!==0);break;case 5:o.memoizedProps.suppressHydrationWarning!==!0&&vu(_.nodeValue,m,(o.mode&1)!==0)}D&&(u.flags|=4)}else _=(m.nodeType===9?m:m.ownerDocument).createTextNode(_),_[Ti]=u,u.stateNode=_}return Lr(u),null;case 13:if(Fn(Bn),_=u.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(On&&vr!==null&&u.mode&1&&!(u.flags&128))qh(),so(),u.flags|=98560,D=!1;else if(D=Rl(u),_!==null&&_.dehydrated!==null){if(o===null){if(!D)throw Error(t(318));if(D=u.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(t(317));D[Ti]=u}else so(),!(u.flags&128)&&(u.memoizedState=null),u.flags|=4;Lr(u),D=!1}else cs!==null&&(s0(cs),cs=null),D=!0;if(!D)return u.flags&65536?u:null}return u.flags&128?(u.lanes=m,u):(_=_!==null,_!==(o!==null&&o.memoizedState!==null)&&_&&(u.child.flags|=8192,u.mode&1&&(o===null||Bn.current&1?Yi===0&&(Yi=3):l0())),u.updateQueue!==null&&(u.flags|=4),Lr(u),null);case 4:return oo(),qv(o,u),o===null&&El(u.stateNode.containerInfo),Lr(u),null;case 10:return bu(u.type._context),Lr(u),null;case 17:return ar(u.type)&&xu(),Lr(u),null;case 19:if(Fn(Bn),D=u.memoizedState,D===null)return Lr(u),null;if(_=(u.flags&128)!==0,G=D.rendering,G===null)if(_)od(D,!1);else{if(Yi!==0||o!==null&&o.flags&128)for(o=u.child;o!==null;){if(G=Ds(o),G!==null){for(u.flags|=128,od(D,!1),_=G.updateQueue,_!==null&&(u.updateQueue=_,u.flags|=4),u.subtreeFlags=0,_=m,m=u.child;m!==null;)D=m,o=_,D.flags&=14680066,G=D.alternate,G===null?(D.childLanes=0,D.lanes=o,D.child=null,D.subtreeFlags=0,D.memoizedProps=null,D.memoizedState=null,D.updateQueue=null,D.dependencies=null,D.stateNode=null):(D.childLanes=G.childLanes,D.lanes=G.lanes,D.child=G.child,D.subtreeFlags=0,D.deletions=null,D.memoizedProps=G.memoizedProps,D.memoizedState=G.memoizedState,D.updateQueue=G.updateQueue,D.type=G.type,o=G.dependencies,D.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),m=m.sibling;return In(Bn,Bn.current&1|2),u.child}o=o.sibling}D.tail!==null&&Ge()>gf&&(u.flags|=128,_=!0,od(D,!1),u.lanes=4194304)}else{if(!_)if(o=Ds(G),o!==null){if(u.flags|=128,_=!0,m=o.updateQueue,m!==null&&(u.updateQueue=m,u.flags|=4),od(D,!0),D.tail===null&&D.tailMode==="hidden"&&!G.alternate&&!On)return Lr(u),null}else 2*Ge()-D.renderingStartTime>gf&&m!==1073741824&&(u.flags|=128,_=!0,od(D,!1),u.lanes=4194304);D.isBackwards?(G.sibling=u.child,u.child=G):(m=D.last,m!==null?m.sibling=G:u.child=G,D.last=G)}return D.tail!==null?(u=D.tail,D.rendering=u,D.tail=u.sibling,D.renderingStartTime=Ge(),u.sibling=null,m=Bn.current,In(Bn,_?m&1|2:m&1),u):(Lr(u),null);case 22:case 23:return o0(),_=u.memoizedState!==null,o!==null&&o.memoizedState!==null!==_&&(u.flags|=8192),_&&u.mode&1?Us&1073741824&&(Lr(u),u.subtreeFlags&6&&(u.flags|=8192)):Lr(u),null;case 24:return null;case 25:return null}throw Error(t(156,u.tag))}function Db(o,u){switch(Ma(u),u.tag){case 1:return ar(u.type)&&xu(),o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 3:return oo(),Fn(mr),Fn(Gi),Zs(),o=u.flags,o&65536&&!(o&128)?(u.flags=o&-65537|128,u):null;case 5:return Il(u),null;case 13:if(Fn(Bn),o=u.memoizedState,o!==null&&o.dehydrated!==null){if(u.alternate===null)throw Error(t(340));so()}return o=u.flags,o&65536?(u.flags=o&-65537|128,u):null;case 19:return Fn(Bn),null;case 4:return oo(),null;case 10:return bu(u.type._context),null;case 22:case 23:return o0(),null;case 24:return null;default:return null}}var hm=!1,Ir=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,wt=null;function pf(o,u){var m=o.ref;if(m!==null)if(typeof m=="function")try{m(null)}catch(_){gi(o,u,_)}else m.current=null}function Zv(o,u,m){try{m()}catch(_){gi(o,u,_)}}var Q1=!1;function Ib(o,u){if(Al=Pi,o=Zn(),Ii(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var _=m.getSelection&&m.getSelection();if(_&&_.rangeCount!==0){m=_.anchorNode;var C=_.anchorOffset,D=_.focusNode;_=_.focusOffset;try{m.nodeType,D.nodeType}catch{m=null;break e}var G=0,se=-1,fe=-1,Ie=0,it=0,ot=o,$e=null;t:for(;;){for(var St;ot!==m||C!==0&&ot.nodeType!==3||(se=G+C),ot!==D||_!==0&&ot.nodeType!==3||(fe=G+_),ot.nodeType===3&&(G+=ot.nodeValue.length),(St=ot.firstChild)!==null;)$e=ot,ot=St;for(;;){if(ot===o)break t;if($e===m&&++Ie===C&&(se=G),$e===D&&++it===_&&(fe=G),(St=ot.nextSibling)!==null)break;ot=$e,$e=ot.parentNode}ot=St}m=se===-1||fe===-1?null:{start:se,end:fe}}else m=null}m=m||{start:0,end:0}}else m=null;for(Fh={focusedElem:o,selectionRange:m},Pi=!1,wt=u;wt!==null;)if(u=wt,o=u.child,(u.subtreeFlags&1028)!==0&&o!==null)o.return=u,wt=o;else for(;wt!==null;){u=wt;try{var Tt=u.alternate;if(u.flags&1024)switch(u.tag){case 0:case 11:case 15:break;case 1:if(Tt!==null){var bt=Tt.memoizedProps,Ei=Tt.memoizedState,Te=u.stateNode,me=Te.getSnapshotBeforeUpdate(u.elementType===u.type?bt:fs(u.type,bt),Ei);Te.__reactInternalSnapshotBeforeUpdate=me}break;case 3:var Re=u.stateNode.containerInfo;Re.nodeType===1?Re.textContent="":Re.nodeType===9&&Re.documentElement&&Re.removeChild(Re.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ut){gi(u,u.return,ut)}if(o=u.sibling,o!==null){o.return=u.return,wt=o;break}wt=u.return}return Tt=Q1,Q1=!1,Tt}function ld(o,u,m){var _=u.updateQueue;if(_=_!==null?_.lastEffect:null,_!==null){var C=_=_.next;do{if((C.tag&o)===o){var D=C.destroy;C.destroy=void 0,D!==void 0&&Zv(u,m,D)}C=C.next}while(C!==_)}}function dm(o,u){if(u=u.updateQueue,u=u!==null?u.lastEffect:null,u!==null){var m=u=u.next;do{if((m.tag&o)===o){var _=m.create;m.destroy=_()}m=m.next}while(m!==u)}}function Kv(o){var u=o.ref;if(u!==null){var m=o.stateNode;switch(o.tag){case 5:o=m;break;default:o=m}typeof u=="function"?u(o):u.current=o}}function J1(o){var u=o.alternate;u!==null&&(o.alternate=null,J1(u)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(u=o.stateNode,u!==null&&(delete u[Ti],delete u[Cl],delete u[Do],delete u[Kc],delete u[Qc])),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}function $1(o){return o.tag===5||o.tag===3||o.tag===4}function eS(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||$1(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Qv(o,u,m){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?m.nodeType===8?m.parentNode.insertBefore(o,u):m.insertBefore(o,u):(m.nodeType===8?(u=m.parentNode,u.insertBefore(o,m)):(u=m,u.appendChild(o)),m=m._reactRootContainer,m!=null||u.onclick!==null||(u.onclick=yu));else if(_!==4&&(o=o.child,o!==null))for(Qv(o,u,m),o=o.sibling;o!==null;)Qv(o,u,m),o=o.sibling}function Jv(o,u,m){var _=o.tag;if(_===5||_===6)o=o.stateNode,u?m.insertBefore(o,u):m.appendChild(o);else if(_!==4&&(o=o.child,o!==null))for(Jv(o,u,m),o=o.sibling;o!==null;)Jv(o,u,m),o=o.sibling}var xr=null,Pa=!1;function Fl(o,u,m){for(m=m.child;m!==null;)tS(o,u,m),m=m.sibling}function tS(o,u,m){if(Qt&&typeof Qt.onCommitFiberUnmount=="function")try{Qt.onCommitFiberUnmount(Ut,m)}catch{}switch(m.tag){case 5:Ir||pf(m,u);case 6:var _=xr,C=Pa;xr=null,Fl(o,u,m),xr=_,Pa=C,xr!==null&&(Pa?(o=xr,m=m.stateNode,o.nodeType===8?o.parentNode.removeChild(m):o.removeChild(m)):xr.removeChild(m.stateNode));break;case 18:xr!==null&&(Pa?(o=xr,m=m.stateNode,o.nodeType===8?Zc(o.parentNode,m):o.nodeType===1&&Zc(o,m),Za(o)):Zc(xr,m.stateNode));break;case 4:_=xr,C=Pa,xr=m.stateNode.containerInfo,Pa=!0,Fl(o,u,m),xr=_,Pa=C;break;case 0:case 11:case 14:case 15:if(!Ir&&(_=m.updateQueue,_!==null&&(_=_.lastEffect,_!==null))){C=_=_.next;do{var D=C,G=D.destroy;D=D.tag,G!==void 0&&(D&2||D&4)&&Zv(m,u,G),C=C.next}while(C!==_)}Fl(o,u,m);break;case 1:if(!Ir&&(pf(m,u),_=m.stateNode,typeof _.componentWillUnmount=="function"))try{_.props=m.memoizedProps,_.state=m.memoizedState,_.componentWillUnmount()}catch(se){gi(m,u,se)}Fl(o,u,m);break;case 21:Fl(o,u,m);break;case 22:m.mode&1?(Ir=(_=Ir)||m.memoizedState!==null,Fl(o,u,m),Ir=_):Fl(o,u,m);break;default:Fl(o,u,m)}}function nS(o){var u=o.updateQueue;if(u!==null){o.updateQueue=null;var m=o.stateNode;m===null&&(m=o.stateNode=new Lb),u.forEach(function(_){var C=Gb.bind(null,o,_);m.has(_)||(m.add(_),_.then(C,C))})}}function Da(o,u){var m=u.deletions;if(m!==null)for(var _=0;_<m.length;_++){var C=m[_];try{var D=o,G=u,se=G;e:for(;se!==null;){switch(se.tag){case 5:xr=se.stateNode,Pa=!1;break e;case 3:xr=se.stateNode.containerInfo,Pa=!0;break e;case 4:xr=se.stateNode.containerInfo,Pa=!0;break e}se=se.return}if(xr===null)throw Error(t(160));tS(D,G,C),xr=null,Pa=!1;var fe=C.alternate;fe!==null&&(fe.return=null),C.return=null}catch(Ie){gi(C,u,Ie)}}if(u.subtreeFlags&12854)for(u=u.child;u!==null;)iS(u,o),u=u.sibling}function iS(o,u){var m=o.alternate,_=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:if(Da(u,o),uo(o),_&4){try{ld(3,o,o.return),dm(3,o)}catch(bt){gi(o,o.return,bt)}try{ld(5,o,o.return)}catch(bt){gi(o,o.return,bt)}}break;case 1:Da(u,o),uo(o),_&512&&m!==null&&pf(m,m.return);break;case 5:if(Da(u,o),uo(o),_&512&&m!==null&&pf(m,m.return),o.flags&32){var C=o.stateNode;try{We(C,"")}catch(bt){gi(o,o.return,bt)}}if(_&4&&(C=o.stateNode,C!=null)){var D=o.memoizedProps,G=m!==null?m.memoizedProps:D,se=o.type,fe=o.updateQueue;if(o.updateQueue=null,fe!==null)try{se==="input"&&D.type==="radio"&&D.name!=null&&Pe(C,D),_t(se,G);var Ie=_t(se,D);for(G=0;G<fe.length;G+=2){var it=fe[G],ot=fe[G+1];it==="style"?tt(C,ot):it==="dangerouslySetInnerHTML"?Ke(C,ot):it==="children"?We(C,ot):b(C,it,ot,Ie)}switch(se){case"input":et(C,D);break;case"textarea":H(C,D);break;case"select":var $e=C._wrapperState.wasMultiple;C._wrapperState.wasMultiple=!!D.multiple;var St=D.value;St!=null?Ae(C,!!D.multiple,St,!1):$e!==!!D.multiple&&(D.defaultValue!=null?Ae(C,!!D.multiple,D.defaultValue,!0):Ae(C,!!D.multiple,D.multiple?[]:"",!1))}C[Cl]=D}catch(bt){gi(o,o.return,bt)}}break;case 6:if(Da(u,o),uo(o),_&4){if(o.stateNode===null)throw Error(t(162));C=o.stateNode,D=o.memoizedProps;try{C.nodeValue=D}catch(bt){gi(o,o.return,bt)}}break;case 3:if(Da(u,o),uo(o),_&4&&m!==null&&m.memoizedState.isDehydrated)try{Za(u.containerInfo)}catch(bt){gi(o,o.return,bt)}break;case 4:Da(u,o),uo(o);break;case 13:Da(u,o),uo(o),C=o.child,C.flags&8192&&(D=C.memoizedState!==null,C.stateNode.isHidden=D,!D||C.alternate!==null&&C.alternate.memoizedState!==null||(t0=Ge())),_&4&&nS(o);break;case 22:if(it=m!==null&&m.memoizedState!==null,o.mode&1?(Ir=(Ie=Ir)||it,Da(u,o),Ir=Ie):Da(u,o),uo(o),_&8192){if(Ie=o.memoizedState!==null,(o.stateNode.isHidden=Ie)&&!it&&o.mode&1)for(wt=o,it=o.child;it!==null;){for(ot=wt=it;wt!==null;){switch($e=wt,St=$e.child,$e.tag){case 0:case 11:case 14:case 15:ld(4,$e,$e.return);break;case 1:pf($e,$e.return);var Tt=$e.stateNode;if(typeof Tt.componentWillUnmount=="function"){_=$e,m=$e.return;try{u=_,Tt.props=u.memoizedProps,Tt.state=u.memoizedState,Tt.componentWillUnmount()}catch(bt){gi(_,m,bt)}}break;case 5:pf($e,$e.return);break;case 22:if($e.memoizedState!==null){aS(ot);continue}}St!==null?(St.return=$e,wt=St):aS(ot)}it=it.sibling}e:for(it=null,ot=o;;){if(ot.tag===5){if(it===null){it=ot;try{C=ot.stateNode,Ie?(D=C.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none"):(se=ot.stateNode,fe=ot.memoizedProps.style,G=fe!=null&&fe.hasOwnProperty("display")?fe.display:null,se.style.display=nt("display",G))}catch(bt){gi(o,o.return,bt)}}}else if(ot.tag===6){if(it===null)try{ot.stateNode.nodeValue=Ie?"":ot.memoizedProps}catch(bt){gi(o,o.return,bt)}}else if((ot.tag!==22&&ot.tag!==23||ot.memoizedState===null||ot===o)&&ot.child!==null){ot.child.return=ot,ot=ot.child;continue}if(ot===o)break e;for(;ot.sibling===null;){if(ot.return===null||ot.return===o)break e;it===ot&&(it=null),ot=ot.return}it===ot&&(it=null),ot.sibling.return=ot.return,ot=ot.sibling}}break;case 19:Da(u,o),uo(o),_&4&&nS(o);break;case 21:break;default:Da(u,o),uo(o)}}function uo(o){var u=o.flags;if(u&2){try{e:{for(var m=o.return;m!==null;){if($1(m)){var _=m;break e}m=m.return}throw Error(t(160))}switch(_.tag){case 5:var C=_.stateNode;_.flags&32&&(We(C,""),_.flags&=-33);var D=eS(o);Jv(o,D,C);break;case 3:case 4:var G=_.stateNode.containerInfo,se=eS(o);Qv(o,se,G);break;default:throw Error(t(161))}}catch(fe){gi(o,o.return,fe)}o.flags&=-3}u&4096&&(o.flags&=-4097)}function Ub(o,u,m){wt=o,rS(o)}function rS(o,u,m){for(var _=(o.mode&1)!==0;wt!==null;){var C=wt,D=C.child;if(C.tag===22&&_){var G=C.memoizedState!==null||hm;if(!G){var se=C.alternate,fe=se!==null&&se.memoizedState!==null||Ir;se=hm;var Ie=Ir;if(hm=G,(Ir=fe)&&!Ie)for(wt=C;wt!==null;)G=wt,fe=G.child,G.tag===22&&G.memoizedState!==null?oS(C):fe!==null?(fe.return=G,wt=fe):oS(C);for(;D!==null;)wt=D,rS(D),D=D.sibling;wt=C,hm=se,Ir=Ie}sS(o)}else C.subtreeFlags&8772&&D!==null?(D.return=C,wt=D):sS(o)}}function sS(o){for(;wt!==null;){var u=wt;if(u.flags&8772){var m=u.alternate;try{if(u.flags&8772)switch(u.tag){case 0:case 11:case 15:Ir||dm(5,u);break;case 1:var _=u.stateNode;if(u.flags&4&&!Ir)if(m===null)_.componentDidMount();else{var C=u.elementType===u.type?m.memoizedProps:fs(u.type,m.memoizedProps);_.componentDidUpdate(C,m.memoizedState,_.__reactInternalSnapshotBeforeUpdate)}var D=u.updateQueue;D!==null&&Ll(u,D,_);break;case 3:var G=u.updateQueue;if(G!==null){if(m=null,u.child!==null)switch(u.child.tag){case 5:m=u.child.stateNode;break;case 1:m=u.child.stateNode}Ll(u,G,m)}break;case 5:var se=u.stateNode;if(m===null&&u.flags&4){m=se;var fe=u.memoizedProps;switch(u.type){case"button":case"input":case"select":case"textarea":fe.autoFocus&&m.focus();break;case"img":fe.src&&(m.src=fe.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(u.memoizedState===null){var Ie=u.alternate;if(Ie!==null){var it=Ie.memoizedState;if(it!==null){var ot=it.dehydrated;ot!==null&&Za(ot)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ir||u.flags&512&&Kv(u)}catch($e){gi(u,u.return,$e)}}if(u===o){wt=null;break}if(m=u.sibling,m!==null){m.return=u.return,wt=m;break}wt=u.return}}function aS(o){for(;wt!==null;){var u=wt;if(u===o){wt=null;break}var m=u.sibling;if(m!==null){m.return=u.return,wt=m;break}wt=u.return}}function oS(o){for(;wt!==null;){var u=wt;try{switch(u.tag){case 0:case 11:case 15:var m=u.return;try{dm(4,u)}catch(fe){gi(u,m,fe)}break;case 1:var _=u.stateNode;if(typeof _.componentDidMount=="function"){var C=u.return;try{_.componentDidMount()}catch(fe){gi(u,C,fe)}}var D=u.return;try{Kv(u)}catch(fe){gi(u,D,fe)}break;case 5:var G=u.return;try{Kv(u)}catch(fe){gi(u,G,fe)}}}catch(fe){gi(u,u.return,fe)}if(u===o){wt=null;break}var se=u.sibling;if(se!==null){se.return=u.return,wt=se;break}wt=u.return}}var Nb=Math.ceil,pm=R.ReactCurrentDispatcher,$v=R.ReactCurrentOwner,Qs=R.ReactCurrentBatchConfig,Sn=0,ur=null,Oi=null,Sr=0,Us=0,mf=ti(0),Yi=0,ud=null,ku=0,mm=0,e0=0,cd=null,hs=null,t0=0,gf=1/0,Yo=null,gm=!1,n0=null,kl=null,vm=!1,Ol=null,ym=0,fd=0,i0=null,xm=-1,Sm=0;function qr(){return Sn&6?Ge():xm!==-1?xm:xm=Ge()}function Bl(o){return o.mode&1?Sn&2&&Sr!==0?Sr&-Sr:jv.transition!==null?(Sm===0&&(Sm=br()),Sm):(o=un,o!==0||(o=window.event,o=o===void 0?16:Qa(o.type)),o):1}function La(o,u,m,_){if(50<fd)throw fd=0,i0=null,Error(t(185));Ms(o,m,_),(!(Sn&2)||o!==ur)&&(o===ur&&(!(Sn&2)&&(mm|=m),Yi===4&&zl(o,Sr)),ds(o,_),m===1&&Sn===0&&!(u.mode&1)&&(gf=Ge()+500,_u&&Ys()))}function ds(o,u){var m=o.callbackNode;zs(o,u);var _=Xn(o,o===ur?Sr:0);if(_===0)m!==null&&It(m),o.callbackNode=null,o.callbackPriority=0;else if(u=_&-_,o.callbackPriority!==u){if(m!=null&&It(m),u===1)o.tag===0?$p(uS.bind(null,o)):Mu(uS.bind(null,o)),Wv(function(){!(Sn&6)&&Ys()}),m=null;else{switch(Hs(_)){case 1:m=Tn;break;case 4:m=pn;break;case 16:m=$n;break;case 536870912:m=gn;break;default:m=$n}m=vS(m,lS.bind(null,o))}o.callbackPriority=u,o.callbackNode=m}}function lS(o,u){if(xm=-1,Sm=0,Sn&6)throw Error(t(327));var m=o.callbackNode;if(vf()&&o.callbackNode!==m)return null;var _=Xn(o,o===ur?Sr:0);if(_===0)return null;if(_&30||_&o.expiredLanes||u)u=_m(o,_);else{u=_;var C=Sn;Sn|=2;var D=fS();(ur!==o||Sr!==u)&&(Yo=null,gf=Ge()+500,Bu(o,u));do try{Ob();break}catch(se){cS(o,se)}while(!0);Bo(),pm.current=D,Sn=C,Oi!==null?u=0:(ur=null,Sr=0,u=Yi)}if(u!==0){if(u===2&&(C=Ci(o),C!==0&&(_=C,u=r0(o,C))),u===1)throw m=ud,Bu(o,0),zl(o,_),ds(o,Ge()),m;if(u===6)zl(o,_);else{if(C=o.current.alternate,!(_&30)&&!Fb(C)&&(u=_m(o,_),u===2&&(D=Ci(o),D!==0&&(_=D,u=r0(o,D))),u===1))throw m=ud,Bu(o,0),zl(o,_),ds(o,Ge()),m;switch(o.finishedWork=C,o.finishedLanes=_,u){case 0:case 1:throw Error(t(345));case 2:zu(o,hs,Yo);break;case 3:if(zl(o,_),(_&130023424)===_&&(u=t0+500-Ge(),10<u)){if(Xn(o,0)!==0)break;if(C=o.suspendedLanes,(C&_)!==_){qr(),o.pingedLanes|=o.suspendedLanes&C;break}o.timeoutHandle=Oh(zu.bind(null,o,hs,Yo),u);break}zu(o,hs,Yo);break;case 4:if(zl(o,_),(_&4194240)===_)break;for(u=o.eventTimes,C=-1;0<_;){var G=31-yn(_);D=1<<G,G=u[G],G>C&&(C=G),_&=~D}if(_=C,_=Ge()-_,_=(120>_?120:480>_?480:1080>_?1080:1920>_?1920:3e3>_?3e3:4320>_?4320:1960*Nb(_/1960))-_,10<_){o.timeoutHandle=Oh(zu.bind(null,o,hs,Yo),_);break}zu(o,hs,Yo);break;case 5:zu(o,hs,Yo);break;default:throw Error(t(329))}}}return ds(o,Ge()),o.callbackNode===m?lS.bind(null,o):null}function r0(o,u){var m=cd;return o.current.memoizedState.isDehydrated&&(Bu(o,u).flags|=256),o=_m(o,u),o!==2&&(u=hs,hs=m,u!==null&&s0(u)),o}function s0(o){hs===null?hs=o:hs.push.apply(hs,o)}function Fb(o){for(var u=o;;){if(u.flags&16384){var m=u.updateQueue;if(m!==null&&(m=m.stores,m!==null))for(var _=0;_<m.length;_++){var C=m[_],D=C.getSnapshot;C=C.value;try{if(!zr(D(),C))return!1}catch{return!1}}}if(m=u.child,u.subtreeFlags&16384&&m!==null)m.return=u,u=m;else{if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function zl(o,u){for(u&=~e0,u&=~mm,o.suspendedLanes|=u,o.pingedLanes&=~u,o=o.expirationTimes;0<u;){var m=31-yn(u),_=1<<m;o[m]=-1,u&=~_}}function uS(o){if(Sn&6)throw Error(t(327));vf();var u=Xn(o,0);if(!(u&1))return ds(o,Ge()),null;var m=_m(o,u);if(o.tag!==0&&m===2){var _=Ci(o);_!==0&&(u=_,m=r0(o,_))}if(m===1)throw m=ud,Bu(o,0),zl(o,u),ds(o,Ge()),m;if(m===6)throw Error(t(345));return o.finishedWork=o.current.alternate,o.finishedLanes=u,zu(o,hs,Yo),ds(o,Ge()),null}function a0(o,u){var m=Sn;Sn|=1;try{return o(u)}finally{Sn=m,Sn===0&&(gf=Ge()+500,_u&&Ys())}}function Ou(o){Ol!==null&&Ol.tag===0&&!(Sn&6)&&vf();var u=Sn;Sn|=1;var m=Qs.transition,_=un;try{if(Qs.transition=null,un=1,o)return o()}finally{un=_,Qs.transition=m,Sn=u,!(Sn&6)&&Ys()}}function o0(){Us=mf.current,Fn(mf)}function Bu(o,u){o.finishedWork=null,o.finishedLanes=0;var m=o.timeoutHandle;if(m!==-1&&(o.timeoutHandle=-1,Bh(m)),Oi!==null)for(m=Oi.return;m!==null;){var _=m;switch(Ma(_),_.tag){case 1:_=_.type.childContextTypes,_!=null&&xu();break;case 3:oo(),Fn(mr),Fn(Gi),Zs();break;case 5:Il(_);break;case 4:oo();break;case 13:Fn(Bn);break;case 19:Fn(Bn);break;case 10:bu(_.type._context);break;case 22:case 23:o0()}m=m.return}if(ur=o,Oi=o=Hl(o.current,null),Sr=Us=u,Yi=0,ud=null,e0=mm=ku=0,hs=cd=null,Ta!==null){for(u=0;u<Ta.length;u++)if(m=Ta[u],_=m.interleaved,_!==null){m.interleaved=null;var C=_.next,D=m.pending;if(D!==null){var G=D.next;D.next=C,_.next=G}m.pending=_}Ta=null}return o}function cS(o,u){do{var m=Oi;try{if(Bo(),Vo.current=hf,Ls){for(var _=kn.memoizedState;_!==null;){var C=_.queue;C!==null&&(C.pending=null),_=_.next}Ls=!1}if(ba=0,vn=ii=kn=null,lr=!1,lo=0,$v.current=null,m===null||m.return===null){Yi=1,ud=u,Oi=null;break}e:{var D=o,G=m.return,se=m,fe=u;if(u=Sr,se.flags|=32768,fe!==null&&typeof fe=="object"&&typeof fe.then=="function"){var Ie=fe,it=se,ot=it.tag;if(!(it.mode&1)&&(ot===0||ot===11||ot===15)){var $e=it.alternate;$e?(it.updateQueue=$e.updateQueue,it.memoizedState=$e.memoizedState,it.lanes=$e.lanes):(it.updateQueue=null,it.memoizedState=null)}var St=Mt(G);if(St!==null){St.flags&=-257,Yt(St,G,se,D,u),St.mode&1&&lt(D,Ie,u),u=St,fe=Ie;var Tt=u.updateQueue;if(Tt===null){var bt=new Set;bt.add(fe),u.updateQueue=bt}else Tt.add(fe);break e}else{if(!(u&1)){lt(D,Ie,u),l0();break e}fe=Error(t(426))}}else if(On&&se.mode&1){var Ei=Mt(G);if(Ei!==null){!(Ei.flags&65536)&&(Ei.flags|=256),Yt(Ei,G,se,D,u),Pl(E(fe,se));break e}}D=fe=E(fe,se),Yi!==4&&(Yi=2),cd===null?cd=[D]:cd.push(D),D=G;do{switch(D.tag){case 3:D.flags|=65536,u&=-u,D.lanes|=u;var Te=ge(D,fe,u);zo(D,Te);break e;case 1:se=fe;var me=D.type,Re=D.stateNode;if(!(D.flags&128)&&(typeof me.getDerivedStateFromError=="function"||Re!==null&&typeof Re.componentDidCatch=="function"&&(kl===null||!kl.has(Re)))){D.flags|=65536,u&=-u,D.lanes|=u;var ut=He(D,se,u);zo(D,ut);break e}}D=D.return}while(D!==null)}dS(m)}catch(Rt){u=Rt,Oi===m&&m!==null&&(Oi=m=m.return);continue}break}while(!0)}function fS(){var o=pm.current;return pm.current=hf,o===null?hf:o}function l0(){(Yi===0||Yi===3||Yi===2)&&(Yi=4),ur===null||!(ku&268435455)&&!(mm&268435455)||zl(ur,Sr)}function _m(o,u){var m=Sn;Sn|=2;var _=fS();(ur!==o||Sr!==u)&&(Yo=null,Bu(o,u));do try{kb();break}catch(C){cS(o,C)}while(!0);if(Bo(),Sn=m,pm.current=_,Oi!==null)throw Error(t(261));return ur=null,Sr=0,Yi}function kb(){for(;Oi!==null;)hS(Oi)}function Ob(){for(;Oi!==null&&!Ot();)hS(Oi)}function hS(o){var u=gS(o.alternate,o,Us);o.memoizedProps=o.pendingProps,u===null?dS(o):Oi=u,$v.current=null}function dS(o){var u=o;do{var m=u.alternate;if(o=u.return,u.flags&32768){if(m=Db(m,u),m!==null){m.flags&=32767,Oi=m;return}if(o!==null)o.flags|=32768,o.subtreeFlags=0,o.deletions=null;else{Yi=6,Oi=null;return}}else if(m=Pb(m,u,Us),m!==null){Oi=m;return}if(u=u.sibling,u!==null){Oi=u;return}Oi=u=o}while(u!==null);Yi===0&&(Yi=5)}function zu(o,u,m){var _=un,C=Qs.transition;try{Qs.transition=null,un=1,Bb(o,u,m,_)}finally{Qs.transition=C,un=_}return null}function Bb(o,u,m,_){do vf();while(Ol!==null);if(Sn&6)throw Error(t(327));m=o.finishedWork;var C=o.finishedLanes;if(m===null)return null;if(o.finishedWork=null,o.finishedLanes=0,m===o.current)throw Error(t(177));o.callbackNode=null,o.callbackPriority=0;var D=m.lanes|m.childLanes;if(bc(o,D),o===ur&&(Oi=ur=null,Sr=0),!(m.subtreeFlags&2064)&&!(m.flags&2064)||vm||(vm=!0,vS($n,function(){return vf(),null})),D=(m.flags&15990)!==0,m.subtreeFlags&15990||D){D=Qs.transition,Qs.transition=null;var G=un;un=1;var se=Sn;Sn|=4,$v.current=null,Ib(o,m),iS(m,o),Ui(Fh),Pi=!!Al,Fh=Al=null,o.current=m,Ub(m),Kt(),Sn=se,un=G,Qs.transition=D}else o.current=m;if(vm&&(vm=!1,Ol=o,ym=C),D=o.pendingLanes,D===0&&(kl=null),Bt(m.stateNode),ds(o,Ge()),u!==null)for(_=o.onRecoverableError,m=0;m<u.length;m++)C=u[m],_(C.value,{componentStack:C.stack,digest:C.digest});if(gm)throw gm=!1,o=n0,n0=null,o;return ym&1&&o.tag!==0&&vf(),D=o.pendingLanes,D&1?o===i0?fd++:(fd=0,i0=o):fd=0,Ys(),null}function vf(){if(Ol!==null){var o=Hs(ym),u=Qs.transition,m=un;try{if(Qs.transition=null,un=16>o?16:o,Ol===null)var _=!1;else{if(o=Ol,Ol=null,ym=0,Sn&6)throw Error(t(331));var C=Sn;for(Sn|=4,wt=o.current;wt!==null;){var D=wt,G=D.child;if(wt.flags&16){var se=D.deletions;if(se!==null){for(var fe=0;fe<se.length;fe++){var Ie=se[fe];for(wt=Ie;wt!==null;){var it=wt;switch(it.tag){case 0:case 11:case 15:ld(8,it,D)}var ot=it.child;if(ot!==null)ot.return=it,wt=ot;else for(;wt!==null;){it=wt;var $e=it.sibling,St=it.return;if(J1(it),it===Ie){wt=null;break}if($e!==null){$e.return=St,wt=$e;break}wt=St}}}var Tt=D.alternate;if(Tt!==null){var bt=Tt.child;if(bt!==null){Tt.child=null;do{var Ei=bt.sibling;bt.sibling=null,bt=Ei}while(bt!==null)}}wt=D}}if(D.subtreeFlags&2064&&G!==null)G.return=D,wt=G;else e:for(;wt!==null;){if(D=wt,D.flags&2048)switch(D.tag){case 0:case 11:case 15:ld(9,D,D.return)}var Te=D.sibling;if(Te!==null){Te.return=D.return,wt=Te;break e}wt=D.return}}var me=o.current;for(wt=me;wt!==null;){G=wt;var Re=G.child;if(G.subtreeFlags&2064&&Re!==null)Re.return=G,wt=Re;else e:for(G=me;wt!==null;){if(se=wt,se.flags&2048)try{switch(se.tag){case 0:case 11:case 15:dm(9,se)}}catch(Rt){gi(se,se.return,Rt)}if(se===G){wt=null;break e}var ut=se.sibling;if(ut!==null){ut.return=se.return,wt=ut;break e}wt=se.return}}if(Sn=C,Ys(),Qt&&typeof Qt.onPostCommitFiberRoot=="function")try{Qt.onPostCommitFiberRoot(Ut,o)}catch{}_=!0}return _}finally{un=m,Qs.transition=u}}return!1}function pS(o,u,m){u=E(m,u),u=ge(o,u,1),o=Wn(o,u,1),u=qr(),o!==null&&(Ms(o,1,u),ds(o,u))}function gi(o,u,m){if(o.tag===3)pS(o,o,m);else for(;u!==null;){if(u.tag===3){pS(u,o,m);break}else if(u.tag===1){var _=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof _.componentDidCatch=="function"&&(kl===null||!kl.has(_))){o=E(m,o),o=He(u,o,1),u=Wn(u,o,1),o=qr(),u!==null&&(Ms(u,1,o),ds(u,o));break}}u=u.return}}function zb(o,u,m){var _=o.pingCache;_!==null&&_.delete(u),u=qr(),o.pingedLanes|=o.suspendedLanes&m,ur===o&&(Sr&m)===m&&(Yi===4||Yi===3&&(Sr&130023424)===Sr&&500>Ge()-t0?Bu(o,0):e0|=m),ds(o,u)}function mS(o,u){u===0&&(o.mode&1?(u=An,An<<=1,!(An&130023424)&&(An=4194304)):u=1);var m=qr();o=Ps(o,u),o!==null&&(Ms(o,u,m),ds(o,m))}function Hb(o){var u=o.memoizedState,m=0;u!==null&&(m=u.retryLane),mS(o,m)}function Gb(o,u){var m=0;switch(o.tag){case 13:var _=o.stateNode,C=o.memoizedState;C!==null&&(m=C.retryLane);break;case 19:_=o.stateNode;break;default:throw Error(t(314))}_!==null&&_.delete(u),mS(o,m)}var gS;gS=function(o,u,m){if(o!==null)if(o.memoizedProps!==u.pendingProps||mr.current)rn=!0;else{if(!(o.lanes&m)&&!(u.flags&128))return rn=!1,Rb(o,u,m);rn=!!(o.flags&131072)}else rn=!1,On&&u.flags&1048576&&Wh(u,tf,u.index);switch(u.lanes=0,u.tag){case 2:var _=u.type;fm(o,u),o=u.pendingProps;var C=Lo(u,Gi.current);ao(u,m),C=Du(null,u,_,o,C,m);var D=Jh();return u.flags|=1,typeof C=="object"&&C!==null&&typeof C.render=="function"&&C.$$typeof===void 0?(u.tag=1,u.memoizedState=null,u.updateQueue=null,ar(_)?(D=!0,Io(u)):D=!1,u.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,en(u),C.updater=df,u.stateNode=C,C._reactInternals=u,x(u,_,o,m),u=Jt(null,u,_,!0,D,m)):(u.tag=0,On&&D&&jh(u),gt(null,u,C,m),u=u.child),u;case 16:_=u.elementType;e:{switch(fm(o,u),o=u.pendingProps,C=_._init,_=C(_._payload),u.type=_,C=u.tag=Wb(_),o=fs(_,o),C){case 0:u=pt(null,u,_,o,m);break e;case 1:u=At(null,u,_,o,m);break e;case 11:u=Xi(null,u,_,o,m);break e;case 14:u=Yr(null,u,_,fs(_.type,o),m);break e}throw Error(t(306,_,""))}return u;case 0:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:fs(_,C),pt(o,u,_,C,m);case 1:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:fs(_,C),At(o,u,_,C,m);case 3:e:{if(qt(u),o===null)throw Error(t(387));_=u.pendingProps,D=u.memoizedState,C=D.element,oi(o,u),ni(u,_,null,m);var G=u.memoizedState;if(_=G.element,D.isDehydrated)if(D={element:_,isDehydrated:!1,cache:G.cache,pendingSuspenseBoundaries:G.pendingSuspenseBoundaries,transitions:G.transitions},u.updateQueue.baseState=D,u.memoizedState=D,u.flags&256){C=E(Error(t(423)),u),u=mn(o,u,_,m,C);break e}else if(_!==C){C=E(Error(t(424)),u),u=mn(o,u,_,m,C);break e}else for(vr=va(u.stateNode.containerInfo.firstChild),Vi=u,On=!0,cs=null,m=Eu(u,null,_,m),u.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling;else{if(so(),_===C){u=Xo(o,u,m);break e}gt(o,u,_,m)}u=u.child}return u;case 5:return Go(u),o===null&&rf(u),_=u.type,C=u.pendingProps,D=o!==null?o.memoizedProps:null,G=C.children,kh(_,C)?G=null:D!==null&&kh(_,D)&&(u.flags|=32),Oe(o,u),gt(o,u,G,m),u.child;case 6:return o===null&&rf(u),null;case 13:return Ra(o,u,m);case 4:return Ru(u,u.stateNode.containerInfo),_=u.pendingProps,o===null?u.child=Fo(u,null,_,m):gt(o,u,_,m),u.child;case 11:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:fs(_,C),Xi(o,u,_,C,m);case 7:return gt(o,u,u.pendingProps,m),u.child;case 8:return gt(o,u,u.pendingProps.children,m),u.child;case 12:return gt(o,u,u.pendingProps.children,m),u.child;case 10:e:{if(_=u.type._context,C=u.pendingProps,D=u.memoizedProps,G=C.value,In(ko,_._currentValue),_._currentValue=G,D!==null)if(zr(D.value,G)){if(D.children===C.children&&!mr.current){u=Xo(o,u,m);break e}}else for(D=u.child,D!==null&&(D.return=u);D!==null;){var se=D.dependencies;if(se!==null){G=D.child;for(var fe=se.firstContext;fe!==null;){if(fe.context===_){if(D.tag===1){fe=Pn(-1,m&-m),fe.tag=2;var Ie=D.updateQueue;if(Ie!==null){Ie=Ie.shared;var it=Ie.pending;it===null?fe.next=fe:(fe.next=it.next,it.next=fe),Ie.pending=fe}}D.lanes|=m,fe=D.alternate,fe!==null&&(fe.lanes|=m),Au(D.return,m,u),se.lanes|=m;break}fe=fe.next}}else if(D.tag===10)G=D.type===u.type?null:D.child;else if(D.tag===18){if(G=D.return,G===null)throw Error(t(341));G.lanes|=m,se=G.alternate,se!==null&&(se.lanes|=m),Au(G,m,u),G=D.sibling}else G=D.child;if(G!==null)G.return=D;else for(G=D;G!==null;){if(G===u){G=null;break}if(D=G.sibling,D!==null){D.return=G.return,G=D;break}G=G.return}D=G}gt(o,u,C.children,m),u=u.child}return u;case 9:return C=u.type,_=u.pendingProps.children,ao(u,m),C=Vr(C),_=_(C),u.flags|=1,gt(o,u,_,m),u.child;case 14:return _=u.type,C=fs(_,u.pendingProps),C=fs(_.type,C),Yr(o,u,_,C,m);case 15:return De(o,u,u.type,u.pendingProps,m);case 17:return _=u.type,C=u.pendingProps,C=u.elementType===_?C:fs(_,C),fm(o,u),u.tag=1,ar(_)?(o=!0,Io(u)):o=!1,ao(u,m),h(u,_,C),x(u,_,C,m),Jt(null,u,_,!0,o,m);case 19:return Y1(o,u,m);case 22:return ye(o,u,m)}throw Error(t(156,u.tag))};function vS(o,u){return Pt(o,u)}function Vb(o,u,m,_){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=_,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Js(o,u,m,_){return new Vb(o,u,m,_)}function u0(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Wb(o){if(typeof o=="function")return u0(o)?1:0;if(o!=null){if(o=o.$$typeof,o===Y)return 11;if(o===ae)return 14}return 2}function Hl(o,u){var m=o.alternate;return m===null?(m=Js(o.tag,u,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=u,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&14680064,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,u=o.dependencies,m.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m}function Mm(o,u,m,_,C,D){var G=2;if(_=o,typeof o=="function")u0(o)&&(G=1);else if(typeof o=="string")G=5;else e:switch(o){case F:return Hu(m.children,C,D,u);case z:G=8,C|=8;break;case U:return o=Js(12,m,u,C|2),o.elementType=U,o.lanes=D,o;case q:return o=Js(13,m,u,C),o.elementType=q,o.lanes=D,o;case J:return o=Js(19,m,u,C),o.elementType=J,o.lanes=D,o;case ue:return wm(m,C,D,u);default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case O:G=10;break e;case $:G=9;break e;case Y:G=11;break e;case ae:G=14;break e;case oe:G=16,_=null;break e}throw Error(t(130,o==null?o:typeof o,""))}return u=Js(G,m,u,C),u.elementType=o,u.type=_,u.lanes=D,u}function Hu(o,u,m,_){return o=Js(7,o,_,u),o.lanes=m,o}function wm(o,u,m,_){return o=Js(22,o,_,u),o.elementType=ue,o.lanes=m,o.stateNode={isHidden:!1},o}function c0(o,u,m){return o=Js(6,o,null,u),o.lanes=m,o}function f0(o,u,m){return u=Js(4,o.children!==null?o.children:[],o.key,u),u.lanes=m,u.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},u}function jb(o,u,m,_,C){this.tag=u,this.containerInfo=o,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ja(0),this.expirationTimes=ja(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ja(0),this.identifierPrefix=_,this.onRecoverableError=C,this.mutableSourceEagerHydrationData=null}function h0(o,u,m,_,C,D,G,se,fe){return o=new jb(o,u,m,se,fe),u===1?(u=1,D===!0&&(u|=8)):u=0,D=Js(3,null,null,u),o.current=D,D.stateNode=o,D.memoizedState={element:_,isDehydrated:m,cache:null,transitions:null,pendingSuspenseBoundaries:null},en(D),o}function Xb(o,u,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:k,key:_==null?null:""+_,children:o,containerInfo:u,implementation:m}}function yS(o){if(!o)return xa;o=o._reactInternals;e:{if(ee(o)!==o||o.tag!==1)throw Error(t(170));var u=o;do{switch(u.tag){case 3:u=u.stateNode.context;break e;case 1:if(ar(u.type)){u=u.stateNode.__reactInternalMemoizedMergedChildContext;break e}}u=u.return}while(u!==null);throw Error(t(171))}if(o.tag===1){var m=o.type;if(ar(m))return Su(o,m,u)}return u}function xS(o,u,m,_,C,D,G,se,fe){return o=h0(m,_,!0,o,C,D,G,se,fe),o.context=yS(null),m=o.current,_=qr(),C=Bl(m),D=Pn(_,C),D.callback=u??null,Wn(m,D,C),o.current.lanes=C,Ms(o,C,_),ds(o,_),o}function Tm(o,u,m,_){var C=u.current,D=qr(),G=Bl(C);return m=yS(m),u.context===null?u.context=m:u.pendingContext=m,u=Pn(D,G),u.payload={element:o},_=_===void 0?null:_,_!==null&&(u.callback=_),o=Wn(C,u,G),o!==null&&(La(o,C,G,D),or(o,C,G)),G}function Em(o){if(o=o.current,!o.child)return null;switch(o.child.tag){case 5:return o.child.stateNode;default:return o.child.stateNode}}function SS(o,u){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<u?m:u}}function d0(o,u){SS(o,u),(o=o.alternate)&&SS(o,u)}function Yb(){return null}var _S=typeof reportError=="function"?reportError:function(o){console.error(o)};function p0(o){this._internalRoot=o}bm.prototype.render=p0.prototype.render=function(o){var u=this._internalRoot;if(u===null)throw Error(t(409));Tm(o,u,null,null)},bm.prototype.unmount=p0.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var u=o.containerInfo;Ou(function(){Tm(null,o,null,null)}),u[Gr]=null}};function bm(o){this._internalRoot=o}bm.prototype.unstable_scheduleHydration=function(o){if(o){var u=Gs();o={blockedOn:null,target:o,priority:u};for(var m=0;m<rs.length&&u!==0&&u<rs[m].priority;m++);rs.splice(m,0,o),m===0&&rr(o)}};function m0(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function Am(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11&&(o.nodeType!==8||o.nodeValue!==" react-mount-point-unstable "))}function MS(){}function qb(o,u,m,_,C){if(C){if(typeof _=="function"){var D=_;_=function(){var Ie=Em(G);D.call(Ie)}}var G=xS(u,_,o,0,null,!1,!1,"",MS);return o._reactRootContainer=G,o[Gr]=G.current,El(o.nodeType===8?o.parentNode:o),Ou(),G}for(;C=o.lastChild;)o.removeChild(C);if(typeof _=="function"){var se=_;_=function(){var Ie=Em(fe);se.call(Ie)}}var fe=h0(o,0,!1,null,null,!1,!1,"",MS);return o._reactRootContainer=fe,o[Gr]=fe.current,El(o.nodeType===8?o.parentNode:o),Ou(function(){Tm(u,fe,m,_)}),fe}function Cm(o,u,m,_,C){var D=m._reactRootContainer;if(D){var G=D;if(typeof C=="function"){var se=C;C=function(){var fe=Em(G);se.call(fe)}}Tm(u,G,o,C)}else G=qb(m,u,o,C,_);return Em(G)}Xa=function(o){switch(o.tag){case 3:var u=o.stateNode;if(u.current.memoizedState.isDehydrated){var m=_i(u.pendingLanes);m!==0&&(ws(u,m|1),ds(u,Ge()),!(Sn&6)&&(gf=Ge()+500,Ys()))}break;case 13:Ou(function(){var _=Ps(o,1);if(_!==null){var C=qr();La(_,o,1,C)}}),d0(o,1)}},dl=function(o){if(o.tag===13){var u=Ps(o,134217728);if(u!==null){var m=qr();La(u,o,134217728,m)}d0(o,134217728)}},pl=function(o){if(o.tag===13){var u=Bl(o),m=Ps(o,u);if(m!==null){var _=qr();La(m,o,u,_)}d0(o,u)}},Gs=function(){return un},So=function(o,u){var m=un;try{return un=o,u()}finally{un=m}},je=function(o,u,m){switch(u){case"input":if(et(o,m),u=m.name,m.type==="radio"&&u!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll("input[name="+JSON.stringify(""+u)+'][type="radio"]'),u=0;u<m.length;u++){var _=m[u];if(_!==o&&_.form===o.form){var C=Jc(_);if(!C)throw Error(t(90));Z(_),et(_,C)}}}break;case"textarea":H(o,m);break;case"select":u=m.value,u!=null&&Ae(o,!!m.multiple,u,!1)}},Vt=a0,Lt=Ou;var Zb={usingClientEntryPoint:!1,Events:[ya,ai,Jc,mt,Gt,a0]},hd={findFiberByHostInstance:ro,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kb={bundleType:hd.bundleType,version:hd.version,rendererPackageName:hd.rendererPackageName,rendererConfig:hd.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:R.ReactCurrentDispatcher,findHostInstanceByFiber:function(o){return o=Be(o),o===null?null:o.stateNode},findFiberByHostInstance:hd.findFiberByHostInstance||Yb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Rm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Rm.isDisabled&&Rm.supportsFiber)try{Ut=Rm.inject(Kb),Qt=Rm}catch{}}return ps.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zb,ps.createPortal=function(o,u){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!m0(u))throw Error(t(200));return Xb(o,u,null,m)},ps.createRoot=function(o,u){if(!m0(o))throw Error(t(299));var m=!1,_="",C=_S;return u!=null&&(u.unstable_strictMode===!0&&(m=!0),u.identifierPrefix!==void 0&&(_=u.identifierPrefix),u.onRecoverableError!==void 0&&(C=u.onRecoverableError)),u=h0(o,1,!1,null,null,m,!1,_,C),o[Gr]=u.current,El(o.nodeType===8?o.parentNode:o),new p0(u)},ps.findDOMNode=function(o){if(o==null)return null;if(o.nodeType===1)return o;var u=o._reactInternals;if(u===void 0)throw typeof o.render=="function"?Error(t(188)):(o=Object.keys(o).join(","),Error(t(268,o)));return o=Be(u),o=o===null?null:o.stateNode,o},ps.flushSync=function(o){return Ou(o)},ps.hydrate=function(o,u,m){if(!Am(u))throw Error(t(200));return Cm(null,o,u,!0,m)},ps.hydrateRoot=function(o,u,m){if(!m0(o))throw Error(t(405));var _=m!=null&&m.hydratedSources||null,C=!1,D="",G=_S;if(m!=null&&(m.unstable_strictMode===!0&&(C=!0),m.identifierPrefix!==void 0&&(D=m.identifierPrefix),m.onRecoverableError!==void 0&&(G=m.onRecoverableError)),u=xS(u,null,o,1,m??null,C,!1,D,G),o[Gr]=u.current,El(o),_)for(o=0;o<_.length;o++)m=_[o],C=m._getVersion,C=C(m._source),u.mutableSourceEagerHydrationData==null?u.mutableSourceEagerHydrationData=[m,C]:u.mutableSourceEagerHydrationData.push(m,C);return new bm(u)},ps.render=function(o,u,m){if(!Am(u))throw Error(t(200));return Cm(null,o,u,!1,m)},ps.unmountComponentAtNode=function(o){if(!Am(o))throw Error(t(40));return o._reactRootContainer?(Ou(function(){Cm(null,null,o,!1,function(){o._reactRootContainer=null,o[Gr]=null})}),!0):!1},ps.unstable_batchedUpdates=a0,ps.unstable_renderSubtreeIntoContainer=function(o,u,m,_){if(!Am(m))throw Error(t(200));if(o==null||o._reactInternals===void 0)throw Error(t(38));return Cm(o,u,m,!1,_)},ps.version="18.3.1-next-f1338f8080-20240426",ps}var PS;function sA(){if(PS)return y0.exports;PS=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),y0.exports=rA(),y0.exports}var DS;function aA(){if(DS)return Pm;DS=1;var n=sA();return Pm.createRoot=n.createRoot,Pm.hydrateRoot=n.hydrateRoot,Pm}var oA=aA();const sT=K.createContext();function aT(){return K.useContext(sT)}var _0={exports:{}},M0,LS;function lA(){if(LS)return M0;LS=1;var n="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return M0=n,M0}var w0,IS;function uA(){if(IS)return w0;IS=1;var n=lA();function e(){}function t(){}return t.resetWarningCache=e,w0=function(){function i(a,l,c,f,p,g){if(g!==n){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function r(){return i}var s={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:t,resetWarningCache:e};return s.PropTypes=s,s},w0}var US;function Lx(){return US||(US=1,_0.exports=uA()()),_0.exports}var vs=Lx();const Mr=Dx(vs);function oT({children:n}){const[e,t]=K.useState(()=>localStorage.getItem("started")==="false"),i=()=>{t(!0),localStorage.setItem("started","true")};return K.useEffect(()=>{var s;((s=performance.getEntriesByType("navigation")[0])==null?void 0:s.type)==="reload"&&(localStorage.removeItem("started"),t(!1))},[]),pe.jsx(sT.Provider,{value:{started:e,startAnimation:i},children:n})}oT.propTypes={children:Mr.node.isRequired};const cA="_startText_pcgxc_65",fA="_animateA_pcgxc_89",Dm={startText:cA,animateA:fA},hA="_startButton_1ydk9_1",dA="_playIcon_1ydk9_53",T0={startButton:hA,playIcon:dA};function lT({onClick:n,children:e}){return pe.jsxs("button",{className:T0.startButton,onClick:n,children:[pe.jsx("svg",{className:T0.playIcon,width:"70",height:"70",viewBox:"0 0 24 24",fill:"black",xmlns:"http://www.w3.org/2000/svg",children:pe.jsx("path",{d:"M8 5v14l11-7z"})}),pe.jsx("span",{className:T0.text,children:e})]})}lT.propTypes={onClick:Mr.func.isRequired,children:Mr.node.isRequired};function pA(){const{startAnimation:n}=aT(),[e,t]=K.useState(!1),i=()=>{t(!0),setTimeout(()=>n(),500)};return pe.jsxs("div",{className:Dm.startContainer,children:[pe.jsxs("h1",{className:Dm.startText,children:["ST",pe.jsx("span",{className:`${e?Dm.animateA:""}`,children:"A"}),"RT"]}),!e&&pe.jsx(lT,{onClick:i,className:Dm.neonButton,children:"Begin!"})]})}const uT=K.createContext();function mA(n,e){const[t,i]=K.useState(function(){const r=localStorage.getItem(e);return r?JSON.parse(r):n});return K.useEffect(function(){localStorage.setItem(e,JSON.stringify(t))},[t,e]),[t,i]}function cT({children:n}){const[e,t]=mA(window.matchMedia("(prefers-color-scheme: dark)").matches,"isDarkMode");K.useEffect(()=>{e?(document.documentElement.classList.add("dark-mode"),document.documentElement.classList.remove("light-mode")):(document.documentElement.classList.add("light-mode"),document.documentElement.classList.remove("dark-mode"))},[e]);function i(){t(s=>!s),new Audio("img/sound.mp3").play()}return pe.jsx(uT.Provider,{value:{isDarkMode:e,toggleDarkMode:i},children:n})}cT.propTypes={children:Mr.node.isRequired};var pd={},NS;function gA(){if(NS)return pd;NS=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.parse=a,pd.serialize=f;const n=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,e=/^[\u0021-\u003A\u003C-\u007E]*$/,t=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,i=/^[\u0020-\u003A\u003D-\u007E]*$/,r=Object.prototype.toString,s=(()=>{const v=function(){};return v.prototype=Object.create(null),v})();function a(v,y){const S=new s,T=v.length;if(T<2)return S;const w=(y==null?void 0:y.decode)||p;let M=0;do{const A=v.indexOf("=",M);if(A===-1)break;const b=v.indexOf(";",M),R=b===-1?T:b;if(A>R){M=v.lastIndexOf(";",A-1)+1;continue}const I=l(v,M,A),k=c(v,A,I),F=v.slice(I,k);if(S[F]===void 0){let z=l(v,A+1,R),U=c(v,R,z);const O=w(v.slice(z,U));S[F]=O}M=R+1}while(M<T);return S}function l(v,y,S){do{const T=v.charCodeAt(y);if(T!==32&&T!==9)return y}while(++y<S);return S}function c(v,y,S){for(;y>S;){const T=v.charCodeAt(--y);if(T!==32&&T!==9)return y+1}return S}function f(v,y,S){const T=(S==null?void 0:S.encode)||encodeURIComponent;if(!n.test(v))throw new TypeError(`argument name is invalid: ${v}`);const w=T(y);if(!e.test(w))throw new TypeError(`argument val is invalid: ${y}`);let M=v+"="+w;if(!S)return M;if(S.maxAge!==void 0){if(!Number.isInteger(S.maxAge))throw new TypeError(`option maxAge is invalid: ${S.maxAge}`);M+="; Max-Age="+S.maxAge}if(S.domain){if(!t.test(S.domain))throw new TypeError(`option domain is invalid: ${S.domain}`);M+="; Domain="+S.domain}if(S.path){if(!i.test(S.path))throw new TypeError(`option path is invalid: ${S.path}`);M+="; Path="+S.path}if(S.expires){if(!g(S.expires)||!Number.isFinite(S.expires.valueOf()))throw new TypeError(`option expires is invalid: ${S.expires}`);M+="; Expires="+S.expires.toUTCString()}if(S.httpOnly&&(M+="; HttpOnly"),S.secure&&(M+="; Secure"),S.partitioned&&(M+="; Partitioned"),S.priority)switch(typeof S.priority=="string"?S.priority.toLowerCase():void 0){case"low":M+="; Priority=Low";break;case"medium":M+="; Priority=Medium";break;case"high":M+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${S.priority}`)}if(S.sameSite)switch(typeof S.sameSite=="string"?S.sameSite.toLowerCase():S.sameSite){case!0:case"strict":M+="; SameSite=Strict";break;case"lax":M+="; SameSite=Lax";break;case"none":M+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${S.sameSite}`)}return M}function p(v){if(v.indexOf("%")===-1)return v;try{return decodeURIComponent(v)}catch{return v}}function g(v){return r.call(v)==="[object Date]"}return pd}gA();/**
 * react-router v7.1.5
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var FS="popstate";function vA(n={}){function e(i,r){let{pathname:s,search:a,hash:l}=i.location;return Ly("",{pathname:s,search:a,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:ip(r)}return xA(e,t,null,n)}function fi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function mo(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function yA(){return Math.random().toString(36).substring(2,10)}function kS(n,e){return{usr:n.state,key:n.key,idx:e}}function Ly(n,e,t=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?lh(e):e,state:t,key:e&&e.key||i||yA()}}function ip({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function lh(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substring(i),n=n.substring(0,i)),n&&(e.pathname=n)}return e}function xA(n,e,t,i={}){let{window:r=document.defaultView,v5Compat:s=!1}=i,a=r.history,l="POP",c=null,f=p();f==null&&(f=0,a.replaceState({...a.state,idx:f},""));function p(){return(a.state||{idx:null}).idx}function g(){l="POP";let w=p(),M=w==null?null:w-f;f=w,c&&c({action:l,location:T.location,delta:M})}function v(w,M){l="PUSH";let A=Ly(T.location,w,M);f=p()+1;let b=kS(A,f),R=T.createHref(A);try{a.pushState(b,"",R)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;r.location.assign(R)}s&&c&&c({action:l,location:T.location,delta:1})}function y(w,M){l="REPLACE";let A=Ly(T.location,w,M);f=p();let b=kS(A,f),R=T.createHref(A);a.replaceState(b,"",R),s&&c&&c({action:l,location:T.location,delta:0})}function S(w){let M=r.location.origin!=="null"?r.location.origin:r.location.href,A=typeof w=="string"?w:ip(w);return A=A.replace(/ $/,"%20"),fi(M,`No window.location.(origin|href) available to create URL for href: ${A}`),new URL(A,M)}let T={get action(){return l},get location(){return n(r,a)},listen(w){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(FS,g),c=w,()=>{r.removeEventListener(FS,g),c=null}},createHref(w){return e(r,w)},createURL:S,encodeLocation(w){let M=S(w);return{pathname:M.pathname,search:M.search,hash:M.hash}},push:v,replace:y,go(w){return a.go(w)}};return T}function fT(n,e,t="/"){return SA(n,e,t,!1)}function SA(n,e,t,i){let r=typeof e=="string"?lh(e):e,s=$l(r.pathname||"/",t);if(s==null)return null;let a=hT(n);_A(a);let l=null;for(let c=0;l==null&&c<a.length;++c){let f=LA(s);l=PA(a[c],f,i)}return l}function hT(n,e=[],t=[],i=""){let r=(s,a,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};c.relativePath.startsWith("/")&&(fi(c.relativePath.startsWith(i),`Absolute route path "${c.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(i.length));let f=rl([i,c.relativePath]),p=t.concat(c);s.children&&s.children.length>0&&(fi(s.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),hT(s.children,e,p,f)),!(s.path==null&&!s.index)&&e.push({path:f,score:CA(f,s.index),routesMeta:p})};return n.forEach((s,a)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))r(s,a);else for(let c of dT(s.path))r(s,a,c)}),e}function dT(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let a=dT(i.join("/")),l=[];return l.push(...a.map(c=>c===""?s:[s,c].join("/"))),r&&l.push(...a),l.map(c=>n.startsWith("/")&&c===""?"/":c)}function _A(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:RA(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}var MA=/^:[\w-]+$/,wA=3,TA=2,EA=1,bA=10,AA=-2,OS=n=>n==="*";function CA(n,e){let t=n.split("/"),i=t.length;return t.some(OS)&&(i+=AA),e&&(i+=TA),t.filter(r=>!OS(r)).reduce((r,s)=>r+(MA.test(s)?wA:s===""?EA:bA),i)}function RA(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function PA(n,e,t=!1){let{routesMeta:i}=n,r={},s="/",a=[];for(let l=0;l<i.length;++l){let c=i[l],f=l===i.length-1,p=s==="/"?e:e.slice(s.length)||"/",g=qg({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},p),v=c.route;if(!g&&f&&t&&!i[i.length-1].route.index&&(g=qg({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},p)),!g)return null;Object.assign(r,g.params),a.push({params:r,pathname:rl([s,g.pathname]),pathnameBase:FA(rl([s,g.pathnameBase])),route:v}),g.pathnameBase!=="/"&&(s=rl([s,g.pathnameBase]))}return a}function qg(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=DA(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:i.reduce((f,{paramName:p,isOptional:g},v)=>{if(p==="*"){let S=l[v]||"";a=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const y=l[v];return g&&!y?f[p]=void 0:f[p]=(y||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:a,pattern:n}}function DA(n,e=!1,t=!0){mo(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,l,c)=>(i.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function LA(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return mo(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function $l(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function IA(n,e="/"){let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?lh(n):n;return{pathname:t?t.startsWith("/")?t:UA(t,e):e,search:kA(i),hash:OA(r)}}function UA(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function E0(n,e,t,i){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function NA(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function pT(n){let e=NA(n);return e.map((t,i)=>i===e.length-1?t.pathname:t.pathnameBase)}function mT(n,e,t,i=!1){let r;typeof n=="string"?r=lh(n):(r={...n},fi(!r.pathname||!r.pathname.includes("?"),E0("?","pathname","search",r)),fi(!r.pathname||!r.pathname.includes("#"),E0("#","pathname","hash",r)),fi(!r.search||!r.search.includes("#"),E0("#","search","hash",r)));let s=n===""||r.pathname==="",a=s?"/":r.pathname,l;if(a==null)l=t;else{let g=e.length-1;if(!i&&a.startsWith("..")){let v=a.split("/");for(;v[0]==="..";)v.shift(),g-=1;r.pathname=v.join("/")}l=g>=0?e[g]:"/"}let c=IA(r,l),f=a&&a!=="/"&&a.endsWith("/"),p=(s||a===".")&&t.endsWith("/");return!c.pathname.endsWith("/")&&(f||p)&&(c.pathname+="/"),c}var rl=n=>n.join("/").replace(/\/\/+/g,"/"),FA=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),kA=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,OA=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function BA(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}var gT=["POST","PUT","PATCH","DELETE"];new Set(gT);var zA=["GET",...gT];new Set(zA);var uh=K.createContext(null);uh.displayName="DataRouter";var rv=K.createContext(null);rv.displayName="DataRouterState";var vT=K.createContext({isTransitioning:!1});vT.displayName="ViewTransition";var HA=K.createContext(new Map);HA.displayName="Fetchers";var GA=K.createContext(null);GA.displayName="Await";var vo=K.createContext(null);vo.displayName="Navigation";var Tp=K.createContext(null);Tp.displayName="Location";var ul=K.createContext({outlet:null,matches:[],isDataRoute:!1});ul.displayName="Route";var Ix=K.createContext(null);Ix.displayName="RouteError";function VA(n,{relative:e}={}){fi(Ep(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:i}=K.useContext(vo),{hash:r,pathname:s,search:a}=bp(n,{relative:e}),l=s;return t!=="/"&&(l=s==="/"?t:rl([t,s])),i.createHref({pathname:l,search:a,hash:r})}function Ep(){return K.useContext(Tp)!=null}function _c(){return fi(Ep(),"useLocation() may be used only in the context of a <Router> component."),K.useContext(Tp).location}var yT="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xT(n){K.useContext(vo).static||K.useLayoutEffect(n)}function sv(){let{isDataRoute:n}=K.useContext(ul);return n?nC():WA()}function WA(){fi(Ep(),"useNavigate() may be used only in the context of a <Router> component.");let n=K.useContext(uh),{basename:e,navigator:t}=K.useContext(vo),{matches:i}=K.useContext(ul),{pathname:r}=_c(),s=JSON.stringify(pT(i)),a=K.useRef(!1);return xT(()=>{a.current=!0}),K.useCallback((c,f={})=>{if(mo(a.current,yT),!a.current)return;if(typeof c=="number"){t.go(c);return}let p=mT(c,JSON.parse(s),r,f.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:rl([e,p.pathname])),(f.replace?t.replace:t.push)(p,f.state,f)},[e,t,s,r,n])}K.createContext(null);function bp(n,{relative:e}={}){let{matches:t}=K.useContext(ul),{pathname:i}=_c(),r=JSON.stringify(pT(t));return K.useMemo(()=>mT(n,JSON.parse(r),i,e==="path"),[n,r,i,e])}function jA(n,e){return ST(n,e)}function ST(n,e,t,i){var A;fi(Ep(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r,static:s}=K.useContext(vo),{matches:a}=K.useContext(ul),l=a[a.length-1],c=l?l.params:{},f=l?l.pathname:"/",p=l?l.pathnameBase:"/",g=l&&l.route;{let b=g&&g.path||"";_T(f,!g||b.endsWith("*")||b.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${f}" (under <Route path="${b}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${b}"> to <Route path="${b==="/"?"*":`${b}/*`}">.`)}let v=_c(),y;if(e){let b=typeof e=="string"?lh(e):e;fi(p==="/"||((A=b.pathname)==null?void 0:A.startsWith(p)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${p}" but pathname "${b.pathname}" was given in the \`location\` prop.`),y=b}else y=v;let S=y.pathname||"/",T=S;if(p!=="/"){let b=p.replace(/^\//,"").split("/");T="/"+S.replace(/^\//,"").split("/").slice(b.length).join("/")}let w=!s&&t&&t.matches&&t.matches.length>0?t.matches:fT(n,{pathname:T});mo(g||w!=null,`No routes matched location "${y.pathname}${y.search}${y.hash}" `),mo(w==null||w[w.length-1].route.element!==void 0||w[w.length-1].route.Component!==void 0||w[w.length-1].route.lazy!==void 0,`Matched leaf route at location "${y.pathname}${y.search}${y.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let M=KA(w&&w.map(b=>Object.assign({},b,{params:Object.assign({},c,b.params),pathname:rl([p,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?p:rl([p,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),a,t,i);return e&&M?K.createElement(Tp.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...y},navigationType:"POP"}},M):M}function XA(){let n=tC(),e=BA(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},s={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=K.createElement(K.Fragment,null,K.createElement("p",null," Hey developer "),K.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",K.createElement("code",{style:s},"ErrorBoundary")," or"," ",K.createElement("code",{style:s},"errorElement")," prop on your route.")),K.createElement(K.Fragment,null,K.createElement("h2",null,"Unexpected Application Error!"),K.createElement("h3",{style:{fontStyle:"italic"}},e),t?K.createElement("pre",{style:r},t):null,a)}var YA=K.createElement(XA,null),qA=class extends K.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){console.error("React Router caught the following error during render",n,e)}render(){return this.state.error!==void 0?K.createElement(ul.Provider,{value:this.props.routeContext},K.createElement(Ix.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function ZA({routeContext:n,match:e,children:t}){let i=K.useContext(uh);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),K.createElement(ul.Provider,{value:n},t)}function KA(n,e=[],t=null,i=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let r=n,s=t==null?void 0:t.errors;if(s!=null){let c=r.findIndex(f=>f.route.id&&(s==null?void 0:s[f.route.id])!==void 0);fi(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(s).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let a=!1,l=-1;if(t)for(let c=0;c<r.length;c++){let f=r[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:p,errors:g}=t,v=f.route.loader&&!p.hasOwnProperty(f.route.id)&&(!g||g[f.route.id]===void 0);if(f.route.lazy||v){a=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,f,p)=>{let g,v=!1,y=null,S=null;t&&(g=s&&f.route.id?s[f.route.id]:void 0,y=f.route.errorElement||YA,a&&(l<0&&p===0?(_T("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),v=!0,S=null):l===p&&(v=!0,S=f.route.hydrateFallbackElement||null)));let T=e.concat(r.slice(0,p+1)),w=()=>{let M;return g?M=y:v?M=S:f.route.Component?M=K.createElement(f.route.Component,null):f.route.element?M=f.route.element:M=c,K.createElement(ZA,{match:f,routeContext:{outlet:c,matches:T,isDataRoute:t!=null},children:M})};return t&&(f.route.ErrorBoundary||f.route.errorElement||p===0)?K.createElement(qA,{location:t.location,revalidation:t.revalidation,component:y,error:g,children:w(),routeContext:{outlet:null,matches:T,isDataRoute:!0}}):w()},null)}function Ux(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function QA(n){let e=K.useContext(uh);return fi(e,Ux(n)),e}function JA(n){let e=K.useContext(rv);return fi(e,Ux(n)),e}function $A(n){let e=K.useContext(ul);return fi(e,Ux(n)),e}function Nx(n){let e=$A(n),t=e.matches[e.matches.length-1];return fi(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function eC(){return Nx("useRouteId")}function tC(){var i;let n=K.useContext(Ix),e=JA("useRouteError"),t=Nx("useRouteError");return n!==void 0?n:(i=e.errors)==null?void 0:i[t]}function nC(){let{router:n}=QA("useNavigate"),e=Nx("useNavigate"),t=K.useRef(!1);return xT(()=>{t.current=!0}),K.useCallback(async(r,s={})=>{mo(t.current,yT),t.current&&(typeof r=="number"?n.navigate(r):await n.navigate(r,{fromRouteId:e,...s}))},[n,e])}var BS={};function _T(n,e,t){!e&&!BS[n]&&(BS[n]=!0,mo(!1,t))}K.memo(iC);function iC({routes:n,future:e,state:t}){return ST(n,void 0,t,e)}function zd(n){fi(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function rC({basename:n="/",children:e=null,location:t,navigationType:i="POP",navigator:r,static:s=!1}){fi(!Ep(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),l=K.useMemo(()=>({basename:a,navigator:r,static:s,future:{}}),[a,r,s]);typeof t=="string"&&(t=lh(t));let{pathname:c="/",search:f="",hash:p="",state:g=null,key:v="default"}=t,y=K.useMemo(()=>{let S=$l(c,a);return S==null?null:{location:{pathname:S,search:f,hash:p,state:g,key:v},navigationType:i}},[a,c,f,p,g,v,i]);return mo(y!=null,`<Router basename="${a}"> is not able to match the URL "${c}${f}${p}" because it does not start with the basename, so the <Router> won't render anything.`),y==null?null:K.createElement(vo.Provider,{value:l},K.createElement(Tp.Provider,{children:e,value:y}))}function sC({children:n,location:e}){return jA(Iy(n),e)}function Iy(n,e=[]){let t=[];return K.Children.forEach(n,(i,r)=>{if(!K.isValidElement(i))return;let s=[...e,r];if(i.type===K.Fragment){t.push.apply(t,Iy(i.props.children,s));return}fi(i.type===zd,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fi(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=Iy(i.props.children,s)),t.push(a)}),t}var Ig="get",Ug="application/x-www-form-urlencoded";function av(n){return n!=null&&typeof n.tagName=="string"}function aC(n){return av(n)&&n.tagName.toLowerCase()==="button"}function oC(n){return av(n)&&n.tagName.toLowerCase()==="form"}function lC(n){return av(n)&&n.tagName.toLowerCase()==="input"}function uC(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function cC(n,e){return n.button===0&&(!e||e==="_self")&&!uC(n)}var Lm=null;function fC(){if(Lm===null)try{new FormData(document.createElement("form"),0),Lm=!1}catch{Lm=!0}return Lm}var hC=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function b0(n){return n!=null&&!hC.has(n)?(mo(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Ug}"`),null):n}function dC(n,e){let t,i,r,s,a;if(oC(n)){let l=n.getAttribute("action");i=l?$l(l,e):null,t=n.getAttribute("method")||Ig,r=b0(n.getAttribute("enctype"))||Ug,s=new FormData(n)}else if(aC(n)||lC(n)&&(n.type==="submit"||n.type==="image")){let l=n.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=n.getAttribute("formaction")||l.getAttribute("action");if(i=c?$l(c,e):null,t=n.getAttribute("formmethod")||l.getAttribute("method")||Ig,r=b0(n.getAttribute("formenctype"))||b0(l.getAttribute("enctype"))||Ug,s=new FormData(l,n),!fC()){let{name:f,type:p,value:g}=n;if(p==="image"){let v=f?`${f}.`:"";s.append(`${v}x`,"0"),s.append(`${v}y`,"0")}else f&&s.append(f,g)}}else{if(av(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=Ig,i=null,r=Ug,a=n}return s&&r==="text/plain"&&(a=s,s=void 0),{action:i,method:t.toLowerCase(),encType:r,formData:s,body:a}}function Fx(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}async function pC(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function mC(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function gC(n,e,t){let i=await Promise.all(n.map(async r=>{let s=e.routes[r.route.id];if(s){let a=await pC(s,t);return a.links?a.links():[]}return[]}));return SC(i.flat(1).filter(mC).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function zS(n,e,t,i,r,s){let a=(c,f)=>t[f]?c.route.id!==t[f].route.id:!0,l=(c,f)=>{var p;return t[f].pathname!==c.pathname||((p=t[f].route.path)==null?void 0:p.endsWith("*"))&&t[f].params["*"]!==c.params["*"]};return s==="assets"?e.filter((c,f)=>a(c,f)||l(c,f)):s==="data"?e.filter((c,f)=>{var g;let p=i.routes[c.route.id];if(!p||!p.hasLoader)return!1;if(a(c,f)||l(c,f))return!0;if(c.route.shouldRevalidate){let v=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((g=t[0])==null?void 0:g.params)||{},nextUrl:new URL(n,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof v=="boolean")return v}return!0}):[]}function vC(n,e){return yC(n.map(t=>{let i=e.routes[t.route.id];if(!i)return[];let r=[i.module];return i.imports&&(r=r.concat(i.imports)),r}).flat(1))}function yC(n){return[...new Set(n)]}function xC(n){let e={},t=Object.keys(n).sort();for(let i of t)e[i]=n[i];return e}function SC(n,e){let t=new Set;return new Set(e),n.reduce((i,r)=>{let s=JSON.stringify(xC(r));return t.has(s)||(t.add(s),i.push({key:s,link:r})),i},[])}function _C(n){let e=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return e.pathname==="/"?e.pathname="_root.data":e.pathname=`${e.pathname.replace(/\/$/,"")}.data`,e}function MC(){let n=K.useContext(uh);return Fx(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function wC(){let n=K.useContext(rv);return Fx(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var kx=K.createContext(void 0);kx.displayName="FrameworkContext";function MT(){let n=K.useContext(kx);return Fx(n,"You must render this element inside a <HydratedRouter> element"),n}function TC(n,e){let t=K.useContext(kx),[i,r]=K.useState(!1),[s,a]=K.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:f,onMouseLeave:p,onTouchStart:g}=e,v=K.useRef(null);K.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let T=M=>{M.forEach(A=>{a(A.isIntersecting)})},w=new IntersectionObserver(T,{threshold:.5});return v.current&&w.observe(v.current),()=>{w.disconnect()}}},[n]),K.useEffect(()=>{if(i){let T=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(T)}}},[i]);let y=()=>{r(!0)},S=()=>{r(!1),a(!1)};return t?n!=="intent"?[s,v,{}]:[s,v,{onFocus:md(l,y),onBlur:md(c,S),onMouseEnter:md(f,y),onMouseLeave:md(p,S),onTouchStart:md(g,y)}]:[!1,v,{}]}function md(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function EC({page:n,...e}){let{router:t}=MC(),i=K.useMemo(()=>fT(t.routes,n,t.basename),[t.routes,n,t.basename]);return i?K.createElement(AC,{page:n,matches:i,...e}):null}function bC(n){let{manifest:e,routeModules:t}=MT(),[i,r]=K.useState([]);return K.useEffect(()=>{let s=!1;return gC(n,e,t).then(a=>{s||r(a)}),()=>{s=!0}},[n,e,t]),i}function AC({page:n,matches:e,...t}){let i=_c(),{manifest:r,routeModules:s}=MT(),{loaderData:a,matches:l}=wC(),c=K.useMemo(()=>zS(n,e,l,r,i,"data"),[n,e,l,r,i]),f=K.useMemo(()=>zS(n,e,l,r,i,"assets"),[n,e,l,r,i]),p=K.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let y=new Set,S=!1;if(e.forEach(w=>{var A;let M=r.routes[w.route.id];!M||!M.hasLoader||(!c.some(b=>b.route.id===w.route.id)&&w.route.id in a&&((A=s[w.route.id])!=null&&A.shouldRevalidate)||M.hasClientLoader?S=!0:y.add(w.route.id))}),y.size===0)return[];let T=_C(n);return S&&y.size>0&&T.searchParams.set("_routes",e.filter(w=>y.has(w.route.id)).map(w=>w.route.id).join(",")),[T.pathname+T.search]},[a,i,r,c,e,n,s]),g=K.useMemo(()=>vC(f,r),[f,r]),v=bC(f);return K.createElement(K.Fragment,null,p.map(y=>K.createElement("link",{key:y,rel:"prefetch",as:"fetch",href:y,...t})),g.map(y=>K.createElement("link",{key:y,rel:"modulepreload",href:y,...t})),v.map(({key:y,link:S})=>K.createElement("link",{key:y,...S})))}function CC(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var wT=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{wT&&(window.__reactRouterVersion="7.1.5")}catch{}function RC({basename:n,children:e,window:t}){let i=K.useRef();i.current==null&&(i.current=vA({window:t,v5Compat:!0}));let r=i.current,[s,a]=K.useState({action:r.action,location:r.location}),l=K.useCallback(c=>{K.startTransition(()=>a(c))},[a]);return K.useLayoutEffect(()=>r.listen(l),[r,l]),K.createElement(rC,{basename:n,children:e,location:s.location,navigationType:s.action,navigator:r})}var TT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ET=K.forwardRef(function({onClick:e,discover:t="render",prefetch:i="none",relative:r,reloadDocument:s,replace:a,state:l,target:c,to:f,preventScrollReset:p,viewTransition:g,...v},y){let{basename:S}=K.useContext(vo),T=typeof f=="string"&&TT.test(f),w,M=!1;if(typeof f=="string"&&T&&(w=f,wT))try{let U=new URL(window.location.href),O=f.startsWith("//")?new URL(U.protocol+f):new URL(f),$=$l(O.pathname,S);O.origin===U.origin&&$!=null?f=$+O.search+O.hash:M=!0}catch{mo(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let A=VA(f,{relative:r}),[b,R,I]=TC(i,v),k=IC(f,{replace:a,state:l,target:c,preventScrollReset:p,relative:r,viewTransition:g});function F(U){e&&e(U),U.defaultPrevented||k(U)}let z=K.createElement("a",{...v,...I,href:w||A,onClick:M||s?e:F,ref:CC(y,R),target:c,"data-discover":!T&&t==="render"?"true":void 0});return b&&!T?K.createElement(K.Fragment,null,z,K.createElement(EC,{page:A})):z});ET.displayName="Link";var PC=K.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:i="",end:r=!1,style:s,to:a,viewTransition:l,children:c,...f},p){let g=bp(a,{relative:f.relative}),v=_c(),y=K.useContext(rv),{navigator:S,basename:T}=K.useContext(vo),w=y!=null&&OC(g)&&l===!0,M=S.encodeLocation?S.encodeLocation(g).pathname:g.pathname,A=v.pathname,b=y&&y.navigation&&y.navigation.location?y.navigation.location.pathname:null;t||(A=A.toLowerCase(),b=b?b.toLowerCase():null,M=M.toLowerCase()),b&&T&&(b=$l(b,T)||b);const R=M!=="/"&&M.endsWith("/")?M.length-1:M.length;let I=A===M||!r&&A.startsWith(M)&&A.charAt(R)==="/",k=b!=null&&(b===M||!r&&b.startsWith(M)&&b.charAt(M.length)==="/"),F={isActive:I,isPending:k,isTransitioning:w},z=I?e:void 0,U;typeof i=="function"?U=i(F):U=[i,I?"active":null,k?"pending":null,w?"transitioning":null].filter(Boolean).join(" ");let O=typeof s=="function"?s(F):s;return K.createElement(ET,{...f,"aria-current":z,className:U,ref:p,style:O,to:a,viewTransition:l},typeof c=="function"?c(F):c)});PC.displayName="NavLink";var DC=K.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:i,replace:r,state:s,method:a=Ig,action:l,onSubmit:c,relative:f,preventScrollReset:p,viewTransition:g,...v},y)=>{let S=FC(),T=kC(l,{relative:f}),w=a.toLowerCase()==="get"?"get":"post",M=typeof l=="string"&&TT.test(l),A=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let R=b.nativeEvent.submitter,I=(R==null?void 0:R.getAttribute("formmethod"))||a;S(R||b.currentTarget,{fetcherKey:e,method:I,navigate:t,replace:r,state:s,relative:f,preventScrollReset:p,viewTransition:g})};return K.createElement("form",{ref:y,method:w,action:T,onSubmit:i?c:A,...v,"data-discover":!M&&n==="render"?"true":void 0})});DC.displayName="Form";function LC(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function bT(n){let e=K.useContext(uh);return fi(e,LC(n)),e}function IC(n,{target:e,replace:t,state:i,preventScrollReset:r,relative:s,viewTransition:a}={}){let l=sv(),c=_c(),f=bp(n,{relative:s});return K.useCallback(p=>{if(cC(p,e)){p.preventDefault();let g=t!==void 0?t:ip(c)===ip(f);l(n,{replace:g,state:i,preventScrollReset:r,relative:s,viewTransition:a})}},[c,l,f,t,i,e,n,r,s,a])}var UC=0,NC=()=>`__${String(++UC)}__`;function FC(){let{router:n}=bT("useSubmit"),{basename:e}=K.useContext(vo),t=eC();return K.useCallback(async(i,r={})=>{let{action:s,method:a,encType:l,formData:c,body:f}=dC(i,e);if(r.navigate===!1){let p=r.fetcherKey||NC();await n.fetch(p,t,r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:f,formMethod:r.method||a,formEncType:r.encType||l,flushSync:r.flushSync})}else await n.navigate(r.action||s,{preventScrollReset:r.preventScrollReset,formData:c,body:f,formMethod:r.method||a,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:t,flushSync:r.flushSync,viewTransition:r.viewTransition})},[n,e,t])}function kC(n,{relative:e}={}){let{basename:t}=K.useContext(vo),i=K.useContext(ul);fi(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),s={...bp(n||".",{relative:e})},a=_c();if(n==null){s.search=a.search;let l=new URLSearchParams(s.search),c=l.getAll("index");if(c.some(p=>p==="")){l.delete("index"),c.filter(g=>g).forEach(g=>l.append("index",g));let p=l.toString();s.search=p?`?${p}`:""}}return(!n||n===".")&&r.route.index&&(s.search=s.search?s.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(s.pathname=s.pathname==="/"?t:rl([t,s.pathname])),ip(s)}function OC(n,e={}){let t=K.useContext(vT);fi(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=bT("useViewTransitionState"),r=bp(n,{relative:e.relative});if(!t.isTransitioning)return!1;let s=$l(t.currentLocation.pathname,i)||t.currentLocation.pathname,a=$l(t.nextLocation.pathname,i)||t.nextLocation.pathname;return qg(r.pathname,a)!=null||qg(r.pathname,s)!=null}new TextEncoder;function ov(){const n=K.useContext(uT);if(n===void 0)throw new Error("useDarkMode must be used within a DarkModeProvider");return n}function BC(){const{isDarkMode:n}=ov(),e=n?"/img/LOGO_LIGHTu.png":"/img/LOGO_Dark.png";return pe.jsx("img",{src:e,alt:"Logo of my name",height:"86px",width:"370px"})}const zC="_toggle_gowk8_1",HC="_toggleBg_gowk8_17",GC="_toggleInput_gowk8_41",VC="_toggleSwitch_gowk8_63",Im={toggle:zC,toggleBg:HC,toggleInput:GC,toggleSwitch:VC},WC="_toggleSwitch_vrt0v_3",jC="_toggleSwitchFigureAlt_vrt0v_29",HS={toggleSwitch:WC,toggleSwitchFigureAlt:jC};function XC(){return pe.jsx("div",{className:HS.toggleSwitch,children:pe.jsx("div",{className:HS.toggleSwitchFigureAlt})})}const YC="_toggleSwitch_o1cmm_3",qC="_toggleSwitchFigure_o1cmm_31",GS={toggleSwitch:YC,toggleSwitchFigure:qC};function ZC(){return pe.jsx("div",{className:GS.toggleSwitch,children:pe.jsx("div",{className:GS.toggleSwitchFigure})})}function KC(){const{isDarkMode:n,toggleDarkMode:e}=ov();return pe.jsxs("label",{className:Im.toggle,children:[pe.jsx("input",{type:"checkbox",className:Im.toggleInput,checked:n,onChange:e}),pe.jsx("div",{className:Im.toggleBg}),pe.jsx("div",{className:Im.toggleSwitch,children:n?pe.jsx(XC,{}):pe.jsx(ZC,{})})]})}const QC="_navbar_filia_9",JC="_logo_filia_43",$C="_link_filia_103",gd={navbar:QC,logo:JC,link:$C};function AT({scrollTo:n}){const e=sv();return pe.jsxs("nav",{className:gd.navbar,children:[pe.jsx("div",{className:gd.logo,children:pe.jsx(BC,{})}),pe.jsxs("ul",{children:[pe.jsx("li",{children:pe.jsx("a",{style:{cursor:"pointer"},onClick:()=>e("/about"),className:gd.link,children:"About"})}),pe.jsx("li",{children:pe.jsx("a",{href:"#projects",onClick:t=>n(t,"projects"),className:gd.link,children:"Projects"})}),pe.jsx("li",{children:pe.jsx("a",{href:"#contact",onClick:t=>n(t,"contact"),className:gd.link,children:"Contact"})}),pe.jsx("li",{children:pe.jsx(KC,{})})]})]})}AT.propTypes={scrollTo:Mr.func};function CT(){console.log("Going back...");const n=sv();return()=>{n(-1)}}const eR="_btn_135or_1",tR="_arrow_135or_85",VS={btn:eR,arrow:tR},Ap=({children:n,onClick:e})=>pe.jsxs("button",{className:VS.btn,onClick:e,children:[n,pe.jsx("span",{className:VS.arrow,children:""})]});Ap.propTypes={children:vs.PropTypes.string.isRequired,onClick:vs.PropTypes.func.isRequired};const nR="_VideoTitle_qktd6_1",iR="_VideoContainer_qktd6_23",rR="_VideoBtn_qktd6_35",sR="_VideoPlayer_qktd6_45",yf={VideoTitle:nR,VideoContainer:iR,VideoBtn:rR,VideoPlayer:sR};function aR(){const n=CT();return pe.jsxs("section",{className:yf.VideoContainer,children:[pe.jsx("h1",{className:yf.VideoTitle,children:"Meet Me in 60 seconds!"}),pe.jsx("div",{className:yf.Video}),pe.jsx("div",{className:yf.Video,children:pe.jsxs("video",{className:yf.VideoPlayer,controls:!0,children:[pe.jsx("source",{src:"img/introduction.mp4",type:"video/mp4"}),"Your browser does not support the video tag."]})}),pe.jsx("div",{className:yf.VideoBtn,children:pe.jsx(Ap,{onClick:()=>{n()},children:"Go back"})})]})}const oR="_foundTitle_sb1uu_1",lR="_foundimg_sb1uu_21",uR="_foundBtn_sb1uu_33",Um={foundTitle:oR,foundimg:lR,foundBtn:uR};function cR(){const n=CT();return pe.jsxs("div",{className:Um.foundContainer,children:[pe.jsx("h1",{className:Um.foundTitle,children:"The page you are looking for could not be found !"}),pe.jsx("img",{src:"./img/not_found.jpg",alt:"Not Found",height:"260px",width:"423px",className:Um.foundimg}),pe.jsx("div",{className:Um.foundBtn,children:pe.jsx(Ap,{onClick:()=>{console.log("Button clicked! Calling moveBack..."),n()},children:"Go back"})})]})}const fR="_intro_15a8j_21",hR="_myName_15a8j_69",dR="_img_15a8j_79",A0={intro:fR,myName:hR,img:dR};function pR(){const n=sv(),e=()=>{console.log("Navigating to /video"),n("/video")};return pe.jsxs("section",{children:[pe.jsx("img",{src:"img/my_image.jpg",alt:"My image",height:"550px",className:A0.img}),pe.jsxs("div",{className:A0.intro,children:[pe.jsxs("h1",{children:["Hi, I am ",pe.jsx("br",{}),pe.jsx("span",{className:A0.myName,children:"Intissar Massaoud"})]}),pe.jsx("div",{children:"I am a first-year engineering student at the Higher Institute of Computer Science and Multimedia of Sfax, Tunisia, eager to gain hands-on experience through a summer internship. Passionate about frontend development, I specialize in React and modern web technologies, but I am also open to exploring other development languages and expanding my technical skill set. I thrive in dynamic environments where I can apply my problem-solving skills, learn from experienced professionals, and contribute to impactful projects. I am eager to collaborate, build user-friendly interfaces, and grow as a well-rounded developer."}),pe.jsx(Ap,{onClick:e,children:"skip and see video instead!"})]})]})}var mR=Object.defineProperty,gR=Object.defineProperties,vR=Object.getOwnPropertyDescriptors,WS=Object.getOwnPropertySymbols,yR=Object.prototype.hasOwnProperty,xR=Object.prototype.propertyIsEnumerable,jS=(n,e,t)=>e in n?mR(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,vd=(n,e)=>{for(var t in e||(e={}))yR.call(e,t)&&jS(n,t,e[t]);if(WS)for(var t of WS(e))xR.call(e,t)&&jS(n,t,e[t]);return n},yd=(n,e)=>gR(n,vR(e)),SR=class extends K.Component{constructor(n){super(n),this.ref=np.createRef(),this.state={style:{}};const e={reverse:!1,max:35,perspective:1e3,easing:"cubic-bezier(.03,.98,.52,.99)",scale:"1.1",speed:"1000",transition:!0,axis:null,reset:!0};this.width=null,this.height=null,this.left=null,this.top=null,this.transitionTimeout=null,this.updateCall=null,this.element=null,this.settings=Object.assign({},e,this.props.options),this.reverse=this.settings.reverse?-1:1,this.onMouseEnter=this.onMouseEnter.bind(this,this.props.onMouseEnter),this.onMouseMove=this.onMouseMove.bind(this,this.props.onMouseMove),this.onMouseLeave=this.onMouseLeave.bind(this,this.props.onMouseLeave)}componentDidMount(){this.element=this.ref.current,setTimeout(()=>{this.element.parentElement.querySelector(":hover")===this.element&&this.onMouseEnter()},0)}componentWillUnmount(){clearTimeout(this.transitionTimeout),cancelAnimationFrame(this.updateCall)}onMouseEnter(n=()=>{},e){return this.updateElementPosition(),this.setState(Object.assign({},this.state,{style:yd(vd({},this.state.style),{willChange:"transform"})})),this.setTransition(),n(e)}reset(){window.requestAnimationFrame(()=>{this.setState(Object.assign({},this.state,{style:yd(vd({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(0deg) rotateY(0deg) scale3d(1, 1, 1)`})}))})}onMouseMove(n=()=>{},e){return e.persist(),this.updateCall!==null&&window.cancelAnimationFrame(this.updateCall),this.event=e,this.updateCall=requestAnimationFrame(this.update.bind(this,e)),n(e)}setTransition(){clearTimeout(this.transitionTimeout),this.setState(Object.assign({},this.state,{style:yd(vd({},this.state.style),{transition:`${this.settings.speed}ms ${this.settings.easing}`})})),this.transitionTimeout=setTimeout(()=>{this.setState(Object.assign({},this.state,{style:yd(vd({},this.state.style),{transition:""})}))},this.settings.speed)}onMouseLeave(n=()=>{},e){return this.setTransition(),this.settings.reset&&this.reset(),n(e)}getValues(n){const e=(n.nativeEvent.clientX-this.left)/this.width,t=(n.nativeEvent.clientY-this.top)/this.height,i=Math.min(Math.max(e,0),1),r=Math.min(Math.max(t,0),1),s=(this.reverse*(this.settings.max/2-i*this.settings.max)).toFixed(2),a=(this.reverse*(r*this.settings.max-this.settings.max/2)).toFixed(2),l=i*100,c=r*100;return{tiltX:s,tiltY:a,percentageX:l,percentageY:c}}updateElementPosition(){const n=this.element.getBoundingClientRect();this.width=this.element.offsetWidth,this.height=this.element.offsetHeight,this.left=n.left,this.top=n.top}update(n){const e=this.getValues(n);this.setState(Object.assign({},this.state,{style:yd(vd({},this.state.style),{transform:`perspective(${this.settings.perspective}px) rotateX(${this.settings.axis==="x"?0:e.tiltY}deg) rotateY(${this.settings.axis==="y"?0:e.tiltX}deg) scale3d(${this.settings.scale}, ${this.settings.scale}, ${this.settings.scale})`})})),this.updateCall=null}render(){const n=Object.assign({},this.props.style,this.state.style);return pe.jsx("div",{style:n,ref:this.ref,className:this.props.className,onMouseEnter:this.onMouseEnter,onMouseMove:this.onMouseMove,onMouseLeave:this.onMouseLeave,children:this.props.children})}},xd={},C0={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var XS;function RT(){return XS||(XS=1,function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",a=0;a<arguments.length;a++){var l=arguments[a];l&&(s=r(s,i(l)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var a="";for(var l in s)e.call(s,l)&&s[l]&&(a=r(a,l));return a}function r(s,a){return a?s?s+" "+a:s+a:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()}(C0)),C0.exports}var YS;function _R(){if(YS)return xd;YS=1,xd.__esModule=!0,xd.default=void 0;var n=i(oh()),e=i(Lx()),t=i(RT());function i(a){return a&&a.__esModule?a:{default:a}}const r=({animate:a=!0,className:l="",layout:c="2-columns",lineColor:f="#FFF",children:p})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",f),n.default.createElement("div",{className:(0,t.default)(l,"vertical-timeline",{"vertical-timeline--animate":a,"vertical-timeline--two-columns":c==="2-columns","vertical-timeline--one-column-left":c==="1-column"||c==="1-column-left","vertical-timeline--one-column-right":c==="1-column-right"})},p));r.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]).isRequired,className:e.default.string,animate:e.default.bool,layout:e.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:e.default.string};var s=r;return xd.default=s,xd}var Sd={};function Uy(){return Uy=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Uy.apply(this,arguments)}function MR(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,Ny(n,e)}function Ny(n,e){return Ny=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},Ny(n,e)}function wR(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var Fy=new Map,Nm=new WeakMap,qS=0,PT=void 0;function TR(n){PT=n}function ER(n){return n?(Nm.has(n)||(qS+=1,Nm.set(n,qS.toString())),Nm.get(n)):"0"}function bR(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?ER(n.root):n[e])}).toString()}function AR(n){var e=bR(n),t=Fy.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(a){a.forEach(function(l){var c,f=l.isIntersecting&&r.some(function(p){return l.intersectionRatio>=p});n.trackVisibility&&typeof l.isVisible>"u"&&(l.isVisible=f),(c=i.get(l.target))==null||c.forEach(function(p){p(f,l)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},Fy.set(e,t)}return t}function Ox(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=PT),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=AR(t),a=s.id,l=s.observer,c=s.elements,f=c.get(n)||[];return c.has(n)||c.set(n,f),f.push(e),l.observe(n),function(){f.splice(f.indexOf(e),1),f.length===0&&(c.delete(n),l.unobserve(n)),c.size===0&&(l.disconnect(),Fy.delete(a))}}var CR=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function ZS(n){return typeof n.children!="function"}var Zg=function(n){MR(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,a){s&&r.props.triggerOnce&&r.unobserve(),ZS(r.props)||r.setState({inView:s,entry:a}),r.props.onChange&&r.props.onChange(s,a)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,a=r.root,l=r.rootMargin,c=r.trackVisibility,f=r.delay,p=r.fallbackInView;this._unobserveCb=Ox(this.node,this.handleChange,{threshold:s,root:a,rootMargin:l,trackVisibility:c,delay:f},p)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!ZS(this.props)){var r=this.state,s=r.inView,a=r.entry;return this.props.children({inView:s,entry:a,ref:this.handleNode})}var l=this.props,c=l.children,f=l.as,p=wR(l,CR);return K.createElement(f||"div",Uy({ref:this.handleNode},p),c)},e}(K.Component);Zg.displayName="InView";Zg.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function RR(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,a=e.root,l=e.triggerOnce,c=e.skip,f=e.initialInView,p=e.fallbackInView,g=K.useRef(),v=K.useState({inView:!!f}),y=v[0],S=v[1],T=K.useCallback(function(M){g.current!==void 0&&(g.current(),g.current=void 0),!c&&M&&(g.current=Ox(M,function(A,b){S({inView:A,entry:b}),b.isIntersecting&&l&&g.current&&(g.current(),g.current=void 0)},{root:a,rootMargin:s,threshold:t,trackVisibility:r,delay:i},p))},[Array.isArray(t)?t.toString():t,a,s,l,c,r,p,i]);K.useEffect(function(){!g.current&&y.entry&&!l&&!c&&S({inView:!!f})});var w=[T,y.inView,y.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const PR=Object.freeze(Object.defineProperty({__proto__:null,InView:Zg,default:Zg,defaultFallbackInView:TR,observe:Ox,useInView:RR},Symbol.toStringTag,{value:"Module"})),DR=Jb(PR);var KS;function LR(){if(KS)return Sd;KS=1,Sd.__esModule=!0,Sd.default=void 0;var n=r(oh()),e=r(Lx()),t=r(RT()),i=DR;function r(l){return l&&l.__esModule?l:{default:l}}const s=({children:l="",className:c="",contentArrowStyle:f=null,contentStyle:p=null,date:g="",dateClassName:v="",icon:y=null,iconClassName:S="",iconOnClick:T=null,onTimelineElementClick:w=null,iconStyle:M=null,id:A="",position:b="",style:R=null,textClassName:I="",intersectionObserverProps:k={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:F=!1,shadowSize:z="small"})=>n.default.createElement(i.InView,k,({inView:U,ref:O})=>n.default.createElement("div",{ref:O,id:A,className:(0,t.default)(c,"vertical-timeline-element",{"vertical-timeline-element--left":b==="left","vertical-timeline-element--right":b==="right","vertical-timeline-element--no-children":l===""}),style:R},n.default.createElement(n.default.Fragment,null,n.default.createElement("span",{style:M,onClick:T,className:(0,t.default)(S,"vertical-timeline-element-icon",`shadow-size-${z}`,{"bounce-in":U||F,"is-hidden":!(U||F)})},y),n.default.createElement("div",{style:p,onClick:w,className:(0,t.default)(I,"vertical-timeline-element-content",{"bounce-in":U||F,"is-hidden":!(U||F)})},n.default.createElement("div",{style:f,className:"vertical-timeline-element-content-arrow"}),l,n.default.createElement("span",{className:(0,t.default)(v,"vertical-timeline-element-date")},g)))));s.propTypes={children:e.default.oneOfType([e.default.arrayOf(e.default.node),e.default.node]),className:e.default.string,contentArrowStyle:e.default.shape({}),contentStyle:e.default.shape({}),date:e.default.node,dateClassName:e.default.string,icon:e.default.element,iconClassName:e.default.string,iconStyle:e.default.shape({}),iconOnClick:e.default.func,onTimelineElementClick:e.default.func,id:e.default.string,position:e.default.string,style:e.default.shape({}),textClassName:e.default.string,visible:e.default.bool,shadowSize:e.default.string,intersectionObserverProps:e.default.shape({root:e.default.object,rootMargin:e.default.string,threshold:e.default.number,triggerOnce:e.default.bool})};var a=s;return Sd.default=a,Sd}var R0,QS;function IR(){return QS||(QS=1,R0={VerticalTimeline:_R().default,VerticalTimelineElement:LR().default}),R0}var JS=IR();const UR="_ProjectsContainer_nlczj_1",NR="_sectionTitle_nlczj_71",$S={ProjectsContainer:UR,sectionTitle:NR},FR="_card_1b0u6_1",kR="_skill_1b0u6_55",OR="_projectTitle_1b0u6_77",BR="_name_1b0u6_101",zR="_img_1b0u6_111",_d={card:FR,skill:kR,projectTitle:OR,name:BR,img:zR};function DT({project:n}){return pe.jsxs("div",{className:_d.card,children:[pe.jsx("h1",{className:_d.projectTitle,children:n.title}),pe.jsx("p",{children:n.description}),n.skills.map(e=>pe.jsxs("div",{className:_d.skill,children:[pe.jsx("img",{src:e.image,alt:e.name,className:_d.img}),pe.jsx("h2",{className:_d.name,children:e.name})]},e.name))]})}DT.propTypes={project:Mr.shape({title:Mr.string.isRequired,worked:Mr.string,description:Mr.string.isRequired,skills:Mr.arrayOf(Mr.shape({name:Mr.string.isRequired,image:Mr.string.isRequired})).isRequired}).isRequired};function HR(){const{isDarkMode:n}=ov(),e=[{id:1,title:"Supermarket Stock manager",description:"A smart supermarket stock manager enabling seamless stock tracking with intuitive CRUD operations.",skills:[{name:"PHP",image:"/img/php.png"}]},{id:2,title:"Weather Forecast APP",description:"In this project, I learned how to integrate APIs and implemented a dynamic weather dashboard to visualize forecasts with intuitive charts. User authentication: Sign up to access personalized features like posting updates. Suggestions for activities and clothing boutiques, tailored to the weather conditions. Interactive map functionality: Get weather data for any location with a simple click on the Map!",skills:[{name:"Streamlit",image:"/img/streamlit.png"},{name:"Firebase",image:"/img/firebase.png"}]},{id:3,title:"Package Tracking APP",worked:"within a team",description:"A collaborative project where I worked with a team to overcome multiple server challenges. Despite the technical setbacks, we efficiently identified issues, implemented fixes, and ensured the system's stability and performance!",skills:[{name:"Servlet/JSP",image:"/img/java.png"},{name:"MySQL",image:"/img/mysql.png"},{name:"Bootstrap",image:"/img/bootstrap.jpg"}]},{id:4,title:"Omnifood Project",description:"This project, completed step by step alongside Jonas Schmedtmann in his Udemy course 'Build Responsive Real-World Websites with HTML and CSS,' provided hands-on experience in building a fully responsive website where I understood a lot of CSS and design tricks.",skills:[{name:"HTML",image:"/img/html.png"},{name:"CSS",image:"/img/css.png"}]},{id:5,title:"Event Organizer",description:"This app is an Event Organizer tool designed to manage participants, tasks, and deadlines for event planning. I learned in this project, React State Management, Event Handling, Conditional Rendering, Calendar Integration, Form Handling, and Data Filtering.",skills:[{name:"React",image:"/img/react.png"}]},{id:6,title:"The Wild Oasis",description:"This project, completed step by step alongside Jonas Schmedtmann in his Udemy course 'The Ultimate React Course 2023 React Redux.' During this course, I comprehended Redux, custom hooks, React Router, and advanced React patterns.",skills:[{name:"Supabase",image:"/img/supabase.png"},{name:"React Query",image:"/img/query.png"},{name:"Styled Components",image:"/img/styled.png"},{name:"React Router",image:"/img/router.png"},{name:"Context API",image:"/img/react.png"},{name:"React Hook Form",image:"/img/form.png"}]}];return pe.jsxs("div",{children:[pe.jsx("div",{className:$S.sectionTitle,children:"My Projects"}),pe.jsx("div",{className:$S.ProjectsContainer,children:pe.jsx(JS.VerticalTimeline,{className:n?"dark-mode":"",children:e.map(t=>pe.jsx(JS.VerticalTimelineElement,{contentStyle:{background:n?"#0b5e75ae":"#f3f4f6",color:n?"#f9fafb":"#333"},contentArrowStyle:{borderRight:n?"7px solid #486398":"7px solid #00a6fb"},icon:pe.jsx("img",{src:"/img/timeline.png",alt:"Timeline Icon",style:{width:"100%",height:"100%",borderRadius:"50%",objectFit:"cover"},onClick:()=>{window.open("/projects/conf-talk","_blank")}}),style:{cursor:"pointer"},children:pe.jsx(SR,{children:pe.jsx(DT,{project:t})})},t.id))})})]})}class Cp{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const GR=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},wr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:GR()},Bx=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},VR=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=Bx(n);wr.publicKey=t.publicKey,wr.blockHeadless=t.blockHeadless,wr.storageProvider=t.storageProvider,wr.blockList=t.blockList,wr.limitRate=t.limitRate,wr.origin=t.origin||e},LT=async(n,e,t={})=>{const i=await fetch(wr.origin+n,{method:"POST",headers:t,body:e}),r=await i.text(),s=new Cp(i.status,r);if(i.ok)return s;throw s},IT=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},WR=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},UT=n=>n.webdriver||!n.languages||n.languages.length===0,NT=()=>new Cp(451,"Unavailable For Headless Browser"),jR=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},XR=n=>{var e;return!((e=n.list)!=null&&e.length)||!n.watchVariable},YR=(n,e)=>n instanceof FormData?n.get(e):n[e],FT=(n,e)=>{if(XR(n))return!1;jR(n.list,n.watchVariable);const t=YR(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},kT=()=>new Cp(403,"Forbidden"),qR=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},ZR=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},OT=async(n,e,t)=>{if(!e.throttle||!t)return!1;qR(e.throttle,e.id);const i=e.id||n;return await ZR(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},BT=()=>new Cp(429,"Too Many Requests"),KR=async(n,e,t,i)=>{const r=Bx(i),s=r.publicKey||wr.publicKey,a=r.blockHeadless||wr.blockHeadless,l=r.storageProvider||wr.storageProvider,c={...wr.blockList,...r.blockList},f={...wr.limitRate,...r.limitRate};return a&&UT(navigator)?Promise.reject(NT()):(IT(s,n,e),WR(t),t&&FT(c,t)?Promise.reject(kT()):await OT(location.pathname,f,l)?Promise.reject(BT()):LT("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},QR=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},JR=n=>typeof n=="string"?document.querySelector(n):n,$R=async(n,e,t,i)=>{const r=Bx(i),s=r.publicKey||wr.publicKey,a=r.blockHeadless||wr.blockHeadless,l=wr.storageProvider||r.storageProvider,c={...wr.blockList,...r.blockList},f={...wr.limitRate,...r.limitRate};if(a&&UT(navigator))return Promise.reject(NT());const p=JR(t);IT(s,n,e),QR(p);const g=new FormData(p);return FT(c,g)?Promise.reject(kT()):await OT(location.pathname,f,l)?Promise.reject(BT()):(g.append("lib_version","4.4.1"),g.append("service_id",n),g.append("template_id",e),g.append("user_id",s),LT("/api/v1.0/email/send-form",g))},eP={init:VR,send:KR,sendForm:$R,EmailJSResponseStatus:Cp},tP="_title_10dut_1",nP="_container_10dut_11",iP="_underline_10dut_45",rP="_socialIcons_10dut_125",sP="_form_10dut_141",aP="_socialIcon_10dut_125",qo={title:tP,container:nP,underline:iP,socialIcons:rP,form:sP,socialIcon:aP},oP="_scrollingBanner_vdyju_17",lP="_mantra_vdyju_51",e_={scrollingBanner:oP,mantra:lP};function ky({children:n}){return pe.jsx("div",{className:e_.scrollingBanner,children:pe.jsx("p",{className:e_.mantra,children:n})})}ky.propTypes={children:Mr.string.isRequired};function uP(){const n="service_jsaafwe",e="template_3p8lzjk",t="stdeFlGtIQI3Q69WO",[i,r]=K.useState(""),[s,a]=K.useState(""),l=c=>{c.preventDefault(),eP.sendForm(n,e,c.target,t).then(()=>{alert("Message sent successfully")},f=>{alert("Error: "+f.text)})};return pe.jsxs(pe.Fragment,{children:[pe.jsx(ky,{children:"Ambition * Hard Work * Persistance * Engagement"}),pe.jsx(ky,{children:"Dynamism * Professionalism * Clean Code * GROWTH"}),pe.jsxs("div",{className:qo.container,children:[pe.jsx("form",{onSubmit:l,children:pe.jsxs("div",{className:qo.form,children:[pe.jsx("input",{type:"email",name:"email",className:qo.underline,placeholder:"Your Email",value:i,onChange:c=>r(c.target.value),required:!0}),pe.jsx("textarea",{className:qo.underline,name:"message",placeholder:"Your Message",value:s,onChange:c=>a(c.target.value),required:!0}),pe.jsx(Ap,{type:"submit",onClick:l,className:qo.button,children:"Send"})]})}),pe.jsxs("div",{className:qo.socialIcons,children:[pe.jsx("h1",{className:qo.title,children:"Let us get in touch!"}),pe.jsx("a",{className:qo.socialIcon,target:"_blank",href:"https://github.com/intissar127",children:pe.jsx("ion-icon",{name:"logo-github"})}),pe.jsx("a",{target:"_blank",className:qo.socialIcon,href:"https://www.linkedin.com/in/massaoud-intissar-789417250/",children:pe.jsx("ion-icon",{name:"logo-linkedin"})})]})]})]})}const cP="_content_1ungr_1",fP="_title_1ungr_57",hP="_tertiarytTitle_1ungr_67",dP="_paragraph_1ungr_77",Fm={content:cP,title:fP,tertiarytTitle:hP,paragraph:dP};function pP(){const[n,e]=K.useState({x:0,y:0}),t=i=>{e({x:i.clientX,y:i.clientY})};return pe.jsxs("div",{className:Fm.content,style:{background:`radial-gradient(circle at ${n.x}px ${n.y}px, rgb(248, 238, 216) 15%, rgba(0, 0, 0, 1)  60%)`},onMouseMove:t,children:[pe.jsx("h1",{className:Fm.title,children:"Hire Me Before Elon Musk Does! "}),pe.jsx("h3",{className:Fm.tertiarytTitle,children:"Why you should hire me?"}),pe.jsxs("div",{className:Fm.paragraph,children:["I bring a unique blend of technical expertise, problem-solving skills, and a passion for ",pe.jsx("span",{children:"clean"})," code. My adaptability allows me to thrive in dynamic environments. Beyond technical skills, I am a collaborative team player who values clear communication and continuous improvement. I am dedicated to continuous learning. With my drive for excellence, I am confident in my ability to contribute meaningfully to your projects."]})]})}/**
 * @license
 * Copyright 2010-2023 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const yo="155",mP={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},gP={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},vP=0,zT=1,yP=2,xP=3,HT=0,lv=1,jd=2,ka=3,go=0,Zi=1,Qr=2,SP=2,Kn=0,fc=1,Kg=2,Oy=3,By=4,GT=5,tc=100,VT=101,WT=102,zy=103,Hy=104,jT=200,XT=201,YT=202,qT=203,zx=204,Hx=205,ZT=206,KT=207,QT=208,JT=209,$T=210,Gx=0,Vx=1,Qg=2,rp=3,sp=4,Wx=5,jx=6,uv=7,Rp=0,eE=1,tE=2,fo=0,nE=1,iE=2,rE=3,Xx=4,sE=5,cv=300,ol=301,eu=302,ap=303,op=304,ch=306,Ga=1e3,qi=1001,lp=1002,$t=1003,Jg=1004,_P=1004,Xd=1005,MP=1005,Et=1006,Yx=1007,wP=1007,tu=1008,TP=1008,zn=1009,aE=1010,oE=1011,fv=1012,qx=1013,za=1014,li=1015,Tr=1016,Zx=1017,Kx=1018,sl=1020,lE=1021,Dn=1023,hv=1024,uE=1025,Jl=1026,nu=1027,dv=1028,Qx=1029,Jx=1030,$x=1031,e1=1033,Ng=33776,Fg=33777,kg=33778,Og=33779,Gy=35840,Vy=35841,Wy=35842,jy=35843,cE=36196,Xy=37492,Yy=37496,qy=37808,Zy=37809,Ky=37810,Qy=37811,Jy=37812,$y=37813,ex=37814,tx=37815,nx=37816,ix=37817,rx=37818,sx=37819,ax=37820,ox=37821,Bg=36492,fE=36283,lx=36284,ux=36285,cx=36286,hE=2200,dE=2201,pE=2202,up=2300,cp=2301,zg=2302,rc=2400,sc=2401,fp=2402,pv=2500,t1=2501,EP=0,bP=1,AP=2,n1=3e3,al=3001,Ji=3200,ia=3201,cl=0,mE=1,Ha="",yt="srgb",Jr="srgb-linear",i1="display-p3",CP=0,Hg=7680,RP=7681,PP=7682,DP=7683,LP=34055,IP=34056,UP=5386,NP=512,FP=513,kP=514,OP=515,BP=516,zP=517,HP=518,gE=519,vE=512,yE=513,xE=514,SE=515,_E=516,ME=517,wE=518,TE=519,hp=35044,GP=35048,VP=35040,WP=35045,jP=35049,XP=35041,YP=35046,qP=35050,ZP=35042,KP="100",$g="300 es",ev=1035,co=2e3,dp=2001;class sa{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,a=r.length;s<a;s++)r[s].call(this,e);e.target=null}}}const Ur=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let t_=1234567;const hc=Math.PI/180,ih=180/Math.PI;function ks(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Ur[n&255]+Ur[n>>8&255]+Ur[n>>16&255]+Ur[n>>24&255]+"-"+Ur[e&255]+Ur[e>>8&255]+"-"+Ur[e>>16&15|64]+Ur[e>>24&255]+"-"+Ur[t&63|128]+Ur[t>>8&255]+"-"+Ur[t>>16&255]+Ur[t>>24&255]+Ur[i&255]+Ur[i>>8&255]+Ur[i>>16&255]+Ur[i>>24&255]).toLowerCase()}function yi(n,e,t){return Math.max(e,Math.min(t,n))}function r1(n,e){return(n%e+e)%e}function QP(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function JP(n,e,t){return n!==e?(t-n)/(e-n):0}function Yd(n,e,t){return(1-t)*n+t*e}function $P(n,e,t,i){return Yd(n,e,1-Math.exp(-t*i))}function eD(n,e=1){return e-Math.abs(r1(n,e*2)-e)}function tD(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function nD(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function iD(n,e){return n+Math.floor(Math.random()*(e-n+1))}function rD(n,e){return n+Math.random()*(e-n)}function sD(n){return n*(.5-Math.random())}function aD(n){n!==void 0&&(t_=n);let e=t_+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function oD(n){return n*hc}function lD(n){return n*ih}function fx(n){return(n&n-1)===0&&n!==0}function EE(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function tv(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function uD(n,e,t,i,r){const s=Math.cos,a=Math.sin,l=s(t/2),c=a(t/2),f=s((e+i)/2),p=a((e+i)/2),g=s((e-i)/2),v=a((e-i)/2),y=s((i-e)/2),S=a((i-e)/2);switch(r){case"XYX":n.set(l*p,c*g,c*v,l*f);break;case"YZY":n.set(c*v,l*p,c*g,l*f);break;case"ZXZ":n.set(c*g,c*v,l*p,l*f);break;case"XZX":n.set(l*p,c*S,c*y,l*f);break;case"YXY":n.set(c*y,l*p,c*S,l*f);break;case"ZYZ":n.set(c*S,c*y,l*p,l*f);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function xs(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function on(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const bE={DEG2RAD:hc,RAD2DEG:ih,generateUUID:ks,clamp:yi,euclideanModulo:r1,mapLinear:QP,inverseLerp:JP,lerp:Yd,damp:$P,pingpong:eD,smoothstep:tD,smootherstep:nD,randInt:iD,randFloat:rD,randFloatSpread:sD,seededRandom:aD,degToRad:oD,radToDeg:lD,isPowerOfTwo:fx,ceilPowerOfTwo:EE,floorPowerOfTwo:tv,setQuaternionFromProperEuler:uD,normalize:on,denormalize:xs};class _e{constructor(e=0,t=0){_e.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(yi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,a=this.y-e.y;return this.x=s*i-a*r+e.x,this.y=s*r+a*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class sn{constructor(e,t,i,r,s,a,l,c,f){sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,l,c,f)}set(e,t,i,r,s,a,l,c,f){const p=this.elements;return p[0]=e,p[1]=r,p[2]=l,p[3]=t,p[4]=s,p[5]=c,p[6]=i,p[7]=a,p[8]=f,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],l=i[3],c=i[6],f=i[1],p=i[4],g=i[7],v=i[2],y=i[5],S=i[8],T=r[0],w=r[3],M=r[6],A=r[1],b=r[4],R=r[7],I=r[2],k=r[5],F=r[8];return s[0]=a*T+l*A+c*I,s[3]=a*w+l*b+c*k,s[6]=a*M+l*R+c*F,s[1]=f*T+p*A+g*I,s[4]=f*w+p*b+g*k,s[7]=f*M+p*R+g*F,s[2]=v*T+y*A+S*I,s[5]=v*w+y*b+S*k,s[8]=v*M+y*R+S*F,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8];return t*a*p-t*l*f-i*s*p+i*l*c+r*s*f-r*a*c}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=p*a-l*f,v=l*c-p*s,y=f*s-a*c,S=t*g+i*v+r*y;if(S===0)return this.set(0,0,0,0,0,0,0,0,0);const T=1/S;return e[0]=g*T,e[1]=(r*f-p*i)*T,e[2]=(l*i-r*a)*T,e[3]=v*T,e[4]=(p*t-r*c)*T,e[5]=(r*s-l*t)*T,e[6]=y*T,e[7]=(i*c-f*t)*T,e[8]=(a*t-i*s)*T,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,a,l){const c=Math.cos(s),f=Math.sin(s);return this.set(i*c,i*f,-i*(c*a+f*l)+a+e,-r*f,r*c,-r*(-f*a+c*l)+l+t,0,0,1),this}scale(e,t){return this.premultiply(P0.makeScale(e,t)),this}rotate(e){return this.premultiply(P0.makeRotation(-e)),this}translate(e,t){return this.premultiply(P0.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const P0=new sn;function AE(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const cD={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function qf(n,e){return new cD[n](e)}function pp(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}const n_={};function qd(n){n in n_||(n_[n]=!0,console.warn(n))}function th(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function D0(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const fD=new sn().fromArray([.8224621,.0331941,.0170827,.177538,.9668058,.0723974,-1e-7,1e-7,.9105199]),hD=new sn().fromArray([1.2249401,-.0420569,-.0196376,-.2249404,1.0420571,-.0786361,1e-7,0,1.0982735]);function dD(n){return n.convertSRGBToLinear().applyMatrix3(hD)}function pD(n){return n.applyMatrix3(fD).convertLinearToSRGB()}const mD={[Jr]:n=>n,[yt]:n=>n.convertSRGBToLinear(),[i1]:dD},gD={[Jr]:n=>n,[yt]:n=>n.convertLinearToSRGB(),[i1]:pD},ta={enabled:!0,get legacyMode(){return console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),!this.enabled},set legacyMode(n){console.warn("THREE.ColorManagement: .legacyMode=false renamed to .enabled=true in r150."),this.enabled=!n},get workingColorSpace(){return Jr},set workingColorSpace(n){console.warn("THREE.ColorManagement: .workingColorSpace is readonly.")},convert:function(n,e,t){if(this.enabled===!1||e===t||!e||!t)return n;const i=mD[e],r=gD[t];if(i===void 0||r===void 0)throw new Error(`Unsupported color space conversion, "${e}" to "${t}".`);return r(i(n))},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)}};let xf;class s1{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{xf===void 0&&(xf=pp("canvas")),xf.width=e.width,xf.height=e.height;const i=xf.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=xf}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=pp("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let a=0;a<s.length;a++)s[a]=th(s[a]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(th(t[i]/255)*255):t[i]=th(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let vD=0;class ac{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:vD++}),this.uuid=ks(),this.data=e,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let a=0,l=r.length;a<l;a++)r[a].isDataTexture?s.push(L0(r[a].image)):s.push(L0(r[a]))}else s=L0(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function L0(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?s1.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let yD=0;class Qn extends sa{constructor(e=Qn.DEFAULT_IMAGE,t=Qn.DEFAULT_MAPPING,i=qi,r=qi,s=Et,a=tu,l=Dn,c=zn,f=Qn.DEFAULT_ANISOTROPY,p=Ha){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:yD++}),this.uuid=ks(),this.name="",this.source=new ac(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=a,this.anisotropy=f,this.format=l,this.internalFormat=null,this.type=c,this.offset=new _e(0,0),this.repeat=new _e(1,1),this.center=new _e(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,typeof p=="string"?this.colorSpace=p:(qd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=p===al?yt:Ha),this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.needsPMREMUpdate=!1}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==cv)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Ga:e.x=e.x-Math.floor(e.x);break;case qi:e.x=e.x<0?0:1;break;case lp:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Ga:e.y=e.y-Math.floor(e.y);break;case qi:e.y=e.y<0?0:1;break;case lp:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}get encoding(){return qd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace===yt?al:n1}set encoding(e){qd("THREE.Texture: Property .encoding has been replaced by .colorSpace."),this.colorSpace=e===al?yt:Ha}}Qn.DEFAULT_IMAGE=null;Qn.DEFAULT_MAPPING=cv;Qn.DEFAULT_ANISOTROPY=1;class hn{constructor(e=0,t=0,i=0,r=1){hn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,a=e.elements;return this.x=a[0]*t+a[4]*i+a[8]*r+a[12]*s,this.y=a[1]*t+a[5]*i+a[9]*r+a[13]*s,this.z=a[2]*t+a[6]*i+a[10]*r+a[14]*s,this.w=a[3]*t+a[7]*i+a[11]*r+a[15]*s,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const c=e.elements,f=c[0],p=c[4],g=c[8],v=c[1],y=c[5],S=c[9],T=c[2],w=c[6],M=c[10];if(Math.abs(p-v)<.01&&Math.abs(g-T)<.01&&Math.abs(S-w)<.01){if(Math.abs(p+v)<.1&&Math.abs(g+T)<.1&&Math.abs(S+w)<.1&&Math.abs(f+y+M-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const b=(f+1)/2,R=(y+1)/2,I=(M+1)/2,k=(p+v)/4,F=(g+T)/4,z=(S+w)/4;return b>R&&b>I?b<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(b),r=k/i,s=F/i):R>I?R<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(R),i=k/r,s=z/r):I<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(I),i=F/s,r=z/s),this.set(i,r,s,t),this}let A=Math.sqrt((w-S)*(w-S)+(g-T)*(g-T)+(v-p)*(v-p));return Math.abs(A)<.001&&(A=1),this.x=(w-S)/A,this.y=(g-T)/A,this.z=(v-p)/A,this.w=Math.acos((f+y+M-1)/2),this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this.w=this.w<0?Math.ceil(this.w):Math.floor(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class CE extends sa{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new hn(0,0,e,t),this.scissorTest=!1,this.viewport=new hn(0,0,e,t);const r={width:e,height:t,depth:1};i.encoding!==void 0&&(qd("THREE.WebGLRenderTarget: option.encoding has been replaced by option.colorSpace."),i.colorSpace=i.encoding===al?yt:Ha),this.texture=new Qn(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.flipY=!1,this.texture.generateMipmaps=i.generateMipmaps!==void 0?i.generateMipmaps:!1,this.texture.internalFormat=i.internalFormat!==void 0?i.internalFormat:null,this.texture.minFilter=i.minFilter!==void 0?i.minFilter:Et,this.depthBuffer=i.depthBuffer!==void 0?i.depthBuffer:!0,this.stencilBuffer=i.stencilBuffer!==void 0?i.stencilBuffer:!1,this.depthTexture=i.depthTexture!==void 0?i.depthTexture:null,this.samples=i.samples!==void 0?i.samples:0}setSize(e,t,i=1){(this.width!==e||this.height!==t||this.depth!==i)&&(this.width=e,this.height=t,this.depth=i,this.texture.image.width=e,this.texture.image.height=t,this.texture.image.depth=i,this.dispose()),this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.texture=e.texture.clone(),this.texture.isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new ac(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class an extends CE{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class mv extends Qn{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$t,this.minFilter=$t,this.wrapR=qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class xD extends an{constructor(e=1,t=1,i=1){super(e,t),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new mv(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class dc extends Qn{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=$t,this.minFilter=$t,this.wrapR=qi,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class SD extends an{constructor(e=1,t=1,i=1){super(e,t),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new dc(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class RE extends an{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLMultipleRenderTargets=!0;const s=this.texture;this.texture=[];for(let a=0;a<i;a++)this.texture[a]=s.clone(),this.texture[a].isRenderTargetTexture=!0}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.texture.length;r<s;r++)this.texture[r].image.width=e,this.texture[r].image.height=t,this.texture[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}copy(e){this.dispose(),this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.texture.length=0;for(let t=0,i=e.texture.length;t<i;t++)this.texture[t]=e.texture[t].clone(),this.texture[t].isRenderTargetTexture=!0;return this}}class Qi{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,a,l){let c=i[r+0],f=i[r+1],p=i[r+2],g=i[r+3];const v=s[a+0],y=s[a+1],S=s[a+2],T=s[a+3];if(l===0){e[t+0]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g;return}if(l===1){e[t+0]=v,e[t+1]=y,e[t+2]=S,e[t+3]=T;return}if(g!==T||c!==v||f!==y||p!==S){let w=1-l;const M=c*v+f*y+p*S+g*T,A=M>=0?1:-1,b=1-M*M;if(b>Number.EPSILON){const I=Math.sqrt(b),k=Math.atan2(I,M*A);w=Math.sin(w*k)/I,l=Math.sin(l*k)/I}const R=l*A;if(c=c*w+v*R,f=f*w+y*R,p=p*w+S*R,g=g*w+T*R,w===1-l){const I=1/Math.sqrt(c*c+f*f+p*p+g*g);c*=I,f*=I,p*=I,g*=I}}e[t]=c,e[t+1]=f,e[t+2]=p,e[t+3]=g}static multiplyQuaternionsFlat(e,t,i,r,s,a){const l=i[r],c=i[r+1],f=i[r+2],p=i[r+3],g=s[a],v=s[a+1],y=s[a+2],S=s[a+3];return e[t]=l*S+p*g+c*y-f*v,e[t+1]=c*S+p*v+f*g-l*y,e[t+2]=f*S+p*y+l*v-c*g,e[t+3]=p*S-l*g-c*v-f*y,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t){const i=e._x,r=e._y,s=e._z,a=e._order,l=Math.cos,c=Math.sin,f=l(i/2),p=l(r/2),g=l(s/2),v=c(i/2),y=c(r/2),S=c(s/2);switch(a){case"XYZ":this._x=v*p*g+f*y*S,this._y=f*y*g-v*p*S,this._z=f*p*S+v*y*g,this._w=f*p*g-v*y*S;break;case"YXZ":this._x=v*p*g+f*y*S,this._y=f*y*g-v*p*S,this._z=f*p*S-v*y*g,this._w=f*p*g+v*y*S;break;case"ZXY":this._x=v*p*g-f*y*S,this._y=f*y*g+v*p*S,this._z=f*p*S+v*y*g,this._w=f*p*g-v*y*S;break;case"ZYX":this._x=v*p*g-f*y*S,this._y=f*y*g+v*p*S,this._z=f*p*S-v*y*g,this._w=f*p*g+v*y*S;break;case"YZX":this._x=v*p*g+f*y*S,this._y=f*y*g+v*p*S,this._z=f*p*S-v*y*g,this._w=f*p*g-v*y*S;break;case"XZY":this._x=v*p*g-f*y*S,this._y=f*y*g-v*p*S,this._z=f*p*S+v*y*g,this._w=f*p*g+v*y*S;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+a)}return t!==!1&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],a=t[1],l=t[5],c=t[9],f=t[2],p=t[6],g=t[10],v=i+l+g;if(v>0){const y=.5/Math.sqrt(v+1);this._w=.25/y,this._x=(p-c)*y,this._y=(s-f)*y,this._z=(a-r)*y}else if(i>l&&i>g){const y=2*Math.sqrt(1+i-l-g);this._w=(p-c)/y,this._x=.25*y,this._y=(r+a)/y,this._z=(s+f)/y}else if(l>g){const y=2*Math.sqrt(1+l-i-g);this._w=(s-f)/y,this._x=(r+a)/y,this._y=.25*y,this._z=(c+p)/y}else{const y=2*Math.sqrt(1+g-i-l);this._w=(a-r)/y,this._x=(s+f)/y,this._y=(c+p)/y,this._z=.25*y}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,a=e._w,l=t._x,c=t._y,f=t._z,p=t._w;return this._x=i*p+a*l+r*f-s*c,this._y=r*p+a*c+s*l-i*f,this._z=s*p+a*f+i*c-r*l,this._w=a*p-i*l-r*c-s*f,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,a=this._w;let l=a*e._w+i*e._x+r*e._y+s*e._z;if(l<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,l=-l):this.copy(e),l>=1)return this._w=a,this._x=i,this._y=r,this._z=s,this;const c=1-l*l;if(c<=Number.EPSILON){const y=1-t;return this._w=y*a+t*this._w,this._x=y*i+t*this._x,this._y=y*r+t*this._y,this._z=y*s+t*this._z,this.normalize(),this._onChangeCallback(),this}const f=Math.sqrt(c),p=Math.atan2(f,l),g=Math.sin((1-t)*p)/f,v=Math.sin(t*p)/f;return this._w=a*g+this._w*v,this._x=i*g+this._x*v,this._y=r*g+this._y*v,this._z=s*g+this._z*v,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=Math.random(),t=Math.sqrt(1-e),i=Math.sqrt(e),r=2*Math.PI*Math.random(),s=2*Math.PI*Math.random();return this.set(t*Math.cos(r),i*Math.sin(s),i*Math.cos(s),t*Math.sin(r))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Q{constructor(e=0,t=0,i=0){Q.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(i_.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(i_.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,a=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*a,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*a,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*a,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,a=e.y,l=e.z,c=e.w,f=c*t+a*r-l*i,p=c*i+l*t-s*r,g=c*r+s*i-a*t,v=-s*t-a*i-l*r;return this.x=f*c+v*-s+p*-l-g*-a,this.y=p*c+v*-a+g*-s-f*-l,this.z=g*c+v*-l+f*-a-p*-s,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=this.x<0?Math.ceil(this.x):Math.floor(this.x),this.y=this.y<0?Math.ceil(this.y):Math.floor(this.y),this.z=this.z<0?Math.ceil(this.z):Math.floor(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,a=t.x,l=t.y,c=t.z;return this.x=r*c-s*l,this.y=s*a-i*c,this.z=i*l-r*a,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return I0.copy(this).projectOnVector(e),this.sub(I0)}reflect(e){return this.sub(I0.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(yi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=(Math.random()-.5)*2,t=Math.random()*Math.PI*2,i=Math.sqrt(1-e**2);return this.x=i*Math.cos(t),this.y=i*Math.sin(t),this.z=e,this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const I0=new Q,i_=new Qi;class aa{constructor(e=new Q(1/0,1/0,1/0),t=new Q(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(Ko.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(Ko.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=Ko.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){if(e.updateWorldMatrix(!1,!1),e.boundingBox!==void 0)e.boundingBox===null&&e.computeBoundingBox(),Sf.copy(e.boundingBox),Sf.applyMatrix4(e.matrixWorld),this.union(Sf);else{const r=e.geometry;if(r!==void 0)if(t&&r.attributes!==void 0&&r.attributes.position!==void 0){const s=r.attributes.position;for(let a=0,l=s.count;a<l;a++)Ko.fromBufferAttribute(s,a).applyMatrix4(e.matrixWorld),this.expandByPoint(Ko)}else r.boundingBox===null&&r.computeBoundingBox(),Sf.copy(r.boundingBox),Sf.applyMatrix4(e.matrixWorld),this.union(Sf)}const i=e.children;for(let r=0,s=i.length;r<s;r++)this.expandByObject(i[r],t);return this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y||e.z<this.min.z||e.z>this.max.z)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y||e.max.z<this.min.z||e.min.z>this.max.z)}intersectsSphere(e){return this.clampPoint(e.center,Ko),Ko.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Md),km.subVectors(this.max,Md),_f.subVectors(e.a,Md),Mf.subVectors(e.b,Md),wf.subVectors(e.c,Md),Vl.subVectors(Mf,_f),Wl.subVectors(wf,Mf),Gu.subVectors(_f,wf);let t=[0,-Vl.z,Vl.y,0,-Wl.z,Wl.y,0,-Gu.z,Gu.y,Vl.z,0,-Vl.x,Wl.z,0,-Wl.x,Gu.z,0,-Gu.x,-Vl.y,Vl.x,0,-Wl.y,Wl.x,0,-Gu.y,Gu.x,0];return!U0(t,_f,Mf,wf,km)||(t=[1,0,0,0,1,0,0,0,1],!U0(t,_f,Mf,wf,km))?!1:(Om.crossVectors(Vl,Wl),t=[Om.x,Om.y,Om.z],U0(t,_f,Mf,wf,km))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Ko).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(Ko).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Zo[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Zo[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Zo[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Zo[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Zo[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Zo[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Zo[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Zo[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Zo),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Zo=[new Q,new Q,new Q,new Q,new Q,new Q,new Q,new Q],Ko=new Q,Sf=new aa,_f=new Q,Mf=new Q,wf=new Q,Vl=new Q,Wl=new Q,Gu=new Q,Md=new Q,km=new Q,Om=new Q,Vu=new Q;function U0(n,e,t,i,r){for(let s=0,a=n.length-3;s<=a;s+=3){Vu.fromArray(n,s);const l=r.x*Math.abs(Vu.x)+r.y*Math.abs(Vu.y)+r.z*Math.abs(Vu.z),c=e.dot(Vu),f=t.dot(Vu),p=i.dot(Vu);if(Math.max(-Math.max(c,f,p),Math.min(c,f,p))>l)return!1}return!0}const _D=new aa,wd=new Q,N0=new Q;let Os=class{constructor(e=new Q,t=-1){this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):_D.setFromPoints(e).getCenter(i);let r=0;for(let s=0,a=e.length;s<a;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;wd.subVectors(e,this.center);const t=wd.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(wd,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(N0.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(wd.copy(e.center).add(N0)),this.expandByPoint(wd.copy(e.center).sub(N0))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}};const Qo=new Q,F0=new Q,Bm=new Q,jl=new Q,k0=new Q,zm=new Q,O0=new Q;class fh{constructor(e=new Q,t=new Q(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Qo)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Qo.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Qo.copy(this.origin).addScaledVector(this.direction,t),Qo.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){F0.copy(e).add(t).multiplyScalar(.5),Bm.copy(t).sub(e).normalize(),jl.copy(this.origin).sub(F0);const s=e.distanceTo(t)*.5,a=-this.direction.dot(Bm),l=jl.dot(this.direction),c=-jl.dot(Bm),f=jl.lengthSq(),p=Math.abs(1-a*a);let g,v,y,S;if(p>0)if(g=a*c-l,v=a*l-c,S=s*p,g>=0)if(v>=-S)if(v<=S){const T=1/p;g*=T,v*=T,y=g*(g+a*v+2*l)+v*(a*g+v+2*c)+f}else v=s,g=Math.max(0,-(a*v+l)),y=-g*g+v*(v+2*c)+f;else v=-s,g=Math.max(0,-(a*v+l)),y=-g*g+v*(v+2*c)+f;else v<=-S?(g=Math.max(0,-(-a*s+l)),v=g>0?-s:Math.min(Math.max(-s,-c),s),y=-g*g+v*(v+2*c)+f):v<=S?(g=0,v=Math.min(Math.max(-s,-c),s),y=v*(v+2*c)+f):(g=Math.max(0,-(a*s+l)),v=g>0?s:Math.min(Math.max(-s,-c),s),y=-g*g+v*(v+2*c)+f);else v=a>0?-s:s,g=Math.max(0,-(a*v+l)),y=-g*g+v*(v+2*c)+f;return i&&i.copy(this.origin).addScaledVector(this.direction,g),r&&r.copy(F0).addScaledVector(Bm,v),y}intersectSphere(e,t){Qo.subVectors(e.center,this.origin);const i=Qo.dot(this.direction),r=Qo.dot(Qo)-i*i,s=e.radius*e.radius;if(r>s)return null;const a=Math.sqrt(s-r),l=i-a,c=i+a;return c<0?null:l<0?this.at(c,t):this.at(l,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,a,l,c;const f=1/this.direction.x,p=1/this.direction.y,g=1/this.direction.z,v=this.origin;return f>=0?(i=(e.min.x-v.x)*f,r=(e.max.x-v.x)*f):(i=(e.max.x-v.x)*f,r=(e.min.x-v.x)*f),p>=0?(s=(e.min.y-v.y)*p,a=(e.max.y-v.y)*p):(s=(e.max.y-v.y)*p,a=(e.min.y-v.y)*p),i>a||s>r||((s>i||isNaN(i))&&(i=s),(a<r||isNaN(r))&&(r=a),g>=0?(l=(e.min.z-v.z)*g,c=(e.max.z-v.z)*g):(l=(e.max.z-v.z)*g,c=(e.min.z-v.z)*g),i>c||l>r)||((l>i||i!==i)&&(i=l),(c<r||r!==r)&&(r=c),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,Qo)!==null}intersectTriangle(e,t,i,r,s){k0.subVectors(t,e),zm.subVectors(i,e),O0.crossVectors(k0,zm);let a=this.direction.dot(O0),l;if(a>0){if(r)return null;l=1}else if(a<0)l=-1,a=-a;else return null;jl.subVectors(this.origin,e);const c=l*this.direction.dot(zm.crossVectors(jl,zm));if(c<0)return null;const f=l*this.direction.dot(k0.cross(jl));if(f<0||c+f>a)return null;const p=-l*jl.dot(O0);return p<0?null:this.at(p/a,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class vt{constructor(e,t,i,r,s,a,l,c,f,p,g,v,y,S,T,w){vt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,a,l,c,f,p,g,v,y,S,T,w)}set(e,t,i,r,s,a,l,c,f,p,g,v,y,S,T,w){const M=this.elements;return M[0]=e,M[4]=t,M[8]=i,M[12]=r,M[1]=s,M[5]=a,M[9]=l,M[13]=c,M[2]=f,M[6]=p,M[10]=g,M[14]=v,M[3]=y,M[7]=S,M[11]=T,M[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new vt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Tf.setFromMatrixColumn(e,0).length(),s=1/Tf.setFromMatrixColumn(e,1).length(),a=1/Tf.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*a,t[9]=i[9]*a,t[10]=i[10]*a,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,a=Math.cos(i),l=Math.sin(i),c=Math.cos(r),f=Math.sin(r),p=Math.cos(s),g=Math.sin(s);if(e.order==="XYZ"){const v=a*p,y=a*g,S=l*p,T=l*g;t[0]=c*p,t[4]=-c*g,t[8]=f,t[1]=y+S*f,t[5]=v-T*f,t[9]=-l*c,t[2]=T-v*f,t[6]=S+y*f,t[10]=a*c}else if(e.order==="YXZ"){const v=c*p,y=c*g,S=f*p,T=f*g;t[0]=v+T*l,t[4]=S*l-y,t[8]=a*f,t[1]=a*g,t[5]=a*p,t[9]=-l,t[2]=y*l-S,t[6]=T+v*l,t[10]=a*c}else if(e.order==="ZXY"){const v=c*p,y=c*g,S=f*p,T=f*g;t[0]=v-T*l,t[4]=-a*g,t[8]=S+y*l,t[1]=y+S*l,t[5]=a*p,t[9]=T-v*l,t[2]=-a*f,t[6]=l,t[10]=a*c}else if(e.order==="ZYX"){const v=a*p,y=a*g,S=l*p,T=l*g;t[0]=c*p,t[4]=S*f-y,t[8]=v*f+T,t[1]=c*g,t[5]=T*f+v,t[9]=y*f-S,t[2]=-f,t[6]=l*c,t[10]=a*c}else if(e.order==="YZX"){const v=a*c,y=a*f,S=l*c,T=l*f;t[0]=c*p,t[4]=T-v*g,t[8]=S*g+y,t[1]=g,t[5]=a*p,t[9]=-l*p,t[2]=-f*p,t[6]=y*g+S,t[10]=v-T*g}else if(e.order==="XZY"){const v=a*c,y=a*f,S=l*c,T=l*f;t[0]=c*p,t[4]=-g,t[8]=f*p,t[1]=v*g+T,t[5]=a*p,t[9]=y*g-S,t[2]=S*g-y,t[6]=l*p,t[10]=T*g+v}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(MD,e,wD)}lookAt(e,t,i){const r=this.elements;return Ns.subVectors(e,t),Ns.lengthSq()===0&&(Ns.z=1),Ns.normalize(),Xl.crossVectors(i,Ns),Xl.lengthSq()===0&&(Math.abs(i.z)===1?Ns.x+=1e-4:Ns.z+=1e-4,Ns.normalize(),Xl.crossVectors(i,Ns)),Xl.normalize(),Hm.crossVectors(Ns,Xl),r[0]=Xl.x,r[4]=Hm.x,r[8]=Ns.x,r[1]=Xl.y,r[5]=Hm.y,r[9]=Ns.y,r[2]=Xl.z,r[6]=Hm.z,r[10]=Ns.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,a=i[0],l=i[4],c=i[8],f=i[12],p=i[1],g=i[5],v=i[9],y=i[13],S=i[2],T=i[6],w=i[10],M=i[14],A=i[3],b=i[7],R=i[11],I=i[15],k=r[0],F=r[4],z=r[8],U=r[12],O=r[1],$=r[5],Y=r[9],q=r[13],J=r[2],ae=r[6],oe=r[10],ue=r[14],V=r[3],j=r[7],W=r[11],L=r[15];return s[0]=a*k+l*O+c*J+f*V,s[4]=a*F+l*$+c*ae+f*j,s[8]=a*z+l*Y+c*oe+f*W,s[12]=a*U+l*q+c*ue+f*L,s[1]=p*k+g*O+v*J+y*V,s[5]=p*F+g*$+v*ae+y*j,s[9]=p*z+g*Y+v*oe+y*W,s[13]=p*U+g*q+v*ue+y*L,s[2]=S*k+T*O+w*J+M*V,s[6]=S*F+T*$+w*ae+M*j,s[10]=S*z+T*Y+w*oe+M*W,s[14]=S*U+T*q+w*ue+M*L,s[3]=A*k+b*O+R*J+I*V,s[7]=A*F+b*$+R*ae+I*j,s[11]=A*z+b*Y+R*oe+I*W,s[15]=A*U+b*q+R*ue+I*L,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],a=e[1],l=e[5],c=e[9],f=e[13],p=e[2],g=e[6],v=e[10],y=e[14],S=e[3],T=e[7],w=e[11],M=e[15];return S*(+s*c*g-r*f*g-s*l*v+i*f*v+r*l*y-i*c*y)+T*(+t*c*y-t*f*v+s*a*v-r*a*y+r*f*p-s*c*p)+w*(+t*f*g-t*l*y-s*a*g+i*a*y+s*l*p-i*f*p)+M*(-r*l*p-t*c*g+t*l*v+r*a*g-i*a*v+i*c*p)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],a=e[4],l=e[5],c=e[6],f=e[7],p=e[8],g=e[9],v=e[10],y=e[11],S=e[12],T=e[13],w=e[14],M=e[15],A=g*w*f-T*v*f+T*c*y-l*w*y-g*c*M+l*v*M,b=S*v*f-p*w*f-S*c*y+a*w*y+p*c*M-a*v*M,R=p*T*f-S*g*f+S*l*y-a*T*y-p*l*M+a*g*M,I=S*g*c-p*T*c-S*l*v+a*T*v+p*l*w-a*g*w,k=t*A+i*b+r*R+s*I;if(k===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const F=1/k;return e[0]=A*F,e[1]=(T*v*s-g*w*s-T*r*y+i*w*y+g*r*M-i*v*M)*F,e[2]=(l*w*s-T*c*s+T*r*f-i*w*f-l*r*M+i*c*M)*F,e[3]=(g*c*s-l*v*s-g*r*f+i*v*f+l*r*y-i*c*y)*F,e[4]=b*F,e[5]=(p*w*s-S*v*s+S*r*y-t*w*y-p*r*M+t*v*M)*F,e[6]=(S*c*s-a*w*s-S*r*f+t*w*f+a*r*M-t*c*M)*F,e[7]=(a*v*s-p*c*s+p*r*f-t*v*f-a*r*y+t*c*y)*F,e[8]=R*F,e[9]=(S*g*s-p*T*s-S*i*y+t*T*y+p*i*M-t*g*M)*F,e[10]=(a*T*s-S*l*s+S*i*f-t*T*f-a*i*M+t*l*M)*F,e[11]=(p*l*s-a*g*s-p*i*f+t*g*f+a*i*y-t*l*y)*F,e[12]=I*F,e[13]=(p*T*r-S*g*r+S*i*v-t*T*v-p*i*w+t*g*w)*F,e[14]=(S*l*r-a*T*r-S*i*c+t*T*c+a*i*w-t*l*w)*F,e[15]=(a*g*r-p*l*r+p*i*c-t*g*c-a*i*v+t*l*v)*F,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,a=e.x,l=e.y,c=e.z,f=s*a,p=s*l;return this.set(f*a+i,f*l-r*c,f*c+r*l,0,f*l+r*c,p*l+i,p*c-r*a,0,f*c-r*l,p*c+r*a,s*c*c+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,a){return this.set(1,i,s,0,e,1,a,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,a=t._y,l=t._z,c=t._w,f=s+s,p=a+a,g=l+l,v=s*f,y=s*p,S=s*g,T=a*p,w=a*g,M=l*g,A=c*f,b=c*p,R=c*g,I=i.x,k=i.y,F=i.z;return r[0]=(1-(T+M))*I,r[1]=(y+R)*I,r[2]=(S-b)*I,r[3]=0,r[4]=(y-R)*k,r[5]=(1-(v+M))*k,r[6]=(w+A)*k,r[7]=0,r[8]=(S+b)*F,r[9]=(w-A)*F,r[10]=(1-(v+T))*F,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Tf.set(r[0],r[1],r[2]).length();const a=Tf.set(r[4],r[5],r[6]).length(),l=Tf.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],Ia.copy(this);const f=1/s,p=1/a,g=1/l;return Ia.elements[0]*=f,Ia.elements[1]*=f,Ia.elements[2]*=f,Ia.elements[4]*=p,Ia.elements[5]*=p,Ia.elements[6]*=p,Ia.elements[8]*=g,Ia.elements[9]*=g,Ia.elements[10]*=g,t.setFromRotationMatrix(Ia),i.x=s,i.y=a,i.z=l,this}makePerspective(e,t,i,r,s,a,l=co){const c=this.elements,f=2*s/(t-e),p=2*s/(i-r),g=(t+e)/(t-e),v=(i+r)/(i-r);let y,S;if(l===co)y=-(a+s)/(a-s),S=-2*a*s/(a-s);else if(l===dp)y=-a/(a-s),S=-a*s/(a-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+l);return c[0]=f,c[4]=0,c[8]=g,c[12]=0,c[1]=0,c[5]=p,c[9]=v,c[13]=0,c[2]=0,c[6]=0,c[10]=y,c[14]=S,c[3]=0,c[7]=0,c[11]=-1,c[15]=0,this}makeOrthographic(e,t,i,r,s,a,l=co){const c=this.elements,f=1/(t-e),p=1/(i-r),g=1/(a-s),v=(t+e)*f,y=(i+r)*p;let S,T;if(l===co)S=(a+s)*g,T=-2*g;else if(l===dp)S=s*g,T=-1*g;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+l);return c[0]=2*f,c[4]=0,c[8]=0,c[12]=-v,c[1]=0,c[5]=2*p,c[9]=0,c[13]=-y,c[2]=0,c[6]=0,c[10]=T,c[14]=-S,c[3]=0,c[7]=0,c[11]=0,c[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Tf=new Q,Ia=new vt,MD=new Q(0,0,0),wD=new Q(1,1,1),Xl=new Q,Hm=new Q,Ns=new Q,r_=new vt,s_=new Qi;class hh{constructor(e=0,t=0,i=0,r=hh.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],a=r[4],l=r[8],c=r[1],f=r[5],p=r[9],g=r[2],v=r[6],y=r[10];switch(t){case"XYZ":this._y=Math.asin(yi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-p,y),this._z=Math.atan2(-a,s)):(this._x=Math.atan2(v,f),this._z=0);break;case"YXZ":this._x=Math.asin(-yi(p,-1,1)),Math.abs(p)<.9999999?(this._y=Math.atan2(l,y),this._z=Math.atan2(c,f)):(this._y=Math.atan2(-g,s),this._z=0);break;case"ZXY":this._x=Math.asin(yi(v,-1,1)),Math.abs(v)<.9999999?(this._y=Math.atan2(-g,y),this._z=Math.atan2(-a,f)):(this._y=0,this._z=Math.atan2(c,s));break;case"ZYX":this._y=Math.asin(-yi(g,-1,1)),Math.abs(g)<.9999999?(this._x=Math.atan2(v,y),this._z=Math.atan2(c,s)):(this._x=0,this._z=Math.atan2(-a,f));break;case"YZX":this._z=Math.asin(yi(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(-p,f),this._y=Math.atan2(-g,s)):(this._x=0,this._y=Math.atan2(l,y));break;case"XZY":this._z=Math.asin(-yi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(v,f),this._y=Math.atan2(l,s)):(this._x=Math.atan2(-p,y),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return r_.makeRotationFromQuaternion(e),this.setFromRotationMatrix(r_,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return s_.setFromEuler(this),this.setFromQuaternion(s_,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}hh.DEFAULT_ORDER="XYZ";class pc{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let TD=0;const a_=new Q,Ef=new Qi,Jo=new vt,Gm=new Q,Td=new Q,ED=new Q,bD=new Qi,o_=new Q(1,0,0),l_=new Q(0,1,0),u_=new Q(0,0,1),AD={type:"added"},c_={type:"removed"};class Mn extends sa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:TD++}),this.uuid=ks(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Mn.DEFAULT_UP.clone();const e=new Q,t=new hh,i=new Qi,r=new Q(1,1,1);function s(){i.setFromEuler(t,!1)}function a(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(a),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new vt},normalMatrix:{value:new sn}}),this.matrix=new vt,this.matrixWorld=new vt,this.matrixAutoUpdate=Mn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.matrixWorldAutoUpdate=Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.layers=new pc,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Ef.setFromAxisAngle(e,t),this.quaternion.multiply(Ef),this}rotateOnWorldAxis(e,t){return Ef.setFromAxisAngle(e,t),this.quaternion.premultiply(Ef),this}rotateX(e){return this.rotateOnAxis(o_,e)}rotateY(e){return this.rotateOnAxis(l_,e)}rotateZ(e){return this.rotateOnAxis(u_,e)}translateOnAxis(e,t){return a_.copy(e).applyQuaternion(this.quaternion),this.position.add(a_.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(o_,e)}translateY(e){return this.translateOnAxis(l_,e)}translateZ(e){return this.translateOnAxis(u_,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Jo.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Gm.copy(e):Gm.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Td.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Jo.lookAt(Td,Gm,this.up):Jo.lookAt(Gm,Td,this.up),this.quaternion.setFromRotationMatrix(Jo),r&&(Jo.extractRotation(r.matrixWorld),Ef.setFromRotationMatrix(Jo),this.quaternion.premultiply(Ef.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.parent!==null&&e.parent.remove(e),e.parent=this,this.children.push(e),e.dispatchEvent(AD)):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(c_)),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){for(let e=0;e<this.children.length;e++){const t=this.children[e];t.parent=null,t.dispatchEvent(c_)}return this.children.length=0,this}attach(e){return this.updateWorldMatrix(!0,!1),Jo.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Jo.multiply(e.parent.matrixWorld)),e.applyMatrix4(Jo),this.add(e),e.updateWorldMatrix(!1,!0),this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const a=this.children[i].getObjectByProperty(e,t);if(a!==void 0)return a}}getObjectsByProperty(e,t){let i=[];this[e]===t&&i.push(this);for(let r=0,s=this.children.length;r<s;r++){const a=this.children[r].getObjectsByProperty(e,t);a.length>0&&(i=i.concat(a))}return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Td,e,ED),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Td,bD,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++){const s=t[i];(s.matrixWorldAutoUpdate===!0||e===!0)&&s.updateMatrixWorld(e)}}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.matrixWorldAutoUpdate===!0&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix),t===!0){const r=this.children;for(let s=0,a=r.length;s<a;s++){const l=r[s];l.matrixWorldAutoUpdate===!0&&l.updateWorldMatrix(!1,!0)}}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON()));function s(l,c){return l[c.uuid]===void 0&&(l[c.uuid]=c.toJSON(e)),c.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const l=this.geometry.parameters;if(l!==void 0&&l.shapes!==void 0){const c=l.shapes;if(Array.isArray(c))for(let f=0,p=c.length;f<p;f++){const g=c[f];s(e.shapes,g)}else s(e.shapes,c)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const l=[];for(let c=0,f=this.material.length;c<f;c++)l.push(s(e.materials,this.material[c]));r.material=l}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let l=0;l<this.children.length;l++)r.children.push(this.children[l].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let l=0;l<this.animations.length;l++){const c=this.animations[l];r.animations.push(s(e.animations,c))}}if(t){const l=a(e.geometries),c=a(e.materials),f=a(e.textures),p=a(e.images),g=a(e.shapes),v=a(e.skeletons),y=a(e.animations),S=a(e.nodes);l.length>0&&(i.geometries=l),c.length>0&&(i.materials=c),f.length>0&&(i.textures=f),p.length>0&&(i.images=p),g.length>0&&(i.shapes=g),v.length>0&&(i.skeletons=v),y.length>0&&(i.animations=y),S.length>0&&(i.nodes=S)}return i.object=r,i;function a(l){const c=[];for(const f in l){const p=l[f];delete p.metadata,c.push(p)}return c}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Mn.DEFAULT_UP=new Q(0,1,0);Mn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Mn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Ua=new Q,$o=new Q,B0=new Q,el=new Q,bf=new Q,Af=new Q,f_=new Q,z0=new Q,H0=new Q,G0=new Q;let Vm=!1;class ys{constructor(e=new Q,t=new Q,i=new Q){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),Ua.subVectors(e,t),r.cross(Ua);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){Ua.subVectors(r,t),$o.subVectors(i,t),B0.subVectors(e,t);const a=Ua.dot(Ua),l=Ua.dot($o),c=Ua.dot(B0),f=$o.dot($o),p=$o.dot(B0),g=a*f-l*l;if(g===0)return s.set(-2,-1,-1);const v=1/g,y=(f*c-l*p)*v,S=(a*p-l*c)*v;return s.set(1-y-S,S,y)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,el),el.x>=0&&el.y>=0&&el.x+el.y<=1}static getUV(e,t,i,r,s,a,l,c){return Vm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Vm=!0),this.getInterpolation(e,t,i,r,s,a,l,c)}static getInterpolation(e,t,i,r,s,a,l,c){return this.getBarycoord(e,t,i,r,el),c.setScalar(0),c.addScaledVector(s,el.x),c.addScaledVector(a,el.y),c.addScaledVector(l,el.z),c}static isFrontFacing(e,t,i,r){return Ua.subVectors(i,t),$o.subVectors(e,t),Ua.cross($o).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return Ua.subVectors(this.c,this.b),$o.subVectors(this.a,this.b),Ua.cross($o).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return ys.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return ys.getBarycoord(e,this.a,this.b,this.c,t)}getUV(e,t,i,r,s){return Vm===!1&&(console.warn("THREE.Triangle.getUV() has been renamed to THREE.Triangle.getInterpolation()."),Vm=!0),ys.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}getInterpolation(e,t,i,r,s){return ys.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return ys.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return ys.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let a,l;bf.subVectors(r,i),Af.subVectors(s,i),z0.subVectors(e,i);const c=bf.dot(z0),f=Af.dot(z0);if(c<=0&&f<=0)return t.copy(i);H0.subVectors(e,r);const p=bf.dot(H0),g=Af.dot(H0);if(p>=0&&g<=p)return t.copy(r);const v=c*g-p*f;if(v<=0&&c>=0&&p<=0)return a=c/(c-p),t.copy(i).addScaledVector(bf,a);G0.subVectors(e,s);const y=bf.dot(G0),S=Af.dot(G0);if(S>=0&&y<=S)return t.copy(s);const T=y*f-c*S;if(T<=0&&f>=0&&S<=0)return l=f/(f-S),t.copy(i).addScaledVector(Af,l);const w=p*S-y*g;if(w<=0&&g-p>=0&&y-S>=0)return f_.subVectors(s,r),l=(g-p)/(g-p+(y-S)),t.copy(r).addScaledVector(f_,l);const M=1/(w+T+v);return a=T*M,l=v*M,t.copy(i).addScaledVector(bf,a).addScaledVector(Af,l)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}let CD=0;class hr extends sa{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:CD++}),this.uuid=ks(),this.name="",this.type="Material",this.blending=fc,this.side=go,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=zx,this.blendDst=Hx,this.blendEquation=tc,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.depthFunc=rp,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=gE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Hg,this.stencilZFail=Hg,this.stencilZPass=Hg,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBuild(){}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==fc&&(i.blending=this.blending),this.side!==go&&(i.side=this.side),this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=this.transparent),i.depthFunc=this.depthFunc,i.depthTest=this.depthTest,i.depthWrite=this.depthWrite,i.colorWrite=this.colorWrite,i.stencilWrite=this.stencilWrite,i.stencilWriteMask=this.stencilWriteMask,i.stencilFunc=this.stencilFunc,i.stencilRef=this.stencilRef,i.stencilFuncMask=this.stencilFuncMask,i.stencilFail=this.stencilFail,i.stencilZFail=this.stencilZFail,i.stencilZPass=this.stencilZPass,this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=this.alphaHash),this.alphaToCoverage===!0&&(i.alphaToCoverage=this.alphaToCoverage),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=this.premultipliedAlpha),this.forceSinglePass===!0&&(i.forceSinglePass=this.forceSinglePass),this.wireframe===!0&&(i.wireframe=this.wireframe),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=this.flatShading),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const a=[];for(const l in s){const c=s[l];delete c.metadata,a.push(c)}return a}if(t){const s=r(e.textures),a=r(e.images);s.length>0&&(i.textures=s),a.length>0&&(i.images=a)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}const PE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Na={h:0,s:0,l:0},Wm={h:0,s:0,l:0};function V0(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class Je{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=yt){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,ta.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=ta.workingColorSpace){return this.r=e,this.g=t,this.b=i,ta.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=ta.workingColorSpace){if(e=r1(e,1),t=yi(t,0,1),i=yi(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,a=2*i-s;this.r=V0(a,s,e+1/3),this.g=V0(a,s,e),this.b=V0(a,s,e-1/3)}return ta.toWorkingColorSpace(this,r),this}setStyle(e,t=yt){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const a=r[1],l=r[2];switch(a){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(l))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],a=s.length;if(a===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(a===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=yt){const i=PE[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=th(e.r),this.g=th(e.g),this.b=th(e.b),this}copyLinearToSRGB(e){return this.r=D0(e.r),this.g=D0(e.g),this.b=D0(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=yt){return ta.fromWorkingColorSpace(Nr.copy(this),e),Math.round(yi(Nr.r*255,0,255))*65536+Math.round(yi(Nr.g*255,0,255))*256+Math.round(yi(Nr.b*255,0,255))}getHexString(e=yt){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=ta.workingColorSpace){ta.fromWorkingColorSpace(Nr.copy(this),t);const i=Nr.r,r=Nr.g,s=Nr.b,a=Math.max(i,r,s),l=Math.min(i,r,s);let c,f;const p=(l+a)/2;if(l===a)c=0,f=0;else{const g=a-l;switch(f=p<=.5?g/(a+l):g/(2-a-l),a){case i:c=(r-s)/g+(r<s?6:0);break;case r:c=(s-i)/g+2;break;case s:c=(i-r)/g+4;break}c/=6}return e.h=c,e.s=f,e.l=p,e}getRGB(e,t=ta.workingColorSpace){return ta.fromWorkingColorSpace(Nr.copy(this),t),e.r=Nr.r,e.g=Nr.g,e.b=Nr.b,e}getStyle(e=yt){ta.fromWorkingColorSpace(Nr.copy(this),e);const t=Nr.r,i=Nr.g,r=Nr.b;return e!==yt?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(Na),Na.h+=e,Na.s+=t,Na.l+=i,this.setHSL(Na.h,Na.s,Na.l),this}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(Na),e.getHSL(Wm);const i=Yd(Na.h,Wm.h,t),r=Yd(Na.s,Wm.s,t),s=Yd(Na.l,Wm.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Nr=new Je;Je.NAMES=PE;class fl extends hr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const il=RD();function RD(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let c=0;c<256;++c){const f=c-127;f<-27?(i[c]=0,i[c|256]=32768,r[c]=24,r[c|256]=24):f<-14?(i[c]=1024>>-f-14,i[c|256]=1024>>-f-14|32768,r[c]=-f-1,r[c|256]=-f-1):f<=15?(i[c]=f+15<<10,i[c|256]=f+15<<10|32768,r[c]=13,r[c|256]=13):f<128?(i[c]=31744,i[c|256]=64512,r[c]=24,r[c|256]=24):(i[c]=31744,i[c|256]=64512,r[c]=13,r[c|256]=13)}const s=new Uint32Array(2048),a=new Uint32Array(64),l=new Uint32Array(64);for(let c=1;c<1024;++c){let f=c<<13,p=0;for(;!(f&8388608);)f<<=1,p-=8388608;f&=-8388609,p+=947912704,s[c]=f|p}for(let c=1024;c<2048;++c)s[c]=939524096+(c-1024<<13);for(let c=1;c<31;++c)a[c]=c<<23;a[31]=1199570944,a[32]=2147483648;for(let c=33;c<63;++c)a[c]=2147483648+(c-32<<23);a[63]=3347054592;for(let c=1;c<64;++c)c!==32&&(l[c]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:a,offsetTable:l}}function gs(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=yi(n,-65504,65504),il.floatView[0]=n;const e=il.uint32View[0],t=e>>23&511;return il.baseTable[t]+((e&8388607)>>il.shiftTable[t])}function Hd(n){const e=n>>10;return il.uint32View[0]=il.mantissaTable[il.offsetTable[e]+(n&1023)]+il.exponentTable[e],il.floatView[0]}const PD={toHalfFloat:gs,fromHalfFloat:Hd},Bi=new Q,jm=new _e;class cn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=hp,this.updateRange={offset:0,count:-1},this.gpuType=li,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)jm.fromBufferAttribute(this,t),jm.applyMatrix3(e),this.setXY(t,jm.x,jm.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix3(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyMatrix4(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.applyNormalMatrix(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Bi.fromBufferAttribute(this,t),Bi.transformDirection(e),this.setXYZ(t,Bi.x,Bi.y,Bi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=xs(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=on(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=xs(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=xs(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=xs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=xs(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),s=on(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==hp&&(e.usage=this.usage),(this.updateRange.offset!==0||this.updateRange.count!==-1)&&(e.updateRange=this.updateRange),e}}class DD extends cn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class LD extends cn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class ID extends cn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class UD extends cn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class a1 extends cn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class ND extends cn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class o1 extends cn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class FD extends cn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Hd(this.array[e*this.itemSize]);return this.normalized&&(t=xs(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=gs(t),this}getY(e){let t=Hd(this.array[e*this.itemSize+1]);return this.normalized&&(t=xs(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=gs(t),this}getZ(e){let t=Hd(this.array[e*this.itemSize+2]);return this.normalized&&(t=xs(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=gs(t),this}getW(e){let t=Hd(this.array[e*this.itemSize+3]);return this.normalized&&(t=xs(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=gs(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(i),this.array[e+2]=gs(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),s=on(s,this.array)),this.array[e+0]=gs(t),this.array[e+1]=gs(i),this.array[e+2]=gs(r),this.array[e+3]=gs(s),this}}class Ct extends cn{constructor(e,t,i){super(new Float32Array(e),t,i)}}class kD extends cn{constructor(e,t,i){super(new Float64Array(e),t,i)}}let OD=0;const $s=new vt,W0=new Mn,Cf=new Q,Fs=new aa,Ed=new aa,fr=new Q;class nn extends sa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:OD++}),this.uuid=ks(),this.name="",this.type="BufferGeometry",this.index=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(AE(e)?o1:a1)(e,1):this.index=e,this}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new sn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return $s.makeRotationFromQuaternion(e),this.applyMatrix4($s),this}rotateX(e){return $s.makeRotationX(e),this.applyMatrix4($s),this}rotateY(e){return $s.makeRotationY(e),this.applyMatrix4($s),this}rotateZ(e){return $s.makeRotationZ(e),this.applyMatrix4($s),this}translate(e,t,i){return $s.makeTranslation(e,t,i),this.applyMatrix4($s),this}scale(e,t,i){return $s.makeScale(e,t,i),this.applyMatrix4($s),this}lookAt(e){return W0.lookAt(e),W0.updateMatrix(),this.applyMatrix4(W0.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Cf).negate(),this.translate(Cf.x,Cf.y,Cf.z),this}setFromPoints(e){const t=[];for(let i=0,r=e.length;i<r;i++){const s=e[i];t.push(s.x,s.y,s.z||0)}return this.setAttribute("position",new Ct(t,3)),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new aa);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingBox.set(new Q(-1/0,-1/0,-1/0),new Q(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Fs.setFromBufferAttribute(s),this.morphTargetsRelative?(fr.addVectors(this.boundingBox.min,Fs.min),this.boundingBox.expandByPoint(fr),fr.addVectors(this.boundingBox.max,Fs.max),this.boundingBox.expandByPoint(fr)):(this.boundingBox.expandByPoint(Fs.min),this.boundingBox.expandByPoint(Fs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Os);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error('THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere. Alternatively set "mesh.frustumCulled" to "false".',this),this.boundingSphere.set(new Q,1/0);return}if(e){const i=this.boundingSphere.center;if(Fs.setFromBufferAttribute(e),t)for(let s=0,a=t.length;s<a;s++){const l=t[s];Ed.setFromBufferAttribute(l),this.morphTargetsRelative?(fr.addVectors(Fs.min,Ed.min),Fs.expandByPoint(fr),fr.addVectors(Fs.max,Ed.max),Fs.expandByPoint(fr)):(Fs.expandByPoint(Ed.min),Fs.expandByPoint(Ed.max))}Fs.getCenter(i);let r=0;for(let s=0,a=e.count;s<a;s++)fr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(fr));if(t)for(let s=0,a=t.length;s<a;s++){const l=t[s],c=this.morphTargetsRelative;for(let f=0,p=l.count;f<p;f++)fr.fromBufferAttribute(l,f),c&&(Cf.fromBufferAttribute(e,f),fr.add(Cf)),r=Math.max(r,i.distanceToSquared(fr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=e.array,r=t.position.array,s=t.normal.array,a=t.uv.array,l=r.length/3;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new cn(new Float32Array(4*l),4));const c=this.getAttribute("tangent").array,f=[],p=[];for(let O=0;O<l;O++)f[O]=new Q,p[O]=new Q;const g=new Q,v=new Q,y=new Q,S=new _e,T=new _e,w=new _e,M=new Q,A=new Q;function b(O,$,Y){g.fromArray(r,O*3),v.fromArray(r,$*3),y.fromArray(r,Y*3),S.fromArray(a,O*2),T.fromArray(a,$*2),w.fromArray(a,Y*2),v.sub(g),y.sub(g),T.sub(S),w.sub(S);const q=1/(T.x*w.y-w.x*T.y);isFinite(q)&&(M.copy(v).multiplyScalar(w.y).addScaledVector(y,-T.y).multiplyScalar(q),A.copy(y).multiplyScalar(T.x).addScaledVector(v,-w.x).multiplyScalar(q),f[O].add(M),f[$].add(M),f[Y].add(M),p[O].add(A),p[$].add(A),p[Y].add(A))}let R=this.groups;R.length===0&&(R=[{start:0,count:i.length}]);for(let O=0,$=R.length;O<$;++O){const Y=R[O],q=Y.start,J=Y.count;for(let ae=q,oe=q+J;ae<oe;ae+=3)b(i[ae+0],i[ae+1],i[ae+2])}const I=new Q,k=new Q,F=new Q,z=new Q;function U(O){F.fromArray(s,O*3),z.copy(F);const $=f[O];I.copy($),I.sub(F.multiplyScalar(F.dot($))).normalize(),k.crossVectors(z,$);const q=k.dot(p[O])<0?-1:1;c[O*4]=I.x,c[O*4+1]=I.y,c[O*4+2]=I.z,c[O*4+3]=q}for(let O=0,$=R.length;O<$;++O){const Y=R[O],q=Y.start,J=Y.count;for(let ae=q,oe=q+J;ae<oe;ae+=3)U(i[ae+0]),U(i[ae+1]),U(i[ae+2])}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new cn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let v=0,y=i.count;v<y;v++)i.setXYZ(v,0,0,0);const r=new Q,s=new Q,a=new Q,l=new Q,c=new Q,f=new Q,p=new Q,g=new Q;if(e)for(let v=0,y=e.count;v<y;v+=3){const S=e.getX(v+0),T=e.getX(v+1),w=e.getX(v+2);r.fromBufferAttribute(t,S),s.fromBufferAttribute(t,T),a.fromBufferAttribute(t,w),p.subVectors(a,s),g.subVectors(r,s),p.cross(g),l.fromBufferAttribute(i,S),c.fromBufferAttribute(i,T),f.fromBufferAttribute(i,w),l.add(p),c.add(p),f.add(p),i.setXYZ(S,l.x,l.y,l.z),i.setXYZ(T,c.x,c.y,c.z),i.setXYZ(w,f.x,f.y,f.z)}else for(let v=0,y=t.count;v<y;v+=3)r.fromBufferAttribute(t,v+0),s.fromBufferAttribute(t,v+1),a.fromBufferAttribute(t,v+2),p.subVectors(a,s),g.subVectors(r,s),p.cross(g),i.setXYZ(v+0,p.x,p.y,p.z),i.setXYZ(v+1,p.x,p.y,p.z),i.setXYZ(v+2,p.x,p.y,p.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)fr.fromBufferAttribute(e,t),fr.normalize(),e.setXYZ(t,fr.x,fr.y,fr.z)}toNonIndexed(){function e(l,c){const f=l.array,p=l.itemSize,g=l.normalized,v=new f.constructor(c.length*p);let y=0,S=0;for(let T=0,w=c.length;T<w;T++){l.isInterleavedBufferAttribute?y=c[T]*l.data.stride+l.offset:y=c[T]*p;for(let M=0;M<p;M++)v[S++]=f[y++]}return new cn(v,p,g)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new nn,i=this.index.array,r=this.attributes;for(const l in r){const c=r[l],f=e(c,i);t.setAttribute(l,f)}const s=this.morphAttributes;for(const l in s){const c=[],f=s[l];for(let p=0,g=f.length;p<g;p++){const v=f[p],y=e(v,i);c.push(y)}t.morphAttributes[l]=c}t.morphTargetsRelative=this.morphTargetsRelative;const a=this.groups;for(let l=0,c=a.length;l<c;l++){const f=a[l];t.addGroup(f.start,f.count,f.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const c=this.parameters;for(const f in c)c[f]!==void 0&&(e[f]=c[f]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const c in i){const f=i[c];e.data.attributes[c]=f.toJSON(e.data)}const r={};let s=!1;for(const c in this.morphAttributes){const f=this.morphAttributes[c],p=[];for(let g=0,v=f.length;g<v;g++){const y=f[g];p.push(y.toJSON(e.data))}p.length>0&&(r[c]=p,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const a=this.groups;a.length>0&&(e.data.groups=JSON.parse(JSON.stringify(a)));const l=this.boundingSphere;return l!==null&&(e.data.boundingSphere={center:l.center.toArray(),radius:l.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const f in r){const p=r[f];this.setAttribute(f,p.clone(t))}const s=e.morphAttributes;for(const f in s){const p=[],g=s[f];for(let v=0,y=g.length;v<y;v++)p.push(g[v].clone(t));this.morphAttributes[f]=p}this.morphTargetsRelative=e.morphTargetsRelative;const a=e.groups;for(let f=0,p=a.length;f<p;f++){const g=a[f];this.addGroup(g.start,g.count,g.materialIndex)}const l=e.boundingBox;l!==null&&(this.boundingBox=l.clone());const c=e.boundingSphere;return c!==null&&(this.boundingSphere=c.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const h_=new vt,Wu=new fh,Xm=new Os,d_=new Q,Rf=new Q,Pf=new Q,Df=new Q,j0=new Q,Ym=new Q,qm=new _e,Zm=new _e,Km=new _e,p_=new Q,m_=new Q,g_=new Q,Qm=new Q,Jm=new Q;class xi extends Mn{constructor(e=new nn,t=new fl){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,a=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const l=this.morphTargetInfluences;if(s&&l){Ym.set(0,0,0);for(let c=0,f=s.length;c<f;c++){const p=l[c],g=s[c];p!==0&&(j0.fromBufferAttribute(g,e),a?Ym.addScaledVector(j0,p):Ym.addScaledVector(j0.sub(t),p))}t.add(Ym)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Xm.copy(i.boundingSphere),Xm.applyMatrix4(s),Wu.copy(e.ray).recast(e.near),!(Xm.containsPoint(Wu.origin)===!1&&(Wu.intersectSphere(Xm,d_)===null||Wu.origin.distanceToSquared(d_)>(e.far-e.near)**2))&&(h_.copy(s).invert(),Wu.copy(e.ray).applyMatrix4(h_),!(i.boundingBox!==null&&Wu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Wu)))}_computeIntersections(e,t,i){let r;const s=this.geometry,a=this.material,l=s.index,c=s.attributes.position,f=s.attributes.uv,p=s.attributes.uv1,g=s.attributes.normal,v=s.groups,y=s.drawRange;if(l!==null)if(Array.isArray(a))for(let S=0,T=v.length;S<T;S++){const w=v[S],M=a[w.materialIndex],A=Math.max(w.start,y.start),b=Math.min(l.count,Math.min(w.start+w.count,y.start+y.count));for(let R=A,I=b;R<I;R+=3){const k=l.getX(R),F=l.getX(R+1),z=l.getX(R+2);r=$m(this,M,e,i,f,p,g,k,F,z),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,y.start),T=Math.min(l.count,y.start+y.count);for(let w=S,M=T;w<M;w+=3){const A=l.getX(w),b=l.getX(w+1),R=l.getX(w+2);r=$m(this,a,e,i,f,p,g,A,b,R),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(c!==void 0)if(Array.isArray(a))for(let S=0,T=v.length;S<T;S++){const w=v[S],M=a[w.materialIndex],A=Math.max(w.start,y.start),b=Math.min(c.count,Math.min(w.start+w.count,y.start+y.count));for(let R=A,I=b;R<I;R+=3){const k=R,F=R+1,z=R+2;r=$m(this,M,e,i,f,p,g,k,F,z),r&&(r.faceIndex=Math.floor(R/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const S=Math.max(0,y.start),T=Math.min(c.count,y.start+y.count);for(let w=S,M=T;w<M;w+=3){const A=w,b=w+1,R=w+2;r=$m(this,a,e,i,f,p,g,A,b,R),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function BD(n,e,t,i,r,s,a,l){let c;if(e.side===Zi?c=i.intersectTriangle(a,s,r,!0,l):c=i.intersectTriangle(r,s,a,e.side===go,l),c===null)return null;Jm.copy(l),Jm.applyMatrix4(n.matrixWorld);const f=t.ray.origin.distanceTo(Jm);return f<t.near||f>t.far?null:{distance:f,point:Jm.clone(),object:n}}function $m(n,e,t,i,r,s,a,l,c,f){n.getVertexPosition(l,Rf),n.getVertexPosition(c,Pf),n.getVertexPosition(f,Df);const p=BD(n,e,t,i,Rf,Pf,Df,Qm);if(p){r&&(qm.fromBufferAttribute(r,l),Zm.fromBufferAttribute(r,c),Km.fromBufferAttribute(r,f),p.uv=ys.getInterpolation(Qm,Rf,Pf,Df,qm,Zm,Km,new _e)),s&&(qm.fromBufferAttribute(s,l),Zm.fromBufferAttribute(s,c),Km.fromBufferAttribute(s,f),p.uv1=ys.getInterpolation(Qm,Rf,Pf,Df,qm,Zm,Km,new _e),p.uv2=p.uv1),a&&(p_.fromBufferAttribute(a,l),m_.fromBufferAttribute(a,c),g_.fromBufferAttribute(a,f),p.normal=ys.getInterpolation(Qm,Rf,Pf,Df,p_,m_,g_,new Q),p.normal.dot(i.direction)>0&&p.normal.multiplyScalar(-1));const g={a:l,b:c,c:f,normal:new Q,materialIndex:0};ys.getNormal(Rf,Pf,Df,g.normal),p.face=g}return p}class Mc extends nn{constructor(e=1,t=1,i=1,r=1,s=1,a=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:a};const l=this;r=Math.floor(r),s=Math.floor(s),a=Math.floor(a);const c=[],f=[],p=[],g=[];let v=0,y=0;S("z","y","x",-1,-1,i,t,e,a,s,0),S("z","y","x",1,-1,i,t,-e,a,s,1),S("x","z","y",1,1,e,i,t,r,a,2),S("x","z","y",1,-1,e,i,-t,r,a,3),S("x","y","z",1,-1,e,t,i,r,s,4),S("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(c),this.setAttribute("position",new Ct(f,3)),this.setAttribute("normal",new Ct(p,3)),this.setAttribute("uv",new Ct(g,2));function S(T,w,M,A,b,R,I,k,F,z,U){const O=R/F,$=I/z,Y=R/2,q=I/2,J=k/2,ae=F+1,oe=z+1;let ue=0,V=0;const j=new Q;for(let W=0;W<oe;W++){const L=W*$-q;for(let B=0;B<ae;B++){const te=B*O-Y;j[T]=te*A,j[w]=L*b,j[M]=J,f.push(j.x,j.y,j.z),j[T]=0,j[w]=0,j[M]=k>0?1:-1,p.push(j.x,j.y,j.z),g.push(B/F),g.push(1-W/z),ue+=1}}for(let W=0;W<z;W++)for(let L=0;L<F;L++){const B=v+L+ae*W,te=v+L+ae*(W+1),ie=v+(L+1)+ae*(W+1),re=v+(L+1)+ae*W;c.push(B,te,re),c.push(te,ie,re),V+=6}l.addGroup(y,V,U),y+=V,v+=ue}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mc(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function rh(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Kr(n){const e={};for(let t=0;t<n.length;t++){const i=rh(n[t]);for(const r in i)e[r]=i[r]}return e}function zD(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function DE(n){return n.getRenderTarget()===null?n.outputColorSpace:Jr}const l1={clone:rh,merge:Kr};var HD=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,GD=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class tn extends hr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HD,this.fragmentShader=GD,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={derivatives:!1,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=rh(e.uniforms),this.uniformsGroups=zD(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const a=this.uniforms[r].value;a&&a.isTexture?t.uniforms[r]={type:"t",value:a.toJSON(e).uuid}:a&&a.isColor?t.uniforms[r]={type:"c",value:a.getHex()}:a&&a.isVector2?t.uniforms[r]={type:"v2",value:a.toArray()}:a&&a.isVector3?t.uniforms[r]={type:"v3",value:a.toArray()}:a&&a.isVector4?t.uniforms[r]={type:"v4",value:a.toArray()}:a&&a.isMatrix3?t.uniforms[r]={type:"m3",value:a.toArray()}:a&&a.isMatrix4?t.uniforms[r]={type:"m4",value:a.toArray()}:t.uniforms[r]={value:a}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class dh extends Mn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new vt,this.projectionMatrix=new vt,this.projectionMatrixInverse=new vt,this.coordinateSystem=co}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(-t[8],-t[9],-t[10]).normalize()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}class ui extends dh{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=ih*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(hc*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return ih*2*Math.atan(Math.tan(hc*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}setViewOffset(e,t,i,r,s,a){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(hc*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const a=this.view;if(this.view!==null&&this.view.enabled){const c=a.fullWidth,f=a.fullHeight;s+=a.offsetX*r/c,t-=a.offsetY*i/f,r*=a.width/c,i*=a.height/f}const l=this.filmOffset;l!==0&&(s+=e*l/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Lf=-90,If=1;class u1 extends Mn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null;const r=new ui(Lf,If,e,t);r.layers=this.layers,this.add(r);const s=new ui(Lf,If,e,t);s.layers=this.layers,this.add(s);const a=new ui(Lf,If,e,t);a.layers=this.layers,this.add(a);const l=new ui(Lf,If,e,t);l.layers=this.layers,this.add(l);const c=new ui(Lf,If,e,t);c.layers=this.layers,this.add(c);const f=new ui(Lf,If,e,t);f.layers=this.layers,this.add(f)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,a,l,c]=t;for(const f of t)this.remove(f);if(e===co)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),a.up.set(0,0,1),a.lookAt(0,-1,0),l.up.set(0,1,0),l.lookAt(0,0,1),c.up.set(0,1,0),c.lookAt(0,0,-1);else if(e===dp)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),a.up.set(0,0,-1),a.lookAt(0,-1,0),l.up.set(0,-1,0),l.lookAt(0,0,1),c.up.set(0,-1,0),c.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const f of t)this.add(f),f.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const i=this.renderTarget;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[r,s,a,l,c,f]=this.children,p=e.getRenderTarget(),g=e.xr.enabled;e.xr.enabled=!1;const v=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0),e.render(t,r),e.setRenderTarget(i,1),e.render(t,s),e.setRenderTarget(i,2),e.render(t,a),e.setRenderTarget(i,3),e.render(t,l),e.setRenderTarget(i,4),e.render(t,c),i.texture.generateMipmaps=v,e.setRenderTarget(i,5),e.render(t,f),e.setRenderTarget(p),e.xr.enabled=g,i.texture.needsPMREMUpdate=!0}}class Pp extends Qn{constructor(e,t,i,r,s,a,l,c,f,p){e=e!==void 0?e:[],t=t!==void 0?t:ol,super(e,t,i,r,s,a,l,c,f,p),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class gv extends an{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];t.encoding!==void 0&&(qd("THREE.WebGLCubeRenderTarget: option.encoding has been replaced by option.colorSpace."),t.colorSpace=t.encoding===al?yt:Ha),this.texture=new Pp(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Et}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new Mc(5,5,5),s=new tn({name:"CubemapFromEquirect",uniforms:rh(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Zi,blending:Kn});s.uniforms.tEquirect.value=t;const a=new xi(r,s),l=t.minFilter;return t.minFilter===tu&&(t.minFilter=Et),new u1(1,10,this).update(e,a),t.minFilter=l,a.geometry.dispose(),a.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let a=0;a<6;a++)e.setRenderTarget(this,a),e.clear(t,i,r);e.setRenderTarget(s)}}const X0=new Q,VD=new Q,WD=new sn;class Kl{constructor(e=new Q(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=X0.subVectors(i,t).cross(VD.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(X0),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||WD.getNormalMatrix(e),r=this.coplanarPoint(X0).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const ju=new Os,eg=new Q;class vv{constructor(e=new Kl,t=new Kl,i=new Kl,r=new Kl,s=new Kl,a=new Kl){this.planes=[e,t,i,r,s,a]}set(e,t,i,r,s,a){const l=this.planes;return l[0].copy(e),l[1].copy(t),l[2].copy(i),l[3].copy(r),l[4].copy(s),l[5].copy(a),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=co){const i=this.planes,r=e.elements,s=r[0],a=r[1],l=r[2],c=r[3],f=r[4],p=r[5],g=r[6],v=r[7],y=r[8],S=r[9],T=r[10],w=r[11],M=r[12],A=r[13],b=r[14],R=r[15];if(i[0].setComponents(c-s,v-f,w-y,R-M).normalize(),i[1].setComponents(c+s,v+f,w+y,R+M).normalize(),i[2].setComponents(c+a,v+p,w+S,R+A).normalize(),i[3].setComponents(c-a,v-p,w-S,R-A).normalize(),i[4].setComponents(c-l,v-g,w-T,R-b).normalize(),t===co)i[5].setComponents(c+l,v+g,w+T,R+b).normalize();else if(t===dp)i[5].setComponents(l,g,T,b).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),ju.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),ju.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(ju)}intersectsSprite(e){return ju.center.set(0,0,0),ju.radius=.7071067811865476,ju.applyMatrix4(e.matrixWorld),this.intersectsSphere(ju)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(eg.x=r.normal.x>0?e.max.x:e.min.x,eg.y=r.normal.y>0?e.max.y:e.min.y,eg.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(eg)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function LE(){let n=null,e=!1,t=null,i=null;function r(s,a){t(s,a),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function jD(n,e){const t=e.isWebGL2,i=new WeakMap;function r(f,p){const g=f.array,v=f.usage,y=n.createBuffer();n.bindBuffer(p,y),n.bufferData(p,g,v),f.onUploadCallback();let S;if(g instanceof Float32Array)S=n.FLOAT;else if(g instanceof Uint16Array)if(f.isFloat16BufferAttribute)if(t)S=n.HALF_FLOAT;else throw new Error("THREE.WebGLAttributes: Usage of Float16BufferAttribute requires WebGL2.");else S=n.UNSIGNED_SHORT;else if(g instanceof Int16Array)S=n.SHORT;else if(g instanceof Uint32Array)S=n.UNSIGNED_INT;else if(g instanceof Int32Array)S=n.INT;else if(g instanceof Int8Array)S=n.BYTE;else if(g instanceof Uint8Array)S=n.UNSIGNED_BYTE;else if(g instanceof Uint8ClampedArray)S=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+g);return{buffer:y,type:S,bytesPerElement:g.BYTES_PER_ELEMENT,version:f.version}}function s(f,p,g){const v=p.array,y=p.updateRange;n.bindBuffer(g,f),y.count===-1?n.bufferSubData(g,0,v):(t?n.bufferSubData(g,y.offset*v.BYTES_PER_ELEMENT,v,y.offset,y.count):n.bufferSubData(g,y.offset*v.BYTES_PER_ELEMENT,v.subarray(y.offset,y.offset+y.count)),y.count=-1),p.onUploadCallback()}function a(f){return f.isInterleavedBufferAttribute&&(f=f.data),i.get(f)}function l(f){f.isInterleavedBufferAttribute&&(f=f.data);const p=i.get(f);p&&(n.deleteBuffer(p.buffer),i.delete(f))}function c(f,p){if(f.isGLBufferAttribute){const v=i.get(f);(!v||v.version<f.version)&&i.set(f,{buffer:f.buffer,type:f.type,bytesPerElement:f.elementSize,version:f.version});return}f.isInterleavedBufferAttribute&&(f=f.data);const g=i.get(f);g===void 0?i.set(f,r(f,p)):g.version<f.version&&(s(g.buffer,f,p),g.version=f.version)}return{get:a,remove:l,update:c}}class ru extends nn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,a=t/2,l=Math.floor(i),c=Math.floor(r),f=l+1,p=c+1,g=e/l,v=t/c,y=[],S=[],T=[],w=[];for(let M=0;M<p;M++){const A=M*v-a;for(let b=0;b<f;b++){const R=b*g-s;S.push(R,-A,0),T.push(0,0,1),w.push(b/l),w.push(1-M/c)}}for(let M=0;M<c;M++)for(let A=0;A<l;A++){const b=A+f*M,R=A+f*(M+1),I=A+1+f*(M+1),k=A+1+f*M;y.push(b,R,k),y.push(R,I,k)}this.setIndex(y),this.setAttribute("position",new Ct(S,3)),this.setAttribute("normal",new Ct(T,3)),this.setAttribute("uv",new Ct(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new ru(e.width,e.height,e.widthSegments,e.heightSegments)}}var XD=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,YD=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,qD=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ZD=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,KD=`#ifdef USE_ALPHATEST
	if ( diffuseColor.a < alphaTest ) discard;
#endif`,QD=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,JD=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,$D=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,eL=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,tL=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,nL=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,iL=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,rL=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = dFdx( surf_pos.xyz );
		vec3 vSigmaY = dFdy( surf_pos.xyz );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,sL=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#pragma unroll_loop_start
	for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
		plane = clippingPlanes[ i ];
		if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
	}
	#pragma unroll_loop_end
	#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
		bool clipped = true;
		#pragma unroll_loop_start
		for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
		}
		#pragma unroll_loop_end
		if ( clipped ) discard;
	#endif
#endif`,aL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,oL=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,lL=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,uL=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,cL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,fL=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	varying vec3 vColor;
#endif`,hL=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif`,dL=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
struct GeometricContext {
	vec3 position;
	vec3 normal;
	vec3 viewDir;
#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal;
#endif
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
float luminance( const in vec3 rgb ) {
	const vec3 weights = vec3( 0.2126729, 0.7151522, 0.0721750 );
	return dot( weights, rgb );
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,pL=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_v0 0.339
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_v1 0.276
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_v4 0.046
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_v5 0.016
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_v6 0.0038
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,mL=`vec3 transformedNormal = objectNormal;
#ifdef USE_INSTANCING
	mat3 m = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );
	transformedNormal = m * transformedNormal;
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	vec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,gL=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,vL=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,yL=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,xL=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,SL="gl_FragColor = linearToOutputTexel( gl_FragColor );",_L=`vec4 LinearToLinear( in vec4 value ) {
	return value;
}
vec4 LinearTosRGB( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ML=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,wL=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,TL=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,EL=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,bL=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,AL=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,CL=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,RL=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,PL=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,DL=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,LL=`#ifdef USE_LIGHTMAP
	vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
	vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
	reflectedLight.indirectDiffuse += lightMapIrradiance;
#endif`,IL=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,UL=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,NL=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in GeometricContext geometry, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,FL=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
uniform vec3 lightProbe[ 9 ];
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	#if defined ( LEGACY_LIGHTS )
		if ( cutoffDistance > 0.0 && decayExponent > 0.0 ) {
			return pow( saturate( - lightDistance / cutoffDistance + 1.0 ), decayExponent );
		}
		return 1.0;
	#else
		float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
		if ( cutoffDistance > 0.0 ) {
			distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
		}
		return distanceFalloff;
	#endif
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometry.position;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometry.position;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,kL=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,OL=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,BL=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,zL=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,HL=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometry.viewDir, geometry.normal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,GL=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	anisotropyV /= material.anisotropy;
	material.anisotropy = saturate( material.anisotropy );
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x - tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x + tbn[ 0 ] * anisotropyV.y;
#endif`,VL=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecular = vec3( 0.0 );
vec3 sheenSpecular = vec3( 0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometry.normal;
		vec3 viewDir = geometry.viewDir;
		vec3 position = geometry.position;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometry.normal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecular += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometry.viewDir, geometry.clearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * BRDF_Sheen( directLight.direction, geometry.viewDir, geometry.normal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometry.viewDir, geometry.normal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecular += clearcoatRadiance * EnvironmentBRDF( geometry.clearcoatNormal, geometry.viewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecular += irradiance * material.sheenColor * IBLSheenBRDF( geometry.normal, geometry.viewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometry.normal, geometry.viewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,WL=`
GeometricContext geometry;
geometry.position = - vViewPosition;
geometry.normal = normal;
geometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
#ifdef USE_CLEARCOAT
	geometry.clearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometry.viewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometry, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, geometry, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	irradiance += getLightProbeIrradiance( lightProbe, geometry.normal );
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry.normal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,jL=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometry.normal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometry.viewDir, geometry.normal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometry.viewDir, geometry.normal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,XL=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );
#endif`,YL=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,qL=`#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,ZL=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		varying float vFragDepth;
		varying float vIsPerspective;
	#else
		uniform float logDepthBufFC;
	#endif
#endif`,KL=`#ifdef USE_LOGDEPTHBUF
	#ifdef USE_LOGDEPTHBUF_EXT
		vFragDepth = 1.0 + gl_Position.w;
		vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
	#else
		if ( isPerspectiveMatrix( projectionMatrix ) ) {
			gl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;
			gl_Position.z *= gl_Position.w;
		}
	#endif
#endif`,QL=`#ifdef USE_MAP
	diffuseColor *= texture2D( map, vMapUv );
#endif`,JL=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,$L=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,e3=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,t3=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,n3=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,i3=`#if defined( USE_MORPHCOLORS ) && defined( MORPHTARGETS_TEXTURE )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,r3=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		objectNormal += morphNormal0 * morphTargetInfluences[ 0 ];
		objectNormal += morphNormal1 * morphTargetInfluences[ 1 ];
		objectNormal += morphNormal2 * morphTargetInfluences[ 2 ];
		objectNormal += morphNormal3 * morphTargetInfluences[ 3 ];
	#endif
#endif`,s3=`#ifdef USE_MORPHTARGETS
	uniform float morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
		uniform sampler2DArray morphTargetsTexture;
		uniform ivec2 morphTargetsTextureSize;
		vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
			int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
			int y = texelIndex / morphTargetsTextureSize.x;
			int x = texelIndex - y * morphTargetsTextureSize.x;
			ivec3 morphUV = ivec3( x, y, morphTargetIndex );
			return texelFetch( morphTargetsTexture, morphUV, 0 );
		}
	#else
		#ifndef USE_MORPHNORMALS
			uniform float morphTargetInfluences[ 8 ];
		#else
			uniform float morphTargetInfluences[ 4 ];
		#endif
	#endif
#endif`,a3=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	#ifdef MORPHTARGETS_TEXTURE
		for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
			if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
		}
	#else
		transformed += morphTarget0 * morphTargetInfluences[ 0 ];
		transformed += morphTarget1 * morphTargetInfluences[ 1 ];
		transformed += morphTarget2 * morphTargetInfluences[ 2 ];
		transformed += morphTarget3 * morphTargetInfluences[ 3 ];
		#ifndef USE_MORPHNORMALS
			transformed += morphTarget4 * morphTargetInfluences[ 4 ];
			transformed += morphTarget5 * morphTargetInfluences[ 5 ];
			transformed += morphTarget6 * morphTargetInfluences[ 6 ];
			transformed += morphTarget7 * morphTargetInfluences[ 7 ];
		#endif
	#endif
#endif`,o3=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 geometryNormal = normal;`,l3=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,u3=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,c3=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,f3=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,h3=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,d3=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = geometryNormal;
#endif`,p3=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,m3=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,g3=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,v3=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,y3=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;
const vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256., 256. );
const vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );
const float ShiftRight8 = 1. / 256.;
vec4 packDepthToRGBA( const in float v ) {
	vec4 r = vec4( fract( v * PackFactors ), v );
	r.yzw -= r.xyz * ShiftRight8;	return r * PackUpscale;
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors );
}
vec2 packDepthToRG( in highp float v ) {
	return packDepthToRGBA( v ).yx;
}
float unpackRGToDepth( const in highp vec2 v ) {
	return unpackRGBAToDepth( vec4( v.xy, 0.0, 0.0 ) );
}
vec4 pack2HalfToRGBA( vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,x3=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,S3=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,_3=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,M3=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,w3=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,T3=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,E3=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return shadow;
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
		vec3 lightToPosition = shadowCoord.xyz;
		float dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );		dp += shadowBias;
		vec3 bd3D = normalize( lightToPosition );
		#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
			vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
			return (
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
				texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
			) * ( 1.0 / 9.0 );
		#else
			return texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
		#endif
	}
#endif`,b3=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,A3=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,C3=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,R3=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,P3=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	uniform int boneTextureSize;
	mat4 getBoneMatrix( const in float i ) {
		float j = i * 4.0;
		float x = mod( j, float( boneTextureSize ) );
		float y = floor( j / float( boneTextureSize ) );
		float dx = 1.0 / float( boneTextureSize );
		float dy = 1.0 / float( boneTextureSize );
		y = dy * ( y + 0.5 );
		vec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );
		vec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );
		vec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );
		vec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );
		mat4 bone = mat4( v1, v2, v3, v4 );
		return bone;
	}
#endif`,D3=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,L3=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,I3=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,U3=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,N3=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,F3=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 OptimizedCineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,k3=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,O3=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
		vec3 refractedRayExit = position + transmissionRay;
		vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
		vec2 refractionCoords = ndcPos.xy / ndcPos.w;
		refractionCoords += 1.0;
		refractionCoords /= 2.0;
		vec4 transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
		vec3 transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,B3=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,z3=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,H3=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,G3=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const V3=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,W3=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,j3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,X3=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Y3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,q3=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Z3=`#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,K3=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#endif
}`,Q3=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <skinbase_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,J3=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( 1.0 );
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,$3=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,eI=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,tI=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,nI=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,iI=`#include <common>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,rI=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sI=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,aI=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,oI=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,lI=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,uI=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,cI=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), opacity );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,fI=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,hI=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dI=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,pI=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecular;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + clearcoatSpecular * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mI=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,gI=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec4 diffuseColor = vec4( diffuse, opacity );
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,vI=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,yI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,xI=`#include <common>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SI=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,_I=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
	vec2 scale;
	scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
	scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,MI=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Nt={alphahash_fragment:XD,alphahash_pars_fragment:YD,alphamap_fragment:qD,alphamap_pars_fragment:ZD,alphatest_fragment:KD,alphatest_pars_fragment:QD,aomap_fragment:JD,aomap_pars_fragment:$D,begin_vertex:eL,beginnormal_vertex:tL,bsdfs:nL,iridescence_fragment:iL,bumpmap_pars_fragment:rL,clipping_planes_fragment:sL,clipping_planes_pars_fragment:aL,clipping_planes_pars_vertex:oL,clipping_planes_vertex:lL,color_fragment:uL,color_pars_fragment:cL,color_pars_vertex:fL,color_vertex:hL,common:dL,cube_uv_reflection_fragment:pL,defaultnormal_vertex:mL,displacementmap_pars_vertex:gL,displacementmap_vertex:vL,emissivemap_fragment:yL,emissivemap_pars_fragment:xL,colorspace_fragment:SL,colorspace_pars_fragment:_L,envmap_fragment:ML,envmap_common_pars_fragment:wL,envmap_pars_fragment:TL,envmap_pars_vertex:EL,envmap_physical_pars_fragment:kL,envmap_vertex:bL,fog_vertex:AL,fog_pars_vertex:CL,fog_fragment:RL,fog_pars_fragment:PL,gradientmap_pars_fragment:DL,lightmap_fragment:LL,lightmap_pars_fragment:IL,lights_lambert_fragment:UL,lights_lambert_pars_fragment:NL,lights_pars_begin:FL,lights_toon_fragment:OL,lights_toon_pars_fragment:BL,lights_phong_fragment:zL,lights_phong_pars_fragment:HL,lights_physical_fragment:GL,lights_physical_pars_fragment:VL,lights_fragment_begin:WL,lights_fragment_maps:jL,lights_fragment_end:XL,logdepthbuf_fragment:YL,logdepthbuf_pars_fragment:qL,logdepthbuf_pars_vertex:ZL,logdepthbuf_vertex:KL,map_fragment:QL,map_pars_fragment:JL,map_particle_fragment:$L,map_particle_pars_fragment:e3,metalnessmap_fragment:t3,metalnessmap_pars_fragment:n3,morphcolor_vertex:i3,morphnormal_vertex:r3,morphtarget_pars_vertex:s3,morphtarget_vertex:a3,normal_fragment_begin:o3,normal_fragment_maps:l3,normal_pars_fragment:u3,normal_pars_vertex:c3,normal_vertex:f3,normalmap_pars_fragment:h3,clearcoat_normal_fragment_begin:d3,clearcoat_normal_fragment_maps:p3,clearcoat_pars_fragment:m3,iridescence_pars_fragment:g3,opaque_fragment:v3,packing:y3,premultiplied_alpha_fragment:x3,project_vertex:S3,dithering_fragment:_3,dithering_pars_fragment:M3,roughnessmap_fragment:w3,roughnessmap_pars_fragment:T3,shadowmap_pars_fragment:E3,shadowmap_pars_vertex:b3,shadowmap_vertex:A3,shadowmask_pars_fragment:C3,skinbase_vertex:R3,skinning_pars_vertex:P3,skinning_vertex:D3,skinnormal_vertex:L3,specularmap_fragment:I3,specularmap_pars_fragment:U3,tonemapping_fragment:N3,tonemapping_pars_fragment:F3,transmission_fragment:k3,transmission_pars_fragment:O3,uv_pars_fragment:B3,uv_pars_vertex:z3,uv_vertex:H3,worldpos_vertex:G3,background_vert:V3,background_frag:W3,backgroundCube_vert:j3,backgroundCube_frag:X3,cube_vert:Y3,cube_frag:q3,depth_vert:Z3,depth_frag:K3,distanceRGBA_vert:Q3,distanceRGBA_frag:J3,equirect_vert:$3,equirect_frag:eI,linedashed_vert:tI,linedashed_frag:nI,meshbasic_vert:iI,meshbasic_frag:rI,meshlambert_vert:sI,meshlambert_frag:aI,meshmatcap_vert:oI,meshmatcap_frag:lI,meshnormal_vert:uI,meshnormal_frag:cI,meshphong_vert:fI,meshphong_frag:hI,meshphysical_vert:dI,meshphysical_frag:pI,meshtoon_vert:mI,meshtoon_frag:gI,points_vert:vI,points_frag:yI,shadow_vert:xI,shadow_frag:SI,sprite_vert:_I,sprite_frag:MI},dt={common:{diffuse:{value:new Je(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new sn}},envmap:{envMap:{value:null},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new sn},normalScale:{value:new _e(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Je(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Je(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0},uvTransform:{value:new sn}},sprite:{diffuse:{value:new Je(16777215)},opacity:{value:1},center:{value:new _e(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}}},Oa={basic:{uniforms:Kr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.fog]),vertexShader:Nt.meshbasic_vert,fragmentShader:Nt.meshbasic_frag},lambert:{uniforms:Kr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new Je(0)}}]),vertexShader:Nt.meshlambert_vert,fragmentShader:Nt.meshlambert_frag},phong:{uniforms:Kr([dt.common,dt.specularmap,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,dt.lights,{emissive:{value:new Je(0)},specular:{value:new Je(1118481)},shininess:{value:30}}]),vertexShader:Nt.meshphong_vert,fragmentShader:Nt.meshphong_frag},standard:{uniforms:Kr([dt.common,dt.envmap,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.roughnessmap,dt.metalnessmap,dt.fog,dt.lights,{emissive:{value:new Je(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag},toon:{uniforms:Kr([dt.common,dt.aomap,dt.lightmap,dt.emissivemap,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.gradientmap,dt.fog,dt.lights,{emissive:{value:new Je(0)}}]),vertexShader:Nt.meshtoon_vert,fragmentShader:Nt.meshtoon_frag},matcap:{uniforms:Kr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,dt.fog,{matcap:{value:null}}]),vertexShader:Nt.meshmatcap_vert,fragmentShader:Nt.meshmatcap_frag},points:{uniforms:Kr([dt.points,dt.fog]),vertexShader:Nt.points_vert,fragmentShader:Nt.points_frag},dashed:{uniforms:Kr([dt.common,dt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Nt.linedashed_vert,fragmentShader:Nt.linedashed_frag},depth:{uniforms:Kr([dt.common,dt.displacementmap]),vertexShader:Nt.depth_vert,fragmentShader:Nt.depth_frag},normal:{uniforms:Kr([dt.common,dt.bumpmap,dt.normalmap,dt.displacementmap,{opacity:{value:1}}]),vertexShader:Nt.meshnormal_vert,fragmentShader:Nt.meshnormal_frag},sprite:{uniforms:Kr([dt.sprite,dt.fog]),vertexShader:Nt.sprite_vert,fragmentShader:Nt.sprite_frag},background:{uniforms:{uvTransform:{value:new sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Nt.background_vert,fragmentShader:Nt.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1}},vertexShader:Nt.backgroundCube_vert,fragmentShader:Nt.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Nt.cube_vert,fragmentShader:Nt.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Nt.equirect_vert,fragmentShader:Nt.equirect_frag},distanceRGBA:{uniforms:Kr([dt.common,dt.displacementmap,{referencePosition:{value:new Q},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Nt.distanceRGBA_vert,fragmentShader:Nt.distanceRGBA_frag},shadow:{uniforms:Kr([dt.lights,dt.fog,{color:{value:new Je(0)},opacity:{value:1}}]),vertexShader:Nt.shadow_vert,fragmentShader:Nt.shadow_frag}};Oa.physical={uniforms:Kr([Oa.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new sn},clearcoatNormalScale:{value:new _e(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new sn},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new sn},sheen:{value:0},sheenColor:{value:new Je(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new sn},transmissionSamplerSize:{value:new _e},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new sn},attenuationDistance:{value:0},attenuationColor:{value:new Je(0)},specularColor:{value:new Je(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new sn},anisotropyVector:{value:new _e},anisotropyMap:{value:null},anisotropyMapTransform:{value:new sn}}]),vertexShader:Nt.meshphysical_vert,fragmentShader:Nt.meshphysical_frag};const tg={r:0,b:0,g:0};function wI(n,e,t,i,r,s,a){const l=new Je(0);let c=s===!0?0:1,f,p,g=null,v=0,y=null;function S(w,M){let A=!1,b=M.isScene===!0?M.background:null;switch(b&&b.isTexture&&(b=(M.backgroundBlurriness>0?t:e).get(b)),b===null?T(l,c):b&&b.isColor&&(T(b,1),A=!0),n.xr.getEnvironmentBlendMode()){case"opaque":A=!0;break;case"additive":i.buffers.color.setClear(0,0,0,1,a),A=!0;break;case"alpha-blend":i.buffers.color.setClear(0,0,0,0,a),A=!0;break}(n.autoClear||A)&&n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil),b&&(b.isCubeTexture||b.mapping===ch)?(p===void 0&&(p=new xi(new Mc(1,1,1),new tn({name:"BackgroundCubeMaterial",uniforms:rh(Oa.backgroundCube.uniforms),vertexShader:Oa.backgroundCube.vertexShader,fragmentShader:Oa.backgroundCube.fragmentShader,side:Zi,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(k,F,z){this.matrixWorld.copyPosition(z.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(p)),p.material.uniforms.envMap.value=b,p.material.uniforms.flipEnvMap.value=b.isCubeTexture&&b.isRenderTargetTexture===!1?-1:1,p.material.uniforms.backgroundBlurriness.value=M.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,p.material.toneMapped=b.colorSpace!==yt,(g!==b||v!==b.version||y!==n.toneMapping)&&(p.material.needsUpdate=!0,g=b,v=b.version,y=n.toneMapping),p.layers.enableAll(),w.unshift(p,p.geometry,p.material,0,0,null)):b&&b.isTexture&&(f===void 0&&(f=new xi(new ru(2,2),new tn({name:"BackgroundMaterial",uniforms:rh(Oa.background.uniforms),vertexShader:Oa.background.vertexShader,fragmentShader:Oa.background.fragmentShader,side:go,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(f)),f.material.uniforms.t2D.value=b,f.material.uniforms.backgroundIntensity.value=M.backgroundIntensity,f.material.toneMapped=b.colorSpace!==yt,b.matrixAutoUpdate===!0&&b.updateMatrix(),f.material.uniforms.uvTransform.value.copy(b.matrix),(g!==b||v!==b.version||y!==n.toneMapping)&&(f.material.needsUpdate=!0,g=b,v=b.version,y=n.toneMapping),f.layers.enableAll(),w.unshift(f,f.geometry,f.material,0,0,null))}function T(w,M){w.getRGB(tg,DE(n)),i.buffers.color.setClear(tg.r,tg.g,tg.b,M,a)}return{getClearColor:function(){return l},setClearColor:function(w,M=1){l.set(w),c=M,T(l,c)},getClearAlpha:function(){return c},setClearAlpha:function(w){c=w,T(l,c)},render:S}}function TI(n,e,t,i){const r=n.getParameter(n.MAX_VERTEX_ATTRIBS),s=i.isWebGL2?null:e.get("OES_vertex_array_object"),a=i.isWebGL2||s!==null,l={},c=w(null);let f=c,p=!1;function g(J,ae,oe,ue,V){let j=!1;if(a){const W=T(ue,oe,ae);f!==W&&(f=W,y(f.object)),j=M(J,ue,oe,V),j&&A(J,ue,oe,V)}else{const W=ae.wireframe===!0;(f.geometry!==ue.id||f.program!==oe.id||f.wireframe!==W)&&(f.geometry=ue.id,f.program=oe.id,f.wireframe=W,j=!0)}V!==null&&t.update(V,n.ELEMENT_ARRAY_BUFFER),(j||p)&&(p=!1,z(J,ae,oe,ue),V!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t.get(V).buffer))}function v(){return i.isWebGL2?n.createVertexArray():s.createVertexArrayOES()}function y(J){return i.isWebGL2?n.bindVertexArray(J):s.bindVertexArrayOES(J)}function S(J){return i.isWebGL2?n.deleteVertexArray(J):s.deleteVertexArrayOES(J)}function T(J,ae,oe){const ue=oe.wireframe===!0;let V=l[J.id];V===void 0&&(V={},l[J.id]=V);let j=V[ae.id];j===void 0&&(j={},V[ae.id]=j);let W=j[ue];return W===void 0&&(W=w(v()),j[ue]=W),W}function w(J){const ae=[],oe=[],ue=[];for(let V=0;V<r;V++)ae[V]=0,oe[V]=0,ue[V]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:ae,enabledAttributes:oe,attributeDivisors:ue,object:J,attributes:{},index:null}}function M(J,ae,oe,ue){const V=f.attributes,j=ae.attributes;let W=0;const L=oe.getAttributes();for(const B in L)if(L[B].location>=0){const ie=V[B];let re=j[B];if(re===void 0&&(B==="instanceMatrix"&&J.instanceMatrix&&(re=J.instanceMatrix),B==="instanceColor"&&J.instanceColor&&(re=J.instanceColor)),ie===void 0||ie.attribute!==re||re&&ie.data!==re.data)return!0;W++}return f.attributesNum!==W||f.index!==ue}function A(J,ae,oe,ue){const V={},j=ae.attributes;let W=0;const L=oe.getAttributes();for(const B in L)if(L[B].location>=0){let ie=j[B];ie===void 0&&(B==="instanceMatrix"&&J.instanceMatrix&&(ie=J.instanceMatrix),B==="instanceColor"&&J.instanceColor&&(ie=J.instanceColor));const re={};re.attribute=ie,ie&&ie.data&&(re.data=ie.data),V[B]=re,W++}f.attributes=V,f.attributesNum=W,f.index=ue}function b(){const J=f.newAttributes;for(let ae=0,oe=J.length;ae<oe;ae++)J[ae]=0}function R(J){I(J,0)}function I(J,ae){const oe=f.newAttributes,ue=f.enabledAttributes,V=f.attributeDivisors;oe[J]=1,ue[J]===0&&(n.enableVertexAttribArray(J),ue[J]=1),V[J]!==ae&&((i.isWebGL2?n:e.get("ANGLE_instanced_arrays"))[i.isWebGL2?"vertexAttribDivisor":"vertexAttribDivisorANGLE"](J,ae),V[J]=ae)}function k(){const J=f.newAttributes,ae=f.enabledAttributes;for(let oe=0,ue=ae.length;oe<ue;oe++)ae[oe]!==J[oe]&&(n.disableVertexAttribArray(oe),ae[oe]=0)}function F(J,ae,oe,ue,V,j,W){W===!0?n.vertexAttribIPointer(J,ae,oe,V,j):n.vertexAttribPointer(J,ae,oe,ue,V,j)}function z(J,ae,oe,ue){if(i.isWebGL2===!1&&(J.isInstancedMesh||ue.isInstancedBufferGeometry)&&e.get("ANGLE_instanced_arrays")===null)return;b();const V=ue.attributes,j=oe.getAttributes(),W=ae.defaultAttributeValues;for(const L in j){const B=j[L];if(B.location>=0){let te=V[L];if(te===void 0&&(L==="instanceMatrix"&&J.instanceMatrix&&(te=J.instanceMatrix),L==="instanceColor"&&J.instanceColor&&(te=J.instanceColor)),te!==void 0){const ie=te.normalized,re=te.itemSize,de=t.get(te);if(de===void 0)continue;const he=de.buffer,ve=de.type,Ve=de.bytesPerElement,rt=i.isWebGL2===!0&&(ve===n.INT||ve===n.UNSIGNED_INT||te.gpuType===qx);if(te.isInterleavedBufferAttribute){const Ue=te.data,Z=Ue.stride,Fe=te.offset;if(Ue.isInstancedInterleavedBuffer){for(let we=0;we<B.locationSize;we++)I(B.location+we,Ue.meshPerAttribute);J.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=Ue.meshPerAttribute*Ue.count)}else for(let we=0;we<B.locationSize;we++)R(B.location+we);n.bindBuffer(n.ARRAY_BUFFER,he);for(let we=0;we<B.locationSize;we++)F(B.location+we,re/B.locationSize,ve,ie,Z*Ve,(Fe+re/B.locationSize*we)*Ve,rt)}else{if(te.isInstancedBufferAttribute){for(let Ue=0;Ue<B.locationSize;Ue++)I(B.location+Ue,te.meshPerAttribute);J.isInstancedMesh!==!0&&ue._maxInstanceCount===void 0&&(ue._maxInstanceCount=te.meshPerAttribute*te.count)}else for(let Ue=0;Ue<B.locationSize;Ue++)R(B.location+Ue);n.bindBuffer(n.ARRAY_BUFFER,he);for(let Ue=0;Ue<B.locationSize;Ue++)F(B.location+Ue,re/B.locationSize,ve,ie,re*Ve,re/B.locationSize*Ue*Ve,rt)}}else if(W!==void 0){const ie=W[L];if(ie!==void 0)switch(ie.length){case 2:n.vertexAttrib2fv(B.location,ie);break;case 3:n.vertexAttrib3fv(B.location,ie);break;case 4:n.vertexAttrib4fv(B.location,ie);break;default:n.vertexAttrib1fv(B.location,ie)}}}}k()}function U(){Y();for(const J in l){const ae=l[J];for(const oe in ae){const ue=ae[oe];for(const V in ue)S(ue[V].object),delete ue[V];delete ae[oe]}delete l[J]}}function O(J){if(l[J.id]===void 0)return;const ae=l[J.id];for(const oe in ae){const ue=ae[oe];for(const V in ue)S(ue[V].object),delete ue[V];delete ae[oe]}delete l[J.id]}function $(J){for(const ae in l){const oe=l[ae];if(oe[J.id]===void 0)continue;const ue=oe[J.id];for(const V in ue)S(ue[V].object),delete ue[V];delete oe[J.id]}}function Y(){q(),p=!0,f!==c&&(f=c,y(f.object))}function q(){c.geometry=null,c.program=null,c.wireframe=!1}return{setup:g,reset:Y,resetDefaultState:q,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:$,initAttributes:b,enableAttribute:R,disableUnusedAttributes:k}}function EI(n,e,t,i){const r=i.isWebGL2;let s;function a(f){s=f}function l(f,p){n.drawArrays(s,f,p),t.update(p,s,1)}function c(f,p,g){if(g===0)return;let v,y;if(r)v=n,y="drawArraysInstanced";else if(v=e.get("ANGLE_instanced_arrays"),y="drawArraysInstancedANGLE",v===null){console.error("THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}v[y](s,f,p,g),t.update(p,s,g)}this.setMode=a,this.render=l,this.renderInstances=c}function bI(n,e,t){let i;function r(){if(i!==void 0)return i;if(e.has("EXT_texture_filter_anisotropic")===!0){const F=e.get("EXT_texture_filter_anisotropic");i=n.getParameter(F.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else i=0;return i}function s(F){if(F==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";F="mediump"}return F==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}const a=typeof WebGL2RenderingContext<"u"&&n.constructor.name==="WebGL2RenderingContext";let l=t.precision!==void 0?t.precision:"highp";const c=s(l);c!==l&&(console.warn("THREE.WebGLRenderer:",l,"not supported, using",c,"instead."),l=c);const f=a||e.has("WEBGL_draw_buffers"),p=t.logarithmicDepthBuffer===!0,g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),v=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),y=n.getParameter(n.MAX_TEXTURE_SIZE),S=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),T=n.getParameter(n.MAX_VERTEX_ATTRIBS),w=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),M=n.getParameter(n.MAX_VARYING_VECTORS),A=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),b=v>0,R=a||e.has("OES_texture_float"),I=b&&R,k=a?n.getParameter(n.MAX_SAMPLES):0;return{isWebGL2:a,drawBuffers:f,getMaxAnisotropy:r,getMaxPrecision:s,precision:l,logarithmicDepthBuffer:p,maxTextures:g,maxVertexTextures:v,maxTextureSize:y,maxCubemapSize:S,maxAttributes:T,maxVertexUniforms:w,maxVaryings:M,maxFragmentUniforms:A,vertexTextures:b,floatFragmentTextures:R,floatVertexTextures:I,maxSamples:k}}function AI(n){const e=this;let t=null,i=0,r=!1,s=!1;const a=new Kl,l=new sn,c={value:null,needsUpdate:!1};this.uniform=c,this.numPlanes=0,this.numIntersection=0,this.init=function(g,v){const y=g.length!==0||v||i!==0||r;return r=v,i=g.length,y},this.beginShadows=function(){s=!0,p(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(g,v){t=p(g,v,0)},this.setState=function(g,v,y){const S=g.clippingPlanes,T=g.clipIntersection,w=g.clipShadows,M=n.get(g);if(!r||S===null||S.length===0||s&&!w)s?p(null):f();else{const A=s?0:i,b=A*4;let R=M.clippingState||null;c.value=R,R=p(S,v,b,y);for(let I=0;I!==b;++I)R[I]=t[I];M.clippingState=R,this.numIntersection=T?this.numPlanes:0,this.numPlanes+=A}};function f(){c.value!==t&&(c.value=t,c.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function p(g,v,y,S){const T=g!==null?g.length:0;let w=null;if(T!==0){if(w=c.value,S!==!0||w===null){const M=y+T*4,A=v.matrixWorldInverse;l.getNormalMatrix(A),(w===null||w.length<M)&&(w=new Float32Array(M));for(let b=0,R=y;b!==T;++b,R+=4)a.copy(g[b]).applyMatrix4(A,l),a.normal.toArray(w,R),w[R+3]=a.constant}c.value=w,c.needsUpdate=!0}return e.numPlanes=T,e.numIntersection=0,w}}function CI(n){let e=new WeakMap;function t(a,l){return l===ap?a.mapping=ol:l===op&&(a.mapping=eu),a}function i(a){if(a&&a.isTexture&&a.isRenderTargetTexture===!1){const l=a.mapping;if(l===ap||l===op)if(e.has(a)){const c=e.get(a).texture;return t(c,a.mapping)}else{const c=a.image;if(c&&c.height>0){const f=new gv(c.height/2);return f.fromEquirectangularTexture(n,a),e.set(a,f),a.addEventListener("dispose",r),t(f.texture,a.mapping)}else return null}}return a}function r(a){const l=a.target;l.removeEventListener("dispose",r);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ph extends dh{constructor(e=-1,t=1,i=1,r=-1,s=.1,a=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=a,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,a){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=a,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,a=i+e,l=r+t,c=r-t;if(this.view!==null&&this.view.enabled){const f=(this.right-this.left)/this.view.fullWidth/this.zoom,p=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=f*this.view.offsetX,a=s+f*this.view.width,l-=p*this.view.offsetY,c=l-p*this.view.height}this.projectionMatrix.makeOrthographic(s,a,l,c,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Zf=4,v_=[.125,.215,.35,.446,.526,.582],nc=20,Y0=new ph,y_=new Je;let q0=null;const ec=(1+Math.sqrt(5))/2,Uf=1/ec,x_=[new Q(1,1,1),new Q(-1,1,1),new Q(1,1,-1),new Q(-1,1,-1),new Q(0,ec,Uf),new Q(0,ec,-Uf),new Q(Uf,0,ec),new Q(-Uf,0,ec),new Q(ec,Uf,0),new Q(-ec,Uf,0)];class nv{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){q0=this._renderer.getRenderTarget(),this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=M_(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=__(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(q0),e.scissorTest=!1,ng(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===ol||e.mapping===eu?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),q0=this._renderer.getRenderTarget();const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Et,minFilter:Et,generateMipmaps:!1,type:Tr,format:Dn,colorSpace:Jr,depthBuffer:!1},r=S_(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=S_(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=RI(s)),this._blurMaterial=PI(s,e,t)}return r}_compileMaterial(e){const t=new xi(this._lodPlanes[0],e);this._renderer.compile(t,Y0)}_sceneToCubeUV(e,t,i,r){const l=new ui(90,1,t,i),c=[1,-1,1,1,1,1],f=[1,1,1,-1,-1,-1],p=this._renderer,g=p.autoClear,v=p.toneMapping;p.getClearColor(y_),p.toneMapping=fo,p.autoClear=!1;const y=new fl({name:"PMREM.Background",side:Zi,depthWrite:!1,depthTest:!1}),S=new xi(new Mc,y);let T=!1;const w=e.background;w?w.isColor&&(y.color.copy(w),e.background=null,T=!0):(y.color.copy(y_),T=!0);for(let M=0;M<6;M++){const A=M%3;A===0?(l.up.set(0,c[M],0),l.lookAt(f[M],0,0)):A===1?(l.up.set(0,0,c[M]),l.lookAt(0,f[M],0)):(l.up.set(0,c[M],0),l.lookAt(0,0,f[M]));const b=this._cubeSize;ng(r,A*b,M>2?b:0,b,b),p.setRenderTarget(r),T&&p.render(S,l),p.render(e,l)}S.geometry.dispose(),S.material.dispose(),p.toneMapping=v,p.autoClear=g,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===ol||e.mapping===eu;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=M_()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=__());const s=r?this._cubemapMaterial:this._equirectMaterial,a=new xi(this._lodPlanes[0],s),l=s.uniforms;l.envMap.value=e;const c=this._cubeSize;ng(t,0,0,3*c,2*c),i.setRenderTarget(t),i.render(a,Y0)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;for(let r=1;r<this._lodPlanes.length;r++){const s=Math.sqrt(this._sigmas[r]*this._sigmas[r]-this._sigmas[r-1]*this._sigmas[r-1]),a=x_[(r-1)%x_.length];this._blur(e,r-1,r,s,a)}t.autoClear=i}_blur(e,t,i,r,s){const a=this._pingPongRenderTarget;this._halfBlur(e,a,t,i,r,"latitudinal",s),this._halfBlur(a,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,a,l){const c=this._renderer,f=this._blurMaterial;a!=="latitudinal"&&a!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const p=3,g=new xi(this._lodPlanes[r],f),v=f.uniforms,y=this._sizeLods[i]-1,S=isFinite(s)?Math.PI/(2*y):2*Math.PI/(2*nc-1),T=s/S,w=isFinite(s)?1+Math.floor(p*T):nc;w>nc&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${nc}`);const M=[];let A=0;for(let F=0;F<nc;++F){const z=F/T,U=Math.exp(-z*z/2);M.push(U),F===0?A+=U:F<w&&(A+=2*U)}for(let F=0;F<M.length;F++)M[F]=M[F]/A;v.envMap.value=e.texture,v.samples.value=w,v.weights.value=M,v.latitudinal.value=a==="latitudinal",l&&(v.poleAxis.value=l);const{_lodMax:b}=this;v.dTheta.value=S,v.mipInt.value=b-i;const R=this._sizeLods[r],I=3*R*(r>b-Zf?r-b+Zf:0),k=4*(this._cubeSize-R);ng(t,I,k,3*R,2*R),c.setRenderTarget(t),c.render(g,Y0)}}function RI(n){const e=[],t=[],i=[];let r=n;const s=n-Zf+1+v_.length;for(let a=0;a<s;a++){const l=Math.pow(2,r);t.push(l);let c=1/l;a>n-Zf?c=v_[a-n+Zf-1]:a===0&&(c=0),i.push(c);const f=1/(l-2),p=-f,g=1+f,v=[p,p,g,p,g,g,p,p,g,g,p,g],y=6,S=6,T=3,w=2,M=1,A=new Float32Array(T*S*y),b=new Float32Array(w*S*y),R=new Float32Array(M*S*y);for(let k=0;k<y;k++){const F=k%3*2/3-1,z=k>2?0:-1,U=[F,z,0,F+2/3,z,0,F+2/3,z+1,0,F,z,0,F+2/3,z+1,0,F,z+1,0];A.set(U,T*S*k),b.set(v,w*S*k);const O=[k,k,k,k,k,k];R.set(O,M*S*k)}const I=new nn;I.setAttribute("position",new cn(A,T)),I.setAttribute("uv",new cn(b,w)),I.setAttribute("faceIndex",new cn(R,M)),e.push(I),r>Zf&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function S_(n,e,t){const i=new an(n,e,t);return i.texture.mapping=ch,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function ng(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function PI(n,e,t){const i=new Float32Array(nc),r=new Q(0,1,0);return new tn({name:"SphericalGaussianBlur",defines:{n:nc,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:c1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Kn,depthTest:!1,depthWrite:!1})}function __(){return new tn({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:c1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Kn,depthTest:!1,depthWrite:!1})}function M_(){return new tn({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:c1(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Kn,depthTest:!1,depthWrite:!1})}function c1(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function DI(n){let e=new WeakMap,t=null;function i(l){if(l&&l.isTexture){const c=l.mapping,f=c===ap||c===op,p=c===ol||c===eu;if(f||p)if(l.isRenderTargetTexture&&l.needsPMREMUpdate===!0){l.needsPMREMUpdate=!1;let g=e.get(l);return t===null&&(t=new nv(n)),g=f?t.fromEquirectangular(l,g):t.fromCubemap(l,g),e.set(l,g),g.texture}else{if(e.has(l))return e.get(l).texture;{const g=l.image;if(f&&g&&g.height>0||p&&g&&r(g)){t===null&&(t=new nv(n));const v=f?t.fromEquirectangular(l):t.fromCubemap(l);return e.set(l,v),l.addEventListener("dispose",s),v.texture}else return null}}}return l}function r(l){let c=0;const f=6;for(let p=0;p<f;p++)l[p]!==void 0&&c++;return c===f}function s(l){const c=l.target;c.removeEventListener("dispose",s);const f=e.get(c);f!==void 0&&(e.delete(c),f.dispose())}function a(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:a}}function LI(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(i){i.isWebGL2?t("EXT_color_buffer_float"):(t("WEBGL_depth_texture"),t("OES_texture_float"),t("OES_texture_half_float"),t("OES_texture_half_float_linear"),t("OES_standard_derivatives"),t("OES_element_index_uint"),t("OES_vertex_array_object"),t("ANGLE_instanced_arrays")),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture")},get:function(i){const r=t(i);return r===null&&console.warn("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function II(n,e,t,i){const r={},s=new WeakMap;function a(g){const v=g.target;v.index!==null&&e.remove(v.index);for(const S in v.attributes)e.remove(v.attributes[S]);for(const S in v.morphAttributes){const T=v.morphAttributes[S];for(let w=0,M=T.length;w<M;w++)e.remove(T[w])}v.removeEventListener("dispose",a),delete r[v.id];const y=s.get(v);y&&(e.remove(y),s.delete(v)),i.releaseStatesOfGeometry(v),v.isInstancedBufferGeometry===!0&&delete v._maxInstanceCount,t.memory.geometries--}function l(g,v){return r[v.id]===!0||(v.addEventListener("dispose",a),r[v.id]=!0,t.memory.geometries++),v}function c(g){const v=g.attributes;for(const S in v)e.update(v[S],n.ARRAY_BUFFER);const y=g.morphAttributes;for(const S in y){const T=y[S];for(let w=0,M=T.length;w<M;w++)e.update(T[w],n.ARRAY_BUFFER)}}function f(g){const v=[],y=g.index,S=g.attributes.position;let T=0;if(y!==null){const A=y.array;T=y.version;for(let b=0,R=A.length;b<R;b+=3){const I=A[b+0],k=A[b+1],F=A[b+2];v.push(I,k,k,F,F,I)}}else if(S!==void 0){const A=S.array;T=S.version;for(let b=0,R=A.length/3-1;b<R;b+=3){const I=b+0,k=b+1,F=b+2;v.push(I,k,k,F,F,I)}}else return;const w=new(AE(v)?o1:a1)(v,1);w.version=T;const M=s.get(g);M&&e.remove(M),s.set(g,w)}function p(g){const v=s.get(g);if(v){const y=g.index;y!==null&&v.version<y.version&&f(g)}else f(g);return s.get(g)}return{get:l,update:c,getWireframeAttribute:p}}function UI(n,e,t,i){const r=i.isWebGL2;let s;function a(v){s=v}let l,c;function f(v){l=v.type,c=v.bytesPerElement}function p(v,y){n.drawElements(s,y,l,v*c),t.update(y,s,1)}function g(v,y,S){if(S===0)return;let T,w;if(r)T=n,w="drawElementsInstanced";else if(T=e.get("ANGLE_instanced_arrays"),w="drawElementsInstancedANGLE",T===null){console.error("THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.");return}T[w](s,y,l,v*c,S),t.update(y,s,S)}this.setMode=a,this.setIndex=f,this.render=p,this.renderInstances=g}function NI(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,a,l){switch(t.calls++,a){case n.TRIANGLES:t.triangles+=l*(s/3);break;case n.LINES:t.lines+=l*(s/2);break;case n.LINE_STRIP:t.lines+=l*(s-1);break;case n.LINE_LOOP:t.lines+=l*s;break;case n.POINTS:t.points+=l*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",a);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function FI(n,e){return n[0]-e[0]}function kI(n,e){return Math.abs(e[1])-Math.abs(n[1])}function OI(n,e,t){const i={},r=new Float32Array(8),s=new WeakMap,a=new hn,l=[];for(let f=0;f<8;f++)l[f]=[f,0];function c(f,p,g){const v=f.morphTargetInfluences;if(e.isWebGL2===!0){const S=p.morphAttributes.position||p.morphAttributes.normal||p.morphAttributes.color,T=S!==void 0?S.length:0;let w=s.get(p);if(w===void 0||w.count!==T){let ae=function(){q.dispose(),s.delete(p),p.removeEventListener("dispose",ae)};var y=ae;w!==void 0&&w.texture.dispose();const b=p.morphAttributes.position!==void 0,R=p.morphAttributes.normal!==void 0,I=p.morphAttributes.color!==void 0,k=p.morphAttributes.position||[],F=p.morphAttributes.normal||[],z=p.morphAttributes.color||[];let U=0;b===!0&&(U=1),R===!0&&(U=2),I===!0&&(U=3);let O=p.attributes.position.count*U,$=1;O>e.maxTextureSize&&($=Math.ceil(O/e.maxTextureSize),O=e.maxTextureSize);const Y=new Float32Array(O*$*4*T),q=new mv(Y,O,$,T);q.type=li,q.needsUpdate=!0;const J=U*4;for(let oe=0;oe<T;oe++){const ue=k[oe],V=F[oe],j=z[oe],W=O*$*4*oe;for(let L=0;L<ue.count;L++){const B=L*J;b===!0&&(a.fromBufferAttribute(ue,L),Y[W+B+0]=a.x,Y[W+B+1]=a.y,Y[W+B+2]=a.z,Y[W+B+3]=0),R===!0&&(a.fromBufferAttribute(V,L),Y[W+B+4]=a.x,Y[W+B+5]=a.y,Y[W+B+6]=a.z,Y[W+B+7]=0),I===!0&&(a.fromBufferAttribute(j,L),Y[W+B+8]=a.x,Y[W+B+9]=a.y,Y[W+B+10]=a.z,Y[W+B+11]=j.itemSize===4?a.w:1)}}w={count:T,texture:q,size:new _e(O,$)},s.set(p,w),p.addEventListener("dispose",ae)}let M=0;for(let b=0;b<v.length;b++)M+=v[b];const A=p.morphTargetsRelative?1:1-M;g.getUniforms().setValue(n,"morphTargetBaseInfluence",A),g.getUniforms().setValue(n,"morphTargetInfluences",v),g.getUniforms().setValue(n,"morphTargetsTexture",w.texture,t),g.getUniforms().setValue(n,"morphTargetsTextureSize",w.size)}else{const S=v===void 0?0:v.length;let T=i[p.id];if(T===void 0||T.length!==S){T=[];for(let R=0;R<S;R++)T[R]=[R,0];i[p.id]=T}for(let R=0;R<S;R++){const I=T[R];I[0]=R,I[1]=v[R]}T.sort(kI);for(let R=0;R<8;R++)R<S&&T[R][1]?(l[R][0]=T[R][0],l[R][1]=T[R][1]):(l[R][0]=Number.MAX_SAFE_INTEGER,l[R][1]=0);l.sort(FI);const w=p.morphAttributes.position,M=p.morphAttributes.normal;let A=0;for(let R=0;R<8;R++){const I=l[R],k=I[0],F=I[1];k!==Number.MAX_SAFE_INTEGER&&F?(w&&p.getAttribute("morphTarget"+R)!==w[k]&&p.setAttribute("morphTarget"+R,w[k]),M&&p.getAttribute("morphNormal"+R)!==M[k]&&p.setAttribute("morphNormal"+R,M[k]),r[R]=F,A+=F):(w&&p.hasAttribute("morphTarget"+R)===!0&&p.deleteAttribute("morphTarget"+R),M&&p.hasAttribute("morphNormal"+R)===!0&&p.deleteAttribute("morphNormal"+R),r[R]=0)}const b=p.morphTargetsRelative?1:1-A;g.getUniforms().setValue(n,"morphTargetBaseInfluence",b),g.getUniforms().setValue(n,"morphTargetInfluences",r)}}return{update:c}}function BI(n,e,t,i){let r=new WeakMap;function s(c){const f=i.render.frame,p=c.geometry,g=e.get(c,p);if(r.get(g)!==f&&(e.update(g),r.set(g,f)),c.isInstancedMesh&&(c.hasEventListener("dispose",l)===!1&&c.addEventListener("dispose",l),r.get(c)!==f&&(t.update(c.instanceMatrix,n.ARRAY_BUFFER),c.instanceColor!==null&&t.update(c.instanceColor,n.ARRAY_BUFFER),r.set(c,f))),c.isSkinnedMesh){const v=c.skeleton;r.get(v)!==f&&(v.update(),r.set(v,f))}return g}function a(){r=new WeakMap}function l(c){const f=c.target;f.removeEventListener("dispose",l),t.remove(f.instanceMatrix),f.instanceColor!==null&&t.remove(f.instanceColor)}return{update:s,dispose:a}}const IE=new Qn,UE=new mv,NE=new dc,FE=new Pp,w_=[],T_=[],E_=new Float32Array(16),b_=new Float32Array(9),A_=new Float32Array(4);function mh(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=w_[r];if(s===void 0&&(s=new Float32Array(r),w_[r]=s),e!==0){i.toArray(s,0);for(let a=1,l=0;a!==e;++a)l+=t,n[a].toArray(s,l)}return s}function $i(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function er(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function yv(n,e){let t=T_[e];t===void 0&&(t=new Int32Array(e),T_[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function zI(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function HI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2fv(this.addr,e),er(t,e)}}function GI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if($i(t,e))return;n.uniform3fv(this.addr,e),er(t,e)}}function VI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4fv(this.addr,e),er(t,e)}}function WI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),er(t,e)}else{if($i(t,i))return;A_.set(i),n.uniformMatrix2fv(this.addr,!1,A_),er(t,i)}}function jI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),er(t,e)}else{if($i(t,i))return;b_.set(i),n.uniformMatrix3fv(this.addr,!1,b_),er(t,i)}}function XI(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),er(t,e)}else{if($i(t,i))return;E_.set(i),n.uniformMatrix4fv(this.addr,!1,E_),er(t,i)}}function YI(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function qI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2iv(this.addr,e),er(t,e)}}function ZI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($i(t,e))return;n.uniform3iv(this.addr,e),er(t,e)}}function KI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4iv(this.addr,e),er(t,e)}}function QI(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function JI(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2uiv(this.addr,e),er(t,e)}}function $I(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($i(t,e))return;n.uniform3uiv(this.addr,e),er(t,e)}}function eU(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4uiv(this.addr,e),er(t,e)}}function tU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2D(e||IE,r)}function nU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||NE,r)}function iU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||FE,r)}function rU(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||UE,r)}function sU(n){switch(n){case 5126:return zI;case 35664:return HI;case 35665:return GI;case 35666:return VI;case 35674:return WI;case 35675:return jI;case 35676:return XI;case 5124:case 35670:return YI;case 35667:case 35671:return qI;case 35668:case 35672:return ZI;case 35669:case 35673:return KI;case 5125:return QI;case 36294:return JI;case 36295:return $I;case 36296:return eU;case 35678:case 36198:case 36298:case 36306:case 35682:return tU;case 35679:case 36299:case 36307:return nU;case 35680:case 36300:case 36308:case 36293:return iU;case 36289:case 36303:case 36311:case 36292:return rU}}function aU(n,e){n.uniform1fv(this.addr,e)}function oU(n,e){const t=mh(e,this.size,2);n.uniform2fv(this.addr,t)}function lU(n,e){const t=mh(e,this.size,3);n.uniform3fv(this.addr,t)}function uU(n,e){const t=mh(e,this.size,4);n.uniform4fv(this.addr,t)}function cU(n,e){const t=mh(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function fU(n,e){const t=mh(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function hU(n,e){const t=mh(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function dU(n,e){n.uniform1iv(this.addr,e)}function pU(n,e){n.uniform2iv(this.addr,e)}function mU(n,e){n.uniform3iv(this.addr,e)}function gU(n,e){n.uniform4iv(this.addr,e)}function vU(n,e){n.uniform1uiv(this.addr,e)}function yU(n,e){n.uniform2uiv(this.addr,e)}function xU(n,e){n.uniform3uiv(this.addr,e)}function SU(n,e){n.uniform4uiv(this.addr,e)}function _U(n,e,t){const i=this.cache,r=e.length,s=yv(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),er(i,s));for(let a=0;a!==r;++a)t.setTexture2D(e[a]||IE,s[a])}function MU(n,e,t){const i=this.cache,r=e.length,s=yv(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),er(i,s));for(let a=0;a!==r;++a)t.setTexture3D(e[a]||NE,s[a])}function wU(n,e,t){const i=this.cache,r=e.length,s=yv(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),er(i,s));for(let a=0;a!==r;++a)t.setTextureCube(e[a]||FE,s[a])}function TU(n,e,t){const i=this.cache,r=e.length,s=yv(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),er(i,s));for(let a=0;a!==r;++a)t.setTexture2DArray(e[a]||UE,s[a])}function EU(n){switch(n){case 5126:return aU;case 35664:return oU;case 35665:return lU;case 35666:return uU;case 35674:return cU;case 35675:return fU;case 35676:return hU;case 5124:case 35670:return dU;case 35667:case 35671:return pU;case 35668:case 35672:return mU;case 35669:case 35673:return gU;case 5125:return vU;case 36294:return yU;case 36295:return xU;case 36296:return SU;case 35678:case 36198:case 36298:case 36306:case 35682:return _U;case 35679:case 36299:case 36307:return MU;case 35680:case 36300:case 36308:case 36293:return wU;case 36289:case 36303:case 36311:case 36292:return TU}}class bU{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.setValue=sU(t.type)}}class AU{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.size=t.size,this.setValue=EU(t.type)}}class CU{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,a=r.length;s!==a;++s){const l=r[s];l.setValue(e,t[l.id],i)}}}const Z0=/(\w+)(\])?(\[|\.)?/g;function C_(n,e){n.seq.push(e),n.map[e.id]=e}function RU(n,e,t){const i=n.name,r=i.length;for(Z0.lastIndex=0;;){const s=Z0.exec(i),a=Z0.lastIndex;let l=s[1];const c=s[2]==="]",f=s[3];if(c&&(l=l|0),f===void 0||f==="["&&a+2===r){C_(t,f===void 0?new bU(l,n,e):new AU(l,n,e));break}else{let g=t.map[l];g===void 0&&(g=new CU(l),C_(t,g)),t=g}}}class Gg{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),a=e.getUniformLocation(t,s.name);RU(s,a,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,a=t.length;s!==a;++s){const l=t[s],c=i[l.id];c.needsUpdate!==!1&&l.setValue(e,c.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const a=e[r];a.id in t&&i.push(a)}return i}}function R_(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}let PU=0;function DU(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let a=r;a<s;a++){const l=a+1;i.push(`${l===e?">":" "} ${l}: ${t[a]}`)}return i.join(`
`)}function LU(n){switch(n){case Jr:return["Linear","( value )"];case yt:return["sRGB","( value )"];default:return console.warn("THREE.WebGLProgram: Unsupported color space:",n),["Linear","( value )"]}}function P_(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const a=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+DU(n.getShaderSource(e),a)}else return r}function IU(n,e){const t=LU(e);return"vec4 "+n+"( vec4 value ) { return LinearTo"+t[0]+t[1]+"; }"}function UU(n,e){let t;switch(e){case nE:t="Linear";break;case iE:t="Reinhard";break;case rE:t="OptimizedCineon";break;case Xx:t="ACESFilmic";break;case sE:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}function NU(n){return[n.extensionDerivatives||n.envMapCubeUVHeight||n.bumpMap||n.normalMapTangentSpace||n.clearcoatNormalMap||n.flatShading||n.shaderID==="physical"?"#extension GL_OES_standard_derivatives : enable":"",(n.extensionFragDepth||n.logarithmicDepthBuffer)&&n.rendererExtensionFragDepth?"#extension GL_EXT_frag_depth : enable":"",n.extensionDrawBuffers&&n.rendererExtensionDrawBuffers?"#extension GL_EXT_draw_buffers : require":"",(n.extensionShaderTextureLOD||n.envMap||n.transmission)&&n.rendererExtensionShaderTextureLod?"#extension GL_EXT_shader_texture_lod : enable":""].filter(Gd).join(`
`)}function FU(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function kU(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),a=s.name;let l=1;s.type===n.FLOAT_MAT2&&(l=2),s.type===n.FLOAT_MAT3&&(l=3),s.type===n.FLOAT_MAT4&&(l=4),t[a]={type:s.type,location:n.getAttribLocation(e,a),locationSize:l}}return t}function Gd(n){return n!==""}function D_(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function L_(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const OU=/^[ \t]*#include +<([\w\d./]+)>/gm;function hx(n){return n.replace(OU,zU)}const BU=new Map([["encodings_fragment","colorspace_fragment"],["encodings_pars_fragment","colorspace_pars_fragment"],["output_fragment","opaque_fragment"]]);function zU(n,e){let t=Nt[e];if(t===void 0){const i=BU.get(e);if(i!==void 0)t=Nt[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return hx(t)}const HU=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function I_(n){return n.replace(HU,GU)}function GU(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function U_(n){let e="precision "+n.precision+` float;
precision `+n.precision+" int;";return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function VU(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===lv?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===jd?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===ka&&(e="SHADOWMAP_TYPE_VSM"),e}function WU(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case ol:case eu:e="ENVMAP_TYPE_CUBE";break;case ch:e="ENVMAP_TYPE_CUBE_UV";break}return e}function jU(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case eu:e="ENVMAP_MODE_REFRACTION";break}return e}function XU(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Rp:e="ENVMAP_BLENDING_MULTIPLY";break;case eE:e="ENVMAP_BLENDING_MIX";break;case tE:e="ENVMAP_BLENDING_ADD";break}return e}function YU(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function qU(n,e,t,i){const r=n.getContext(),s=t.defines;let a=t.vertexShader,l=t.fragmentShader;const c=VU(t),f=WU(t),p=jU(t),g=XU(t),v=YU(t),y=t.isWebGL2?"":NU(t),S=FU(s),T=r.createProgram();let w,M,A=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Gd).join(`
`),w.length>0&&(w+=`
`),M=[y,"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S].filter(Gd).join(`
`),M.length>0&&(M+=`
`)):(w=[U_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+p:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors&&t.isWebGL2?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE":"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0&&t.isWebGL2?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#if ( defined( USE_MORPHTARGETS ) && ! defined( MORPHTARGETS_TEXTURE ) )","	attribute vec3 morphTarget0;","	attribute vec3 morphTarget1;","	attribute vec3 morphTarget2;","	attribute vec3 morphTarget3;","	#ifdef USE_MORPHNORMALS","		attribute vec3 morphNormal0;","		attribute vec3 morphNormal1;","		attribute vec3 morphNormal2;","		attribute vec3 morphNormal3;","	#else","		attribute vec3 morphTarget4;","		attribute vec3 morphTarget5;","		attribute vec3 morphTarget6;","		attribute vec3 morphTarget7;","	#endif","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Gd).join(`
`),M=[y,U_(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,S,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+f:"",t.envMap?"#define "+p:"",t.envMap?"#define "+g:"",v?"#define CUBEUV_TEXEL_WIDTH "+v.texelWidth:"",v?"#define CUBEUV_TEXEL_HEIGHT "+v.texelHeight:"",v?"#define CUBEUV_MAX_MIP "+v.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+c:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.useLegacyLights?"#define LEGACY_LIGHTS":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.logarithmicDepthBuffer&&t.rendererExtensionFragDepth?"#define USE_LOGDEPTHBUF_EXT":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==fo?"#define TONE_MAPPING":"",t.toneMapping!==fo?Nt.tonemapping_pars_fragment:"",t.toneMapping!==fo?UU("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Nt.colorspace_pars_fragment,IU("linearToOutputTexel",t.outputColorSpace),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Gd).join(`
`)),a=hx(a),a=D_(a,t),a=L_(a,t),l=hx(l),l=D_(l,t),l=L_(l,t),a=I_(a),l=I_(l),t.isWebGL2&&t.isRawShaderMaterial!==!0&&(A=`#version 300 es
`,w=["precision mediump sampler2DArray;","#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,M=["#define varying in",t.glslVersion===$g?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===$g?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+M);const b=A+w+a,R=A+M+l,I=R_(r,r.VERTEX_SHADER,b),k=R_(r,r.FRAGMENT_SHADER,R);if(r.attachShader(T,I),r.attachShader(T,k),t.index0AttributeName!==void 0?r.bindAttribLocation(T,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(T,0,"position"),r.linkProgram(T),n.debug.checkShaderErrors){const U=r.getProgramInfoLog(T).trim(),O=r.getShaderInfoLog(I).trim(),$=r.getShaderInfoLog(k).trim();let Y=!0,q=!0;if(r.getProgramParameter(T,r.LINK_STATUS)===!1)if(Y=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,T,I,k);else{const J=P_(r,I,"vertex"),ae=P_(r,k,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(T,r.VALIDATE_STATUS)+`

Program Info Log: `+U+`
`+J+`
`+ae)}else U!==""?console.warn("THREE.WebGLProgram: Program Info Log:",U):(O===""||$==="")&&(q=!1);q&&(this.diagnostics={runnable:Y,programLog:U,vertexShader:{log:O,prefix:w},fragmentShader:{log:$,prefix:M}})}r.deleteShader(I),r.deleteShader(k);let F;this.getUniforms=function(){return F===void 0&&(F=new Gg(r,T)),F};let z;return this.getAttributes=function(){return z===void 0&&(z=kU(r,T)),z},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(T),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=PU++,this.cacheKey=e,this.usedTimes=1,this.program=T,this.vertexShader=I,this.fragmentShader=k,this}let ZU=0;class KU{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),a=this._getShaderCacheForMaterial(e);return a.has(r)===!1&&(a.add(r),r.usedTimes++),a.has(s)===!1&&(a.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new QU(e),t.set(e,i)),i}}class QU{constructor(e){this.id=ZU++,this.code=e,this.usedTimes=0}}function JU(n,e,t,i,r,s,a){const l=new pc,c=new KU,f=[],p=r.isWebGL2,g=r.logarithmicDepthBuffer,v=r.vertexTextures;let y=r.precision;const S={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function T(U){return U===0?"uv":`uv${U}`}function w(U,O,$,Y,q){const J=Y.fog,ae=q.geometry,oe=U.isMeshStandardMaterial?Y.environment:null,ue=(U.isMeshStandardMaterial?t:e).get(U.envMap||oe),V=ue&&ue.mapping===ch?ue.image.height:null,j=S[U.type];U.precision!==null&&(y=r.getMaxPrecision(U.precision),y!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",y,"instead."));const W=ae.morphAttributes.position||ae.morphAttributes.normal||ae.morphAttributes.color,L=W!==void 0?W.length:0;let B=0;ae.morphAttributes.position!==void 0&&(B=1),ae.morphAttributes.normal!==void 0&&(B=2),ae.morphAttributes.color!==void 0&&(B=3);let te,ie,re,de;if(j){const Dt=Oa[j];te=Dt.vertexShader,ie=Dt.fragmentShader}else te=U.vertexShader,ie=U.fragmentShader,c.update(U),re=c.getVertexShaderID(U),de=c.getFragmentShaderID(U);const he=n.getRenderTarget(),ve=q.isInstancedMesh===!0,Ve=!!U.map,rt=!!U.matcap,Ue=!!ue,Z=!!U.aoMap,Fe=!!U.lightMap,we=!!U.bumpMap,ke=!!U.normalMap,Pe=!!U.displacementMap,et=!!U.emissiveMap,Le=!!U.metalnessMap,Xe=!!U.roughnessMap,Ze=U.anisotropy>0,Ae=U.clearcoat>0,ht=U.iridescence>0,X=U.sheen>0,H=U.transmission>0,ce=Ze&&!!U.anisotropyMap,qe=Ae&&!!U.clearcoatMap,be=Ae&&!!U.clearcoatNormalMap,Ne=Ae&&!!U.clearcoatRoughnessMap,Ke=ht&&!!U.iridescenceMap,We=ht&&!!U.iridescenceThicknessMap,xe=X&&!!U.sheenColorMap,ct=X&&!!U.sheenRoughnessMap,nt=!!U.specularMap,tt=!!U.specularColorMap,Ye=!!U.specularIntensityMap,st=H&&!!U.transmissionMap,_t=H&&!!U.thicknessMap,Wt=!!U.gradientMap,le=!!U.alphaMap,je=U.alphaTest>0,Se=!!U.alphaHash,at=!!U.extensions,Qe=!!ae.attributes.uv1,mt=!!ae.attributes.uv2,Gt=!!ae.attributes.uv3;let Vt=fo;return U.toneMapped&&(he===null||he.isXRRenderTarget===!0)&&(Vt=n.toneMapping),{isWebGL2:p,shaderID:j,shaderType:U.type,shaderName:U.name,vertexShader:te,fragmentShader:ie,defines:U.defines,customVertexShaderID:re,customFragmentShaderID:de,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:y,instancing:ve,instancingColor:ve&&q.instanceColor!==null,supportsVertexTextures:v,outputColorSpace:he===null?n.outputColorSpace:he.isXRRenderTarget===!0?he.texture.colorSpace:Jr,map:Ve,matcap:rt,envMap:Ue,envMapMode:Ue&&ue.mapping,envMapCubeUVHeight:V,aoMap:Z,lightMap:Fe,bumpMap:we,normalMap:ke,displacementMap:v&&Pe,emissiveMap:et,normalMapObjectSpace:ke&&U.normalMapType===mE,normalMapTangentSpace:ke&&U.normalMapType===cl,metalnessMap:Le,roughnessMap:Xe,anisotropy:Ze,anisotropyMap:ce,clearcoat:Ae,clearcoatMap:qe,clearcoatNormalMap:be,clearcoatRoughnessMap:Ne,iridescence:ht,iridescenceMap:Ke,iridescenceThicknessMap:We,sheen:X,sheenColorMap:xe,sheenRoughnessMap:ct,specularMap:nt,specularColorMap:tt,specularIntensityMap:Ye,transmission:H,transmissionMap:st,thicknessMap:_t,gradientMap:Wt,opaque:U.transparent===!1&&U.blending===fc,alphaMap:le,alphaTest:je,alphaHash:Se,combine:U.combine,mapUv:Ve&&T(U.map.channel),aoMapUv:Z&&T(U.aoMap.channel),lightMapUv:Fe&&T(U.lightMap.channel),bumpMapUv:we&&T(U.bumpMap.channel),normalMapUv:ke&&T(U.normalMap.channel),displacementMapUv:Pe&&T(U.displacementMap.channel),emissiveMapUv:et&&T(U.emissiveMap.channel),metalnessMapUv:Le&&T(U.metalnessMap.channel),roughnessMapUv:Xe&&T(U.roughnessMap.channel),anisotropyMapUv:ce&&T(U.anisotropyMap.channel),clearcoatMapUv:qe&&T(U.clearcoatMap.channel),clearcoatNormalMapUv:be&&T(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Ne&&T(U.clearcoatRoughnessMap.channel),iridescenceMapUv:Ke&&T(U.iridescenceMap.channel),iridescenceThicknessMapUv:We&&T(U.iridescenceThicknessMap.channel),sheenColorMapUv:xe&&T(U.sheenColorMap.channel),sheenRoughnessMapUv:ct&&T(U.sheenRoughnessMap.channel),specularMapUv:nt&&T(U.specularMap.channel),specularColorMapUv:tt&&T(U.specularColorMap.channel),specularIntensityMapUv:Ye&&T(U.specularIntensityMap.channel),transmissionMapUv:st&&T(U.transmissionMap.channel),thicknessMapUv:_t&&T(U.thicknessMap.channel),alphaMapUv:le&&T(U.alphaMap.channel),vertexTangents:!!ae.attributes.tangent&&(ke||Ze),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ae.attributes.color&&ae.attributes.color.itemSize===4,vertexUv1s:Qe,vertexUv2s:mt,vertexUv3s:Gt,pointsUvs:q.isPoints===!0&&!!ae.attributes.uv&&(Ve||le),fog:!!J,useFog:U.fog===!0,fogExp2:J&&J.isFogExp2,flatShading:U.flatShading===!0,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:g,skinning:q.isSkinnedMesh===!0,morphTargets:ae.morphAttributes.position!==void 0,morphNormals:ae.morphAttributes.normal!==void 0,morphColors:ae.morphAttributes.color!==void 0,morphTargetsCount:L,morphTextureStride:B,numDirLights:O.directional.length,numPointLights:O.point.length,numSpotLights:O.spot.length,numSpotLightMaps:O.spotLightMap.length,numRectAreaLights:O.rectArea.length,numHemiLights:O.hemi.length,numDirLightShadows:O.directionalShadowMap.length,numPointLightShadows:O.pointShadowMap.length,numSpotLightShadows:O.spotShadowMap.length,numSpotLightShadowsWithMaps:O.numSpotLightShadowsWithMaps,numClippingPlanes:a.numPlanes,numClipIntersection:a.numIntersection,dithering:U.dithering,shadowMapEnabled:n.shadowMap.enabled&&$.length>0,shadowMapType:n.shadowMap.type,toneMapping:Vt,useLegacyLights:n._useLegacyLights,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Qr,flipSided:U.side===Zi,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionDerivatives:at&&U.extensions.derivatives===!0,extensionFragDepth:at&&U.extensions.fragDepth===!0,extensionDrawBuffers:at&&U.extensions.drawBuffers===!0,extensionShaderTextureLOD:at&&U.extensions.shaderTextureLOD===!0,rendererExtensionFragDepth:p||i.has("EXT_frag_depth"),rendererExtensionDrawBuffers:p||i.has("WEBGL_draw_buffers"),rendererExtensionShaderTextureLod:p||i.has("EXT_shader_texture_lod"),customProgramCacheKey:U.customProgramCacheKey()}}function M(U){const O=[];if(U.shaderID?O.push(U.shaderID):(O.push(U.customVertexShaderID),O.push(U.customFragmentShaderID)),U.defines!==void 0)for(const $ in U.defines)O.push($),O.push(U.defines[$]);return U.isRawShaderMaterial===!1&&(A(O,U),b(O,U),O.push(n.outputColorSpace)),O.push(U.customProgramCacheKey),O.join()}function A(U,O){U.push(O.precision),U.push(O.outputColorSpace),U.push(O.envMapMode),U.push(O.envMapCubeUVHeight),U.push(O.mapUv),U.push(O.alphaMapUv),U.push(O.lightMapUv),U.push(O.aoMapUv),U.push(O.bumpMapUv),U.push(O.normalMapUv),U.push(O.displacementMapUv),U.push(O.emissiveMapUv),U.push(O.metalnessMapUv),U.push(O.roughnessMapUv),U.push(O.anisotropyMapUv),U.push(O.clearcoatMapUv),U.push(O.clearcoatNormalMapUv),U.push(O.clearcoatRoughnessMapUv),U.push(O.iridescenceMapUv),U.push(O.iridescenceThicknessMapUv),U.push(O.sheenColorMapUv),U.push(O.sheenRoughnessMapUv),U.push(O.specularMapUv),U.push(O.specularColorMapUv),U.push(O.specularIntensityMapUv),U.push(O.transmissionMapUv),U.push(O.thicknessMapUv),U.push(O.combine),U.push(O.fogExp2),U.push(O.sizeAttenuation),U.push(O.morphTargetsCount),U.push(O.morphAttributeCount),U.push(O.numDirLights),U.push(O.numPointLights),U.push(O.numSpotLights),U.push(O.numSpotLightMaps),U.push(O.numHemiLights),U.push(O.numRectAreaLights),U.push(O.numDirLightShadows),U.push(O.numPointLightShadows),U.push(O.numSpotLightShadows),U.push(O.numSpotLightShadowsWithMaps),U.push(O.shadowMapType),U.push(O.toneMapping),U.push(O.numClippingPlanes),U.push(O.numClipIntersection),U.push(O.depthPacking)}function b(U,O){l.disableAll(),O.isWebGL2&&l.enable(0),O.supportsVertexTextures&&l.enable(1),O.instancing&&l.enable(2),O.instancingColor&&l.enable(3),O.matcap&&l.enable(4),O.envMap&&l.enable(5),O.normalMapObjectSpace&&l.enable(6),O.normalMapTangentSpace&&l.enable(7),O.clearcoat&&l.enable(8),O.iridescence&&l.enable(9),O.alphaTest&&l.enable(10),O.vertexColors&&l.enable(11),O.vertexAlphas&&l.enable(12),O.vertexUv1s&&l.enable(13),O.vertexUv2s&&l.enable(14),O.vertexUv3s&&l.enable(15),O.vertexTangents&&l.enable(16),O.anisotropy&&l.enable(17),U.push(l.mask),l.disableAll(),O.fog&&l.enable(0),O.useFog&&l.enable(1),O.flatShading&&l.enable(2),O.logarithmicDepthBuffer&&l.enable(3),O.skinning&&l.enable(4),O.morphTargets&&l.enable(5),O.morphNormals&&l.enable(6),O.morphColors&&l.enable(7),O.premultipliedAlpha&&l.enable(8),O.shadowMapEnabled&&l.enable(9),O.useLegacyLights&&l.enable(10),O.doubleSided&&l.enable(11),O.flipSided&&l.enable(12),O.useDepthPacking&&l.enable(13),O.dithering&&l.enable(14),O.transmission&&l.enable(15),O.sheen&&l.enable(16),O.opaque&&l.enable(17),O.pointsUvs&&l.enable(18),U.push(l.mask)}function R(U){const O=S[U.type];let $;if(O){const Y=Oa[O];$=l1.clone(Y.uniforms)}else $=U.uniforms;return $}function I(U,O){let $;for(let Y=0,q=f.length;Y<q;Y++){const J=f[Y];if(J.cacheKey===O){$=J,++$.usedTimes;break}}return $===void 0&&($=new qU(n,O,U,s),f.push($)),$}function k(U){if(--U.usedTimes===0){const O=f.indexOf(U);f[O]=f[f.length-1],f.pop(),U.destroy()}}function F(U){c.remove(U)}function z(){c.dispose()}return{getParameters:w,getProgramCacheKey:M,getUniforms:R,acquireProgram:I,releaseProgram:k,releaseShaderCache:F,programs:f,dispose:z}}function $U(){let n=new WeakMap;function e(s){let a=n.get(s);return a===void 0&&(a={},n.set(s,a)),a}function t(s){n.delete(s)}function i(s,a,l){n.get(s)[a]=l}function r(){n=new WeakMap}return{get:e,remove:t,update:i,dispose:r}}function eN(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function N_(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function F_(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function a(g,v,y,S,T,w){let M=n[e];return M===void 0?(M={id:g.id,object:g,geometry:v,material:y,groupOrder:S,renderOrder:g.renderOrder,z:T,group:w},n[e]=M):(M.id=g.id,M.object=g,M.geometry=v,M.material=y,M.groupOrder=S,M.renderOrder=g.renderOrder,M.z=T,M.group=w),e++,M}function l(g,v,y,S,T,w){const M=a(g,v,y,S,T,w);y.transmission>0?i.push(M):y.transparent===!0?r.push(M):t.push(M)}function c(g,v,y,S,T,w){const M=a(g,v,y,S,T,w);y.transmission>0?i.unshift(M):y.transparent===!0?r.unshift(M):t.unshift(M)}function f(g,v){t.length>1&&t.sort(g||eN),i.length>1&&i.sort(v||N_),r.length>1&&r.sort(v||N_)}function p(){for(let g=e,v=n.length;g<v;g++){const y=n[g];if(y.id===null)break;y.id=null,y.object=null,y.geometry=null,y.material=null,y.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:l,unshift:c,finish:p,sort:f}}function tN(){let n=new WeakMap;function e(i,r){const s=n.get(i);let a;return s===void 0?(a=new F_,n.set(i,[a])):r>=s.length?(a=new F_,s.push(a)):a=s[r],a}function t(){n=new WeakMap}return{get:e,dispose:t}}function nN(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new Q,color:new Je};break;case"SpotLight":t={position:new Q,direction:new Q,color:new Je,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new Q,color:new Je,distance:0,decay:0};break;case"HemisphereLight":t={direction:new Q,skyColor:new Je,groundColor:new Je};break;case"RectAreaLight":t={color:new Je,position:new Q,halfWidth:new Q,halfHeight:new Q};break}return n[e.id]=t,t}}}function iN(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"SpotLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e};break;case"PointLight":t={shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new _e,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let rN=0;function sN(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function aN(n,e){const t=new nN,i=iN(),r={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0};for(let p=0;p<9;p++)r.probe.push(new Q);const s=new Q,a=new vt,l=new vt;function c(p,g){let v=0,y=0,S=0;for(let $=0;$<9;$++)r.probe[$].set(0,0,0);let T=0,w=0,M=0,A=0,b=0,R=0,I=0,k=0,F=0,z=0;p.sort(sN);const U=g===!0?Math.PI:1;for(let $=0,Y=p.length;$<Y;$++){const q=p[$],J=q.color,ae=q.intensity,oe=q.distance,ue=q.shadow&&q.shadow.map?q.shadow.map.texture:null;if(q.isAmbientLight)v+=J.r*ae*U,y+=J.g*ae*U,S+=J.b*ae*U;else if(q.isLightProbe)for(let V=0;V<9;V++)r.probe[V].addScaledVector(q.sh.coefficients[V],ae);else if(q.isDirectionalLight){const V=t.get(q);if(V.color.copy(q.color).multiplyScalar(q.intensity*U),q.castShadow){const j=q.shadow,W=i.get(q);W.shadowBias=j.bias,W.shadowNormalBias=j.normalBias,W.shadowRadius=j.radius,W.shadowMapSize=j.mapSize,r.directionalShadow[T]=W,r.directionalShadowMap[T]=ue,r.directionalShadowMatrix[T]=q.shadow.matrix,R++}r.directional[T]=V,T++}else if(q.isSpotLight){const V=t.get(q);V.position.setFromMatrixPosition(q.matrixWorld),V.color.copy(J).multiplyScalar(ae*U),V.distance=oe,V.coneCos=Math.cos(q.angle),V.penumbraCos=Math.cos(q.angle*(1-q.penumbra)),V.decay=q.decay,r.spot[M]=V;const j=q.shadow;if(q.map&&(r.spotLightMap[F]=q.map,F++,j.updateMatrices(q),q.castShadow&&z++),r.spotLightMatrix[M]=j.matrix,q.castShadow){const W=i.get(q);W.shadowBias=j.bias,W.shadowNormalBias=j.normalBias,W.shadowRadius=j.radius,W.shadowMapSize=j.mapSize,r.spotShadow[M]=W,r.spotShadowMap[M]=ue,k++}M++}else if(q.isRectAreaLight){const V=t.get(q);V.color.copy(J).multiplyScalar(ae),V.halfWidth.set(q.width*.5,0,0),V.halfHeight.set(0,q.height*.5,0),r.rectArea[A]=V,A++}else if(q.isPointLight){const V=t.get(q);if(V.color.copy(q.color).multiplyScalar(q.intensity*U),V.distance=q.distance,V.decay=q.decay,q.castShadow){const j=q.shadow,W=i.get(q);W.shadowBias=j.bias,W.shadowNormalBias=j.normalBias,W.shadowRadius=j.radius,W.shadowMapSize=j.mapSize,W.shadowCameraNear=j.camera.near,W.shadowCameraFar=j.camera.far,r.pointShadow[w]=W,r.pointShadowMap[w]=ue,r.pointShadowMatrix[w]=q.shadow.matrix,I++}r.point[w]=V,w++}else if(q.isHemisphereLight){const V=t.get(q);V.skyColor.copy(q.color).multiplyScalar(ae*U),V.groundColor.copy(q.groundColor).multiplyScalar(ae*U),r.hemi[b]=V,b++}}A>0&&(e.isWebGL2||n.has("OES_texture_float_linear")===!0?(r.rectAreaLTC1=dt.LTC_FLOAT_1,r.rectAreaLTC2=dt.LTC_FLOAT_2):n.has("OES_texture_half_float_linear")===!0?(r.rectAreaLTC1=dt.LTC_HALF_1,r.rectAreaLTC2=dt.LTC_HALF_2):console.error("THREE.WebGLRenderer: Unable to use RectAreaLight. Missing WebGL extensions.")),r.ambient[0]=v,r.ambient[1]=y,r.ambient[2]=S;const O=r.hash;(O.directionalLength!==T||O.pointLength!==w||O.spotLength!==M||O.rectAreaLength!==A||O.hemiLength!==b||O.numDirectionalShadows!==R||O.numPointShadows!==I||O.numSpotShadows!==k||O.numSpotMaps!==F)&&(r.directional.length=T,r.spot.length=M,r.rectArea.length=A,r.point.length=w,r.hemi.length=b,r.directionalShadow.length=R,r.directionalShadowMap.length=R,r.pointShadow.length=I,r.pointShadowMap.length=I,r.spotShadow.length=k,r.spotShadowMap.length=k,r.directionalShadowMatrix.length=R,r.pointShadowMatrix.length=I,r.spotLightMatrix.length=k+F-z,r.spotLightMap.length=F,r.numSpotLightShadowsWithMaps=z,O.directionalLength=T,O.pointLength=w,O.spotLength=M,O.rectAreaLength=A,O.hemiLength=b,O.numDirectionalShadows=R,O.numPointShadows=I,O.numSpotShadows=k,O.numSpotMaps=F,r.version=rN++)}function f(p,g){let v=0,y=0,S=0,T=0,w=0;const M=g.matrixWorldInverse;for(let A=0,b=p.length;A<b;A++){const R=p[A];if(R.isDirectionalLight){const I=r.directional[v];I.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(M),v++}else if(R.isSpotLight){const I=r.spot[S];I.position.setFromMatrixPosition(R.matrixWorld),I.position.applyMatrix4(M),I.direction.setFromMatrixPosition(R.matrixWorld),s.setFromMatrixPosition(R.target.matrixWorld),I.direction.sub(s),I.direction.transformDirection(M),S++}else if(R.isRectAreaLight){const I=r.rectArea[T];I.position.setFromMatrixPosition(R.matrixWorld),I.position.applyMatrix4(M),l.identity(),a.copy(R.matrixWorld),a.premultiply(M),l.extractRotation(a),I.halfWidth.set(R.width*.5,0,0),I.halfHeight.set(0,R.height*.5,0),I.halfWidth.applyMatrix4(l),I.halfHeight.applyMatrix4(l),T++}else if(R.isPointLight){const I=r.point[y];I.position.setFromMatrixPosition(R.matrixWorld),I.position.applyMatrix4(M),y++}else if(R.isHemisphereLight){const I=r.hemi[w];I.direction.setFromMatrixPosition(R.matrixWorld),I.direction.transformDirection(M),w++}}}return{setup:c,setupView:f,state:r}}function k_(n,e){const t=new aN(n,e),i=[],r=[];function s(){i.length=0,r.length=0}function a(g){i.push(g)}function l(g){r.push(g)}function c(g){t.setup(i,g)}function f(g){t.setupView(i,g)}return{init:s,state:{lightsArray:i,shadowsArray:r,lights:t},setupLights:c,setupLightsView:f,pushLight:a,pushShadow:l}}function oN(n,e){let t=new WeakMap;function i(s,a=0){const l=t.get(s);let c;return l===void 0?(c=new k_(n,e),t.set(s,[c])):a>=l.length?(c=new k_(n,e),l.push(c)):c=l[a],c}function r(){t=new WeakMap}return{get:i,dispose:r}}class Dp extends hr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Ji,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class xv extends hr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const lN=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,uN=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function cN(n,e,t){let i=new vv;const r=new _e,s=new _e,a=new hn,l=new Dp({depthPacking:ia}),c=new xv,f={},p=t.maxTextureSize,g={[go]:Zi,[Zi]:go,[Qr]:Qr},v=new tn({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new _e},radius:{value:4}},vertexShader:lN,fragmentShader:uN}),y=v.clone();y.defines.HORIZONTAL_PASS=1;const S=new nn;S.setAttribute("position",new cn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const T=new xi(S,v),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=lv;let M=this.type;this.render=function(I,k,F){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||I.length===0)return;const z=n.getRenderTarget(),U=n.getActiveCubeFace(),O=n.getActiveMipmapLevel(),$=n.state;$.setBlending(Kn),$.buffers.color.setClear(1,1,1,1),$.buffers.depth.setTest(!0),$.setScissorTest(!1);const Y=M!==ka&&this.type===ka,q=M===ka&&this.type!==ka;for(let J=0,ae=I.length;J<ae;J++){const oe=I[J],ue=oe.shadow;if(ue===void 0){console.warn("THREE.WebGLShadowMap:",oe,"has no shadow.");continue}if(ue.autoUpdate===!1&&ue.needsUpdate===!1)continue;r.copy(ue.mapSize);const V=ue.getFrameExtents();if(r.multiply(V),s.copy(ue.mapSize),(r.x>p||r.y>p)&&(r.x>p&&(s.x=Math.floor(p/V.x),r.x=s.x*V.x,ue.mapSize.x=s.x),r.y>p&&(s.y=Math.floor(p/V.y),r.y=s.y*V.y,ue.mapSize.y=s.y)),ue.map===null||Y===!0||q===!0){const W=this.type!==ka?{minFilter:$t,magFilter:$t}:{};ue.map!==null&&ue.map.dispose(),ue.map=new an(r.x,r.y,W),ue.map.texture.name=oe.name+".shadowMap",ue.camera.updateProjectionMatrix()}n.setRenderTarget(ue.map),n.clear();const j=ue.getViewportCount();for(let W=0;W<j;W++){const L=ue.getViewport(W);a.set(s.x*L.x,s.y*L.y,s.x*L.z,s.y*L.w),$.viewport(a),ue.updateMatrices(oe,W),i=ue.getFrustum(),R(k,F,ue.camera,oe,this.type)}ue.isPointLightShadow!==!0&&this.type===ka&&A(ue,F),ue.needsUpdate=!1}M=this.type,w.needsUpdate=!1,n.setRenderTarget(z,U,O)};function A(I,k){const F=e.update(T);v.defines.VSM_SAMPLES!==I.blurSamples&&(v.defines.VSM_SAMPLES=I.blurSamples,y.defines.VSM_SAMPLES=I.blurSamples,v.needsUpdate=!0,y.needsUpdate=!0),I.mapPass===null&&(I.mapPass=new an(r.x,r.y)),v.uniforms.shadow_pass.value=I.map.texture,v.uniforms.resolution.value=I.mapSize,v.uniforms.radius.value=I.radius,n.setRenderTarget(I.mapPass),n.clear(),n.renderBufferDirect(k,null,F,v,T,null),y.uniforms.shadow_pass.value=I.mapPass.texture,y.uniforms.resolution.value=I.mapSize,y.uniforms.radius.value=I.radius,n.setRenderTarget(I.map),n.clear(),n.renderBufferDirect(k,null,F,y,T,null)}function b(I,k,F,z){let U=null;const O=F.isPointLight===!0?I.customDistanceMaterial:I.customDepthMaterial;if(O!==void 0)U=O;else if(U=F.isPointLight===!0?c:l,n.localClippingEnabled&&k.clipShadows===!0&&Array.isArray(k.clippingPlanes)&&k.clippingPlanes.length!==0||k.displacementMap&&k.displacementScale!==0||k.alphaMap&&k.alphaTest>0||k.map&&k.alphaTest>0){const $=U.uuid,Y=k.uuid;let q=f[$];q===void 0&&(q={},f[$]=q);let J=q[Y];J===void 0&&(J=U.clone(),q[Y]=J),U=J}if(U.visible=k.visible,U.wireframe=k.wireframe,z===ka?U.side=k.shadowSide!==null?k.shadowSide:k.side:U.side=k.shadowSide!==null?k.shadowSide:g[k.side],U.alphaMap=k.alphaMap,U.alphaTest=k.alphaTest,U.map=k.map,U.clipShadows=k.clipShadows,U.clippingPlanes=k.clippingPlanes,U.clipIntersection=k.clipIntersection,U.displacementMap=k.displacementMap,U.displacementScale=k.displacementScale,U.displacementBias=k.displacementBias,U.wireframeLinewidth=k.wireframeLinewidth,U.linewidth=k.linewidth,F.isPointLight===!0&&U.isMeshDistanceMaterial===!0){const $=n.properties.get(U);$.light=F}return U}function R(I,k,F,z,U){if(I.visible===!1)return;if(I.layers.test(k.layers)&&(I.isMesh||I.isLine||I.isPoints)&&(I.castShadow||I.receiveShadow&&U===ka)&&(!I.frustumCulled||i.intersectsObject(I))){I.modelViewMatrix.multiplyMatrices(F.matrixWorldInverse,I.matrixWorld);const Y=e.update(I),q=I.material;if(Array.isArray(q)){const J=Y.groups;for(let ae=0,oe=J.length;ae<oe;ae++){const ue=J[ae],V=q[ue.materialIndex];if(V&&V.visible){const j=b(I,V,z,U);n.renderBufferDirect(F,null,Y,j,I,ue)}}}else if(q.visible){const J=b(I,q,z,U);n.renderBufferDirect(F,null,Y,J,I,null)}}const $=I.children;for(let Y=0,q=$.length;Y<q;Y++)R($[Y],k,F,z,U)}}function fN(n,e,t){const i=t.isWebGL2;function r(){let le=!1;const je=new hn;let Se=null;const at=new hn(0,0,0,0);return{setMask:function(Qe){Se!==Qe&&!le&&(n.colorMask(Qe,Qe,Qe,Qe),Se=Qe)},setLocked:function(Qe){le=Qe},setClear:function(Qe,mt,Gt,Vt,Lt){Lt===!0&&(Qe*=Vt,mt*=Vt,Gt*=Vt),je.set(Qe,mt,Gt,Vt),at.equals(je)===!1&&(n.clearColor(Qe,mt,Gt,Vt),at.copy(je))},reset:function(){le=!1,Se=null,at.set(-1,0,0,0)}}}function s(){let le=!1,je=null,Se=null,at=null;return{setTest:function(Qe){Qe?he(n.DEPTH_TEST):ve(n.DEPTH_TEST)},setMask:function(Qe){je!==Qe&&!le&&(n.depthMask(Qe),je=Qe)},setFunc:function(Qe){if(Se!==Qe){switch(Qe){case Gx:n.depthFunc(n.NEVER);break;case Vx:n.depthFunc(n.ALWAYS);break;case Qg:n.depthFunc(n.LESS);break;case rp:n.depthFunc(n.LEQUAL);break;case sp:n.depthFunc(n.EQUAL);break;case Wx:n.depthFunc(n.GEQUAL);break;case jx:n.depthFunc(n.GREATER);break;case uv:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Se=Qe}},setLocked:function(Qe){le=Qe},setClear:function(Qe){at!==Qe&&(n.clearDepth(Qe),at=Qe)},reset:function(){le=!1,je=null,Se=null,at=null}}}function a(){let le=!1,je=null,Se=null,at=null,Qe=null,mt=null,Gt=null,Vt=null,Lt=null;return{setTest:function(Dt){le||(Dt?he(n.STENCIL_TEST):ve(n.STENCIL_TEST))},setMask:function(Dt){je!==Dt&&!le&&(n.stencilMask(Dt),je=Dt)},setFunc:function(Dt,wn,ln){(Se!==Dt||at!==wn||Qe!==ln)&&(n.stencilFunc(Dt,wn,ln),Se=Dt,at=wn,Qe=ln)},setOp:function(Dt,wn,ln){(mt!==Dt||Gt!==wn||Vt!==ln)&&(n.stencilOp(Dt,wn,ln),mt=Dt,Gt=wn,Vt=ln)},setLocked:function(Dt){le=Dt},setClear:function(Dt){Lt!==Dt&&(n.clearStencil(Dt),Lt=Dt)},reset:function(){le=!1,je=null,Se=null,at=null,Qe=null,mt=null,Gt=null,Vt=null,Lt=null}}}const l=new r,c=new s,f=new a,p=new WeakMap,g=new WeakMap;let v={},y={},S=new WeakMap,T=[],w=null,M=!1,A=null,b=null,R=null,I=null,k=null,F=null,z=null,U=!1,O=null,$=null,Y=null,q=null,J=null;const ae=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let oe=!1,ue=0;const V=n.getParameter(n.VERSION);V.indexOf("WebGL")!==-1?(ue=parseFloat(/^WebGL (\d)/.exec(V)[1]),oe=ue>=1):V.indexOf("OpenGL ES")!==-1&&(ue=parseFloat(/^OpenGL ES (\d)/.exec(V)[1]),oe=ue>=2);let j=null,W={};const L=n.getParameter(n.SCISSOR_BOX),B=n.getParameter(n.VIEWPORT),te=new hn().fromArray(L),ie=new hn().fromArray(B);function re(le,je,Se,at){const Qe=new Uint8Array(4),mt=n.createTexture();n.bindTexture(le,mt),n.texParameteri(le,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(le,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Gt=0;Gt<Se;Gt++)i&&(le===n.TEXTURE_3D||le===n.TEXTURE_2D_ARRAY)?n.texImage3D(je,0,n.RGBA,1,1,at,0,n.RGBA,n.UNSIGNED_BYTE,Qe):n.texImage2D(je+Gt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Qe);return mt}const de={};de[n.TEXTURE_2D]=re(n.TEXTURE_2D,n.TEXTURE_2D,1),de[n.TEXTURE_CUBE_MAP]=re(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),i&&(de[n.TEXTURE_2D_ARRAY]=re(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),de[n.TEXTURE_3D]=re(n.TEXTURE_3D,n.TEXTURE_3D,1,1)),l.setClear(0,0,0,1),c.setClear(1),f.setClear(0),he(n.DEPTH_TEST),c.setFunc(rp),Pe(!1),et(zT),he(n.CULL_FACE),we(Kn);function he(le){v[le]!==!0&&(n.enable(le),v[le]=!0)}function ve(le){v[le]!==!1&&(n.disable(le),v[le]=!1)}function Ve(le,je){return y[le]!==je?(n.bindFramebuffer(le,je),y[le]=je,i&&(le===n.DRAW_FRAMEBUFFER&&(y[n.FRAMEBUFFER]=je),le===n.FRAMEBUFFER&&(y[n.DRAW_FRAMEBUFFER]=je)),!0):!1}function rt(le,je){let Se=T,at=!1;if(le)if(Se=S.get(je),Se===void 0&&(Se=[],S.set(je,Se)),le.isWebGLMultipleRenderTargets){const Qe=le.texture;if(Se.length!==Qe.length||Se[0]!==n.COLOR_ATTACHMENT0){for(let mt=0,Gt=Qe.length;mt<Gt;mt++)Se[mt]=n.COLOR_ATTACHMENT0+mt;Se.length=Qe.length,at=!0}}else Se[0]!==n.COLOR_ATTACHMENT0&&(Se[0]=n.COLOR_ATTACHMENT0,at=!0);else Se[0]!==n.BACK&&(Se[0]=n.BACK,at=!0);at&&(t.isWebGL2?n.drawBuffers(Se):e.get("WEBGL_draw_buffers").drawBuffersWEBGL(Se))}function Ue(le){return w!==le?(n.useProgram(le),w=le,!0):!1}const Z={[tc]:n.FUNC_ADD,[VT]:n.FUNC_SUBTRACT,[WT]:n.FUNC_REVERSE_SUBTRACT};if(i)Z[zy]=n.MIN,Z[Hy]=n.MAX;else{const le=e.get("EXT_blend_minmax");le!==null&&(Z[zy]=le.MIN_EXT,Z[Hy]=le.MAX_EXT)}const Fe={[jT]:n.ZERO,[XT]:n.ONE,[YT]:n.SRC_COLOR,[zx]:n.SRC_ALPHA,[$T]:n.SRC_ALPHA_SATURATE,[QT]:n.DST_COLOR,[ZT]:n.DST_ALPHA,[qT]:n.ONE_MINUS_SRC_COLOR,[Hx]:n.ONE_MINUS_SRC_ALPHA,[JT]:n.ONE_MINUS_DST_COLOR,[KT]:n.ONE_MINUS_DST_ALPHA};function we(le,je,Se,at,Qe,mt,Gt,Vt){if(le===Kn){M===!0&&(ve(n.BLEND),M=!1);return}if(M===!1&&(he(n.BLEND),M=!0),le!==GT){if(le!==A||Vt!==U){if((b!==tc||k!==tc)&&(n.blendEquation(n.FUNC_ADD),b=tc,k=tc),Vt)switch(le){case fc:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Kg:n.blendFunc(n.ONE,n.ONE);break;case Oy:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case By:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}else switch(le){case fc:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case Kg:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case Oy:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case By:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",le);break}R=null,I=null,F=null,z=null,A=le,U=Vt}return}Qe=Qe||je,mt=mt||Se,Gt=Gt||at,(je!==b||Qe!==k)&&(n.blendEquationSeparate(Z[je],Z[Qe]),b=je,k=Qe),(Se!==R||at!==I||mt!==F||Gt!==z)&&(n.blendFuncSeparate(Fe[Se],Fe[at],Fe[mt],Fe[Gt]),R=Se,I=at,F=mt,z=Gt),A=le,U=!1}function ke(le,je){le.side===Qr?ve(n.CULL_FACE):he(n.CULL_FACE);let Se=le.side===Zi;je&&(Se=!Se),Pe(Se),le.blending===fc&&le.transparent===!1?we(Kn):we(le.blending,le.blendEquation,le.blendSrc,le.blendDst,le.blendEquationAlpha,le.blendSrcAlpha,le.blendDstAlpha,le.premultipliedAlpha),c.setFunc(le.depthFunc),c.setTest(le.depthTest),c.setMask(le.depthWrite),l.setMask(le.colorWrite);const at=le.stencilWrite;f.setTest(at),at&&(f.setMask(le.stencilWriteMask),f.setFunc(le.stencilFunc,le.stencilRef,le.stencilFuncMask),f.setOp(le.stencilFail,le.stencilZFail,le.stencilZPass)),Xe(le.polygonOffset,le.polygonOffsetFactor,le.polygonOffsetUnits),le.alphaToCoverage===!0?he(n.SAMPLE_ALPHA_TO_COVERAGE):ve(n.SAMPLE_ALPHA_TO_COVERAGE)}function Pe(le){O!==le&&(le?n.frontFace(n.CW):n.frontFace(n.CCW),O=le)}function et(le){he(n.CULL_FACE),le!==$&&n.cullFace(n.BACK),$=le}function Le(le){le!==Y&&(oe&&n.lineWidth(le),Y=le)}function Xe(le,je,Se){le?(he(n.POLYGON_OFFSET_FILL),(q!==je||J!==Se)&&(n.polygonOffset(je,Se),q=je,J=Se)):ve(n.POLYGON_OFFSET_FILL)}function Ze(le){le?he(n.SCISSOR_TEST):ve(n.SCISSOR_TEST)}function Ae(le){le===void 0&&(le=n.TEXTURE0+ae-1),j!==le&&(n.activeTexture(le),j=le)}function ht(le,je,Se){Se===void 0&&(j===null?Se=n.TEXTURE0+ae-1:Se=j);let at=W[Se];at===void 0&&(at={type:void 0,texture:void 0},W[Se]=at),(at.type!==le||at.texture!==je)&&(j!==Se&&(n.activeTexture(Se),j=Se),n.bindTexture(le,je||de[le]),at.type=le,at.texture=je)}function X(){const le=W[j];le!==void 0&&le.type!==void 0&&(n.bindTexture(le.type,null),le.type=void 0,le.texture=void 0)}function H(){try{n.compressedTexImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ce(){try{n.compressedTexImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function qe(){try{n.texSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function be(){try{n.texSubImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ne(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function Ke(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function We(){try{n.texStorage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function xe(){try{n.texStorage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function ct(){try{n.texImage2D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function nt(){try{n.texImage3D.apply(n,arguments)}catch(le){console.error("THREE.WebGLState:",le)}}function tt(le){te.equals(le)===!1&&(n.scissor(le.x,le.y,le.z,le.w),te.copy(le))}function Ye(le){ie.equals(le)===!1&&(n.viewport(le.x,le.y,le.z,le.w),ie.copy(le))}function st(le,je){let Se=g.get(je);Se===void 0&&(Se=new WeakMap,g.set(je,Se));let at=Se.get(le);at===void 0&&(at=n.getUniformBlockIndex(je,le.name),Se.set(le,at))}function _t(le,je){const at=g.get(je).get(le);p.get(je)!==at&&(n.uniformBlockBinding(je,at,le.__bindingPointIndex),p.set(je,at))}function Wt(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),i===!0&&(n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null)),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),v={},j=null,W={},y={},S=new WeakMap,T=[],w=null,M=!1,A=null,b=null,R=null,I=null,k=null,F=null,z=null,U=!1,O=null,$=null,Y=null,q=null,J=null,te.set(0,0,n.canvas.width,n.canvas.height),ie.set(0,0,n.canvas.width,n.canvas.height),l.reset(),c.reset(),f.reset()}return{buffers:{color:l,depth:c,stencil:f},enable:he,disable:ve,bindFramebuffer:Ve,drawBuffers:rt,useProgram:Ue,setBlending:we,setMaterial:ke,setFlipSided:Pe,setCullFace:et,setLineWidth:Le,setPolygonOffset:Xe,setScissorTest:Ze,activeTexture:Ae,bindTexture:ht,unbindTexture:X,compressedTexImage2D:H,compressedTexImage3D:ce,texImage2D:ct,texImage3D:nt,updateUBOMapping:st,uniformBlockBinding:_t,texStorage2D:We,texStorage3D:xe,texSubImage2D:qe,texSubImage3D:be,compressedTexSubImage2D:Ne,compressedTexSubImage3D:Ke,scissor:tt,viewport:Ye,reset:Wt}}function hN(n,e,t,i,r,s,a){const l=r.isWebGL2,c=r.maxTextures,f=r.maxCubemapSize,p=r.maxTextureSize,g=r.maxSamples,v=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,y=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),S=new WeakMap;let T;const w=new WeakMap;let M=!1;try{M=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function A(X,H){return M?new OffscreenCanvas(X,H):pp("canvas")}function b(X,H,ce,qe){let be=1;if((X.width>qe||X.height>qe)&&(be=qe/Math.max(X.width,X.height)),be<1||H===!0)if(typeof HTMLImageElement<"u"&&X instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&X instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&X instanceof ImageBitmap){const Ne=H?tv:Math.floor,Ke=Ne(be*X.width),We=Ne(be*X.height);T===void 0&&(T=A(Ke,We));const xe=ce?A(Ke,We):T;return xe.width=Ke,xe.height=We,xe.getContext("2d").drawImage(X,0,0,Ke,We),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+X.width+"x"+X.height+") to ("+Ke+"x"+We+")."),xe}else return"data"in X&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+X.width+"x"+X.height+")."),X;return X}function R(X){return fx(X.width)&&fx(X.height)}function I(X){return l?!1:X.wrapS!==qi||X.wrapT!==qi||X.minFilter!==$t&&X.minFilter!==Et}function k(X,H){return X.generateMipmaps&&H&&X.minFilter!==$t&&X.minFilter!==Et}function F(X){n.generateMipmap(X)}function z(X,H,ce,qe,be=!1){if(l===!1)return H;if(X!==null){if(n[X]!==void 0)return n[X];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+X+"'")}let Ne=H;return H===n.RED&&(ce===n.FLOAT&&(Ne=n.R32F),ce===n.HALF_FLOAT&&(Ne=n.R16F),ce===n.UNSIGNED_BYTE&&(Ne=n.R8)),H===n.RED_INTEGER&&(ce===n.UNSIGNED_BYTE&&(Ne=n.R8UI),ce===n.UNSIGNED_SHORT&&(Ne=n.R16UI),ce===n.UNSIGNED_INT&&(Ne=n.R32UI),ce===n.BYTE&&(Ne=n.R8I),ce===n.SHORT&&(Ne=n.R16I),ce===n.INT&&(Ne=n.R32I)),H===n.RG&&(ce===n.FLOAT&&(Ne=n.RG32F),ce===n.HALF_FLOAT&&(Ne=n.RG16F),ce===n.UNSIGNED_BYTE&&(Ne=n.RG8)),H===n.RGBA&&(ce===n.FLOAT&&(Ne=n.RGBA32F),ce===n.HALF_FLOAT&&(Ne=n.RGBA16F),ce===n.UNSIGNED_BYTE&&(Ne=qe===yt&&be===!1?n.SRGB8_ALPHA8:n.RGBA8),ce===n.UNSIGNED_SHORT_4_4_4_4&&(Ne=n.RGBA4),ce===n.UNSIGNED_SHORT_5_5_5_1&&(Ne=n.RGB5_A1)),(Ne===n.R16F||Ne===n.R32F||Ne===n.RG16F||Ne===n.RG32F||Ne===n.RGBA16F||Ne===n.RGBA32F)&&e.get("EXT_color_buffer_float"),Ne}function U(X,H,ce){return k(X,ce)===!0||X.isFramebufferTexture&&X.minFilter!==$t&&X.minFilter!==Et?Math.log2(Math.max(H.width,H.height))+1:X.mipmaps!==void 0&&X.mipmaps.length>0?X.mipmaps.length:X.isCompressedTexture&&Array.isArray(X.image)?H.mipmaps.length:1}function O(X){return X===$t||X===Jg||X===Xd?n.NEAREST:n.LINEAR}function $(X){const H=X.target;H.removeEventListener("dispose",$),q(H),H.isVideoTexture&&S.delete(H)}function Y(X){const H=X.target;H.removeEventListener("dispose",Y),ae(H)}function q(X){const H=i.get(X);if(H.__webglInit===void 0)return;const ce=X.source,qe=w.get(ce);if(qe){const be=qe[H.__cacheKey];be.usedTimes--,be.usedTimes===0&&J(X),Object.keys(qe).length===0&&w.delete(ce)}i.remove(X)}function J(X){const H=i.get(X);n.deleteTexture(H.__webglTexture);const ce=X.source,qe=w.get(ce);delete qe[H.__cacheKey],a.memory.textures--}function ae(X){const H=X.texture,ce=i.get(X),qe=i.get(H);if(qe.__webglTexture!==void 0&&(n.deleteTexture(qe.__webglTexture),a.memory.textures--),X.depthTexture&&X.depthTexture.dispose(),X.isWebGLCubeRenderTarget)for(let be=0;be<6;be++){if(Array.isArray(ce.__webglFramebuffer[be]))for(let Ne=0;Ne<ce.__webglFramebuffer[be].length;Ne++)n.deleteFramebuffer(ce.__webglFramebuffer[be][Ne]);else n.deleteFramebuffer(ce.__webglFramebuffer[be]);ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer[be])}else{if(Array.isArray(ce.__webglFramebuffer))for(let be=0;be<ce.__webglFramebuffer.length;be++)n.deleteFramebuffer(ce.__webglFramebuffer[be]);else n.deleteFramebuffer(ce.__webglFramebuffer);if(ce.__webglDepthbuffer&&n.deleteRenderbuffer(ce.__webglDepthbuffer),ce.__webglMultisampledFramebuffer&&n.deleteFramebuffer(ce.__webglMultisampledFramebuffer),ce.__webglColorRenderbuffer)for(let be=0;be<ce.__webglColorRenderbuffer.length;be++)ce.__webglColorRenderbuffer[be]&&n.deleteRenderbuffer(ce.__webglColorRenderbuffer[be]);ce.__webglDepthRenderbuffer&&n.deleteRenderbuffer(ce.__webglDepthRenderbuffer)}if(X.isWebGLMultipleRenderTargets)for(let be=0,Ne=H.length;be<Ne;be++){const Ke=i.get(H[be]);Ke.__webglTexture&&(n.deleteTexture(Ke.__webglTexture),a.memory.textures--),i.remove(H[be])}i.remove(H),i.remove(X)}let oe=0;function ue(){oe=0}function V(){const X=oe;return X>=c&&console.warn("THREE.WebGLTextures: Trying to use "+X+" texture units while this GPU supports only "+c),oe+=1,X}function j(X){const H=[];return H.push(X.wrapS),H.push(X.wrapT),H.push(X.wrapR||0),H.push(X.magFilter),H.push(X.minFilter),H.push(X.anisotropy),H.push(X.internalFormat),H.push(X.format),H.push(X.type),H.push(X.generateMipmaps),H.push(X.premultiplyAlpha),H.push(X.flipY),H.push(X.unpackAlignment),H.push(X.colorSpace),H.join()}function W(X,H){const ce=i.get(X);if(X.isVideoTexture&&Ae(X),X.isRenderTargetTexture===!1&&X.version>0&&ce.__version!==X.version){const qe=X.image;if(qe===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(qe.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{Ve(ce,X,H);return}}t.bindTexture(n.TEXTURE_2D,ce.__webglTexture,n.TEXTURE0+H)}function L(X,H){const ce=i.get(X);if(X.version>0&&ce.__version!==X.version){Ve(ce,X,H);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ce.__webglTexture,n.TEXTURE0+H)}function B(X,H){const ce=i.get(X);if(X.version>0&&ce.__version!==X.version){Ve(ce,X,H);return}t.bindTexture(n.TEXTURE_3D,ce.__webglTexture,n.TEXTURE0+H)}function te(X,H){const ce=i.get(X);if(X.version>0&&ce.__version!==X.version){rt(ce,X,H);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ce.__webglTexture,n.TEXTURE0+H)}const ie={[Ga]:n.REPEAT,[qi]:n.CLAMP_TO_EDGE,[lp]:n.MIRRORED_REPEAT},re={[$t]:n.NEAREST,[Jg]:n.NEAREST_MIPMAP_NEAREST,[Xd]:n.NEAREST_MIPMAP_LINEAR,[Et]:n.LINEAR,[Yx]:n.LINEAR_MIPMAP_NEAREST,[tu]:n.LINEAR_MIPMAP_LINEAR},de={[vE]:n.NEVER,[TE]:n.ALWAYS,[yE]:n.LESS,[SE]:n.LEQUAL,[xE]:n.EQUAL,[wE]:n.GEQUAL,[_E]:n.GREATER,[ME]:n.NOTEQUAL};function he(X,H,ce){if(ce?(n.texParameteri(X,n.TEXTURE_WRAP_S,ie[H.wrapS]),n.texParameteri(X,n.TEXTURE_WRAP_T,ie[H.wrapT]),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,ie[H.wrapR]),n.texParameteri(X,n.TEXTURE_MAG_FILTER,re[H.magFilter]),n.texParameteri(X,n.TEXTURE_MIN_FILTER,re[H.minFilter])):(n.texParameteri(X,n.TEXTURE_WRAP_S,n.CLAMP_TO_EDGE),n.texParameteri(X,n.TEXTURE_WRAP_T,n.CLAMP_TO_EDGE),(X===n.TEXTURE_3D||X===n.TEXTURE_2D_ARRAY)&&n.texParameteri(X,n.TEXTURE_WRAP_R,n.CLAMP_TO_EDGE),(H.wrapS!==qi||H.wrapT!==qi)&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping."),n.texParameteri(X,n.TEXTURE_MAG_FILTER,O(H.magFilter)),n.texParameteri(X,n.TEXTURE_MIN_FILTER,O(H.minFilter)),H.minFilter!==$t&&H.minFilter!==Et&&console.warn("THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.")),H.compareFunction&&(n.texParameteri(X,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(X,n.TEXTURE_COMPARE_FUNC,de[H.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){const qe=e.get("EXT_texture_filter_anisotropic");if(H.magFilter===$t||H.minFilter!==Xd&&H.minFilter!==tu||H.type===li&&e.has("OES_texture_float_linear")===!1||l===!1&&H.type===Tr&&e.has("OES_texture_half_float_linear")===!1)return;(H.anisotropy>1||i.get(H).__currentAnisotropy)&&(n.texParameterf(X,qe.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(H.anisotropy,r.getMaxAnisotropy())),i.get(H).__currentAnisotropy=H.anisotropy)}}function ve(X,H){let ce=!1;X.__webglInit===void 0&&(X.__webglInit=!0,H.addEventListener("dispose",$));const qe=H.source;let be=w.get(qe);be===void 0&&(be={},w.set(qe,be));const Ne=j(H);if(Ne!==X.__cacheKey){be[Ne]===void 0&&(be[Ne]={texture:n.createTexture(),usedTimes:0},a.memory.textures++,ce=!0),be[Ne].usedTimes++;const Ke=be[X.__cacheKey];Ke!==void 0&&(be[X.__cacheKey].usedTimes--,Ke.usedTimes===0&&J(H)),X.__cacheKey=Ne,X.__webglTexture=be[Ne].texture}return ce}function Ve(X,H,ce){let qe=n.TEXTURE_2D;(H.isDataArrayTexture||H.isCompressedArrayTexture)&&(qe=n.TEXTURE_2D_ARRAY),H.isData3DTexture&&(qe=n.TEXTURE_3D);const be=ve(X,H),Ne=H.source;t.bindTexture(qe,X.__webglTexture,n.TEXTURE0+ce);const Ke=i.get(Ne);if(Ne.version!==Ke.__version||be===!0){t.activeTexture(n.TEXTURE0+ce),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const We=I(H)&&R(H.image)===!1;let xe=b(H.image,We,!1,p);xe=ht(H,xe);const ct=R(xe)||l,nt=s.convert(H.format,H.colorSpace);let tt=s.convert(H.type),Ye=z(H.internalFormat,nt,tt,H.colorSpace);he(qe,H,ct);let st;const _t=H.mipmaps,Wt=l&&H.isVideoTexture!==!0,le=Ke.__version===void 0||be===!0,je=U(H,xe,ct);if(H.isDepthTexture)Ye=n.DEPTH_COMPONENT,l?H.type===li?Ye=n.DEPTH_COMPONENT32F:H.type===za?Ye=n.DEPTH_COMPONENT24:H.type===sl?Ye=n.DEPTH24_STENCIL8:Ye=n.DEPTH_COMPONENT16:H.type===li&&console.error("WebGLRenderer: Floating point depth texture requires WebGL2."),H.format===Jl&&Ye===n.DEPTH_COMPONENT&&H.type!==fv&&H.type!==za&&(console.warn("THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture."),H.type=za,tt=s.convert(H.type)),H.format===nu&&Ye===n.DEPTH_COMPONENT&&(Ye=n.DEPTH_STENCIL,H.type!==sl&&(console.warn("THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture."),H.type=sl,tt=s.convert(H.type))),le&&(Wt?t.texStorage2D(n.TEXTURE_2D,1,Ye,xe.width,xe.height):t.texImage2D(n.TEXTURE_2D,0,Ye,xe.width,xe.height,0,nt,tt,null));else if(H.isDataTexture)if(_t.length>0&&ct){Wt&&le&&t.texStorage2D(n.TEXTURE_2D,je,Ye,_t[0].width,_t[0].height);for(let Se=0,at=_t.length;Se<at;Se++)st=_t[Se],Wt?t.texSubImage2D(n.TEXTURE_2D,Se,0,0,st.width,st.height,nt,tt,st.data):t.texImage2D(n.TEXTURE_2D,Se,Ye,st.width,st.height,0,nt,tt,st.data);H.generateMipmaps=!1}else Wt?(le&&t.texStorage2D(n.TEXTURE_2D,je,Ye,xe.width,xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,xe.width,xe.height,nt,tt,xe.data)):t.texImage2D(n.TEXTURE_2D,0,Ye,xe.width,xe.height,0,nt,tt,xe.data);else if(H.isCompressedTexture)if(H.isCompressedArrayTexture){Wt&&le&&t.texStorage3D(n.TEXTURE_2D_ARRAY,je,Ye,_t[0].width,_t[0].height,xe.depth);for(let Se=0,at=_t.length;Se<at;Se++)st=_t[Se],H.format!==Dn?nt!==null?Wt?t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,st.width,st.height,xe.depth,nt,st.data,0,0):t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,Se,Ye,st.width,st.height,xe.depth,0,st.data,0,0):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wt?t.texSubImage3D(n.TEXTURE_2D_ARRAY,Se,0,0,0,st.width,st.height,xe.depth,nt,tt,st.data):t.texImage3D(n.TEXTURE_2D_ARRAY,Se,Ye,st.width,st.height,xe.depth,0,nt,tt,st.data)}else{Wt&&le&&t.texStorage2D(n.TEXTURE_2D,je,Ye,_t[0].width,_t[0].height);for(let Se=0,at=_t.length;Se<at;Se++)st=_t[Se],H.format!==Dn?nt!==null?Wt?t.compressedTexSubImage2D(n.TEXTURE_2D,Se,0,0,st.width,st.height,nt,st.data):t.compressedTexImage2D(n.TEXTURE_2D,Se,Ye,st.width,st.height,0,st.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Wt?t.texSubImage2D(n.TEXTURE_2D,Se,0,0,st.width,st.height,nt,tt,st.data):t.texImage2D(n.TEXTURE_2D,Se,Ye,st.width,st.height,0,nt,tt,st.data)}else if(H.isDataArrayTexture)Wt?(le&&t.texStorage3D(n.TEXTURE_2D_ARRAY,je,Ye,xe.width,xe.height,xe.depth),t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,xe.width,xe.height,xe.depth,nt,tt,xe.data)):t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ye,xe.width,xe.height,xe.depth,0,nt,tt,xe.data);else if(H.isData3DTexture)Wt?(le&&t.texStorage3D(n.TEXTURE_3D,je,Ye,xe.width,xe.height,xe.depth),t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,xe.width,xe.height,xe.depth,nt,tt,xe.data)):t.texImage3D(n.TEXTURE_3D,0,Ye,xe.width,xe.height,xe.depth,0,nt,tt,xe.data);else if(H.isFramebufferTexture){if(le)if(Wt)t.texStorage2D(n.TEXTURE_2D,je,Ye,xe.width,xe.height);else{let Se=xe.width,at=xe.height;for(let Qe=0;Qe<je;Qe++)t.texImage2D(n.TEXTURE_2D,Qe,Ye,Se,at,0,nt,tt,null),Se>>=1,at>>=1}}else if(_t.length>0&&ct){Wt&&le&&t.texStorage2D(n.TEXTURE_2D,je,Ye,_t[0].width,_t[0].height);for(let Se=0,at=_t.length;Se<at;Se++)st=_t[Se],Wt?t.texSubImage2D(n.TEXTURE_2D,Se,0,0,nt,tt,st):t.texImage2D(n.TEXTURE_2D,Se,Ye,nt,tt,st);H.generateMipmaps=!1}else Wt?(le&&t.texStorage2D(n.TEXTURE_2D,je,Ye,xe.width,xe.height),t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,tt,xe)):t.texImage2D(n.TEXTURE_2D,0,Ye,nt,tt,xe);k(H,ct)&&F(qe),Ke.__version=Ne.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function rt(X,H,ce){if(H.image.length!==6)return;const qe=ve(X,H),be=H.source;t.bindTexture(n.TEXTURE_CUBE_MAP,X.__webglTexture,n.TEXTURE0+ce);const Ne=i.get(be);if(be.version!==Ne.__version||qe===!0){t.activeTexture(n.TEXTURE0+ce),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,H.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,H.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,H.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,n.NONE);const Ke=H.isCompressedTexture||H.image[0].isCompressedTexture,We=H.image[0]&&H.image[0].isDataTexture,xe=[];for(let Se=0;Se<6;Se++)!Ke&&!We?xe[Se]=b(H.image[Se],!1,!0,f):xe[Se]=We?H.image[Se].image:H.image[Se],xe[Se]=ht(H,xe[Se]);const ct=xe[0],nt=R(ct)||l,tt=s.convert(H.format,H.colorSpace),Ye=s.convert(H.type),st=z(H.internalFormat,tt,Ye,H.colorSpace),_t=l&&H.isVideoTexture!==!0,Wt=Ne.__version===void 0||qe===!0;let le=U(H,ct,nt);he(n.TEXTURE_CUBE_MAP,H,nt);let je;if(Ke){_t&&Wt&&t.texStorage2D(n.TEXTURE_CUBE_MAP,le,st,ct.width,ct.height);for(let Se=0;Se<6;Se++){je=xe[Se].mipmaps;for(let at=0;at<je.length;at++){const Qe=je[at];H.format!==Dn?tt!==null?_t?t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at,0,0,Qe.width,Qe.height,tt,Qe.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at,st,Qe.width,Qe.height,0,Qe.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):_t?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at,0,0,Qe.width,Qe.height,tt,Ye,Qe.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at,st,Qe.width,Qe.height,0,tt,Ye,Qe.data)}}}else{je=H.mipmaps,_t&&Wt&&(je.length>0&&le++,t.texStorage2D(n.TEXTURE_CUBE_MAP,le,st,xe[0].width,xe[0].height));for(let Se=0;Se<6;Se++)if(We){_t?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,xe[Se].width,xe[Se].height,tt,Ye,xe[Se].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,st,xe[Se].width,xe[Se].height,0,tt,Ye,xe[Se].data);for(let at=0;at<je.length;at++){const mt=je[at].image[Se].image;_t?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at+1,0,0,mt.width,mt.height,tt,Ye,mt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at+1,st,mt.width,mt.height,0,tt,Ye,mt.data)}}else{_t?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,0,0,tt,Ye,xe[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,0,st,tt,Ye,xe[Se]);for(let at=0;at<je.length;at++){const Qe=je[at];_t?t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at+1,0,0,tt,Ye,Qe.image[Se]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Se,at+1,st,tt,Ye,Qe.image[Se])}}}k(H,nt)&&F(n.TEXTURE_CUBE_MAP),Ne.__version=be.version,H.onUpdate&&H.onUpdate(H)}X.__version=H.version}function Ue(X,H,ce,qe,be,Ne){const Ke=s.convert(ce.format,ce.colorSpace),We=s.convert(ce.type),xe=z(ce.internalFormat,Ke,We,ce.colorSpace);if(!i.get(H).__hasExternalTextures){const nt=Math.max(1,H.width>>Ne),tt=Math.max(1,H.height>>Ne);be===n.TEXTURE_3D||be===n.TEXTURE_2D_ARRAY?t.texImage3D(be,Ne,xe,nt,tt,H.depth,0,Ke,We,null):t.texImage2D(be,Ne,xe,nt,tt,0,Ke,We,null)}t.bindFramebuffer(n.FRAMEBUFFER,X),Ze(H)?v.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,qe,be,i.get(ce).__webglTexture,0,Xe(H)):(be===n.TEXTURE_2D||be>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&be<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,qe,be,i.get(ce).__webglTexture,Ne),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Z(X,H,ce){if(n.bindRenderbuffer(n.RENDERBUFFER,X),H.depthBuffer&&!H.stencilBuffer){let qe=n.DEPTH_COMPONENT16;if(ce||Ze(H)){const be=H.depthTexture;be&&be.isDepthTexture&&(be.type===li?qe=n.DEPTH_COMPONENT32F:be.type===za&&(qe=n.DEPTH_COMPONENT24));const Ne=Xe(H);Ze(H)?v.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ne,qe,H.width,H.height):n.renderbufferStorageMultisample(n.RENDERBUFFER,Ne,qe,H.width,H.height)}else n.renderbufferStorage(n.RENDERBUFFER,qe,H.width,H.height);n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.RENDERBUFFER,X)}else if(H.depthBuffer&&H.stencilBuffer){const qe=Xe(H);ce&&Ze(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,qe,n.DEPTH24_STENCIL8,H.width,H.height):Ze(H)?v.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,qe,n.DEPTH24_STENCIL8,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,H.width,H.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,X)}else{const qe=H.isWebGLMultipleRenderTargets===!0?H.texture:[H.texture];for(let be=0;be<qe.length;be++){const Ne=qe[be],Ke=s.convert(Ne.format,Ne.colorSpace),We=s.convert(Ne.type),xe=z(Ne.internalFormat,Ke,We,Ne.colorSpace),ct=Xe(H);ce&&Ze(H)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,ct,xe,H.width,H.height):Ze(H)?v.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,ct,xe,H.width,H.height):n.renderbufferStorage(n.RENDERBUFFER,xe,H.width,H.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function Fe(X,H){if(H&&H.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,X),!(H.depthTexture&&H.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");(!i.get(H.depthTexture).__webglTexture||H.depthTexture.image.width!==H.width||H.depthTexture.image.height!==H.height)&&(H.depthTexture.image.width=H.width,H.depthTexture.image.height=H.height,H.depthTexture.needsUpdate=!0),W(H.depthTexture,0);const qe=i.get(H.depthTexture).__webglTexture,be=Xe(H);if(H.depthTexture.format===Jl)Ze(H)?v.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,qe,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,qe,0);else if(H.depthTexture.format===nu)Ze(H)?v.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,qe,0,be):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,qe,0);else throw new Error("Unknown depthTexture format")}function we(X){const H=i.get(X),ce=X.isWebGLCubeRenderTarget===!0;if(X.depthTexture&&!H.__autoAllocateDepthBuffer){if(ce)throw new Error("target.depthTexture not supported in Cube render targets");Fe(H.__webglFramebuffer,X)}else if(ce){H.__webglDepthbuffer=[];for(let qe=0;qe<6;qe++)t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer[qe]),H.__webglDepthbuffer[qe]=n.createRenderbuffer(),Z(H.__webglDepthbuffer[qe],X,!1)}else t.bindFramebuffer(n.FRAMEBUFFER,H.__webglFramebuffer),H.__webglDepthbuffer=n.createRenderbuffer(),Z(H.__webglDepthbuffer,X,!1);t.bindFramebuffer(n.FRAMEBUFFER,null)}function ke(X,H,ce){const qe=i.get(X);H!==void 0&&Ue(qe.__webglFramebuffer,X,X.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ce!==void 0&&we(X)}function Pe(X){const H=X.texture,ce=i.get(X),qe=i.get(H);X.addEventListener("dispose",Y),X.isWebGLMultipleRenderTargets!==!0&&(qe.__webglTexture===void 0&&(qe.__webglTexture=n.createTexture()),qe.__version=H.version,a.memory.textures++);const be=X.isWebGLCubeRenderTarget===!0,Ne=X.isWebGLMultipleRenderTargets===!0,Ke=R(X)||l;if(be){ce.__webglFramebuffer=[];for(let We=0;We<6;We++)if(l&&H.mipmaps&&H.mipmaps.length>0){ce.__webglFramebuffer[We]=[];for(let xe=0;xe<H.mipmaps.length;xe++)ce.__webglFramebuffer[We][xe]=n.createFramebuffer()}else ce.__webglFramebuffer[We]=n.createFramebuffer()}else{if(l&&H.mipmaps&&H.mipmaps.length>0){ce.__webglFramebuffer=[];for(let We=0;We<H.mipmaps.length;We++)ce.__webglFramebuffer[We]=n.createFramebuffer()}else ce.__webglFramebuffer=n.createFramebuffer();if(Ne)if(r.drawBuffers){const We=X.texture;for(let xe=0,ct=We.length;xe<ct;xe++){const nt=i.get(We[xe]);nt.__webglTexture===void 0&&(nt.__webglTexture=n.createTexture(),a.memory.textures++)}}else console.warn("THREE.WebGLRenderer: WebGLMultipleRenderTargets can only be used with WebGL2 or WEBGL_draw_buffers extension.");if(l&&X.samples>0&&Ze(X)===!1){const We=Ne?H:[H];ce.__webglMultisampledFramebuffer=n.createFramebuffer(),ce.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ce.__webglMultisampledFramebuffer);for(let xe=0;xe<We.length;xe++){const ct=We[xe];ce.__webglColorRenderbuffer[xe]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ce.__webglColorRenderbuffer[xe]);const nt=s.convert(ct.format,ct.colorSpace),tt=s.convert(ct.type),Ye=z(ct.internalFormat,nt,tt,ct.colorSpace,X.isXRRenderTarget===!0),st=Xe(X);n.renderbufferStorageMultisample(n.RENDERBUFFER,st,Ye,X.width,X.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+xe,n.RENDERBUFFER,ce.__webglColorRenderbuffer[xe])}n.bindRenderbuffer(n.RENDERBUFFER,null),X.depthBuffer&&(ce.__webglDepthRenderbuffer=n.createRenderbuffer(),Z(ce.__webglDepthRenderbuffer,X,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(be){t.bindTexture(n.TEXTURE_CUBE_MAP,qe.__webglTexture),he(n.TEXTURE_CUBE_MAP,H,Ke);for(let We=0;We<6;We++)if(l&&H.mipmaps&&H.mipmaps.length>0)for(let xe=0;xe<H.mipmaps.length;xe++)Ue(ce.__webglFramebuffer[We][xe],X,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,xe);else Ue(ce.__webglFramebuffer[We],X,H,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0);k(H,Ke)&&F(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ne){const We=X.texture;for(let xe=0,ct=We.length;xe<ct;xe++){const nt=We[xe],tt=i.get(nt);t.bindTexture(n.TEXTURE_2D,tt.__webglTexture),he(n.TEXTURE_2D,nt,Ke),Ue(ce.__webglFramebuffer,X,nt,n.COLOR_ATTACHMENT0+xe,n.TEXTURE_2D,0),k(nt,Ke)&&F(n.TEXTURE_2D)}t.unbindTexture()}else{let We=n.TEXTURE_2D;if((X.isWebGL3DRenderTarget||X.isWebGLArrayRenderTarget)&&(l?We=X.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY:console.error("THREE.WebGLTextures: THREE.Data3DTexture and THREE.DataArrayTexture only supported with WebGL2.")),t.bindTexture(We,qe.__webglTexture),he(We,H,Ke),l&&H.mipmaps&&H.mipmaps.length>0)for(let xe=0;xe<H.mipmaps.length;xe++)Ue(ce.__webglFramebuffer[xe],X,H,n.COLOR_ATTACHMENT0,We,xe);else Ue(ce.__webglFramebuffer,X,H,n.COLOR_ATTACHMENT0,We,0);k(H,Ke)&&F(We),t.unbindTexture()}X.depthBuffer&&we(X)}function et(X){const H=R(X)||l,ce=X.isWebGLMultipleRenderTargets===!0?X.texture:[X.texture];for(let qe=0,be=ce.length;qe<be;qe++){const Ne=ce[qe];if(k(Ne,H)){const Ke=X.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:n.TEXTURE_2D,We=i.get(Ne).__webglTexture;t.bindTexture(Ke,We),F(Ke),t.unbindTexture()}}}function Le(X){if(l&&X.samples>0&&Ze(X)===!1){const H=X.isWebGLMultipleRenderTargets?X.texture:[X.texture],ce=X.width,qe=X.height;let be=n.COLOR_BUFFER_BIT;const Ne=[],Ke=X.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=i.get(X),xe=X.isWebGLMultipleRenderTargets===!0;if(xe)for(let ct=0;ct<H.length;ct++)t.bindFramebuffer(n.FRAMEBUFFER,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,We.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,We.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,We.__webglFramebuffer);for(let ct=0;ct<H.length;ct++){Ne.push(n.COLOR_ATTACHMENT0+ct),X.depthBuffer&&Ne.push(Ke);const nt=We.__ignoreDepthValues!==void 0?We.__ignoreDepthValues:!1;if(nt===!1&&(X.depthBuffer&&(be|=n.DEPTH_BUFFER_BIT),X.stencilBuffer&&(be|=n.STENCIL_BUFFER_BIT)),xe&&n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,We.__webglColorRenderbuffer[ct]),nt===!0&&(n.invalidateFramebuffer(n.READ_FRAMEBUFFER,[Ke]),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[Ke])),xe){const tt=i.get(H[ct]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,tt,0)}n.blitFramebuffer(0,0,ce,qe,0,0,ce,qe,be,n.NEAREST),y&&n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ne)}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),xe)for(let ct=0;ct<H.length;ct++){t.bindFramebuffer(n.FRAMEBUFFER,We.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.RENDERBUFFER,We.__webglColorRenderbuffer[ct]);const nt=i.get(H[ct]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,We.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+ct,n.TEXTURE_2D,nt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,We.__webglMultisampledFramebuffer)}}function Xe(X){return Math.min(g,X.samples)}function Ze(X){const H=i.get(X);return l&&X.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&H.__useRenderToTexture!==!1}function Ae(X){const H=a.render.frame;S.get(X)!==H&&(S.set(X,H),X.update())}function ht(X,H){const ce=X.colorSpace,qe=X.format,be=X.type;return X.isCompressedTexture===!0||X.format===ev||ce!==Jr&&ce!==Ha&&(ce===yt?l===!1?e.has("EXT_sRGB")===!0&&qe===Dn?(X.format=ev,X.minFilter=Et,X.generateMipmaps=!1):H=s1.sRGBToLinear(H):(qe!==Dn||be!==zn)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ce)),H}this.allocateTextureUnit=V,this.resetTextureUnits=ue,this.setTexture2D=W,this.setTexture2DArray=L,this.setTexture3D=B,this.setTextureCube=te,this.rebindTextures=ke,this.setupRenderTarget=Pe,this.updateRenderTargetMipmap=et,this.updateMultisampleRenderTarget=Le,this.setupDepthRenderbuffer=we,this.setupFrameBufferTexture=Ue,this.useMultisampledRTT=Ze}function kE(n,e,t){const i=t.isWebGL2;function r(s,a=Ha){let l;if(s===zn)return n.UNSIGNED_BYTE;if(s===Zx)return n.UNSIGNED_SHORT_4_4_4_4;if(s===Kx)return n.UNSIGNED_SHORT_5_5_5_1;if(s===aE)return n.BYTE;if(s===oE)return n.SHORT;if(s===fv)return n.UNSIGNED_SHORT;if(s===qx)return n.INT;if(s===za)return n.UNSIGNED_INT;if(s===li)return n.FLOAT;if(s===Tr)return i?n.HALF_FLOAT:(l=e.get("OES_texture_half_float"),l!==null?l.HALF_FLOAT_OES:null);if(s===lE)return n.ALPHA;if(s===Dn)return n.RGBA;if(s===hv)return n.LUMINANCE;if(s===uE)return n.LUMINANCE_ALPHA;if(s===Jl)return n.DEPTH_COMPONENT;if(s===nu)return n.DEPTH_STENCIL;if(s===ev)return l=e.get("EXT_sRGB"),l!==null?l.SRGB_ALPHA_EXT:null;if(s===dv)return n.RED;if(s===Qx)return n.RED_INTEGER;if(s===Jx)return n.RG;if(s===$x)return n.RG_INTEGER;if(s===e1)return n.RGBA_INTEGER;if(s===Ng||s===Fg||s===kg||s===Og)if(a===yt)if(l=e.get("WEBGL_compressed_texture_s3tc_srgb"),l!==null){if(s===Ng)return l.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(s===Fg)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(s===kg)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(s===Og)return l.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(l=e.get("WEBGL_compressed_texture_s3tc"),l!==null){if(s===Ng)return l.COMPRESSED_RGB_S3TC_DXT1_EXT;if(s===Fg)return l.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(s===kg)return l.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(s===Og)return l.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(s===Gy||s===Vy||s===Wy||s===jy)if(l=e.get("WEBGL_compressed_texture_pvrtc"),l!==null){if(s===Gy)return l.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(s===Vy)return l.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(s===Wy)return l.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(s===jy)return l.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(s===cE)return l=e.get("WEBGL_compressed_texture_etc1"),l!==null?l.COMPRESSED_RGB_ETC1_WEBGL:null;if(s===Xy||s===Yy)if(l=e.get("WEBGL_compressed_texture_etc"),l!==null){if(s===Xy)return a===yt?l.COMPRESSED_SRGB8_ETC2:l.COMPRESSED_RGB8_ETC2;if(s===Yy)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:l.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(s===qy||s===Zy||s===Ky||s===Qy||s===Jy||s===$y||s===ex||s===tx||s===nx||s===ix||s===rx||s===sx||s===ax||s===ox)if(l=e.get("WEBGL_compressed_texture_astc"),l!==null){if(s===qy)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:l.COMPRESSED_RGBA_ASTC_4x4_KHR;if(s===Zy)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:l.COMPRESSED_RGBA_ASTC_5x4_KHR;if(s===Ky)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:l.COMPRESSED_RGBA_ASTC_5x5_KHR;if(s===Qy)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:l.COMPRESSED_RGBA_ASTC_6x5_KHR;if(s===Jy)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:l.COMPRESSED_RGBA_ASTC_6x6_KHR;if(s===$y)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:l.COMPRESSED_RGBA_ASTC_8x5_KHR;if(s===ex)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:l.COMPRESSED_RGBA_ASTC_8x6_KHR;if(s===tx)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:l.COMPRESSED_RGBA_ASTC_8x8_KHR;if(s===nx)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:l.COMPRESSED_RGBA_ASTC_10x5_KHR;if(s===ix)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:l.COMPRESSED_RGBA_ASTC_10x6_KHR;if(s===rx)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:l.COMPRESSED_RGBA_ASTC_10x8_KHR;if(s===sx)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:l.COMPRESSED_RGBA_ASTC_10x10_KHR;if(s===ax)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:l.COMPRESSED_RGBA_ASTC_12x10_KHR;if(s===ox)return a===yt?l.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:l.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(s===Bg)if(l=e.get("EXT_texture_compression_bptc"),l!==null){if(s===Bg)return a===yt?l.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:l.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(s===fE||s===lx||s===ux||s===cx)if(l=e.get("EXT_texture_compression_rgtc"),l!==null){if(s===Bg)return l.COMPRESSED_RED_RGTC1_EXT;if(s===lx)return l.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(s===ux)return l.COMPRESSED_RED_GREEN_RGTC2_EXT;if(s===cx)return l.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return s===sl?i?n.UNSIGNED_INT_24_8:(l=e.get("WEBGL_depth_texture"),l!==null?l.UNSIGNED_INT_24_8_WEBGL:null):n[s]!==void 0?n[s]:null}return{convert:r}}class OE extends ui{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Kf extends Mn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const dN={type:"move"};class K0{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Kf,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Kf,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new Q,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new Q),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Kf,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new Q,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new Q),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,a=null;const l=this._targetRay,c=this._grip,f=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(f&&e.hand){a=!0;for(const T of e.hand.values()){const w=t.getJointPose(T,i),M=this._getHandJoint(f,T);w!==null&&(M.matrix.fromArray(w.transform.matrix),M.matrix.decompose(M.position,M.rotation,M.scale),M.matrixWorldNeedsUpdate=!0,M.jointRadius=w.radius),M.visible=w!==null}const p=f.joints["index-finger-tip"],g=f.joints["thumb-tip"],v=p.position.distanceTo(g.position),y=.02,S=.005;f.inputState.pinching&&v>y+S?(f.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!f.inputState.pinching&&v<=y-S&&(f.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else c!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(c.matrix.fromArray(s.transform.matrix),c.matrix.decompose(c.position,c.rotation,c.scale),c.matrixWorldNeedsUpdate=!0,s.linearVelocity?(c.hasLinearVelocity=!0,c.linearVelocity.copy(s.linearVelocity)):c.hasLinearVelocity=!1,s.angularVelocity?(c.hasAngularVelocity=!0,c.angularVelocity.copy(s.angularVelocity)):c.hasAngularVelocity=!1));l!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(l.matrix.fromArray(r.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,r.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(r.linearVelocity)):l.hasLinearVelocity=!1,r.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(r.angularVelocity)):l.hasAngularVelocity=!1,this.dispatchEvent(dN)))}return l!==null&&(l.visible=r!==null),c!==null&&(c.visible=s!==null),f!==null&&(f.visible=a!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Kf;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Lp extends Qn{constructor(e,t,i,r,s,a,l,c,f,p){if(p=p!==void 0?p:Jl,p!==Jl&&p!==nu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&p===Jl&&(i=za),i===void 0&&p===nu&&(i=sl),super(null,r,s,a,l,c,p,i,f),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=l!==void 0?l:$t,this.minFilter=c!==void 0?c:$t,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class pN extends sa{constructor(e,t){super();const i=this;let r=null,s=1,a=null,l="local-floor",c=1,f=null,p=null,g=null,v=null,y=null,S=null;const T=t.getContextAttributes();let w=null,M=null;const A=[],b=[],R=new ui;R.layers.enable(1),R.viewport=new hn;const I=new ui;I.layers.enable(2),I.viewport=new hn;const k=[R,I],F=new OE;F.layers.enable(1),F.layers.enable(2);let z=null,U=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(L){let B=A[L];return B===void 0&&(B=new K0,A[L]=B),B.getTargetRaySpace()},this.getControllerGrip=function(L){let B=A[L];return B===void 0&&(B=new K0,A[L]=B),B.getGripSpace()},this.getHand=function(L){let B=A[L];return B===void 0&&(B=new K0,A[L]=B),B.getHandSpace()};function O(L){const B=b.indexOf(L.inputSource);if(B===-1)return;const te=A[B];te!==void 0&&(te.update(L.inputSource,L.frame,f||a),te.dispatchEvent({type:L.type,data:L.inputSource}))}function $(){r.removeEventListener("select",O),r.removeEventListener("selectstart",O),r.removeEventListener("selectend",O),r.removeEventListener("squeeze",O),r.removeEventListener("squeezestart",O),r.removeEventListener("squeezeend",O),r.removeEventListener("end",$),r.removeEventListener("inputsourceschange",Y);for(let L=0;L<A.length;L++){const B=b[L];B!==null&&(b[L]=null,A[L].disconnect(B))}z=null,U=null,e.setRenderTarget(w),y=null,v=null,g=null,r=null,M=null,W.stop(),i.isPresenting=!1,i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(L){s=L,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(L){l=L,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return f||a},this.setReferenceSpace=function(L){f=L},this.getBaseLayer=function(){return v!==null?v:y},this.getBinding=function(){return g},this.getFrame=function(){return S},this.getSession=function(){return r},this.setSession=async function(L){if(r=L,r!==null){if(w=e.getRenderTarget(),r.addEventListener("select",O),r.addEventListener("selectstart",O),r.addEventListener("selectend",O),r.addEventListener("squeeze",O),r.addEventListener("squeezestart",O),r.addEventListener("squeezeend",O),r.addEventListener("end",$),r.addEventListener("inputsourceschange",Y),T.xrCompatible!==!0&&await t.makeXRCompatible(),r.renderState.layers===void 0||e.capabilities.isWebGL2===!1){const B={antialias:r.renderState.layers===void 0?T.antialias:!0,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:s};y=new XRWebGLLayer(r,t,B),r.updateRenderState({baseLayer:y}),M=new an(y.framebufferWidth,y.framebufferHeight,{format:Dn,type:zn,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil})}else{let B=null,te=null,ie=null;T.depth&&(ie=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,B=T.stencil?nu:Jl,te=T.stencil?sl:za);const re={colorFormat:t.RGBA8,depthFormat:ie,scaleFactor:s};g=new XRWebGLBinding(r,t),v=g.createProjectionLayer(re),r.updateRenderState({layers:[v]}),M=new an(v.textureWidth,v.textureHeight,{format:Dn,type:zn,depthTexture:new Lp(v.textureWidth,v.textureHeight,te,void 0,void 0,void 0,void 0,void 0,void 0,B),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0});const de=e.properties.get(M);de.__ignoreDepthValues=v.ignoreDepthValues}M.isXRRenderTarget=!0,this.setFoveation(c),f=null,a=await r.requestReferenceSpace(l),W.setContext(r),W.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode};function Y(L){for(let B=0;B<L.removed.length;B++){const te=L.removed[B],ie=b.indexOf(te);ie>=0&&(b[ie]=null,A[ie].disconnect(te))}for(let B=0;B<L.added.length;B++){const te=L.added[B];let ie=b.indexOf(te);if(ie===-1){for(let de=0;de<A.length;de++)if(de>=b.length){b.push(te),ie=de;break}else if(b[de]===null){b[de]=te,ie=de;break}if(ie===-1)break}const re=A[ie];re&&re.connect(te)}}const q=new Q,J=new Q;function ae(L,B,te){q.setFromMatrixPosition(B.matrixWorld),J.setFromMatrixPosition(te.matrixWorld);const ie=q.distanceTo(J),re=B.projectionMatrix.elements,de=te.projectionMatrix.elements,he=re[14]/(re[10]-1),ve=re[14]/(re[10]+1),Ve=(re[9]+1)/re[5],rt=(re[9]-1)/re[5],Ue=(re[8]-1)/re[0],Z=(de[8]+1)/de[0],Fe=he*Ue,we=he*Z,ke=ie/(-Ue+Z),Pe=ke*-Ue;B.matrixWorld.decompose(L.position,L.quaternion,L.scale),L.translateX(Pe),L.translateZ(ke),L.matrixWorld.compose(L.position,L.quaternion,L.scale),L.matrixWorldInverse.copy(L.matrixWorld).invert();const et=he+ke,Le=ve+ke,Xe=Fe-Pe,Ze=we+(ie-Pe),Ae=Ve*ve/Le*et,ht=rt*ve/Le*et;L.projectionMatrix.makePerspective(Xe,Ze,Ae,ht,et,Le),L.projectionMatrixInverse.copy(L.projectionMatrix).invert()}function oe(L,B){B===null?L.matrixWorld.copy(L.matrix):L.matrixWorld.multiplyMatrices(B.matrixWorld,L.matrix),L.matrixWorldInverse.copy(L.matrixWorld).invert()}this.updateCamera=function(L){if(r===null)return;F.near=I.near=R.near=L.near,F.far=I.far=R.far=L.far,(z!==F.near||U!==F.far)&&(r.updateRenderState({depthNear:F.near,depthFar:F.far}),z=F.near,U=F.far);const B=L.parent,te=F.cameras;oe(F,B);for(let ie=0;ie<te.length;ie++)oe(te[ie],B);te.length===2?ae(F,R,I):F.projectionMatrix.copy(R.projectionMatrix),ue(L,F,B)};function ue(L,B,te){te===null?L.matrix.copy(B.matrixWorld):(L.matrix.copy(te.matrixWorld),L.matrix.invert(),L.matrix.multiply(B.matrixWorld)),L.matrix.decompose(L.position,L.quaternion,L.scale),L.updateMatrixWorld(!0);const ie=L.children;for(let re=0,de=ie.length;re<de;re++)ie[re].updateMatrixWorld(!0);L.projectionMatrix.copy(B.projectionMatrix),L.projectionMatrixInverse.copy(B.projectionMatrixInverse),L.isPerspectiveCamera&&(L.fov=ih*2*Math.atan(1/L.projectionMatrix.elements[5]),L.zoom=1)}this.getCamera=function(){return F},this.getFoveation=function(){if(!(v===null&&y===null))return c},this.setFoveation=function(L){c=L,v!==null&&(v.fixedFoveation=L),y!==null&&y.fixedFoveation!==void 0&&(y.fixedFoveation=L)};let V=null;function j(L,B){if(p=B.getViewerPose(f||a),S=B,p!==null){const te=p.views;y!==null&&(e.setRenderTargetFramebuffer(M,y.framebuffer),e.setRenderTarget(M));let ie=!1;te.length!==F.cameras.length&&(F.cameras.length=0,ie=!0);for(let re=0;re<te.length;re++){const de=te[re];let he=null;if(y!==null)he=y.getViewport(de);else{const Ve=g.getViewSubImage(v,de);he=Ve.viewport,re===0&&(e.setRenderTargetTextures(M,Ve.colorTexture,v.ignoreDepthValues?void 0:Ve.depthStencilTexture),e.setRenderTarget(M))}let ve=k[re];ve===void 0&&(ve=new ui,ve.layers.enable(re),ve.viewport=new hn,k[re]=ve),ve.matrix.fromArray(de.transform.matrix),ve.matrix.decompose(ve.position,ve.quaternion,ve.scale),ve.projectionMatrix.fromArray(de.projectionMatrix),ve.projectionMatrixInverse.copy(ve.projectionMatrix).invert(),ve.viewport.set(he.x,he.y,he.width,he.height),re===0&&(F.matrix.copy(ve.matrix),F.matrix.decompose(F.position,F.quaternion,F.scale)),ie===!0&&F.cameras.push(ve)}}for(let te=0;te<A.length;te++){const ie=b[te],re=A[te];ie!==null&&re!==void 0&&re.update(ie,B,f||a)}V&&V(L,B),B.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:B}),S=null}const W=new LE;W.setAnimationLoop(j),this.setAnimationLoop=function(L){V=L},this.dispose=function(){}}}function mN(n,e){function t(w,M){w.matrixAutoUpdate===!0&&w.updateMatrix(),M.value.copy(w.matrix)}function i(w,M){M.color.getRGB(w.fogColor.value,DE(n)),M.isFog?(w.fogNear.value=M.near,w.fogFar.value=M.far):M.isFogExp2&&(w.fogDensity.value=M.density)}function r(w,M,A,b,R){M.isMeshBasicMaterial||M.isMeshLambertMaterial?s(w,M):M.isMeshToonMaterial?(s(w,M),g(w,M)):M.isMeshPhongMaterial?(s(w,M),p(w,M)):M.isMeshStandardMaterial?(s(w,M),v(w,M),M.isMeshPhysicalMaterial&&y(w,M,R)):M.isMeshMatcapMaterial?(s(w,M),S(w,M)):M.isMeshDepthMaterial?s(w,M):M.isMeshDistanceMaterial?(s(w,M),T(w,M)):M.isMeshNormalMaterial?s(w,M):M.isLineBasicMaterial?(a(w,M),M.isLineDashedMaterial&&l(w,M)):M.isPointsMaterial?c(w,M,A,b):M.isSpriteMaterial?f(w,M):M.isShadowMaterial?(w.color.value.copy(M.color),w.opacity.value=M.opacity):M.isShaderMaterial&&(M.uniformsNeedUpdate=!1)}function s(w,M){w.opacity.value=M.opacity,M.color&&w.diffuse.value.copy(M.color),M.emissive&&w.emissive.value.copy(M.emissive).multiplyScalar(M.emissiveIntensity),M.map&&(w.map.value=M.map,t(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,t(M.alphaMap,w.alphaMapTransform)),M.bumpMap&&(w.bumpMap.value=M.bumpMap,t(M.bumpMap,w.bumpMapTransform),w.bumpScale.value=M.bumpScale,M.side===Zi&&(w.bumpScale.value*=-1)),M.normalMap&&(w.normalMap.value=M.normalMap,t(M.normalMap,w.normalMapTransform),w.normalScale.value.copy(M.normalScale),M.side===Zi&&w.normalScale.value.negate()),M.displacementMap&&(w.displacementMap.value=M.displacementMap,t(M.displacementMap,w.displacementMapTransform),w.displacementScale.value=M.displacementScale,w.displacementBias.value=M.displacementBias),M.emissiveMap&&(w.emissiveMap.value=M.emissiveMap,t(M.emissiveMap,w.emissiveMapTransform)),M.specularMap&&(w.specularMap.value=M.specularMap,t(M.specularMap,w.specularMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest);const A=e.get(M).envMap;if(A&&(w.envMap.value=A,w.flipEnvMap.value=A.isCubeTexture&&A.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=M.reflectivity,w.ior.value=M.ior,w.refractionRatio.value=M.refractionRatio),M.lightMap){w.lightMap.value=M.lightMap;const b=n._useLegacyLights===!0?Math.PI:1;w.lightMapIntensity.value=M.lightMapIntensity*b,t(M.lightMap,w.lightMapTransform)}M.aoMap&&(w.aoMap.value=M.aoMap,w.aoMapIntensity.value=M.aoMapIntensity,t(M.aoMap,w.aoMapTransform))}function a(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,M.map&&(w.map.value=M.map,t(M.map,w.mapTransform))}function l(w,M){w.dashSize.value=M.dashSize,w.totalSize.value=M.dashSize+M.gapSize,w.scale.value=M.scale}function c(w,M,A,b){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.size.value=M.size*A,w.scale.value=b*.5,M.map&&(w.map.value=M.map,t(M.map,w.uvTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,t(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function f(w,M){w.diffuse.value.copy(M.color),w.opacity.value=M.opacity,w.rotation.value=M.rotation,M.map&&(w.map.value=M.map,t(M.map,w.mapTransform)),M.alphaMap&&(w.alphaMap.value=M.alphaMap,t(M.alphaMap,w.alphaMapTransform)),M.alphaTest>0&&(w.alphaTest.value=M.alphaTest)}function p(w,M){w.specular.value.copy(M.specular),w.shininess.value=Math.max(M.shininess,1e-4)}function g(w,M){M.gradientMap&&(w.gradientMap.value=M.gradientMap)}function v(w,M){w.metalness.value=M.metalness,M.metalnessMap&&(w.metalnessMap.value=M.metalnessMap,t(M.metalnessMap,w.metalnessMapTransform)),w.roughness.value=M.roughness,M.roughnessMap&&(w.roughnessMap.value=M.roughnessMap,t(M.roughnessMap,w.roughnessMapTransform)),e.get(M).envMap&&(w.envMapIntensity.value=M.envMapIntensity)}function y(w,M,A){w.ior.value=M.ior,M.sheen>0&&(w.sheenColor.value.copy(M.sheenColor).multiplyScalar(M.sheen),w.sheenRoughness.value=M.sheenRoughness,M.sheenColorMap&&(w.sheenColorMap.value=M.sheenColorMap,t(M.sheenColorMap,w.sheenColorMapTransform)),M.sheenRoughnessMap&&(w.sheenRoughnessMap.value=M.sheenRoughnessMap,t(M.sheenRoughnessMap,w.sheenRoughnessMapTransform))),M.clearcoat>0&&(w.clearcoat.value=M.clearcoat,w.clearcoatRoughness.value=M.clearcoatRoughness,M.clearcoatMap&&(w.clearcoatMap.value=M.clearcoatMap,t(M.clearcoatMap,w.clearcoatMapTransform)),M.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=M.clearcoatRoughnessMap,t(M.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),M.clearcoatNormalMap&&(w.clearcoatNormalMap.value=M.clearcoatNormalMap,t(M.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(M.clearcoatNormalScale),M.side===Zi&&w.clearcoatNormalScale.value.negate())),M.iridescence>0&&(w.iridescence.value=M.iridescence,w.iridescenceIOR.value=M.iridescenceIOR,w.iridescenceThicknessMinimum.value=M.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=M.iridescenceThicknessRange[1],M.iridescenceMap&&(w.iridescenceMap.value=M.iridescenceMap,t(M.iridescenceMap,w.iridescenceMapTransform)),M.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=M.iridescenceThicknessMap,t(M.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),M.transmission>0&&(w.transmission.value=M.transmission,w.transmissionSamplerMap.value=A.texture,w.transmissionSamplerSize.value.set(A.width,A.height),M.transmissionMap&&(w.transmissionMap.value=M.transmissionMap,t(M.transmissionMap,w.transmissionMapTransform)),w.thickness.value=M.thickness,M.thicknessMap&&(w.thicknessMap.value=M.thicknessMap,t(M.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=M.attenuationDistance,w.attenuationColor.value.copy(M.attenuationColor)),M.anisotropy>0&&(w.anisotropyVector.value.set(M.anisotropy*Math.cos(M.anisotropyRotation),M.anisotropy*Math.sin(M.anisotropyRotation)),M.anisotropyMap&&(w.anisotropyMap.value=M.anisotropyMap,t(M.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=M.specularIntensity,w.specularColor.value.copy(M.specularColor),M.specularColorMap&&(w.specularColorMap.value=M.specularColorMap,t(M.specularColorMap,w.specularColorMapTransform)),M.specularIntensityMap&&(w.specularIntensityMap.value=M.specularIntensityMap,t(M.specularIntensityMap,w.specularIntensityMapTransform))}function S(w,M){M.matcap&&(w.matcap.value=M.matcap)}function T(w,M){const A=e.get(M).light;w.referencePosition.value.setFromMatrixPosition(A.matrixWorld),w.nearDistance.value=A.shadow.camera.near,w.farDistance.value=A.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function gN(n,e,t,i){let r={},s={},a=[];const l=t.isWebGL2?n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS):0;function c(A,b){const R=b.program;i.uniformBlockBinding(A,R)}function f(A,b){let R=r[A.id];R===void 0&&(S(A),R=p(A),r[A.id]=R,A.addEventListener("dispose",w));const I=b.program;i.updateUBOMapping(A,I);const k=e.render.frame;s[A.id]!==k&&(v(A),s[A.id]=k)}function p(A){const b=g();A.__bindingPointIndex=b;const R=n.createBuffer(),I=A.__size,k=A.usage;return n.bindBuffer(n.UNIFORM_BUFFER,R),n.bufferData(n.UNIFORM_BUFFER,I,k),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,b,R),R}function g(){for(let A=0;A<l;A++)if(a.indexOf(A)===-1)return a.push(A),A;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function v(A){const b=r[A.id],R=A.uniforms,I=A.__cache;n.bindBuffer(n.UNIFORM_BUFFER,b);for(let k=0,F=R.length;k<F;k++){const z=R[k];if(y(z,k,I)===!0){const U=z.__offset,O=Array.isArray(z.value)?z.value:[z.value];let $=0;for(let Y=0;Y<O.length;Y++){const q=O[Y],J=T(q);typeof q=="number"?(z.__data[0]=q,n.bufferSubData(n.UNIFORM_BUFFER,U+$,z.__data)):q.isMatrix3?(z.__data[0]=q.elements[0],z.__data[1]=q.elements[1],z.__data[2]=q.elements[2],z.__data[3]=q.elements[0],z.__data[4]=q.elements[3],z.__data[5]=q.elements[4],z.__data[6]=q.elements[5],z.__data[7]=q.elements[0],z.__data[8]=q.elements[6],z.__data[9]=q.elements[7],z.__data[10]=q.elements[8],z.__data[11]=q.elements[0]):(q.toArray(z.__data,$),$+=J.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,U,z.__data)}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function y(A,b,R){const I=A.value;if(R[b]===void 0){if(typeof I=="number")R[b]=I;else{const k=Array.isArray(I)?I:[I],F=[];for(let z=0;z<k.length;z++)F.push(k[z].clone());R[b]=F}return!0}else if(typeof I=="number"){if(R[b]!==I)return R[b]=I,!0}else{const k=Array.isArray(R[b])?R[b]:[R[b]],F=Array.isArray(I)?I:[I];for(let z=0;z<k.length;z++){const U=k[z];if(U.equals(F[z])===!1)return U.copy(F[z]),!0}}return!1}function S(A){const b=A.uniforms;let R=0;const I=16;let k=0;for(let F=0,z=b.length;F<z;F++){const U=b[F],O={boundary:0,storage:0},$=Array.isArray(U.value)?U.value:[U.value];for(let Y=0,q=$.length;Y<q;Y++){const J=$[Y],ae=T(J);O.boundary+=ae.boundary,O.storage+=ae.storage}if(U.__data=new Float32Array(O.storage/Float32Array.BYTES_PER_ELEMENT),U.__offset=R,F>0){k=R%I;const Y=I-k;k!==0&&Y-O.boundary<0&&(R+=I-k,U.__offset=R)}R+=O.storage}return k=R%I,k>0&&(R+=I-k),A.__size=R,A.__cache={},this}function T(A){const b={boundary:0,storage:0};return typeof A=="number"?(b.boundary=4,b.storage=4):A.isVector2?(b.boundary=8,b.storage=8):A.isVector3||A.isColor?(b.boundary=16,b.storage=12):A.isVector4?(b.boundary=16,b.storage=16):A.isMatrix3?(b.boundary=48,b.storage=48):A.isMatrix4?(b.boundary=64,b.storage=64):A.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",A),b}function w(A){const b=A.target;b.removeEventListener("dispose",w);const R=a.indexOf(b.__bindingPointIndex);a.splice(R,1),n.deleteBuffer(r[b.id]),delete r[b.id],delete s[b.id]}function M(){for(const A in r)n.deleteBuffer(r[A]);a=[],r={},s={}}return{bind:c,update:f,dispose:M}}function vN(){const n=pp("canvas");return n.style.display="block",n}class f1{constructor(e={}){const{canvas:t=vN(),context:i=null,depth:r=!0,stencil:s=!0,alpha:a=!1,antialias:l=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:f=!1,powerPreference:p="default",failIfMajorPerformanceCaveat:g=!1}=e;this.isWebGLRenderer=!0;let v;i!==null?v=i.getContextAttributes().alpha:v=a;const y=new Uint32Array(4),S=new Int32Array(4);let T=null,w=null;const M=[],A=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.outputColorSpace=yt,this._useLegacyLights=!1,this.toneMapping=fo,this.toneMappingExposure=1;const b=this;let R=!1,I=0,k=0,F=null,z=-1,U=null;const O=new hn,$=new hn;let Y=null;const q=new Je(0);let J=0,ae=t.width,oe=t.height,ue=1,V=null,j=null;const W=new hn(0,0,ae,oe),L=new hn(0,0,ae,oe);let B=!1;const te=new vv;let ie=!1,re=!1,de=null;const he=new vt,ve=new _e,Ve=new Q,rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};function Ue(){return F===null?ue:1}let Z=i;function Fe(ee,Ce){for(let ze=0;ze<ee.length;ze++){const Me=ee[ze],Be=t.getContext(Me,Ce);if(Be!==null)return Be}return null}try{const ee={alpha:!0,depth:r,stencil:s,antialias:l,premultipliedAlpha:c,preserveDrawingBuffer:f,powerPreference:p,failIfMajorPerformanceCaveat:g};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${yo}`),t.addEventListener("webglcontextlost",je,!1),t.addEventListener("webglcontextrestored",Se,!1),t.addEventListener("webglcontextcreationerror",at,!1),Z===null){const Ce=["webgl2","webgl","experimental-webgl"];if(b.isWebGL1Renderer===!0&&Ce.shift(),Z=Fe(Ce,ee),Z===null)throw Fe(Ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}typeof WebGLRenderingContext<"u"&&Z instanceof WebGLRenderingContext&&console.warn("THREE.WebGLRenderer: WebGL 1 support was deprecated in r153 and will be removed in r163."),Z.getShaderPrecisionFormat===void 0&&(Z.getShaderPrecisionFormat=function(){return{rangeMin:1,rangeMax:1,precision:1}})}catch(ee){throw console.error("THREE.WebGLRenderer: "+ee.message),ee}let we,ke,Pe,et,Le,Xe,Ze,Ae,ht,X,H,ce,qe,be,Ne,Ke,We,xe,ct,nt,tt,Ye,st,_t;function Wt(){we=new LI(Z),ke=new bI(Z,we,e),we.init(ke),Ye=new kE(Z,we,ke),Pe=new fN(Z,we,ke),et=new NI(Z),Le=new $U,Xe=new hN(Z,we,Pe,Le,ke,Ye,et),Ze=new CI(b),Ae=new DI(b),ht=new jD(Z,ke),st=new TI(Z,we,ht,ke),X=new II(Z,ht,et,st),H=new BI(Z,X,ht,et),ct=new OI(Z,ke,Xe),Ke=new AI(Le),ce=new JU(b,Ze,Ae,we,ke,st,Ke),qe=new mN(b,Le),be=new tN,Ne=new oN(we,ke),xe=new wI(b,Ze,Ae,Pe,H,v,c),We=new cN(b,H,ke),_t=new gN(Z,et,ke,Pe),nt=new EI(Z,we,et,ke),tt=new UI(Z,we,et,ke),et.programs=ce.programs,b.capabilities=ke,b.extensions=we,b.properties=Le,b.renderLists=be,b.shadowMap=We,b.state=Pe,b.info=et}Wt();const le=new pN(b,Z);this.xr=le,this.getContext=function(){return Z},this.getContextAttributes=function(){return Z.getContextAttributes()},this.forceContextLoss=function(){const ee=we.get("WEBGL_lose_context");ee&&ee.loseContext()},this.forceContextRestore=function(){const ee=we.get("WEBGL_lose_context");ee&&ee.restoreContext()},this.getPixelRatio=function(){return ue},this.setPixelRatio=function(ee){ee!==void 0&&(ue=ee,this.setSize(ae,oe,!1))},this.getSize=function(ee){return ee.set(ae,oe)},this.setSize=function(ee,Ce,ze=!0){if(le.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}ae=ee,oe=Ce,t.width=Math.floor(ee*ue),t.height=Math.floor(Ce*ue),ze===!0&&(t.style.width=ee+"px",t.style.height=Ce+"px"),this.setViewport(0,0,ee,Ce)},this.getDrawingBufferSize=function(ee){return ee.set(ae*ue,oe*ue).floor()},this.setDrawingBufferSize=function(ee,Ce,ze){ae=ee,oe=Ce,ue=ze,t.width=Math.floor(ee*ze),t.height=Math.floor(Ce*ze),this.setViewport(0,0,ee,Ce)},this.getCurrentViewport=function(ee){return ee.copy(O)},this.getViewport=function(ee){return ee.copy(W)},this.setViewport=function(ee,Ce,ze,Me){ee.isVector4?W.set(ee.x,ee.y,ee.z,ee.w):W.set(ee,Ce,ze,Me),Pe.viewport(O.copy(W).multiplyScalar(ue).floor())},this.getScissor=function(ee){return ee.copy(L)},this.setScissor=function(ee,Ce,ze,Me){ee.isVector4?L.set(ee.x,ee.y,ee.z,ee.w):L.set(ee,Ce,ze,Me),Pe.scissor($.copy(L).multiplyScalar(ue).floor())},this.getScissorTest=function(){return B},this.setScissorTest=function(ee){Pe.setScissorTest(B=ee)},this.setOpaqueSort=function(ee){V=ee},this.setTransparentSort=function(ee){j=ee},this.getClearColor=function(ee){return ee.copy(xe.getClearColor())},this.setClearColor=function(){xe.setClearColor.apply(xe,arguments)},this.getClearAlpha=function(){return xe.getClearAlpha()},this.setClearAlpha=function(){xe.setClearAlpha.apply(xe,arguments)},this.clear=function(ee=!0,Ce=!0,ze=!0){let Me=0;if(ee){let Be=!1;if(F!==null){const xt=F.texture.format;Be=xt===e1||xt===$x||xt===Qx}if(Be){const xt=F.texture.type,Pt=xt===zn||xt===za||xt===fv||xt===sl||xt===Zx||xt===Kx,It=xe.getClearColor(),Ot=xe.getClearAlpha(),Kt=It.r,Ge=It.g,Ft=It.b;Pt?(y[0]=Kt,y[1]=Ge,y[2]=Ft,y[3]=Ot,Z.clearBufferuiv(Z.COLOR,0,y)):(S[0]=Kt,S[1]=Ge,S[2]=Ft,S[3]=Ot,Z.clearBufferiv(Z.COLOR,0,S))}else Me|=Z.COLOR_BUFFER_BIT}Ce&&(Me|=Z.DEPTH_BUFFER_BIT),ze&&(Me|=Z.STENCIL_BUFFER_BIT),Z.clear(Me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",je,!1),t.removeEventListener("webglcontextrestored",Se,!1),t.removeEventListener("webglcontextcreationerror",at,!1),be.dispose(),Ne.dispose(),Le.dispose(),Ze.dispose(),Ae.dispose(),H.dispose(),st.dispose(),_t.dispose(),ce.dispose(),le.dispose(),le.removeEventListener("sessionstart",Dt),le.removeEventListener("sessionend",wn),de&&(de.dispose(),de=null),ln.stop()};function je(ee){ee.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),R=!0}function Se(){console.log("THREE.WebGLRenderer: Context Restored."),R=!1;const ee=et.autoReset,Ce=We.enabled,ze=We.autoUpdate,Me=We.needsUpdate,Be=We.type;Wt(),et.autoReset=ee,We.enabled=Ce,We.autoUpdate=ze,We.needsUpdate=Me,We.type=Be}function at(ee){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ee.statusMessage)}function Qe(ee){const Ce=ee.target;Ce.removeEventListener("dispose",Qe),mt(Ce)}function mt(ee){Gt(ee),Le.remove(ee)}function Gt(ee){const Ce=Le.get(ee).programs;Ce!==void 0&&(Ce.forEach(function(ze){ce.releaseProgram(ze)}),ee.isShaderMaterial&&ce.releaseShaderCache(ee))}this.renderBufferDirect=function(ee,Ce,ze,Me,Be,xt){Ce===null&&(Ce=rt);const Pt=Be.isMesh&&Be.matrixWorld.determinant()<0,It=Si(ee,Ce,ze,Me,Be);Pe.setMaterial(Me,Pt);let Ot=ze.index,Kt=1;if(Me.wireframe===!0){if(Ot=X.getWireframeAttribute(ze),Ot===void 0)return;Kt=2}const Ge=ze.drawRange,Ft=ze.attributes.position;let Tn=Ge.start*Kt,pn=(Ge.start+Ge.count)*Kt;xt!==null&&(Tn=Math.max(Tn,xt.start*Kt),pn=Math.min(pn,(xt.start+xt.count)*Kt)),Ot!==null?(Tn=Math.max(Tn,0),pn=Math.min(pn,Ot.count)):Ft!=null&&(Tn=Math.max(Tn,0),pn=Math.min(pn,Ft.count));const $n=pn-Tn;if($n<0||$n===1/0)return;st.setup(Be,Me,It,ze,Ot);let ir,gn=nt;if(Ot!==null&&(ir=ht.get(Ot),gn=tt,gn.setIndex(ir)),Be.isMesh)Me.wireframe===!0?(Pe.setLineWidth(Me.wireframeLinewidth*Ue()),gn.setMode(Z.LINES)):gn.setMode(Z.TRIANGLES);else if(Be.isLine){let Ut=Me.linewidth;Ut===void 0&&(Ut=1),Pe.setLineWidth(Ut*Ue()),Be.isLineSegments?gn.setMode(Z.LINES):Be.isLineLoop?gn.setMode(Z.LINE_LOOP):gn.setMode(Z.LINE_STRIP)}else Be.isPoints?gn.setMode(Z.POINTS):Be.isSprite&&gn.setMode(Z.TRIANGLES);if(Be.isInstancedMesh)gn.renderInstances(Tn,$n,Be.count);else if(ze.isInstancedBufferGeometry){const Ut=ze._maxInstanceCount!==void 0?ze._maxInstanceCount:1/0,Qt=Math.min(ze.instanceCount,Ut);gn.renderInstances(Tn,$n,Qt)}else gn.render(Tn,$n)},this.compile=function(ee,Ce){function ze(Me,Be,xt){Me.transparent===!0&&Me.side===Qr&&Me.forceSinglePass===!1?(Me.side=Zi,Me.needsUpdate=!0,ri(Me,Be,xt),Me.side=go,Me.needsUpdate=!0,ri(Me,Be,xt),Me.side=Qr):ri(Me,Be,xt)}w=Ne.get(ee),w.init(),A.push(w),ee.traverseVisible(function(Me){Me.isLight&&Me.layers.test(Ce.layers)&&(w.pushLight(Me),Me.castShadow&&w.pushShadow(Me))}),w.setupLights(b._useLegacyLights),ee.traverse(function(Me){const Be=Me.material;if(Be)if(Array.isArray(Be))for(let xt=0;xt<Be.length;xt++){const Pt=Be[xt];ze(Pt,ee,Me)}else ze(Be,ee,Me)}),A.pop(),w=null};let Vt=null;function Lt(ee){Vt&&Vt(ee)}function Dt(){ln.stop()}function wn(){ln.start()}const ln=new LE;ln.setAnimationLoop(Lt),typeof self<"u"&&ln.setContext(self),this.setAnimationLoop=function(ee){Vt=ee,le.setAnimationLoop(ee),ee===null?ln.stop():ln.start()},le.addEventListener("sessionstart",Dt),le.addEventListener("sessionend",wn),this.render=function(ee,Ce){if(Ce!==void 0&&Ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(R===!0)return;ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),Ce.parent===null&&Ce.matrixWorldAutoUpdate===!0&&Ce.updateMatrixWorld(),le.enabled===!0&&le.isPresenting===!0&&(le.cameraAutoUpdate===!0&&le.updateCamera(Ce),Ce=le.getCamera()),ee.isScene===!0&&ee.onBeforeRender(b,ee,Ce,F),w=Ne.get(ee,A.length),w.init(),A.push(w),he.multiplyMatrices(Ce.projectionMatrix,Ce.matrixWorldInverse),te.setFromProjectionMatrix(he),re=this.localClippingEnabled,ie=Ke.init(this.clippingPlanes,re),T=be.get(ee,M.length),T.init(),M.push(T),Un(ee,Ce,0,b.sortObjects),T.finish(),b.sortObjects===!0&&T.sort(V,j),this.info.render.frame++,ie===!0&&Ke.beginShadows();const ze=w.state.shadowsArray;if(We.render(ze,ee,Ce),ie===!0&&Ke.endShadows(),this.info.autoReset===!0&&this.info.reset(),xe.render(T,ee),w.setupLights(b._useLegacyLights),Ce.isArrayCamera){const Me=Ce.cameras;for(let Be=0,xt=Me.length;Be<xt;Be++){const Pt=Me[Be];hi(T,ee,Pt,Pt.viewport)}}else hi(T,ee,Ce);F!==null&&(Xe.updateMultisampleRenderTarget(F),Xe.updateRenderTargetMipmap(F)),ee.isScene===!0&&ee.onAfterRender(b,ee,Ce),st.resetDefaultState(),z=-1,U=null,A.pop(),A.length>0?w=A[A.length-1]:w=null,M.pop(),M.length>0?T=M[M.length-1]:T=null};function Un(ee,Ce,ze,Me){if(ee.visible===!1)return;if(ee.layers.test(Ce.layers)){if(ee.isGroup)ze=ee.renderOrder;else if(ee.isLOD)ee.autoUpdate===!0&&ee.update(Ce);else if(ee.isLight)w.pushLight(ee),ee.castShadow&&w.pushShadow(ee);else if(ee.isSprite){if(!ee.frustumCulled||te.intersectsSprite(ee)){Me&&Ve.setFromMatrixPosition(ee.matrixWorld).applyMatrix4(he);const Pt=H.update(ee),It=ee.material;It.visible&&T.push(ee,Pt,It,ze,Ve.z,null)}}else if((ee.isMesh||ee.isLine||ee.isPoints)&&(!ee.frustumCulled||te.intersectsObject(ee))){const Pt=H.update(ee),It=ee.material;if(Me&&(ee.boundingSphere!==void 0?(ee.boundingSphere===null&&ee.computeBoundingSphere(),Ve.copy(ee.boundingSphere.center)):(Pt.boundingSphere===null&&Pt.computeBoundingSphere(),Ve.copy(Pt.boundingSphere.center)),Ve.applyMatrix4(ee.matrixWorld).applyMatrix4(he)),Array.isArray(It)){const Ot=Pt.groups;for(let Kt=0,Ge=Ot.length;Kt<Ge;Kt++){const Ft=Ot[Kt],Tn=It[Ft.materialIndex];Tn&&Tn.visible&&T.push(ee,Pt,Tn,ze,Ve.z,Ft)}}else It.visible&&T.push(ee,Pt,It,ze,Ve.z,null)}}const xt=ee.children;for(let Pt=0,It=xt.length;Pt<It;Pt++)Un(xt[Pt],Ce,ze,Me)}function hi(ee,Ce,ze,Me){const Be=ee.opaque,xt=ee.transmissive,Pt=ee.transparent;w.setupLightsView(ze),ie===!0&&Ke.setGlobalState(b.clippingPlanes,ze),xt.length>0&&Fr(Be,xt,Ce,ze),Me&&Pe.viewport(O.copy(Me)),Be.length>0&&Jn(Be,Ce,ze),xt.length>0&&Jn(xt,Ce,ze),Pt.length>0&&Jn(Pt,Ce,ze),Pe.buffers.depth.setTest(!0),Pe.buffers.depth.setMask(!0),Pe.buffers.color.setMask(!0),Pe.setPolygonOffset(!1)}function Fr(ee,Ce,ze,Me){const Be=ke.isWebGL2;de===null&&(de=new an(1,1,{generateMipmaps:!0,type:we.has("EXT_color_buffer_half_float")?Tr:zn,minFilter:tu,samples:Be?4:0})),b.getDrawingBufferSize(ve),Be?de.setSize(ve.x,ve.y):de.setSize(tv(ve.x),tv(ve.y));const xt=b.getRenderTarget();b.setRenderTarget(de),b.getClearColor(q),J=b.getClearAlpha(),J<1&&b.setClearColor(16777215,.5),b.clear();const Pt=b.toneMapping;b.toneMapping=fo,Jn(ee,ze,Me),Xe.updateMultisampleRenderTarget(de),Xe.updateRenderTargetMipmap(de);let It=!1;for(let Ot=0,Kt=Ce.length;Ot<Kt;Ot++){const Ge=Ce[Ot],Ft=Ge.object,Tn=Ge.geometry,pn=Ge.material,$n=Ge.group;if(pn.side===Qr&&Ft.layers.test(Me.layers)){const ir=pn.side;pn.side=Zi,pn.needsUpdate=!0,tr(Ft,ze,Me,Tn,pn,$n),pn.side=ir,pn.needsUpdate=!0,It=!0}}It===!0&&(Xe.updateMultisampleRenderTarget(de),Xe.updateRenderTargetMipmap(de)),b.setRenderTarget(xt),b.setClearColor(q,J),b.toneMapping=Pt}function Jn(ee,Ce,ze){const Me=Ce.isScene===!0?Ce.overrideMaterial:null;for(let Be=0,xt=ee.length;Be<xt;Be++){const Pt=ee[Be],It=Pt.object,Ot=Pt.geometry,Kt=Me===null?Pt.material:Me,Ge=Pt.group;It.layers.test(ze.layers)&&tr(It,Ce,ze,Ot,Kt,Ge)}}function tr(ee,Ce,ze,Me,Be,xt){ee.onBeforeRender(b,Ce,ze,Me,Be,xt),ee.modelViewMatrix.multiplyMatrices(ze.matrixWorldInverse,ee.matrixWorld),ee.normalMatrix.getNormalMatrix(ee.modelViewMatrix),Be.onBeforeRender(b,Ce,ze,Me,ee,xt),Be.transparent===!0&&Be.side===Qr&&Be.forceSinglePass===!1?(Be.side=Zi,Be.needsUpdate=!0,b.renderBufferDirect(ze,Ce,Me,Be,ee,xt),Be.side=go,Be.needsUpdate=!0,b.renderBufferDirect(ze,Ce,Me,Be,ee,xt),Be.side=Qr):b.renderBufferDirect(ze,Ce,Me,Be,ee,xt),ee.onAfterRender(b,Ce,ze,Me,Be,xt)}function ri(ee,Ce,ze){Ce.isScene!==!0&&(Ce=rt);const Me=Le.get(ee),Be=w.state.lights,xt=w.state.shadowsArray,Pt=Be.state.version,It=ce.getParameters(ee,Be.state,xt,Ce,ze),Ot=ce.getProgramCacheKey(It);let Kt=Me.programs;Me.environment=ee.isMeshStandardMaterial?Ce.environment:null,Me.fog=Ce.fog,Me.envMap=(ee.isMeshStandardMaterial?Ae:Ze).get(ee.envMap||Me.environment),Kt===void 0&&(ee.addEventListener("dispose",Qe),Kt=new Map,Me.programs=Kt);let Ge=Kt.get(Ot);if(Ge!==void 0){if(Me.currentProgram===Ge&&Me.lightsStateVersion===Pt)return nr(ee,It),Ge}else It.uniforms=ce.getUniforms(ee),ee.onBuild(ze,It,b),ee.onBeforeCompile(It,b),Ge=ce.acquireProgram(It,Ot),Kt.set(Ot,Ge),Me.uniforms=It.uniforms;const Ft=Me.uniforms;(!ee.isShaderMaterial&&!ee.isRawShaderMaterial||ee.clipping===!0)&&(Ft.clippingPlanes=Ke.uniform),nr(ee,It),Me.needsLights=hl(ee),Me.lightsStateVersion=Pt,Me.needsLights&&(Ft.ambientLightColor.value=Be.state.ambient,Ft.lightProbe.value=Be.state.probe,Ft.directionalLights.value=Be.state.directional,Ft.directionalLightShadows.value=Be.state.directionalShadow,Ft.spotLights.value=Be.state.spot,Ft.spotLightShadows.value=Be.state.spotShadow,Ft.rectAreaLights.value=Be.state.rectArea,Ft.ltc_1.value=Be.state.rectAreaLTC1,Ft.ltc_2.value=Be.state.rectAreaLTC2,Ft.pointLights.value=Be.state.point,Ft.pointLightShadows.value=Be.state.pointShadow,Ft.hemisphereLights.value=Be.state.hemi,Ft.directionalShadowMap.value=Be.state.directionalShadowMap,Ft.directionalShadowMatrix.value=Be.state.directionalShadowMatrix,Ft.spotShadowMap.value=Be.state.spotShadowMap,Ft.spotLightMatrix.value=Be.state.spotLightMatrix,Ft.spotLightMap.value=Be.state.spotLightMap,Ft.pointShadowMap.value=Be.state.pointShadowMap,Ft.pointShadowMatrix.value=Be.state.pointShadowMatrix);const Tn=Ge.getUniforms(),pn=Gg.seqWithValue(Tn.seq,Ft);return Me.currentProgram=Ge,Me.uniformsList=pn,Ge}function nr(ee,Ce){const ze=Le.get(ee);ze.outputColorSpace=Ce.outputColorSpace,ze.instancing=Ce.instancing,ze.instancingColor=Ce.instancingColor,ze.skinning=Ce.skinning,ze.morphTargets=Ce.morphTargets,ze.morphNormals=Ce.morphNormals,ze.morphColors=Ce.morphColors,ze.morphTargetsCount=Ce.morphTargetsCount,ze.numClippingPlanes=Ce.numClippingPlanes,ze.numIntersection=Ce.numClipIntersection,ze.vertexAlphas=Ce.vertexAlphas,ze.vertexTangents=Ce.vertexTangents,ze.toneMapping=Ce.toneMapping}function Si(ee,Ce,ze,Me,Be){Ce.isScene!==!0&&(Ce=rt),Xe.resetTextureUnits();const xt=Ce.fog,Pt=Me.isMeshStandardMaterial?Ce.environment:null,It=F===null?b.outputColorSpace:F.isXRRenderTarget===!0?F.texture.colorSpace:Jr,Ot=(Me.isMeshStandardMaterial?Ae:Ze).get(Me.envMap||Pt),Kt=Me.vertexColors===!0&&!!ze.attributes.color&&ze.attributes.color.itemSize===4,Ge=!!ze.attributes.tangent&&(!!Me.normalMap||Me.anisotropy>0),Ft=!!ze.morphAttributes.position,Tn=!!ze.morphAttributes.normal,pn=!!ze.morphAttributes.color;let $n=fo;Me.toneMapped&&(F===null||F.isXRRenderTarget===!0)&&($n=b.toneMapping);const ir=ze.morphAttributes.position||ze.morphAttributes.normal||ze.morphAttributes.color,gn=ir!==void 0?ir.length:0,Ut=Le.get(Me),Qt=w.state.lights;if(ie===!0&&(re===!0||ee!==U)){const Xn=ee===U&&Me.id===z;Ke.setState(Me,ee,Xn)}let Bt=!1;Me.version===Ut.__version?(Ut.needsLights&&Ut.lightsStateVersion!==Qt.state.version||Ut.outputColorSpace!==It||Be.isInstancedMesh&&Ut.instancing===!1||!Be.isInstancedMesh&&Ut.instancing===!0||Be.isSkinnedMesh&&Ut.skinning===!1||!Be.isSkinnedMesh&&Ut.skinning===!0||Be.isInstancedMesh&&Ut.instancingColor===!0&&Be.instanceColor===null||Be.isInstancedMesh&&Ut.instancingColor===!1&&Be.instanceColor!==null||Ut.envMap!==Ot||Me.fog===!0&&Ut.fog!==xt||Ut.numClippingPlanes!==void 0&&(Ut.numClippingPlanes!==Ke.numPlanes||Ut.numIntersection!==Ke.numIntersection)||Ut.vertexAlphas!==Kt||Ut.vertexTangents!==Ge||Ut.morphTargets!==Ft||Ut.morphNormals!==Tn||Ut.morphColors!==pn||Ut.toneMapping!==$n||ke.isWebGL2===!0&&Ut.morphTargetsCount!==gn)&&(Bt=!0):(Bt=!0,Ut.__version=Me.version);let yn=Ut.currentProgram;Bt===!0&&(yn=ri(Me,Ce,Be));let ei=!1,Hn=!1,Er=!1;const xn=yn.getUniforms(),An=Ut.uniforms;if(Pe.useProgram(yn.program)&&(ei=!0,Hn=!0,Er=!0),Me.id!==z&&(z=Me.id,Hn=!0),ei||U!==ee){if(xn.setValue(Z,"projectionMatrix",ee.projectionMatrix),ke.logarithmicDepthBuffer&&xn.setValue(Z,"logDepthBufFC",2/(Math.log(ee.far+1)/Math.LN2)),U!==ee&&(U=ee,Hn=!0,Er=!0),Me.isShaderMaterial||Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshStandardMaterial||Me.envMap){const Xn=xn.map.cameraPosition;Xn!==void 0&&Xn.setValue(Z,Ve.setFromMatrixPosition(ee.matrixWorld))}(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial)&&xn.setValue(Z,"isOrthographic",ee.isOrthographicCamera===!0),(Me.isMeshPhongMaterial||Me.isMeshToonMaterial||Me.isMeshLambertMaterial||Me.isMeshBasicMaterial||Me.isMeshStandardMaterial||Me.isShaderMaterial||Me.isShadowMaterial||Be.isSkinnedMesh)&&xn.setValue(Z,"viewMatrix",ee.matrixWorldInverse)}if(Be.isSkinnedMesh){xn.setOptional(Z,Be,"bindMatrix"),xn.setOptional(Z,Be,"bindMatrixInverse");const Xn=Be.skeleton;Xn&&(ke.floatVertexTextures?(Xn.boneTexture===null&&Xn.computeBoneTexture(),xn.setValue(Z,"boneTexture",Xn.boneTexture,Xe),xn.setValue(Z,"boneTextureSize",Xn.boneTextureSize)):console.warn("THREE.WebGLRenderer: SkinnedMesh can only be used with WebGL 2. With WebGL 1 OES_texture_float and vertex textures support is required."))}const _i=ze.morphAttributes;if((_i.position!==void 0||_i.normal!==void 0||_i.color!==void 0&&ke.isWebGL2===!0)&&ct.update(Be,ze,yn),(Hn||Ut.receiveShadow!==Be.receiveShadow)&&(Ut.receiveShadow=Be.receiveShadow,xn.setValue(Z,"receiveShadow",Be.receiveShadow)),Me.isMeshGouraudMaterial&&Me.envMap!==null&&(An.envMap.value=Ot,An.flipEnvMap.value=Ot.isCubeTexture&&Ot.isRenderTargetTexture===!1?-1:1),Hn&&(xn.setValue(Z,"toneMappingExposure",b.toneMappingExposure),Ut.needsLights&&_s(An,Er),xt&&Me.fog===!0&&qe.refreshFogUniforms(An,xt),qe.refreshMaterialUniforms(An,Me,ue,oe,de),Gg.upload(Z,Ut.uniformsList,An,Xe)),Me.isShaderMaterial&&Me.uniformsNeedUpdate===!0&&(Gg.upload(Z,Ut.uniformsList,An,Xe),Me.uniformsNeedUpdate=!1),Me.isSpriteMaterial&&xn.setValue(Z,"center",Be.center),xn.setValue(Z,"modelViewMatrix",Be.modelViewMatrix),xn.setValue(Z,"normalMatrix",Be.normalMatrix),xn.setValue(Z,"modelMatrix",Be.matrixWorld),Me.isShaderMaterial||Me.isRawShaderMaterial){const Xn=Me.uniformsGroups;for(let Bs=0,zs=Xn.length;Bs<zs;Bs++)if(ke.isWebGL2){const Ci=Xn[Bs];_t.update(Ci,yn),_t.bind(Ci,yn)}else console.warn("THREE.WebGLRenderer: Uniform Buffer Objects can only be used with WebGL 2.")}return yn}function _s(ee,Ce){ee.ambientLightColor.needsUpdate=Ce,ee.lightProbe.needsUpdate=Ce,ee.directionalLights.needsUpdate=Ce,ee.directionalLightShadows.needsUpdate=Ce,ee.pointLights.needsUpdate=Ce,ee.pointLightShadows.needsUpdate=Ce,ee.spotLights.needsUpdate=Ce,ee.spotLightShadows.needsUpdate=Ce,ee.rectAreaLights.needsUpdate=Ce,ee.hemisphereLights.needsUpdate=Ce}function hl(ee){return ee.isMeshLambertMaterial||ee.isMeshToonMaterial||ee.isMeshPhongMaterial||ee.isMeshStandardMaterial||ee.isShadowMaterial||ee.isShaderMaterial&&ee.lights===!0}this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return F},this.setRenderTargetTextures=function(ee,Ce,ze){Le.get(ee.texture).__webglTexture=Ce,Le.get(ee.depthTexture).__webglTexture=ze;const Me=Le.get(ee);Me.__hasExternalTextures=!0,Me.__hasExternalTextures&&(Me.__autoAllocateDepthBuffer=ze===void 0,Me.__autoAllocateDepthBuffer||we.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),Me.__useRenderToTexture=!1))},this.setRenderTargetFramebuffer=function(ee,Ce){const ze=Le.get(ee);ze.__webglFramebuffer=Ce,ze.__useDefaultFramebuffer=Ce===void 0},this.setRenderTarget=function(ee,Ce=0,ze=0){F=ee,I=Ce,k=ze;let Me=!0,Be=null,xt=!1,Pt=!1;if(ee){const Ot=Le.get(ee);Ot.__useDefaultFramebuffer!==void 0?(Pe.bindFramebuffer(Z.FRAMEBUFFER,null),Me=!1):Ot.__webglFramebuffer===void 0?Xe.setupRenderTarget(ee):Ot.__hasExternalTextures&&Xe.rebindTextures(ee,Le.get(ee.texture).__webglTexture,Le.get(ee.depthTexture).__webglTexture);const Kt=ee.texture;(Kt.isData3DTexture||Kt.isDataArrayTexture||Kt.isCompressedArrayTexture)&&(Pt=!0);const Ge=Le.get(ee).__webglFramebuffer;ee.isWebGLCubeRenderTarget?(Array.isArray(Ge[Ce])?Be=Ge[Ce][ze]:Be=Ge[Ce],xt=!0):ke.isWebGL2&&ee.samples>0&&Xe.useMultisampledRTT(ee)===!1?Be=Le.get(ee).__webglMultisampledFramebuffer:Array.isArray(Ge)?Be=Ge[ze]:Be=Ge,O.copy(ee.viewport),$.copy(ee.scissor),Y=ee.scissorTest}else O.copy(W).multiplyScalar(ue).floor(),$.copy(L).multiplyScalar(ue).floor(),Y=B;if(Pe.bindFramebuffer(Z.FRAMEBUFFER,Be)&&ke.drawBuffers&&Me&&Pe.drawBuffers(ee,Be),Pe.viewport(O),Pe.scissor($),Pe.setScissorTest(Y),xt){const Ot=Le.get(ee.texture);Z.framebufferTexture2D(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Z.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,Ot.__webglTexture,ze)}else if(Pt){const Ot=Le.get(ee.texture),Kt=Ce||0;Z.framebufferTextureLayer(Z.FRAMEBUFFER,Z.COLOR_ATTACHMENT0,Ot.__webglTexture,ze||0,Kt)}z=-1},this.readRenderTargetPixels=function(ee,Ce,ze,Me,Be,xt,Pt){if(!(ee&&ee.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let It=Le.get(ee).__webglFramebuffer;if(ee.isWebGLCubeRenderTarget&&Pt!==void 0&&(It=It[Pt]),It){Pe.bindFramebuffer(Z.FRAMEBUFFER,It);try{const Ot=ee.texture,Kt=Ot.format,Ge=Ot.type;if(Kt!==Dn&&Ye.convert(Kt)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_FORMAT)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}const Ft=Ge===Tr&&(we.has("EXT_color_buffer_half_float")||ke.isWebGL2&&we.has("EXT_color_buffer_float"));if(Ge!==zn&&Ye.convert(Ge)!==Z.getParameter(Z.IMPLEMENTATION_COLOR_READ_TYPE)&&!(Ge===li&&(ke.isWebGL2||we.has("OES_texture_float")||we.has("WEBGL_color_buffer_float")))&&!Ft){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ce>=0&&Ce<=ee.width-Me&&ze>=0&&ze<=ee.height-Be&&Z.readPixels(Ce,ze,Me,Be,Ye.convert(Kt),Ye.convert(Ge),xt)}finally{const Ot=F!==null?Le.get(F).__webglFramebuffer:null;Pe.bindFramebuffer(Z.FRAMEBUFFER,Ot)}}},this.copyFramebufferToTexture=function(ee,Ce,ze=0){const Me=Math.pow(2,-ze),Be=Math.floor(Ce.image.width*Me),xt=Math.floor(Ce.image.height*Me);Xe.setTexture2D(Ce,0),Z.copyTexSubImage2D(Z.TEXTURE_2D,ze,0,0,ee.x,ee.y,Be,xt),Pe.unbindTexture()},this.copyTextureToTexture=function(ee,Ce,ze,Me=0){const Be=Ce.image.width,xt=Ce.image.height,Pt=Ye.convert(ze.format),It=Ye.convert(ze.type);Xe.setTexture2D(ze,0),Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,ze.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ze.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,ze.unpackAlignment),Ce.isDataTexture?Z.texSubImage2D(Z.TEXTURE_2D,Me,ee.x,ee.y,Be,xt,Pt,It,Ce.image.data):Ce.isCompressedTexture?Z.compressedTexSubImage2D(Z.TEXTURE_2D,Me,ee.x,ee.y,Ce.mipmaps[0].width,Ce.mipmaps[0].height,Pt,Ce.mipmaps[0].data):Z.texSubImage2D(Z.TEXTURE_2D,Me,ee.x,ee.y,Pt,It,Ce.image),Me===0&&ze.generateMipmaps&&Z.generateMipmap(Z.TEXTURE_2D),Pe.unbindTexture()},this.copyTextureToTexture3D=function(ee,Ce,ze,Me,Be=0){if(b.isWebGL1Renderer){console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: can only be used with WebGL2.");return}const xt=ee.max.x-ee.min.x+1,Pt=ee.max.y-ee.min.y+1,It=ee.max.z-ee.min.z+1,Ot=Ye.convert(Me.format),Kt=Ye.convert(Me.type);let Ge;if(Me.isData3DTexture)Xe.setTexture3D(Me,0),Ge=Z.TEXTURE_3D;else if(Me.isDataArrayTexture)Xe.setTexture2DArray(Me,0),Ge=Z.TEXTURE_2D_ARRAY;else{console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: only supports THREE.DataTexture3D and THREE.DataTexture2DArray.");return}Z.pixelStorei(Z.UNPACK_FLIP_Y_WEBGL,Me.flipY),Z.pixelStorei(Z.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Me.premultiplyAlpha),Z.pixelStorei(Z.UNPACK_ALIGNMENT,Me.unpackAlignment);const Ft=Z.getParameter(Z.UNPACK_ROW_LENGTH),Tn=Z.getParameter(Z.UNPACK_IMAGE_HEIGHT),pn=Z.getParameter(Z.UNPACK_SKIP_PIXELS),$n=Z.getParameter(Z.UNPACK_SKIP_ROWS),ir=Z.getParameter(Z.UNPACK_SKIP_IMAGES),gn=ze.isCompressedTexture?ze.mipmaps[0]:ze.image;Z.pixelStorei(Z.UNPACK_ROW_LENGTH,gn.width),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,gn.height),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,ee.min.x),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,ee.min.y),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,ee.min.z),ze.isDataTexture||ze.isData3DTexture?Z.texSubImage3D(Ge,Be,Ce.x,Ce.y,Ce.z,xt,Pt,It,Ot,Kt,gn.data):ze.isCompressedArrayTexture?(console.warn("THREE.WebGLRenderer.copyTextureToTexture3D: untested support for compressed srcTexture."),Z.compressedTexSubImage3D(Ge,Be,Ce.x,Ce.y,Ce.z,xt,Pt,It,Ot,gn.data)):Z.texSubImage3D(Ge,Be,Ce.x,Ce.y,Ce.z,xt,Pt,It,Ot,Kt,gn),Z.pixelStorei(Z.UNPACK_ROW_LENGTH,Ft),Z.pixelStorei(Z.UNPACK_IMAGE_HEIGHT,Tn),Z.pixelStorei(Z.UNPACK_SKIP_PIXELS,pn),Z.pixelStorei(Z.UNPACK_SKIP_ROWS,$n),Z.pixelStorei(Z.UNPACK_SKIP_IMAGES,ir),Be===0&&Me.generateMipmaps&&Z.generateMipmap(Ge),Pe.unbindTexture()},this.initTexture=function(ee){ee.isCubeTexture?Xe.setTextureCube(ee,0):ee.isData3DTexture?Xe.setTexture3D(ee,0):ee.isDataArrayTexture||ee.isCompressedArrayTexture?Xe.setTexture2DArray(ee,0):Xe.setTexture2D(ee,0),Pe.unbindTexture()},this.resetState=function(){I=0,k=0,F=null,Pe.reset(),st.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return co}get physicallyCorrectLights(){return console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),!this.useLegacyLights}set physicallyCorrectLights(e){console.warn("THREE.WebGLRenderer: The property .physicallyCorrectLights has been removed. Set renderer.useLegacyLights instead."),this.useLegacyLights=!e}get outputEncoding(){return console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace===yt?al:n1}set outputEncoding(e){console.warn("THREE.WebGLRenderer: Property .outputEncoding has been removed. Use .outputColorSpace instead."),this.outputColorSpace=e===al?yt:Jr}get useLegacyLights(){return console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights}set useLegacyLights(e){console.warn("THREE.WebGLRenderer: The property .useLegacyLights has been deprecated. Migrate your lighting according to the following guide: https://discourse.threejs.org/t/updates-to-lighting-in-three-js-r155/53733."),this._useLegacyLights=e}}class BE extends f1{}BE.prototype.isWebGL1Renderer=!0;class Sv{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Je(e),this.density=t}clone(){return new Sv(this.color,this.density)}toJSON(){return{type:"FogExp2",color:this.color.getHex(),density:this.density}}}class _v{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new Je(e),this.near=t,this.far=i}clone(){return new _v(this.color,this.near,this.far)}toJSON(){return{type:"Fog",color:this.color.getHex(),near:this.near,far:this.far}}}class sh extends Mn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t}}class Mv{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=hp,this.updateRange={offset:0,count:-1},this.version=0,this.uuid=ks()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ks()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ks()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Zr=new Q;class vc{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Zr.fromBufferAttribute(this,t),Zr.applyMatrix4(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Zr.fromBufferAttribute(this,t),Zr.applyNormalMatrix(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Zr.fromBufferAttribute(this,t),Zr.transformDirection(e),this.setXYZ(t,Zr.x,Zr.y,Zr.z);return this}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=xs(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=xs(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=xs(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=xs(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),s=on(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new cn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new vc(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class h1 extends hr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Nf;const bd=new Q,Ff=new Q,kf=new Q,Of=new _e,Ad=new _e,zE=new vt,ig=new Q,Cd=new Q,rg=new Q,O_=new _e,Q0=new _e,B_=new _e;class HE extends Mn{constructor(e){if(super(),this.isSprite=!0,this.type="Sprite",Nf===void 0){Nf=new nn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Mv(t,5);Nf.setIndex([0,1,2,0,2,3]),Nf.setAttribute("position",new vc(i,3,0,!1)),Nf.setAttribute("uv",new vc(i,2,3,!1))}this.geometry=Nf,this.material=e!==void 0?e:new h1,this.center=new _e(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Ff.setFromMatrixScale(this.matrixWorld),zE.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),kf.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Ff.multiplyScalar(-kf.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const a=this.center;sg(ig.set(-.5,-.5,0),kf,a,Ff,r,s),sg(Cd.set(.5,-.5,0),kf,a,Ff,r,s),sg(rg.set(.5,.5,0),kf,a,Ff,r,s),O_.set(0,0),Q0.set(1,0),B_.set(1,1);let l=e.ray.intersectTriangle(ig,Cd,rg,!1,bd);if(l===null&&(sg(Cd.set(-.5,.5,0),kf,a,Ff,r,s),Q0.set(0,1),l=e.ray.intersectTriangle(ig,rg,Cd,!1,bd),l===null))return;const c=e.ray.origin.distanceTo(bd);c<e.near||c>e.far||t.push({distance:c,point:bd.clone(),uv:ys.getInterpolation(bd,ig,Cd,rg,O_,Q0,B_,new _e),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function sg(n,e,t,i,r,s){Of.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Ad.x=s*Of.x-r*Of.y,Ad.y=r*Of.x+s*Of.y):Ad.copy(Of),n.copy(e),n.x+=Ad.x,n.y+=Ad.y,n.applyMatrix4(zE)}const ag=new Q,z_=new Q;class GE extends Mn{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){ag.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(ag);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){ag.setFromMatrixPosition(e.matrixWorld),z_.setFromMatrixPosition(this.matrixWorld);const i=ag.distanceTo(z_)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let a=t[r].distance;if(t[r].object.visible&&(a-=a*t[r].hysteresis),i>=a)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const a=i[r];t.object.levels.push({object:a.object.uuid,distance:a.distance,hysteresis:a.hysteresis})}return t}}const H_=new Q,G_=new hn,V_=new hn,yN=new Q,W_=new vt,Bf=new Q,J0=new Os,j_=new vt,$0=new fh;class VE extends xi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode="attached",this.bindMatrix=new vt,this.bindMatrixInverse=new vt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new aa),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Bf.fromBufferAttribute(t,i),this.applyBoneTransform(i,Bf),this.boundingBox.expandByPoint(Bf)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Os),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)Bf.fromBufferAttribute(t,i),this.applyBoneTransform(i,Bf),this.boundingSphere.expandByPoint(Bf)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),J0.copy(this.boundingSphere),J0.applyMatrix4(r),e.ray.intersectsSphere(J0)!==!1&&(j_.copy(r).invert(),$0.copy(e.ray).applyMatrix4(j_),!(this.boundingBox!==null&&$0.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,$0)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new hn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode==="attached"?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode==="detached"?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;G_.fromBufferAttribute(r.attributes.skinIndex,e),V_.fromBufferAttribute(r.attributes.skinWeight,e),H_.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const a=V_.getComponent(s);if(a!==0){const l=G_.getComponent(s);W_.multiplyMatrices(i.bones[l].matrixWorld,i.boneInverses[l]),t.addScaledVector(yN.copy(H_).applyMatrix4(W_),a)}}return t.applyMatrix4(this.bindMatrixInverse)}boneTransform(e,t){return console.warn("THREE.SkinnedMesh: .boneTransform() was renamed to .applyBoneTransform() in r151."),this.applyBoneTransform(e,t)}}class d1 extends Mn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class ho extends Qn{constructor(e=null,t=1,i=1,r,s,a,l,c,f=$t,p=$t,g,v){super(null,a,l,c,f,p,r,s,g,v),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const X_=new vt,xN=new vt;class wv{constructor(e=[],t=[]){this.uuid=ks(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.boneTextureSize=0,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new vt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new vt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,a=e.length;s<a;s++){const l=e[s]?e[s].matrixWorld:xN;X_.multiplyMatrices(l,t[s]),X_.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new wv(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=EE(e),e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new ho(t,e,e,Dn,li);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this.boneTextureSize=e,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let a=t[s];a===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),a=new d1),this.bones.push(a),this.boneInverses.push(new vt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const a=t[r];e.bones.push(a.uuid);const l=i[r];e.boneInverses.push(l.toArray())}return e}}class yc extends cn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const zf=new vt,Y_=new vt,og=[],q_=new aa,SN=new vt,Rd=new xi,Pd=new Os;class WE extends xi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new yc(new Float32Array(i*16),16),this.instanceColor=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,SN)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new aa),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,zf),q_.copy(e.boundingBox).applyMatrix4(zf),this.boundingBox.union(q_)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Os),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,zf),Pd.copy(e.boundingSphere).applyMatrix4(zf),this.boundingSphere.union(Pd)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Rd.geometry=this.geometry,Rd.material=this.material,Rd.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Pd.copy(this.boundingSphere),Pd.applyMatrix4(i),e.ray.intersectsSphere(Pd)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,zf),Y_.multiplyMatrices(i,zf),Rd.matrixWorld=Y_,Rd.raycast(e,og);for(let a=0,l=og.length;a<l;a++){const c=og[a];c.instanceId=s,c.object=this,t.push(c)}og.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new yc(new Float32Array(this.instanceMatrix.count*3),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"})}}class ts extends hr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Je(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const Z_=new Q,K_=new Q,Q_=new vt,ey=new fh,lg=new Os;class iu extends Mn{constructor(e=new nn,t=new ts){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)Z_.fromBufferAttribute(t,r-1),K_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=Z_.distanceTo(K_);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),lg.copy(i.boundingSphere),lg.applyMatrix4(r),lg.radius+=s,e.ray.intersectsSphere(lg)===!1)return;Q_.copy(r).invert(),ey.copy(e.ray).applyMatrix4(Q_);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=new Q,p=new Q,g=new Q,v=new Q,y=this.isLineSegments?2:1,S=i.index,w=i.attributes.position;if(S!==null){const M=Math.max(0,a.start),A=Math.min(S.count,a.start+a.count);for(let b=M,R=A-1;b<R;b+=y){const I=S.getX(b),k=S.getX(b+1);if(f.fromBufferAttribute(w,I),p.fromBufferAttribute(w,k),ey.distanceSqToSegment(f,p,v,g)>c)continue;v.applyMatrix4(this.matrixWorld);const z=e.ray.origin.distanceTo(v);z<e.near||z>e.far||t.push({distance:z,point:g.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}else{const M=Math.max(0,a.start),A=Math.min(w.count,a.start+a.count);for(let b=M,R=A-1;b<R;b+=y){if(f.fromBufferAttribute(w,b),p.fromBufferAttribute(w,b+1),ey.distanceSqToSegment(f,p,v,g)>c)continue;v.applyMatrix4(this.matrixWorld);const k=e.ray.origin.distanceTo(v);k<e.near||k>e.far||t.push({distance:k,point:g.clone().applyMatrix4(this.matrixWorld),index:b,face:null,faceIndex:null,object:this})}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}const J_=new Q,$_=new Q;class xo extends iu{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)J_.fromBufferAttribute(t,r),$_.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+J_.distanceTo($_);e.setAttribute("lineDistance",new Ct(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class jE extends iu{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class p1 extends hr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Je(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const eM=new vt,dx=new fh,ug=new Os,cg=new Q;class XE extends Mn{constructor(e=new nn,t=new p1){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,a=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),ug.copy(i.boundingSphere),ug.applyMatrix4(r),ug.radius+=s,e.ray.intersectsSphere(ug)===!1)return;eM.copy(r).invert(),dx.copy(e.ray).applyMatrix4(eM);const l=s/((this.scale.x+this.scale.y+this.scale.z)/3),c=l*l,f=i.index,g=i.attributes.position;if(f!==null){const v=Math.max(0,a.start),y=Math.min(f.count,a.start+a.count);for(let S=v,T=y;S<T;S++){const w=f.getX(S);cg.fromBufferAttribute(g,w),tM(cg,w,c,r,e,t,this)}}else{const v=Math.max(0,a.start),y=Math.min(g.count,a.start+a.count);for(let S=v,T=y;S<T;S++)cg.fromBufferAttribute(g,S),tM(cg,S,c,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,a=r.length;s<a;s++){const l=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[l]=s}}}}}function tM(n,e,t,i,r,s,a){const l=dx.distanceSqToPoint(n);if(l<t){const c=new Q;dx.closestPointToPoint(n,c),c.applyMatrix4(i);const f=r.ray.origin.distanceTo(c);if(f<r.near||f>r.far)return;s.push({distance:f,distanceToRay:Math.sqrt(l),point:c,index:e,face:null,object:a})}}class YE extends Qn{constructor(e,t,i,r,s,a,l,c,f){super(e,t,i,r,s,a,l,c,f),this.isVideoTexture=!0,this.minFilter=a!==void 0?a:Et,this.magFilter=s!==void 0?s:Et,this.generateMipmaps=!1;const p=this;function g(){p.needsUpdate=!0,e.requestVideoFrameCallback(g)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(g)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class px extends Qn{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=$t,this.minFilter=$t,this.generateMipmaps=!1,this.needsUpdate=!0}}class Tv extends Qn{constructor(e,t,i,r,s,a,l,c,f,p,g,v){super(null,a,l,c,f,p,r,s,g,v),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class _N extends Tv{constructor(e,t,i,r,s,a){super(e,t,i,s,a),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=qi}}class MN extends Tv{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,ol),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class wN extends Qn{constructor(e,t,i,r,s,a,l,c,f){super(e,t,i,r,s,a,l,c,f),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Va{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let a=1;a<=e;a++)i=this.getPoint(a/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let a;t?a=t:a=e*i[s-1];let l=0,c=s-1,f;for(;l<=c;)if(r=Math.floor(l+(c-l)/2),f=i[r]-a,f<0)l=r+1;else if(f>0)c=r-1;else{c=r;break}if(r=c,i[r]===a)return r/(s-1);const p=i[r],v=i[r+1]-p,y=(a-p)/v;return(r+y)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const a=this.getPoint(r),l=this.getPoint(s),c=t||(a.isVector2?new _e:new Q);return c.copy(l).sub(a).normalize(),c}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new Q,r=[],s=[],a=[],l=new Q,c=new vt;for(let y=0;y<=e;y++){const S=y/e;r[y]=this.getTangentAt(S,new Q)}s[0]=new Q,a[0]=new Q;let f=Number.MAX_VALUE;const p=Math.abs(r[0].x),g=Math.abs(r[0].y),v=Math.abs(r[0].z);p<=f&&(f=p,i.set(1,0,0)),g<=f&&(f=g,i.set(0,1,0)),v<=f&&i.set(0,0,1),l.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],l),a[0].crossVectors(r[0],s[0]);for(let y=1;y<=e;y++){if(s[y]=s[y-1].clone(),a[y]=a[y-1].clone(),l.crossVectors(r[y-1],r[y]),l.length()>Number.EPSILON){l.normalize();const S=Math.acos(yi(r[y-1].dot(r[y]),-1,1));s[y].applyMatrix4(c.makeRotationAxis(l,S))}a[y].crossVectors(r[y],s[y])}if(t===!0){let y=Math.acos(yi(s[0].dot(s[e]),-1,1));y/=e,r[0].dot(l.crossVectors(s[0],s[e]))>0&&(y=-y);for(let S=1;S<=e;S++)s[S].applyMatrix4(c.makeRotationAxis(r[S],y*S)),a[S].crossVectors(r[S],s[S])}return{tangents:r,normals:s,binormals:a}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Ip extends Va{constructor(e=0,t=0,i=1,r=1,s=0,a=Math.PI*2,l=!1,c=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=a,this.aClockwise=l,this.aRotation=c}getPoint(e,t){const i=t||new _e,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const a=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(a?s=0:s=r),this.aClockwise===!0&&!a&&(s===r?s=-r:s=s-r);const l=this.aStartAngle+e*s;let c=this.aX+this.xRadius*Math.cos(l),f=this.aY+this.yRadius*Math.sin(l);if(this.aRotation!==0){const p=Math.cos(this.aRotation),g=Math.sin(this.aRotation),v=c-this.aX,y=f-this.aY;c=v*p-y*g+this.aX,f=v*g+y*p+this.aY}return i.set(c,f)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class qE extends Ip{constructor(e,t,i,r,s,a){super(e,t,i,i,r,s,a),this.isArcCurve=!0,this.type="ArcCurve"}}function m1(){let n=0,e=0,t=0,i=0;function r(s,a,l,c){n=s,e=l,t=-3*s+3*a-2*l-c,i=2*s-2*a+l+c}return{initCatmullRom:function(s,a,l,c,f){r(a,l,f*(l-s),f*(c-a))},initNonuniformCatmullRom:function(s,a,l,c,f,p,g){let v=(a-s)/f-(l-s)/(f+p)+(l-a)/p,y=(l-a)/p-(c-a)/(p+g)+(c-l)/g;v*=p,y*=p,r(a,l,v,y)},calc:function(s){const a=s*s,l=a*s;return n+e*s+t*a+i*l}}}const fg=new Q,ty=new m1,ny=new m1,iy=new m1;class ZE extends Va{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new Q){const i=t,r=this.points,s=r.length,a=(s-(this.closed?0:1))*e;let l=Math.floor(a),c=a-l;this.closed?l+=l>0?0:(Math.floor(Math.abs(l)/s)+1)*s:c===0&&l===s-1&&(l=s-2,c=1);let f,p;this.closed||l>0?f=r[(l-1)%s]:(fg.subVectors(r[0],r[1]).add(r[0]),f=fg);const g=r[l%s],v=r[(l+1)%s];if(this.closed||l+2<s?p=r[(l+2)%s]:(fg.subVectors(r[s-1],r[s-2]).add(r[s-1]),p=fg),this.curveType==="centripetal"||this.curveType==="chordal"){const y=this.curveType==="chordal"?.5:.25;let S=Math.pow(f.distanceToSquared(g),y),T=Math.pow(g.distanceToSquared(v),y),w=Math.pow(v.distanceToSquared(p),y);T<1e-4&&(T=1),S<1e-4&&(S=T),w<1e-4&&(w=T),ty.initNonuniformCatmullRom(f.x,g.x,v.x,p.x,S,T,w),ny.initNonuniformCatmullRom(f.y,g.y,v.y,p.y,S,T,w),iy.initNonuniformCatmullRom(f.z,g.z,v.z,p.z,S,T,w)}else this.curveType==="catmullrom"&&(ty.initCatmullRom(f.x,g.x,v.x,p.x,this.tension),ny.initCatmullRom(f.y,g.y,v.y,p.y,this.tension),iy.initCatmullRom(f.z,g.z,v.z,p.z,this.tension));return i.set(ty.calc(c),ny.calc(c),iy.calc(c)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Q().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function nM(n,e,t,i,r){const s=(i-e)*.5,a=(r-t)*.5,l=n*n,c=n*l;return(2*t-2*i+s+a)*c+(-3*t+3*i-2*s-a)*l+s*n+t}function TN(n,e){const t=1-n;return t*t*e}function EN(n,e){return 2*(1-n)*n*e}function bN(n,e){return n*n*e}function Zd(n,e,t,i){return TN(n,e)+EN(n,t)+bN(n,i)}function AN(n,e){const t=1-n;return t*t*t*e}function CN(n,e){const t=1-n;return 3*t*t*n*e}function RN(n,e){return 3*(1-n)*n*n*e}function PN(n,e){return n*n*n*e}function Kd(n,e,t,i,r){return AN(n,e)+CN(n,t)+RN(n,i)+PN(n,r)}class g1 extends Va{constructor(e=new _e,t=new _e,i=new _e,r=new _e){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new _e){const i=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(Kd(e,r.x,s.x,a.x,l.x),Kd(e,r.y,s.y,a.y,l.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class KE extends Va{constructor(e=new Q,t=new Q,i=new Q,r=new Q){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Q){const i=t,r=this.v0,s=this.v1,a=this.v2,l=this.v3;return i.set(Kd(e,r.x,s.x,a.x,l.x),Kd(e,r.y,s.y,a.y,l.y),Kd(e,r.z,s.z,a.z,l.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Ev extends Va{constructor(e=new _e,t=new _e){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new _e){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new _e){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class QE extends Va{constructor(e=new Q,t=new Q){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new Q){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Q){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class v1 extends Va{constructor(e=new _e,t=new _e,i=new _e){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new _e){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Zd(e,r.x,s.x,a.x),Zd(e,r.y,s.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class y1 extends Va{constructor(e=new Q,t=new Q,i=new Q){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Q){const i=t,r=this.v0,s=this.v1,a=this.v2;return i.set(Zd(e,r.x,s.x,a.x),Zd(e,r.y,s.y,a.y),Zd(e,r.z,s.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class x1 extends Va{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new _e){const i=t,r=this.points,s=(r.length-1)*e,a=Math.floor(s),l=s-a,c=r[a===0?a:a-1],f=r[a],p=r[a>r.length-2?r.length-1:a+1],g=r[a>r.length-3?r.length-1:a+2];return i.set(nM(l,c.x,f.x,p.x,g.x),nM(l,c.y,f.y,p.y,g.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new _e().fromArray(r))}return this}}var S1=Object.freeze({__proto__:null,ArcCurve:qE,CatmullRomCurve3:ZE,CubicBezierCurve:g1,CubicBezierCurve3:KE,EllipseCurve:Ip,LineCurve:Ev,LineCurve3:QE,QuadraticBezierCurve:v1,QuadraticBezierCurve3:y1,SplineCurve:x1});class JE extends Va{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);e.equals(t)||this.curves.push(new Ev(t,e))}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const a=r[s]-i,l=this.curves[s],c=l.getLength(),f=c===0?0:1-a/c;return l.getPointAt(f,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const a=s[r],l=a.isEllipseCurve?e*2:a.isLineCurve||a.isLineCurve3?1:a.isSplineCurve?e*a.points.length:e,c=a.getPoints(l);for(let f=0;f<c.length;f++){const p=c[f];i&&i.equals(p)||(t.push(p),i=p)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new S1[r.type]().fromJSON(r))}return this}}class mp extends JE{constructor(e){super(),this.type="Path",this.currentPoint=new _e,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new Ev(this.currentPoint.clone(),new _e(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new v1(this.currentPoint.clone(),new _e(e,t),new _e(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,a){const l=new g1(this.currentPoint.clone(),new _e(e,t),new _e(i,r),new _e(s,a));return this.curves.push(l),this.currentPoint.set(s,a),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new x1(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,a){const l=this.currentPoint.x,c=this.currentPoint.y;return this.absarc(e+l,t+c,i,r,s,a),this}absarc(e,t,i,r,s,a){return this.absellipse(e,t,i,i,r,s,a),this}ellipse(e,t,i,r,s,a,l,c){const f=this.currentPoint.x,p=this.currentPoint.y;return this.absellipse(e+f,t+p,i,r,s,a,l,c),this}absellipse(e,t,i,r,s,a,l,c){const f=new Ip(e,t,i,r,s,a,l,c);if(this.curves.length>0){const g=f.getPoint(0);g.equals(this.currentPoint)||this.lineTo(g.x,g.y)}this.curves.push(f);const p=f.getPoint(1);return this.currentPoint.copy(p),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Up extends nn{constructor(e=[new _e(0,-.5),new _e(.5,0),new _e(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=yi(r,0,Math.PI*2);const s=[],a=[],l=[],c=[],f=[],p=1/t,g=new Q,v=new _e,y=new Q,S=new Q,T=new Q;let w=0,M=0;for(let A=0;A<=e.length-1;A++)switch(A){case 0:w=e[A+1].x-e[A].x,M=e[A+1].y-e[A].y,y.x=M*1,y.y=-w,y.z=M*0,T.copy(y),y.normalize(),c.push(y.x,y.y,y.z);break;case e.length-1:c.push(T.x,T.y,T.z);break;default:w=e[A+1].x-e[A].x,M=e[A+1].y-e[A].y,y.x=M*1,y.y=-w,y.z=M*0,S.copy(y),y.x+=T.x,y.y+=T.y,y.z+=T.z,y.normalize(),c.push(y.x,y.y,y.z),T.copy(S)}for(let A=0;A<=t;A++){const b=i+A*p*r,R=Math.sin(b),I=Math.cos(b);for(let k=0;k<=e.length-1;k++){g.x=e[k].x*R,g.y=e[k].y,g.z=e[k].x*I,a.push(g.x,g.y,g.z),v.x=A/t,v.y=k/(e.length-1),l.push(v.x,v.y);const F=c[3*k+0]*R,z=c[3*k+1],U=c[3*k+0]*I;f.push(F,z,U)}}for(let A=0;A<t;A++)for(let b=0;b<e.length-1;b++){const R=b+A*e.length,I=R,k=R+e.length,F=R+e.length+1,z=R+1;s.push(I,k,z),s.push(F,z,k)}this.setIndex(s),this.setAttribute("position",new Ct(a,3)),this.setAttribute("uv",new Ct(l,2)),this.setAttribute("normal",new Ct(f,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Up(e.points,e.segments,e.phiStart,e.phiLength)}}class bv extends Up{constructor(e=1,t=1,i=4,r=8){const s=new mp;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new bv(e.radius,e.length,e.capSegments,e.radialSegments)}}class Av extends nn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],a=[],l=[],c=[],f=new Q,p=new _e;a.push(0,0,0),l.push(0,0,1),c.push(.5,.5);for(let g=0,v=3;g<=t;g++,v+=3){const y=i+g/t*r;f.x=e*Math.cos(y),f.y=e*Math.sin(y),a.push(f.x,f.y,f.z),l.push(0,0,1),p.x=(a[v]/e+1)/2,p.y=(a[v+1]/e+1)/2,c.push(p.x,p.y)}for(let g=1;g<=t;g++)s.push(g,g+1,0);this.setIndex(s),this.setAttribute("position",new Ct(a,3)),this.setAttribute("normal",new Ct(l,3)),this.setAttribute("uv",new Ct(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Av(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class gh extends nn{constructor(e=1,t=1,i=1,r=32,s=1,a=!1,l=0,c=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:a,thetaStart:l,thetaLength:c};const f=this;r=Math.floor(r),s=Math.floor(s);const p=[],g=[],v=[],y=[];let S=0;const T=[],w=i/2;let M=0;A(),a===!1&&(e>0&&b(!0),t>0&&b(!1)),this.setIndex(p),this.setAttribute("position",new Ct(g,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(y,2));function A(){const R=new Q,I=new Q;let k=0;const F=(t-e)/i;for(let z=0;z<=s;z++){const U=[],O=z/s,$=O*(t-e)+e;for(let Y=0;Y<=r;Y++){const q=Y/r,J=q*c+l,ae=Math.sin(J),oe=Math.cos(J);I.x=$*ae,I.y=-O*i+w,I.z=$*oe,g.push(I.x,I.y,I.z),R.set(ae,F,oe).normalize(),v.push(R.x,R.y,R.z),y.push(q,1-O),U.push(S++)}T.push(U)}for(let z=0;z<r;z++)for(let U=0;U<s;U++){const O=T[U][z],$=T[U+1][z],Y=T[U+1][z+1],q=T[U][z+1];p.push(O,$,q),p.push($,Y,q),k+=6}f.addGroup(M,k,0),M+=k}function b(R){const I=S,k=new _e,F=new Q;let z=0;const U=R===!0?e:t,O=R===!0?1:-1;for(let Y=1;Y<=r;Y++)g.push(0,w*O,0),v.push(0,O,0),y.push(.5,.5),S++;const $=S;for(let Y=0;Y<=r;Y++){const J=Y/r*c+l,ae=Math.cos(J),oe=Math.sin(J);F.x=U*oe,F.y=w*O,F.z=U*ae,g.push(F.x,F.y,F.z),v.push(0,O,0),k.x=ae*.5+.5,k.y=oe*.5*O+.5,y.push(k.x,k.y),S++}for(let Y=0;Y<r;Y++){const q=I+Y,J=$+Y;R===!0?p.push(J,J+1,q):p.push(J+1,J,q),z+=3}f.addGroup(M,z,R===!0?1:2),M+=z}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new gh(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Cv extends gh{constructor(e=1,t=1,i=32,r=1,s=!1,a=0,l=Math.PI*2){super(0,e,t,i,r,s,a,l),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:a,thetaLength:l}}static fromJSON(e){return new Cv(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class su extends nn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],a=[];l(r),f(i),p(),this.setAttribute("position",new Ct(s,3)),this.setAttribute("normal",new Ct(s.slice(),3)),this.setAttribute("uv",new Ct(a,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function l(A){const b=new Q,R=new Q,I=new Q;for(let k=0;k<t.length;k+=3)y(t[k+0],b),y(t[k+1],R),y(t[k+2],I),c(b,R,I,A)}function c(A,b,R,I){const k=I+1,F=[];for(let z=0;z<=k;z++){F[z]=[];const U=A.clone().lerp(R,z/k),O=b.clone().lerp(R,z/k),$=k-z;for(let Y=0;Y<=$;Y++)Y===0&&z===k?F[z][Y]=U:F[z][Y]=U.clone().lerp(O,Y/$)}for(let z=0;z<k;z++)for(let U=0;U<2*(k-z)-1;U++){const O=Math.floor(U/2);U%2===0?(v(F[z][O+1]),v(F[z+1][O]),v(F[z][O])):(v(F[z][O+1]),v(F[z+1][O+1]),v(F[z+1][O]))}}function f(A){const b=new Q;for(let R=0;R<s.length;R+=3)b.x=s[R+0],b.y=s[R+1],b.z=s[R+2],b.normalize().multiplyScalar(A),s[R+0]=b.x,s[R+1]=b.y,s[R+2]=b.z}function p(){const A=new Q;for(let b=0;b<s.length;b+=3){A.x=s[b+0],A.y=s[b+1],A.z=s[b+2];const R=w(A)/2/Math.PI+.5,I=M(A)/Math.PI+.5;a.push(R,1-I)}S(),g()}function g(){for(let A=0;A<a.length;A+=6){const b=a[A+0],R=a[A+2],I=a[A+4],k=Math.max(b,R,I),F=Math.min(b,R,I);k>.9&&F<.1&&(b<.2&&(a[A+0]+=1),R<.2&&(a[A+2]+=1),I<.2&&(a[A+4]+=1))}}function v(A){s.push(A.x,A.y,A.z)}function y(A,b){const R=A*3;b.x=e[R+0],b.y=e[R+1],b.z=e[R+2]}function S(){const A=new Q,b=new Q,R=new Q,I=new Q,k=new _e,F=new _e,z=new _e;for(let U=0,O=0;U<s.length;U+=9,O+=6){A.set(s[U+0],s[U+1],s[U+2]),b.set(s[U+3],s[U+4],s[U+5]),R.set(s[U+6],s[U+7],s[U+8]),k.set(a[O+0],a[O+1]),F.set(a[O+2],a[O+3]),z.set(a[O+4],a[O+5]),I.copy(A).add(b).add(R).divideScalar(3);const $=w(I);T(k,O+0,A,$),T(F,O+2,b,$),T(z,O+4,R,$)}}function T(A,b,R,I){I<0&&A.x===1&&(a[b]=A.x-1),R.x===0&&R.z===0&&(a[b]=I/2/Math.PI+.5)}function w(A){return Math.atan2(A.z,-A.x)}function M(A){return Math.atan2(-A.y,Math.sqrt(A.x*A.x+A.z*A.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new su(e.vertices,e.indices,e.radius,e.details)}}class Rv extends su{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],a=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,a,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Rv(e.radius,e.detail)}}const hg=new Q,dg=new Q,ry=new Q,pg=new ys;class $E extends nn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(hc*t),a=e.getIndex(),l=e.getAttribute("position"),c=a?a.count:l.count,f=[0,0,0],p=["a","b","c"],g=new Array(3),v={},y=[];for(let S=0;S<c;S+=3){a?(f[0]=a.getX(S),f[1]=a.getX(S+1),f[2]=a.getX(S+2)):(f[0]=S,f[1]=S+1,f[2]=S+2);const{a:T,b:w,c:M}=pg;if(T.fromBufferAttribute(l,f[0]),w.fromBufferAttribute(l,f[1]),M.fromBufferAttribute(l,f[2]),pg.getNormal(ry),g[0]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,g[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,g[2]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,!(g[0]===g[1]||g[1]===g[2]||g[2]===g[0]))for(let A=0;A<3;A++){const b=(A+1)%3,R=g[A],I=g[b],k=pg[p[A]],F=pg[p[b]],z=`${R}_${I}`,U=`${I}_${R}`;U in v&&v[U]?(ry.dot(v[U].normal)<=s&&(y.push(k.x,k.y,k.z),y.push(F.x,F.y,F.z)),v[U]=null):z in v||(v[z]={index0:f[A],index1:f[b],normal:ry.clone()})}}for(const S in v)if(v[S]){const{index0:T,index1:w}=v[S];hg.fromBufferAttribute(l,T),dg.fromBufferAttribute(l,w),y.push(hg.x,hg.y,hg.z),y.push(dg.x,dg.y,dg.z)}this.setAttribute("position",new Ct(y,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class mc extends mp{constructor(e){super(e),this.uuid=ks(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new mp().fromJSON(r))}return this}}const DN={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=e2(n,0,r,t,!0);const a=[];if(!s||s.next===s.prev)return a;let l,c,f,p,g,v,y;if(i&&(s=FN(n,e,s,t)),n.length>80*t){l=f=n[0],c=p=n[1];for(let S=t;S<r;S+=t)g=n[S],v=n[S+1],g<l&&(l=g),v<c&&(c=v),g>f&&(f=g),v>p&&(p=v);y=Math.max(f-l,p-c),y=y!==0?32767/y:0}return gp(s,a,t,l,c,y,0),a}};function e2(n,e,t,i,r){let s,a;if(r===YN(n,e,t,i)>0)for(s=e;s<t;s+=i)a=iM(s,n[s],n[s+1],a);else for(s=t-i;s>=e;s-=i)a=iM(s,n[s],n[s+1],a);return a&&Pv(a,a.next)&&(yp(a),a=a.next),a}function xc(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Pv(t,t.next)||ci(t.prev,t,t.next)===0)){if(yp(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function gp(n,e,t,i,r,s,a){if(!n)return;!a&&s&&HN(n,i,r,s);let l=n,c,f;for(;n.prev!==n.next;){if(c=n.prev,f=n.next,s?IN(n,i,r,s):LN(n)){e.push(c.i/t|0),e.push(n.i/t|0),e.push(f.i/t|0),yp(n),n=f.next,l=f.next;continue}if(n=f,n===l){a?a===1?(n=UN(xc(n),e,t),gp(n,e,t,i,r,s,2)):a===2&&NN(n,e,t,i,r,s):gp(xc(n),e,t,i,r,s,1);break}}}function LN(n){const e=n.prev,t=n,i=n.next;if(ci(e,t,i)>=0)return!1;const r=e.x,s=t.x,a=i.x,l=e.y,c=t.y,f=i.y,p=r<s?r<a?r:a:s<a?s:a,g=l<c?l<f?l:f:c<f?c:f,v=r>s?r>a?r:a:s>a?s:a,y=l>c?l>f?l:f:c>f?c:f;let S=i.next;for(;S!==e;){if(S.x>=p&&S.x<=v&&S.y>=g&&S.y<=y&&Qf(r,l,s,c,a,f,S.x,S.y)&&ci(S.prev,S,S.next)>=0)return!1;S=S.next}return!0}function IN(n,e,t,i){const r=n.prev,s=n,a=n.next;if(ci(r,s,a)>=0)return!1;const l=r.x,c=s.x,f=a.x,p=r.y,g=s.y,v=a.y,y=l<c?l<f?l:f:c<f?c:f,S=p<g?p<v?p:v:g<v?g:v,T=l>c?l>f?l:f:c>f?c:f,w=p>g?p>v?p:v:g>v?g:v,M=mx(y,S,e,t,i),A=mx(T,w,e,t,i);let b=n.prevZ,R=n.nextZ;for(;b&&b.z>=M&&R&&R.z<=A;){if(b.x>=y&&b.x<=T&&b.y>=S&&b.y<=w&&b!==r&&b!==a&&Qf(l,p,c,g,f,v,b.x,b.y)&&ci(b.prev,b,b.next)>=0||(b=b.prevZ,R.x>=y&&R.x<=T&&R.y>=S&&R.y<=w&&R!==r&&R!==a&&Qf(l,p,c,g,f,v,R.x,R.y)&&ci(R.prev,R,R.next)>=0))return!1;R=R.nextZ}for(;b&&b.z>=M;){if(b.x>=y&&b.x<=T&&b.y>=S&&b.y<=w&&b!==r&&b!==a&&Qf(l,p,c,g,f,v,b.x,b.y)&&ci(b.prev,b,b.next)>=0)return!1;b=b.prevZ}for(;R&&R.z<=A;){if(R.x>=y&&R.x<=T&&R.y>=S&&R.y<=w&&R!==r&&R!==a&&Qf(l,p,c,g,f,v,R.x,R.y)&&ci(R.prev,R,R.next)>=0)return!1;R=R.nextZ}return!0}function UN(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Pv(r,s)&&t2(r,i,i.next,s)&&vp(r,s)&&vp(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),yp(i),yp(i.next),i=n=s),i=i.next}while(i!==n);return xc(i)}function NN(n,e,t,i,r,s){let a=n;do{let l=a.next.next;for(;l!==a.prev;){if(a.i!==l.i&&WN(a,l)){let c=n2(a,l);a=xc(a,a.next),c=xc(c,c.next),gp(a,e,t,i,r,s,0),gp(c,e,t,i,r,s,0);return}l=l.next}a=a.next}while(a!==n)}function FN(n,e,t,i){const r=[];let s,a,l,c,f;for(s=0,a=e.length;s<a;s++)l=e[s]*i,c=s<a-1?e[s+1]*i:n.length,f=e2(n,l,c,i,!1),f===f.next&&(f.steiner=!0),r.push(VN(f));for(r.sort(kN),s=0;s<r.length;s++)t=ON(r[s],t);return t}function kN(n,e){return n.x-e.x}function ON(n,e){const t=BN(n,e);if(!t)return e;const i=n2(t,n);return xc(i,i.next),xc(t,t.next)}function BN(n,e){let t=e,i=-1/0,r;const s=n.x,a=n.y;do{if(a<=t.y&&a>=t.next.y&&t.next.y!==t.y){const v=t.x+(a-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(v<=s&&v>i&&(i=v,r=t.x<t.next.x?t:t.next,v===s))return r}t=t.next}while(t!==e);if(!r)return null;const l=r,c=r.x,f=r.y;let p=1/0,g;t=r;do s>=t.x&&t.x>=c&&s!==t.x&&Qf(a<f?s:i,a,c,f,a<f?i:s,a,t.x,t.y)&&(g=Math.abs(a-t.y)/(s-t.x),vp(t,n)&&(g<p||g===p&&(t.x>r.x||t.x===r.x&&zN(r,t)))&&(r=t,p=g)),t=t.next;while(t!==l);return r}function zN(n,e){return ci(n.prev,n,e.prev)<0&&ci(e.next,n,n.next)<0}function HN(n,e,t,i){let r=n;do r.z===0&&(r.z=mx(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,GN(r)}function GN(n){let e,t,i,r,s,a,l,c,f=1;do{for(t=n,n=null,s=null,a=0;t;){for(a++,i=t,l=0,e=0;e<f&&(l++,i=i.nextZ,!!i);e++);for(c=f;l>0||c>0&&i;)l!==0&&(c===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,l--):(r=i,i=i.nextZ,c--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,f*=2}while(a>1);return n}function mx(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function VN(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Qf(n,e,t,i,r,s,a,l){return(r-a)*(e-l)>=(n-a)*(s-l)&&(n-a)*(i-l)>=(t-a)*(e-l)&&(t-a)*(s-l)>=(r-a)*(i-l)}function WN(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!jN(n,e)&&(vp(n,e)&&vp(e,n)&&XN(n,e)&&(ci(n.prev,n,e.prev)||ci(n,e.prev,e))||Pv(n,e)&&ci(n.prev,n,n.next)>0&&ci(e.prev,e,e.next)>0)}function ci(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Pv(n,e){return n.x===e.x&&n.y===e.y}function t2(n,e,t,i){const r=gg(ci(n,e,t)),s=gg(ci(n,e,i)),a=gg(ci(t,i,n)),l=gg(ci(t,i,e));return!!(r!==s&&a!==l||r===0&&mg(n,t,e)||s===0&&mg(n,i,e)||a===0&&mg(t,n,i)||l===0&&mg(t,e,i))}function mg(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function gg(n){return n>0?1:n<0?-1:0}function jN(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&t2(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function vp(n,e){return ci(n.prev,n,n.next)<0?ci(n,e,n.next)>=0&&ci(n,n.prev,e)>=0:ci(n,e,n.prev)<0||ci(n,n.next,e)<0}function XN(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function n2(n,e){const t=new gx(n.i,n.x,n.y),i=new gx(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function iM(n,e,t,i){const r=new gx(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function yp(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function gx(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function YN(n,e,t,i){let r=0;for(let s=e,a=t-i;s<t;s+=i)r+=(n[a]-n[s])*(n[s+1]+n[a+1]),a=s;return r}class po{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return po.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];rM(e),sM(i,e);let a=e.length;t.forEach(rM);for(let c=0;c<t.length;c++)r.push(a),a+=t[c].length,sM(i,t[c]);const l=DN.triangulate(i,r);for(let c=0;c<l.length;c+=3)s.push(l.slice(c,c+3));return s}}function rM(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function sM(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Dv extends nn{constructor(e=new mc([new _e(.5,.5),new _e(-.5,.5),new _e(-.5,-.5),new _e(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let l=0,c=e.length;l<c;l++){const f=e[l];a(f)}this.setAttribute("position",new Ct(r,3)),this.setAttribute("uv",new Ct(s,2)),this.computeVertexNormals();function a(l){const c=[],f=t.curveSegments!==void 0?t.curveSegments:12,p=t.steps!==void 0?t.steps:1,g=t.depth!==void 0?t.depth:1;let v=t.bevelEnabled!==void 0?t.bevelEnabled:!0,y=t.bevelThickness!==void 0?t.bevelThickness:.2,S=t.bevelSize!==void 0?t.bevelSize:y-.1,T=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const M=t.extrudePath,A=t.UVGenerator!==void 0?t.UVGenerator:qN;let b,R=!1,I,k,F,z;M&&(b=M.getSpacedPoints(p),R=!0,v=!1,I=M.computeFrenetFrames(p,!1),k=new Q,F=new Q,z=new Q),v||(w=0,y=0,S=0,T=0);const U=l.extractPoints(f);let O=U.shape;const $=U.holes;if(!po.isClockWise(O)){O=O.reverse();for(let Z=0,Fe=$.length;Z<Fe;Z++){const we=$[Z];po.isClockWise(we)&&($[Z]=we.reverse())}}const q=po.triangulateShape(O,$),J=O;for(let Z=0,Fe=$.length;Z<Fe;Z++){const we=$[Z];O=O.concat(we)}function ae(Z,Fe,we){return Fe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Z.clone().addScaledVector(Fe,we)}const oe=O.length,ue=q.length;function V(Z,Fe,we){let ke,Pe,et;const Le=Z.x-Fe.x,Xe=Z.y-Fe.y,Ze=we.x-Z.x,Ae=we.y-Z.y,ht=Le*Le+Xe*Xe,X=Le*Ae-Xe*Ze;if(Math.abs(X)>Number.EPSILON){const H=Math.sqrt(ht),ce=Math.sqrt(Ze*Ze+Ae*Ae),qe=Fe.x-Xe/H,be=Fe.y+Le/H,Ne=we.x-Ae/ce,Ke=we.y+Ze/ce,We=((Ne-qe)*Ae-(Ke-be)*Ze)/(Le*Ae-Xe*Ze);ke=qe+Le*We-Z.x,Pe=be+Xe*We-Z.y;const xe=ke*ke+Pe*Pe;if(xe<=2)return new _e(ke,Pe);et=Math.sqrt(xe/2)}else{let H=!1;Le>Number.EPSILON?Ze>Number.EPSILON&&(H=!0):Le<-Number.EPSILON?Ze<-Number.EPSILON&&(H=!0):Math.sign(Xe)===Math.sign(Ae)&&(H=!0),H?(ke=-Xe,Pe=Le,et=Math.sqrt(ht)):(ke=Le,Pe=Xe,et=Math.sqrt(ht/2))}return new _e(ke/et,Pe/et)}const j=[];for(let Z=0,Fe=J.length,we=Fe-1,ke=Z+1;Z<Fe;Z++,we++,ke++)we===Fe&&(we=0),ke===Fe&&(ke=0),j[Z]=V(J[Z],J[we],J[ke]);const W=[];let L,B=j.concat();for(let Z=0,Fe=$.length;Z<Fe;Z++){const we=$[Z];L=[];for(let ke=0,Pe=we.length,et=Pe-1,Le=ke+1;ke<Pe;ke++,et++,Le++)et===Pe&&(et=0),Le===Pe&&(Le=0),L[ke]=V(we[ke],we[et],we[Le]);W.push(L),B=B.concat(L)}for(let Z=0;Z<w;Z++){const Fe=Z/w,we=y*Math.cos(Fe*Math.PI/2),ke=S*Math.sin(Fe*Math.PI/2)+T;for(let Pe=0,et=J.length;Pe<et;Pe++){const Le=ae(J[Pe],j[Pe],ke);he(Le.x,Le.y,-we)}for(let Pe=0,et=$.length;Pe<et;Pe++){const Le=$[Pe];L=W[Pe];for(let Xe=0,Ze=Le.length;Xe<Ze;Xe++){const Ae=ae(Le[Xe],L[Xe],ke);he(Ae.x,Ae.y,-we)}}}const te=S+T;for(let Z=0;Z<oe;Z++){const Fe=v?ae(O[Z],B[Z],te):O[Z];R?(F.copy(I.normals[0]).multiplyScalar(Fe.x),k.copy(I.binormals[0]).multiplyScalar(Fe.y),z.copy(b[0]).add(F).add(k),he(z.x,z.y,z.z)):he(Fe.x,Fe.y,0)}for(let Z=1;Z<=p;Z++)for(let Fe=0;Fe<oe;Fe++){const we=v?ae(O[Fe],B[Fe],te):O[Fe];R?(F.copy(I.normals[Z]).multiplyScalar(we.x),k.copy(I.binormals[Z]).multiplyScalar(we.y),z.copy(b[Z]).add(F).add(k),he(z.x,z.y,z.z)):he(we.x,we.y,g/p*Z)}for(let Z=w-1;Z>=0;Z--){const Fe=Z/w,we=y*Math.cos(Fe*Math.PI/2),ke=S*Math.sin(Fe*Math.PI/2)+T;for(let Pe=0,et=J.length;Pe<et;Pe++){const Le=ae(J[Pe],j[Pe],ke);he(Le.x,Le.y,g+we)}for(let Pe=0,et=$.length;Pe<et;Pe++){const Le=$[Pe];L=W[Pe];for(let Xe=0,Ze=Le.length;Xe<Ze;Xe++){const Ae=ae(Le[Xe],L[Xe],ke);R?he(Ae.x,Ae.y+b[p-1].y,b[p-1].x+we):he(Ae.x,Ae.y,g+we)}}}ie(),re();function ie(){const Z=r.length/3;if(v){let Fe=0,we=oe*Fe;for(let ke=0;ke<ue;ke++){const Pe=q[ke];ve(Pe[2]+we,Pe[1]+we,Pe[0]+we)}Fe=p+w*2,we=oe*Fe;for(let ke=0;ke<ue;ke++){const Pe=q[ke];ve(Pe[0]+we,Pe[1]+we,Pe[2]+we)}}else{for(let Fe=0;Fe<ue;Fe++){const we=q[Fe];ve(we[2],we[1],we[0])}for(let Fe=0;Fe<ue;Fe++){const we=q[Fe];ve(we[0]+oe*p,we[1]+oe*p,we[2]+oe*p)}}i.addGroup(Z,r.length/3-Z,0)}function re(){const Z=r.length/3;let Fe=0;de(J,Fe),Fe+=J.length;for(let we=0,ke=$.length;we<ke;we++){const Pe=$[we];de(Pe,Fe),Fe+=Pe.length}i.addGroup(Z,r.length/3-Z,1)}function de(Z,Fe){let we=Z.length;for(;--we>=0;){const ke=we;let Pe=we-1;Pe<0&&(Pe=Z.length-1);for(let et=0,Le=p+w*2;et<Le;et++){const Xe=oe*et,Ze=oe*(et+1),Ae=Fe+ke+Xe,ht=Fe+Pe+Xe,X=Fe+Pe+Ze,H=Fe+ke+Ze;Ve(Ae,ht,X,H)}}}function he(Z,Fe,we){c.push(Z),c.push(Fe),c.push(we)}function ve(Z,Fe,we){rt(Z),rt(Fe),rt(we);const ke=r.length/3,Pe=A.generateTopUV(i,r,ke-3,ke-2,ke-1);Ue(Pe[0]),Ue(Pe[1]),Ue(Pe[2])}function Ve(Z,Fe,we,ke){rt(Z),rt(Fe),rt(ke),rt(Fe),rt(we),rt(ke);const Pe=r.length/3,et=A.generateSideWallUV(i,r,Pe-6,Pe-3,Pe-2,Pe-1);Ue(et[0]),Ue(et[1]),Ue(et[3]),Ue(et[1]),Ue(et[2]),Ue(et[3])}function rt(Z){r.push(c[Z*3+0]),r.push(c[Z*3+1]),r.push(c[Z*3+2])}function Ue(Z){s.push(Z.x),s.push(Z.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return ZN(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,a=e.shapes.length;s<a;s++){const l=t[e.shapes[s]];i.push(l)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new S1[r.type]().fromJSON(r)),new Dv(i,e.options)}}const qN={generateTopUV:function(n,e,t,i,r){const s=e[t*3],a=e[t*3+1],l=e[i*3],c=e[i*3+1],f=e[r*3],p=e[r*3+1];return[new _e(s,a),new _e(l,c),new _e(f,p)]},generateSideWallUV:function(n,e,t,i,r,s){const a=e[t*3],l=e[t*3+1],c=e[t*3+2],f=e[i*3],p=e[i*3+1],g=e[i*3+2],v=e[r*3],y=e[r*3+1],S=e[r*3+2],T=e[s*3],w=e[s*3+1],M=e[s*3+2];return Math.abs(l-p)<Math.abs(a-f)?[new _e(a,1-c),new _e(f,1-g),new _e(v,1-S),new _e(T,1-M)]:[new _e(l,1-c),new _e(p,1-g),new _e(y,1-S),new _e(w,1-M)]}};function ZN(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Lv extends su{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lv(e.radius,e.detail)}}class Np extends su{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Np(e.radius,e.detail)}}class Iv extends nn{constructor(e=.5,t=1,i=32,r=1,s=0,a=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:a},i=Math.max(3,i),r=Math.max(1,r);const l=[],c=[],f=[],p=[];let g=e;const v=(t-e)/r,y=new Q,S=new _e;for(let T=0;T<=r;T++){for(let w=0;w<=i;w++){const M=s+w/i*a;y.x=g*Math.cos(M),y.y=g*Math.sin(M),c.push(y.x,y.y,y.z),f.push(0,0,1),S.x=(y.x/t+1)/2,S.y=(y.y/t+1)/2,p.push(S.x,S.y)}g+=v}for(let T=0;T<r;T++){const w=T*(i+1);for(let M=0;M<i;M++){const A=M+w,b=A,R=A+i+1,I=A+i+2,k=A+1;l.push(b,R,k),l.push(R,I,k)}}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(f,3)),this.setAttribute("uv",new Ct(p,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Iv(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Uv extends nn{constructor(e=new mc([new _e(0,.5),new _e(-.5,-.5),new _e(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],a=[];let l=0,c=0;if(Array.isArray(e)===!1)f(e);else for(let p=0;p<e.length;p++)f(e[p]),this.addGroup(l,c,p),l+=c,c=0;this.setIndex(i),this.setAttribute("position",new Ct(r,3)),this.setAttribute("normal",new Ct(s,3)),this.setAttribute("uv",new Ct(a,2));function f(p){const g=r.length/3,v=p.extractPoints(t);let y=v.shape;const S=v.holes;po.isClockWise(y)===!1&&(y=y.reverse());for(let w=0,M=S.length;w<M;w++){const A=S[w];po.isClockWise(A)===!0&&(S[w]=A.reverse())}const T=po.triangulateShape(y,S);for(let w=0,M=S.length;w<M;w++){const A=S[w];y=y.concat(A)}for(let w=0,M=y.length;w<M;w++){const A=y[w];r.push(A.x,A.y,0),s.push(0,0,1),a.push(A.x,A.y)}for(let w=0,M=T.length;w<M;w++){const A=T[w],b=A[0]+g,R=A[1]+g,I=A[2]+g;i.push(b,R,I),c+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return KN(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const a=t[e.shapes[r]];i.push(a)}return new Uv(i,e.curveSegments)}}function KN(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Fp extends nn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,a=0,l=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:a,thetaLength:l},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const c=Math.min(a+l,Math.PI);let f=0;const p=[],g=new Q,v=new Q,y=[],S=[],T=[],w=[];for(let M=0;M<=i;M++){const A=[],b=M/i;let R=0;M===0&&a===0?R=.5/t:M===i&&c===Math.PI&&(R=-.5/t);for(let I=0;I<=t;I++){const k=I/t;g.x=-e*Math.cos(r+k*s)*Math.sin(a+b*l),g.y=e*Math.cos(a+b*l),g.z=e*Math.sin(r+k*s)*Math.sin(a+b*l),S.push(g.x,g.y,g.z),v.copy(g).normalize(),T.push(v.x,v.y,v.z),w.push(k+R,1-b),A.push(f++)}p.push(A)}for(let M=0;M<i;M++)for(let A=0;A<t;A++){const b=p[M][A+1],R=p[M][A],I=p[M+1][A],k=p[M+1][A+1];(M!==0||a>0)&&y.push(b,R,k),(M!==i-1||c<Math.PI)&&y.push(R,I,k)}this.setIndex(y),this.setAttribute("position",new Ct(S,3)),this.setAttribute("normal",new Ct(T,3)),this.setAttribute("uv",new Ct(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fp(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nv extends su{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nv(e.radius,e.detail)}}class Fv extends nn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],f=[],p=new Q,g=new Q,v=new Q;for(let y=0;y<=i;y++)for(let S=0;S<=r;S++){const T=S/r*s,w=y/i*Math.PI*2;g.x=(e+t*Math.cos(w))*Math.cos(T),g.y=(e+t*Math.cos(w))*Math.sin(T),g.z=t*Math.sin(w),l.push(g.x,g.y,g.z),p.x=e*Math.cos(T),p.y=e*Math.sin(T),v.subVectors(g,p).normalize(),c.push(v.x,v.y,v.z),f.push(S/r),f.push(y/i)}for(let y=1;y<=i;y++)for(let S=1;S<=r;S++){const T=(r+1)*y+S-1,w=(r+1)*(y-1)+S-1,M=(r+1)*(y-1)+S,A=(r+1)*y+S;a.push(T,w,A),a.push(w,M,A)}this.setIndex(a),this.setAttribute("position",new Ct(l,3)),this.setAttribute("normal",new Ct(c,3)),this.setAttribute("uv",new Ct(f,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fv(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class kv extends nn{constructor(e=1,t=.4,i=64,r=8,s=2,a=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:a},i=Math.floor(i),r=Math.floor(r);const l=[],c=[],f=[],p=[],g=new Q,v=new Q,y=new Q,S=new Q,T=new Q,w=new Q,M=new Q;for(let b=0;b<=i;++b){const R=b/i*s*Math.PI*2;A(R,s,a,e,y),A(R+.01,s,a,e,S),w.subVectors(S,y),M.addVectors(S,y),T.crossVectors(w,M),M.crossVectors(T,w),T.normalize(),M.normalize();for(let I=0;I<=r;++I){const k=I/r*Math.PI*2,F=-t*Math.cos(k),z=t*Math.sin(k);g.x=y.x+(F*M.x+z*T.x),g.y=y.y+(F*M.y+z*T.y),g.z=y.z+(F*M.z+z*T.z),c.push(g.x,g.y,g.z),v.subVectors(g,y).normalize(),f.push(v.x,v.y,v.z),p.push(b/i),p.push(I/r)}}for(let b=1;b<=i;b++)for(let R=1;R<=r;R++){const I=(r+1)*(b-1)+(R-1),k=(r+1)*b+(R-1),F=(r+1)*b+R,z=(r+1)*(b-1)+R;l.push(I,k,z),l.push(k,F,z)}this.setIndex(l),this.setAttribute("position",new Ct(c,3)),this.setAttribute("normal",new Ct(f,3)),this.setAttribute("uv",new Ct(p,2));function A(b,R,I,k,F){const z=Math.cos(b),U=Math.sin(b),O=I/R*b,$=Math.cos(O);F.x=k*(2+$)*.5*z,F.y=k*(2+$)*U*.5,F.z=k*Math.sin(O)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kv(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Ov extends nn{constructor(e=new y1(new Q(-1,-1,0),new Q(-1,1,0),new Q(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const a=e.computeFrenetFrames(t,s);this.tangents=a.tangents,this.normals=a.normals,this.binormals=a.binormals;const l=new Q,c=new Q,f=new _e;let p=new Q;const g=[],v=[],y=[],S=[];T(),this.setIndex(S),this.setAttribute("position",new Ct(g,3)),this.setAttribute("normal",new Ct(v,3)),this.setAttribute("uv",new Ct(y,2));function T(){for(let b=0;b<t;b++)w(b);w(s===!1?t:0),A(),M()}function w(b){p=e.getPointAt(b/t,p);const R=a.normals[b],I=a.binormals[b];for(let k=0;k<=r;k++){const F=k/r*Math.PI*2,z=Math.sin(F),U=-Math.cos(F);c.x=U*R.x+z*I.x,c.y=U*R.y+z*I.y,c.z=U*R.z+z*I.z,c.normalize(),v.push(c.x,c.y,c.z),l.x=p.x+i*c.x,l.y=p.y+i*c.y,l.z=p.z+i*c.z,g.push(l.x,l.y,l.z)}}function M(){for(let b=1;b<=t;b++)for(let R=1;R<=r;R++){const I=(r+1)*(b-1)+(R-1),k=(r+1)*b+(R-1),F=(r+1)*b+R,z=(r+1)*(b-1)+R;S.push(I,k,z),S.push(k,F,z)}}function A(){for(let b=0;b<=t;b++)for(let R=0;R<=r;R++)f.x=b/t,f.y=R/r,y.push(f.x,f.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Ov(new S1[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class i2 extends nn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new Q,s=new Q;if(e.index!==null){const a=e.attributes.position,l=e.index;let c=e.groups;c.length===0&&(c=[{start:0,count:l.count,materialIndex:0}]);for(let f=0,p=c.length;f<p;++f){const g=c[f],v=g.start,y=g.count;for(let S=v,T=v+y;S<T;S+=3)for(let w=0;w<3;w++){const M=l.getX(S+w),A=l.getX(S+(w+1)%3);r.fromBufferAttribute(a,M),s.fromBufferAttribute(a,A),aM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const a=e.attributes.position;for(let l=0,c=a.count/3;l<c;l++)for(let f=0;f<3;f++){const p=3*l+f,g=3*l+(f+1)%3;r.fromBufferAttribute(a,p),s.fromBufferAttribute(a,g),aM(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ct(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function aM(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var oM=Object.freeze({__proto__:null,BoxGeometry:Mc,CapsuleGeometry:bv,CircleGeometry:Av,ConeGeometry:Cv,CylinderGeometry:gh,DodecahedronGeometry:Rv,EdgesGeometry:$E,ExtrudeGeometry:Dv,IcosahedronGeometry:Lv,LatheGeometry:Up,OctahedronGeometry:Np,PlaneGeometry:ru,PolyhedronGeometry:su,RingGeometry:Iv,ShapeGeometry:Uv,SphereGeometry:Fp,TetrahedronGeometry:Nv,TorusGeometry:Fv,TorusKnotGeometry:kv,TubeGeometry:Ov,WireframeGeometry:i2});class r2 extends hr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Je(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class s2 extends tn{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class _1 extends hr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.type="MeshStandardMaterial",this.color=new Je(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class a2 extends _1{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new _e(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Je(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Je(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Je(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class o2 extends hr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Je(16777215),this.specular=new Je(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class l2 extends hr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Je(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class M1 extends hr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class u2 extends hr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Je(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Je(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.combine=Rp,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class c2 extends hr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Je(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=cl,this.normalScale=new _e(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class f2 extends ts{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function na(n,e,t){return w1(n)?new n.constructor(n.subarray(e,t!==void 0?t:n.length)):n.slice(e,t)}function oc(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function w1(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function h2(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function vx(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,a=0;a!==i;++s){const l=t[s]*e;for(let c=0;c!==e;++c)r[a++]=n[l+c]}return r}function T1(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let a=s[i];if(a!==void 0)if(Array.isArray(a))do a=s[i],a!==void 0&&(e.push(s.time),t.push.apply(t,a)),s=n[r++];while(s!==void 0);else if(a.toArray!==void 0)do a=s[i],a!==void 0&&(e.push(s.time),a.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do a=s[i],a!==void 0&&(e.push(s.time),t.push(a)),s=n[r++];while(s!==void 0)}function QN(n,e,t,i,r=30){const s=n.clone();s.name=e;const a=[];for(let c=0;c<s.tracks.length;++c){const f=s.tracks[c],p=f.getValueSize(),g=[],v=[];for(let y=0;y<f.times.length;++y){const S=f.times[y]*r;if(!(S<t||S>=i)){g.push(f.times[y]);for(let T=0;T<p;++T)v.push(f.values[y*p+T])}}g.length!==0&&(f.times=oc(g,f.times.constructor),f.values=oc(v,f.values.constructor),a.push(f))}s.tracks=a;let l=1/0;for(let c=0;c<s.tracks.length;++c)l>s.tracks[c].times[0]&&(l=s.tracks[c].times[0]);for(let c=0;c<s.tracks.length;++c)s.tracks[c].shift(-1*l);return s.resetDuration(),s}function JN(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let a=0;a<r;++a){const l=t.tracks[a],c=l.ValueTypeName;if(c==="bool"||c==="string")continue;const f=n.tracks.find(function(M){return M.name===l.name&&M.ValueTypeName===c});if(f===void 0)continue;let p=0;const g=l.getValueSize();l.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(p=g/3);let v=0;const y=f.getValueSize();f.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(v=y/3);const S=l.times.length-1;let T;if(s<=l.times[0]){const M=p,A=g-p;T=na(l.values,M,A)}else if(s>=l.times[S]){const M=S*g+p,A=M+g-p;T=na(l.values,M,A)}else{const M=l.createInterpolant(),A=p,b=g-p;M.evaluate(s),T=na(M.resultBuffer,A,b)}c==="quaternion"&&new Qi().fromArray(T).normalize().conjugate().toArray(T);const w=f.times.length;for(let M=0;M<w;++M){const A=M*y+v;if(c==="quaternion")Qi.multiplyQuaternionsFlat(f.values,A,T,0,f.values,A);else{const b=y-v*2;for(let R=0;R<b;++R)f.values[A+R]-=T[R]}}}return n.blendMode=t1,n}const $N={arraySlice:na,convertArray:oc,isTypedArray:w1,getKeyframeOrder:h2,sortedArray:vx,flattenJSON:T1,subclip:QN,makeClipAdditive:JN};class kp{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let a;n:{i:if(!(e<r)){for(let l=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===l)break;if(s=r,r=t[++i],e<r)break t}a=t.length;break n}if(!(e>=s)){const l=t[1];e<l&&(i=2,s=l);for(let c=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===c)break;if(r=s,s=t[--i-1],e>=s)break t}a=i,i=0;break n}break e}for(;i<a;){const l=i+a>>>1;e<t[l]?a=l:i=l+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let a=0;a!==r;++a)t[a]=i[s+a];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class d2 extends kp{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:rc,endingEnd:rc}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,a=e+1,l=r[s],c=r[a];if(l===void 0)switch(this.getSettings_().endingStart){case sc:s=e,l=2*t-i;break;case fp:s=r.length-2,l=t+r[s]-r[s+1];break;default:s=e,l=i}if(c===void 0)switch(this.getSettings_().endingEnd){case sc:a=e,c=2*i-t;break;case fp:a=1,c=i+r[1]-r[0];break;default:a=e-1,c=t}const f=(i-t)*.5,p=this.valueSize;this._weightPrev=f/(t-l),this._weightNext=f/(c-i),this._offsetPrev=s*p,this._offsetNext=a*p}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=this._offsetPrev,g=this._offsetNext,v=this._weightPrev,y=this._weightNext,S=(i-t)/(r-t),T=S*S,w=T*S,M=-v*w+2*v*T-v*S,A=(1+v)*w+(-1.5-2*v)*T+(-.5+v)*S+1,b=(-1-y)*w+(1.5+y)*T+.5*S,R=y*w-y*T;for(let I=0;I!==l;++I)s[I]=M*a[p+I]+A*a[f+I]+b*a[c+I]+R*a[g+I];return s}}class E1 extends kp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=e*l,f=c-l,p=(i-t)/(r-t),g=1-p;for(let v=0;v!==l;++v)s[v]=a[f+v]*g+a[c+v]*p;return s}}class p2 extends kp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Wa{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=oc(t,this.TimeBufferType),this.values=oc(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:oc(e.times,Array),values:oc(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new p2(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new E1(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new d2(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case up:t=this.InterpolantFactoryMethodDiscrete;break;case cp:t=this.InterpolantFactoryMethodLinear;break;case zg:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return up;case this.InterpolantFactoryMethodLinear:return cp;case this.InterpolantFactoryMethodSmooth:return zg}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,a=r-1;for(;s!==r&&i[s]<e;)++s;for(;a!==-1&&i[a]>t;)--a;if(++a,s!==0||a!==r){s>=a&&(a=Math.max(a,1),s=a-1);const l=this.getValueSize();this.times=na(i,s,a),this.values=na(this.values,s*l,a*l)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let a=null;for(let l=0;l!==s;l++){const c=i[l];if(typeof c=="number"&&isNaN(c)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,l,c),e=!1;break}if(a!==null&&a>c){console.error("THREE.KeyframeTrack: Out of order keys.",this,l,c,a),e=!1;break}a=c}if(r!==void 0&&w1(r))for(let l=0,c=r.length;l!==c;++l){const f=r[l];if(isNaN(f)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,l,f),e=!1;break}}return e}optimize(){const e=na(this.times),t=na(this.values),i=this.getValueSize(),r=this.getInterpolation()===zg,s=e.length-1;let a=1;for(let l=1;l<s;++l){let c=!1;const f=e[l],p=e[l+1];if(f!==p&&(l!==1||f!==e[0]))if(r)c=!0;else{const g=l*i,v=g-i,y=g+i;for(let S=0;S!==i;++S){const T=t[g+S];if(T!==t[v+S]||T!==t[y+S]){c=!0;break}}}if(c){if(l!==a){e[a]=e[l];const g=l*i,v=a*i;for(let y=0;y!==i;++y)t[v+y]=t[g+y]}++a}}if(s>0){e[a]=e[s];for(let l=s*i,c=a*i,f=0;f!==i;++f)t[c+f]=t[l+f];++a}return a!==e.length?(this.times=na(e,0,a),this.values=na(t,0,a*i)):(this.times=e,this.values=t),this}clone(){const e=na(this.times,0),t=na(this.values,0),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Wa.prototype.TimeBufferType=Float32Array;Wa.prototype.ValueBufferType=Float32Array;Wa.prototype.DefaultInterpolation=cp;class wc extends Wa{}wc.prototype.ValueTypeName="bool";wc.prototype.ValueBufferType=Array;wc.prototype.DefaultInterpolation=up;wc.prototype.InterpolantFactoryMethodLinear=void 0;wc.prototype.InterpolantFactoryMethodSmooth=void 0;class b1 extends Wa{}b1.prototype.ValueTypeName="color";class xp extends Wa{}xp.prototype.ValueTypeName="number";class m2 extends kp{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,a=this.sampleValues,l=this.valueSize,c=(i-t)/(r-t);let f=e*l;for(let p=f+l;f!==p;f+=4)Qi.slerpFlat(s,0,a,f-l,a,f,c);return s}}class vh extends Wa{InterpolantFactoryMethodLinear(e){return new m2(this.times,this.values,this.getValueSize(),e)}}vh.prototype.ValueTypeName="quaternion";vh.prototype.DefaultInterpolation=cp;vh.prototype.InterpolantFactoryMethodSmooth=void 0;class Tc extends Wa{}Tc.prototype.ValueTypeName="string";Tc.prototype.ValueBufferType=Array;Tc.prototype.DefaultInterpolation=up;Tc.prototype.InterpolantFactoryMethodLinear=void 0;Tc.prototype.InterpolantFactoryMethodSmooth=void 0;class Sp extends Wa{}Sp.prototype.ValueTypeName="vector";class _p{constructor(e,t=-1,i,r=pv){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ks(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let a=0,l=i.length;a!==l;++a)t.push(tF(i[a]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,a=i.length;s!==a;++s)t.push(Wa.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,a=[];for(let l=0;l<s;l++){let c=[],f=[];c.push((l+s-1)%s,l,(l+1)%s),f.push(0,1,0);const p=h2(c);c=vx(c,1,p),f=vx(f,1,p),!r&&c[0]===0&&(c.push(s),f.push(f[0])),a.push(new xp(".morphTargetInfluences["+t[l].name+"]",c,f).scale(1/i))}return new this(e,-1,a)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let l=0,c=e.length;l<c;l++){const f=e[l],p=f.name.match(s);if(p&&p.length>1){const g=p[1];let v=r[g];v||(r[g]=v=[]),v.push(f)}}const a=[];for(const l in r)a.push(this.CreateFromMorphTargetSequence(l,r[l],t,i));return a}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(g,v,y,S,T){if(y.length!==0){const w=[],M=[];T1(y,w,M,S),w.length!==0&&T.push(new g(v,w,M))}},r=[],s=e.name||"default",a=e.fps||30,l=e.blendMode;let c=e.length||-1;const f=e.hierarchy||[];for(let g=0;g<f.length;g++){const v=f[g].keys;if(!(!v||v.length===0))if(v[0].morphTargets){const y={};let S;for(S=0;S<v.length;S++)if(v[S].morphTargets)for(let T=0;T<v[S].morphTargets.length;T++)y[v[S].morphTargets[T]]=-1;for(const T in y){const w=[],M=[];for(let A=0;A!==v[S].morphTargets.length;++A){const b=v[S];w.push(b.time),M.push(b.morphTarget===T?1:0)}r.push(new xp(".morphTargetInfluence["+T+"]",w,M))}c=y.length*a}else{const y=".bones["+t[g].name+"]";i(Sp,y+".position",v,"pos",r),i(vh,y+".quaternion",v,"rot",r),i(Sp,y+".scale",v,"scl",r)}}return r.length===0?null:new this(s,c,r,l)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function eF(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return xp;case"vector":case"vector2":case"vector3":case"vector4":return Sp;case"color":return b1;case"quaternion":return vh;case"bool":case"boolean":return wc;case"string":return Tc}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function tF(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=eF(n.type);if(n.times===void 0){const t=[],i=[];T1(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Sc={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class A1{constructor(e,t,i){const r=this;let s=!1,a=0,l=0,c;const f=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(p){l++,s===!1&&r.onStart!==void 0&&r.onStart(p,a,l),s=!0},this.itemEnd=function(p){a++,r.onProgress!==void 0&&r.onProgress(p,a,l),a===l&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(p){r.onError!==void 0&&r.onError(p)},this.resolveURL=function(p){return c?c(p):p},this.setURLModifier=function(p){return c=p,this},this.addHandler=function(p,g){return f.push(p,g),this},this.removeHandler=function(p){const g=f.indexOf(p);return g!==-1&&f.splice(g,2),this},this.getHandler=function(p){for(let g=0,v=f.length;g<v;g+=2){const y=f[g],S=f[g+1];if(y.global&&(y.lastIndex=0),y.test(p))return S}return null}}}const g2=new A1;class Ss{constructor(e){this.manager=e!==void 0?e:g2,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}}Ss.DEFAULT_MATERIAL_NAME="__DEFAULT";const tl={};class nF extends Error{constructor(e,t){super(e),this.response=t}}class ll extends Ss{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Sc.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(tl[e]!==void 0){tl[e].push({onLoad:t,onProgress:i,onError:r});return}tl[e]=[],tl[e].push({onLoad:t,onProgress:i,onError:r});const a=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),l=this.mimeType,c=this.responseType;fetch(a).then(f=>{if(f.status===200||f.status===0){if(f.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||f.body===void 0||f.body.getReader===void 0)return f;const p=tl[e],g=f.body.getReader(),v=f.headers.get("Content-Length")||f.headers.get("X-File-Size"),y=v?parseInt(v):0,S=y!==0;let T=0;const w=new ReadableStream({start(M){A();function A(){g.read().then(({done:b,value:R})=>{if(b)M.close();else{T+=R.byteLength;const I=new ProgressEvent("progress",{lengthComputable:S,loaded:T,total:y});for(let k=0,F=p.length;k<F;k++){const z=p[k];z.onProgress&&z.onProgress(I)}M.enqueue(R),A()}})}}});return new Response(w)}else throw new nF(`fetch for "${f.url}" responded with ${f.status}: ${f.statusText}`,f)}).then(f=>{switch(c){case"arraybuffer":return f.arrayBuffer();case"blob":return f.blob();case"document":return f.text().then(p=>new DOMParser().parseFromString(p,l));case"json":return f.json();default:if(l===void 0)return f.text();{const g=/charset="?([^;"\s]*)"?/i.exec(l),v=g&&g[1]?g[1].toLowerCase():void 0,y=new TextDecoder(v);return f.arrayBuffer().then(S=>y.decode(S))}}}).then(f=>{Sc.add(e,f);const p=tl[e];delete tl[e];for(let g=0,v=p.length;g<v;g++){const y=p[g];y.onLoad&&y.onLoad(f)}}).catch(f=>{const p=tl[e];if(p===void 0)throw this.manager.itemError(e),f;delete tl[e];for(let g=0,v=p.length;g<v;g++){const y=p[g];y.onError&&y.onError(f)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class iF extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new ll(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=_p.parse(e[i]);t.push(r)}return t}}class rF extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=this,a=[],l=new Tv,c=new ll(this.manager);c.setPath(this.path),c.setResponseType("arraybuffer"),c.setRequestHeader(this.requestHeader),c.setWithCredentials(s.withCredentials);let f=0;function p(g){c.load(e[g],function(v){const y=s.parse(v,!0);a[g]={width:y.width,height:y.height,format:y.format,mipmaps:y.mipmaps},f+=1,f===6&&(y.mipmapCount===1&&(l.minFilter=Et),l.image=a,l.format=y.format,l.needsUpdate=!0,t&&t(l))},i,r)}if(Array.isArray(e))for(let g=0,v=e.length;g<v;++g)p(g);else c.load(e,function(g){const v=s.parse(g,!0);if(v.isCubemap){const y=v.mipmaps.length/v.mipmapCount;for(let S=0;S<y;S++){a[S]={mipmaps:[]};for(let T=0;T<v.mipmapCount;T++)a[S].mipmaps.push(v.mipmaps[S*v.mipmapCount+T]),a[S].format=v.format,a[S].width=v.width,a[S].height=v.height}l.image=a}else l.image.width=v.width,l.image.height=v.height,l.mipmaps=v.mipmaps;v.mipmapCount===1&&(l.minFilter=Et),l.format=v.format,l.needsUpdate=!0,t&&t(l)},i,r);return l}}class Mp extends Ss{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Sc.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l=pp("img");function c(){p(),Sc.add(e,this),t&&t(this),s.manager.itemEnd(e)}function f(g){p(),r&&r(g),s.manager.itemError(e),s.manager.itemEnd(e)}function p(){l.removeEventListener("load",c,!1),l.removeEventListener("error",f,!1)}return l.addEventListener("load",c,!1),l.addEventListener("error",f,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(l.crossOrigin=this.crossOrigin),s.manager.itemStart(e),l.src=e,l}}class sF extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=new Pp;s.colorSpace=yt;const a=new Mp(this.manager);a.setCrossOrigin(this.crossOrigin),a.setPath(this.path);let l=0;function c(f){a.load(e[f],function(p){s.images[f]=p,l++,l===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let f=0;f<e.length;++f)c(f);return s}}class aF extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new ho,l=new ll(this.manager);return l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setPath(this.path),l.setWithCredentials(s.withCredentials),l.load(e,function(c){let f;try{f=s.parse(c)}catch(p){if(r!==void 0)r(p);else{console.error(p);return}}if(!f)return r();f.image!==void 0?a.image=f.image:f.data!==void 0&&(a.image.width=f.width,a.image.height=f.height,a.image.data=f.data),a.wrapS=f.wrapS!==void 0?f.wrapS:qi,a.wrapT=f.wrapT!==void 0?f.wrapT:qi,a.magFilter=f.magFilter!==void 0?f.magFilter:Et,a.minFilter=f.minFilter!==void 0?f.minFilter:Et,a.anisotropy=f.anisotropy!==void 0?f.anisotropy:1,f.colorSpace!==void 0?a.colorSpace=f.colorSpace:f.encoding!==void 0&&(a.encoding=f.encoding),f.flipY!==void 0&&(a.flipY=f.flipY),f.format!==void 0&&(a.format=f.format),f.type!==void 0&&(a.type=f.type),f.mipmaps!==void 0&&(a.mipmaps=f.mipmaps,a.minFilter=tu),f.mipmapCount===1&&(a.minFilter=Et),f.generateMipmaps!==void 0&&(a.generateMipmaps=f.generateMipmaps),a.needsUpdate=!0,t&&t(a,f)},i,r),a}}class v2 extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=new Qn,a=new Mp(this.manager);return a.setCrossOrigin(this.crossOrigin),a.setPath(this.path),a.load(e,function(l){s.image=l,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class au extends Mn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Je(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),t}}class y2 extends au{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Je(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const sy=new vt,lM=new Q,uM=new Q;class C1{constructor(e){this.camera=e,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new _e(512,512),this.map=null,this.mapPass=null,this.matrix=new vt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new vv,this._frameExtents=new _e(1,1),this._viewportCount=1,this._viewports=[new hn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;lM.setFromMatrixPosition(e.matrixWorld),t.position.copy(lM),uM.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(uM),t.updateMatrixWorld(),sy.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(sy),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(sy)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class oF extends C1{constructor(){super(new ui(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=ih*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class x2 extends au{constructor(e,t,i=0,r=Math.PI/3,s=0,a=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=a,this.map=null,this.shadow=new oF}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const cM=new vt,Dd=new Q,ay=new Q;class lF extends C1{constructor(){super(new ui(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new _e(4,2),this._viewportCount=6,this._viewports=[new hn(2,1,1,1),new hn(0,1,1,1),new hn(3,1,1,1),new hn(1,1,1,1),new hn(3,0,1,1),new hn(1,0,1,1)],this._cubeDirections=[new Q(1,0,0),new Q(-1,0,0),new Q(0,0,1),new Q(0,0,-1),new Q(0,1,0),new Q(0,-1,0)],this._cubeUps=[new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,1,0),new Q(0,0,1),new Q(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Dd.setFromMatrixPosition(e.matrixWorld),i.position.copy(Dd),ay.copy(i.position),ay.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(ay),i.updateMatrixWorld(),r.makeTranslation(-Dd.x,-Dd.y,-Dd.z),cM.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(cM)}}class S2 extends au{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new lF}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class uF extends C1{constructor(){super(new ph(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class _2 extends au{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Mn.DEFAULT_UP),this.updateMatrix(),this.target=new Mn,this.shadow=new uF}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class M2 extends au{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class w2 extends au{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class T2{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new Q)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.282095),t.addScaledVector(a[1],.488603*r),t.addScaledVector(a[2],.488603*s),t.addScaledVector(a[3],.488603*i),t.addScaledVector(a[4],1.092548*(i*r)),t.addScaledVector(a[5],1.092548*(r*s)),t.addScaledVector(a[6],.315392*(3*s*s-1)),t.addScaledVector(a[7],1.092548*(i*s)),t.addScaledVector(a[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,a=this.coefficients;return t.copy(a[0]).multiplyScalar(.886227),t.addScaledVector(a[1],2*.511664*r),t.addScaledVector(a[2],2*.511664*s),t.addScaledVector(a[3],2*.511664*i),t.addScaledVector(a[4],2*.429043*i*r),t.addScaledVector(a[5],2*.429043*r*s),t.addScaledVector(a[6],.743125*s*s-.247708),t.addScaledVector(a[7],2*.429043*i*s),t.addScaledVector(a[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class Bv extends au{constructor(e=new T2,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class zv extends Ss{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,a=new ll(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=zv.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Je().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==1&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const a=e.uniforms[s];switch(r.uniforms[s]={},a.type){case"t":r.uniforms[s].value=i(a.value);break;case"c":r.uniforms[s].value=new Je().setHex(a.value);break;case"v2":r.uniforms[s].value=new _e().fromArray(a.value);break;case"v3":r.uniforms[s].value=new Q().fromArray(a.value);break;case"v4":r.uniforms[s].value=new hn().fromArray(a.value);break;case"m3":r.uniforms[s].value=new sn().fromArray(a.value);break;case"m4":r.uniforms[s].value=new vt().fromArray(a.value);break;default:r.uniforms[s].value=a.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new _e().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new _e().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}static createMaterialFromType(e){const t={ShadowMaterial:r2,SpriteMaterial:h1,RawShaderMaterial:s2,ShaderMaterial:tn,PointsMaterial:p1,MeshPhysicalMaterial:a2,MeshStandardMaterial:_1,MeshPhongMaterial:o2,MeshToonMaterial:l2,MeshNormalMaterial:M1,MeshLambertMaterial:u2,MeshDepthMaterial:Dp,MeshDistanceMaterial:xv,MeshBasicMaterial:fl,MeshMatcapMaterial:c2,LineDashedMaterial:f2,LineBasicMaterial:ts,Material:hr};return new t[e]}}class yx{static decodeText(e){if(typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class R1 extends nn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class E2 extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new ll(s.manager);a.setPath(s.path),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(l){try{t(s.parse(JSON.parse(l)))}catch(c){r?r(c):console.error(c),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(y,S){if(t[S]!==void 0)return t[S];const w=y.interleavedBuffers[S],M=s(y,w.buffer),A=qf(w.type,M),b=new Mv(A,w.stride);return b.uuid=w.uuid,t[S]=b,b}function s(y,S){if(i[S]!==void 0)return i[S];const w=y.arrayBuffers[S],M=new Uint32Array(w).buffer;return i[S]=M,M}const a=e.isInstancedBufferGeometry?new R1:new nn,l=e.data.index;if(l!==void 0){const y=qf(l.type,l.array);a.setIndex(new cn(y,1))}const c=e.data.attributes;for(const y in c){const S=c[y];let T;if(S.isInterleavedBufferAttribute){const w=r(e.data,S.data);T=new vc(w,S.itemSize,S.offset,S.normalized)}else{const w=qf(S.type,S.array),M=S.isInstancedBufferAttribute?yc:cn;T=new M(w,S.itemSize,S.normalized)}S.name!==void 0&&(T.name=S.name),S.usage!==void 0&&T.setUsage(S.usage),S.updateRange!==void 0&&(T.updateRange.offset=S.updateRange.offset,T.updateRange.count=S.updateRange.count),a.setAttribute(y,T)}const f=e.data.morphAttributes;if(f)for(const y in f){const S=f[y],T=[];for(let w=0,M=S.length;w<M;w++){const A=S[w];let b;if(A.isInterleavedBufferAttribute){const R=r(e.data,A.data);b=new vc(R,A.itemSize,A.offset,A.normalized)}else{const R=qf(A.type,A.array);b=new cn(R,A.itemSize,A.normalized)}A.name!==void 0&&(b.name=A.name),T.push(b)}a.morphAttributes[y]=T}e.data.morphTargetsRelative&&(a.morphTargetsRelative=!0);const g=e.data.groups||e.data.drawcalls||e.data.offsets;if(g!==void 0)for(let y=0,S=g.length;y!==S;++y){const T=g[y];a.addGroup(T.start,T.count,T.materialIndex)}const v=e.data.boundingSphere;if(v!==void 0){const y=new Q;v.center!==void 0&&y.fromArray(v.center),a.boundingSphere=new Os(y,v.radius)}return e.name&&(a.name=e.name),e.userData&&(a.userData=e.userData),a}}class cF extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=this,a=this.path===""?yx.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||a;const l=new ll(this.manager);l.setPath(this.path),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(c){let f=null;try{f=JSON.parse(c)}catch(g){r!==void 0&&r(g),console.error("THREE:ObjectLoader: Can't parse "+e+".",g.message);return}const p=f.metadata;if(p===void 0||p.type===void 0||p.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(f,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?yx.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new ll(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const a=await s.loadAsync(e,t),l=JSON.parse(a),c=l.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(l)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),a=this.parseImages(e.images,function(){t!==void 0&&t(f)}),l=this.parseTextures(e.textures,a),c=this.parseMaterials(e.materials,l),f=this.parseObject(e.object,s,c,l,i),p=this.parseSkeletons(e.skeletons,f);if(this.bindSkeletons(f,p),t!==void 0){let g=!1;for(const v in a)if(a[v].data instanceof HTMLImageElement){g=!0;break}g===!1&&t(f)}return f}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),a=this.parseTextures(e.textures,s),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,r,l,a,t),f=this.parseSkeletons(e.skeletons,c);return this.bindSkeletons(c,f),c}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new mc().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=new wv().fromJSON(e[s],r);i[l.uuid]=l}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new E2;for(let s=0,a=e.length;s<a;s++){let l;const c=e[s];switch(c.type){case"BufferGeometry":case"InstancedBufferGeometry":l=r.parse(c);break;default:c.type in oM?l=oM[c.type].fromJSON(c,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${c.type}"`)}l.uuid=c.uuid,c.name!==void 0&&(l.name=c.name),c.userData!==void 0&&(l.userData=c.userData),i[c.uuid]=l}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new zv;s.setTextures(t);for(let a=0,l=e.length;a<l;a++){const c=e[a];i[c.uuid]===void 0&&(i[c.uuid]=s.parse(c)),r[c.uuid]=i[c.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=_p.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function a(c){return i.manager.itemStart(c),s.load(c,function(){i.manager.itemEnd(c)},void 0,function(){i.manager.itemError(c),i.manager.itemEnd(c)})}function l(c){if(typeof c=="string"){const f=c,p=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(f)?f:i.resourcePath+f;return a(p)}else return c.data?{data:qf(c.type,c.data),width:c.width,height:c.height}:null}if(e!==void 0&&e.length>0){const c=new A1(t);s=new Mp(c),s.setCrossOrigin(this.crossOrigin);for(let f=0,p=e.length;f<p;f++){const g=e[f],v=g.url;if(Array.isArray(v)){const y=[];for(let S=0,T=v.length;S<T;S++){const w=v[S],M=l(w);M!==null&&(M instanceof HTMLImageElement?y.push(M):y.push(new ho(M.data,M.width,M.height)))}r[g.uuid]=new ac(y)}else{const y=l(g.url);r[g.uuid]=new ac(y)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(a){if(typeof a=="string"){const l=a,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(l)?l:t.resourcePath+l;return await r.loadAsync(c)}else return a.data?{data:qf(a.type,a.data),width:a.width,height:a.height}:null}if(e!==void 0&&e.length>0){r=new Mp(this.manager),r.setCrossOrigin(this.crossOrigin);for(let a=0,l=e.length;a<l;a++){const c=e[a],f=c.url;if(Array.isArray(f)){const p=[];for(let g=0,v=f.length;g<v;g++){const y=f[g],S=await s(y);S!==null&&(S instanceof HTMLImageElement?p.push(S):p.push(new ho(S.data,S.width,S.height)))}i[c.uuid]=new ac(p)}else{const p=await s(c.url);i[c.uuid]=new ac(p)}}}return i}parseTextures(e,t){function i(s,a){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),a[s])}const r={};if(e!==void 0)for(let s=0,a=e.length;s<a;s++){const l=e[s];l.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',l.uuid),t[l.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",l.image);const c=t[l.image],f=c.data;let p;Array.isArray(f)?(p=new Pp,f.length===6&&(p.needsUpdate=!0)):(f&&f.data?p=new ho:p=new Qn,f&&(p.needsUpdate=!0)),p.source=c,p.uuid=l.uuid,l.name!==void 0&&(p.name=l.name),l.mapping!==void 0&&(p.mapping=i(l.mapping,fF)),l.channel!==void 0&&(p.channel=l.channel),l.offset!==void 0&&p.offset.fromArray(l.offset),l.repeat!==void 0&&p.repeat.fromArray(l.repeat),l.center!==void 0&&p.center.fromArray(l.center),l.rotation!==void 0&&(p.rotation=l.rotation),l.wrap!==void 0&&(p.wrapS=i(l.wrap[0],fM),p.wrapT=i(l.wrap[1],fM)),l.format!==void 0&&(p.format=l.format),l.internalFormat!==void 0&&(p.internalFormat=l.internalFormat),l.type!==void 0&&(p.type=l.type),l.colorSpace!==void 0&&(p.colorSpace=l.colorSpace),l.encoding!==void 0&&(p.encoding=l.encoding),l.minFilter!==void 0&&(p.minFilter=i(l.minFilter,hM)),l.magFilter!==void 0&&(p.magFilter=i(l.magFilter,hM)),l.anisotropy!==void 0&&(p.anisotropy=l.anisotropy),l.flipY!==void 0&&(p.flipY=l.flipY),l.generateMipmaps!==void 0&&(p.generateMipmaps=l.generateMipmaps),l.premultiplyAlpha!==void 0&&(p.premultiplyAlpha=l.premultiplyAlpha),l.unpackAlignment!==void 0&&(p.unpackAlignment=l.unpackAlignment),l.compareFunction!==void 0&&(p.compareFunction=l.compareFunction),l.userData!==void 0&&(p.userData=l.userData),r[l.uuid]=p}return r}parseObject(e,t,i,r,s){let a;function l(v){return t[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",v),t[v]}function c(v){if(v!==void 0){if(Array.isArray(v)){const y=[];for(let S=0,T=v.length;S<T;S++){const w=v[S];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),y.push(i[w])}return y}return i[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",v),i[v]}}function f(v){return r[v]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",v),r[v]}let p,g;switch(e.type){case"Scene":a=new sh,e.background!==void 0&&(Number.isInteger(e.background)?a.background=new Je(e.background):a.background=f(e.background)),e.environment!==void 0&&(a.environment=f(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?a.fog=new _v(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(a.fog=new Sv(e.fog.color,e.fog.density))),e.backgroundBlurriness!==void 0&&(a.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(a.backgroundIntensity=e.backgroundIntensity);break;case"PerspectiveCamera":a=new ui(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(a.focus=e.focus),e.zoom!==void 0&&(a.zoom=e.zoom),e.filmGauge!==void 0&&(a.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(a.filmOffset=e.filmOffset),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"OrthographicCamera":a=new ph(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(a.zoom=e.zoom),e.view!==void 0&&(a.view=Object.assign({},e.view));break;case"AmbientLight":a=new M2(e.color,e.intensity);break;case"DirectionalLight":a=new _2(e.color,e.intensity);break;case"PointLight":a=new S2(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":a=new w2(e.color,e.intensity,e.width,e.height);break;case"SpotLight":a=new x2(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay);break;case"HemisphereLight":a=new y2(e.color,e.groundColor,e.intensity);break;case"LightProbe":a=new Bv().fromJSON(e);break;case"SkinnedMesh":p=l(e.geometry),g=c(e.material),a=new VE(p,g),e.bindMode!==void 0&&(a.bindMode=e.bindMode),e.bindMatrix!==void 0&&a.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(a.skeleton=e.skeleton);break;case"Mesh":p=l(e.geometry),g=c(e.material),a=new xi(p,g);break;case"InstancedMesh":p=l(e.geometry),g=c(e.material);const v=e.count,y=e.instanceMatrix,S=e.instanceColor;a=new WE(p,g,v),a.instanceMatrix=new yc(new Float32Array(y.array),16),S!==void 0&&(a.instanceColor=new yc(new Float32Array(S.array),S.itemSize));break;case"LOD":a=new GE;break;case"Line":a=new iu(l(e.geometry),c(e.material));break;case"LineLoop":a=new jE(l(e.geometry),c(e.material));break;case"LineSegments":a=new xo(l(e.geometry),c(e.material));break;case"PointCloud":case"Points":a=new XE(l(e.geometry),c(e.material));break;case"Sprite":a=new HE(c(e.material));break;case"Group":a=new Kf;break;case"Bone":a=new d1;break;default:a=new Mn}if(a.uuid=e.uuid,e.name!==void 0&&(a.name=e.name),e.matrix!==void 0?(a.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(a.matrixAutoUpdate=e.matrixAutoUpdate),a.matrixAutoUpdate&&a.matrix.decompose(a.position,a.quaternion,a.scale)):(e.position!==void 0&&a.position.fromArray(e.position),e.rotation!==void 0&&a.rotation.fromArray(e.rotation),e.quaternion!==void 0&&a.quaternion.fromArray(e.quaternion),e.scale!==void 0&&a.scale.fromArray(e.scale)),e.up!==void 0&&a.up.fromArray(e.up),e.castShadow!==void 0&&(a.castShadow=e.castShadow),e.receiveShadow!==void 0&&(a.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.bias!==void 0&&(a.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(a.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(a.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&a.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(a.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(a.visible=e.visible),e.frustumCulled!==void 0&&(a.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(a.renderOrder=e.renderOrder),e.userData!==void 0&&(a.userData=e.userData),e.layers!==void 0&&(a.layers.mask=e.layers),e.children!==void 0){const v=e.children;for(let y=0;y<v.length;y++)a.add(this.parseObject(v[y],t,i,r,s))}if(e.animations!==void 0){const v=e.animations;for(let y=0;y<v.length;y++){const S=v[y];a.animations.push(s[S])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(a.autoUpdate=e.autoUpdate);const v=e.levels;for(let y=0;y<v.length;y++){const S=v[y],T=a.getObjectByProperty("uuid",S.object);T!==void 0&&a.addLevel(T,S.distance,S.hysteresis)}}return a}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}}const fF={UVMapping:cv,CubeReflectionMapping:ol,CubeRefractionMapping:eu,EquirectangularReflectionMapping:ap,EquirectangularRefractionMapping:op,CubeUVReflectionMapping:ch},fM={RepeatWrapping:Ga,ClampToEdgeWrapping:qi,MirroredRepeatWrapping:lp},hM={NearestFilter:$t,NearestMipmapNearestFilter:Jg,NearestMipmapLinearFilter:Xd,LinearFilter:Et,LinearMipmapNearestFilter:Yx,LinearMipmapLinearFilter:tu};class hF extends Ss{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,a=Sc.get(e);if(a!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(a),s.manager.itemEnd(e)},0),a;const l={};l.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",l.headers=this.requestHeader,fetch(e,l).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){Sc.add(e,c),t&&t(c),s.manager.itemEnd(e)}).catch(function(c){r&&r(c),s.manager.itemError(e),s.manager.itemEnd(e)}),s.manager.itemStart(e)}}let vg;class P1{static getContext(){return vg===void 0&&(vg=new(window.AudioContext||window.webkitAudioContext)),vg}static setContext(e){vg=e}}class dF extends Ss{constructor(e){super(e)}load(e,t,i,r){const s=this,a=new ll(this.manager);a.setResponseType("arraybuffer"),a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(c){try{const f=c.slice(0);P1.getContext().decodeAudioData(f,function(g){t(g)},l)}catch(f){l(f)}},i,r);function l(c){r?r(c):console.error(c),s.manager.itemError(e)}}}class pF extends Bv{constructor(e,t,i=1){super(void 0,i),this.isHemisphereLightProbe=!0;const r=new Je().set(e),s=new Je().set(t),a=new Q(r.r,r.g,r.b),l=new Q(s.r,s.g,s.b),c=Math.sqrt(Math.PI),f=c*Math.sqrt(.75);this.sh.coefficients[0].copy(a).add(l).multiplyScalar(c),this.sh.coefficients[1].copy(a).sub(l).multiplyScalar(f)}}class mF extends Bv{constructor(e,t=1){super(void 0,t),this.isAmbientLightProbe=!0;const i=new Je().set(e);this.sh.coefficients[0].set(i.r,i.g,i.b).multiplyScalar(2*Math.sqrt(Math.PI))}}const dM=new vt,pM=new vt,Xu=new vt;class gF{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new ui,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new ui,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Xu.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,a=t.near*Math.tan(hc*t.fov*.5)/t.zoom;let l,c;pM.elements[12]=-r,dM.elements[12]=r,l=-a*t.aspect+s,c=a*t.aspect+s,Xu.elements[0]=2*t.near/(c-l),Xu.elements[8]=(c+l)/(c-l),this.cameraL.projectionMatrix.copy(Xu),l=-a*t.aspect-s,c=a*t.aspect-s,Xu.elements[0]=2*t.near/(c-l),Xu.elements[8]=(c+l)/(c-l),this.cameraR.projectionMatrix.copy(Xu)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(pM),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(dM)}}class D1{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=mM(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=mM();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function mM(){return(typeof performance>"u"?Date:performance).now()}const Yu=new Q,gM=new Qi,vF=new Q,qu=new Q;class yF extends Mn{constructor(){super(),this.type="AudioListener",this.context=P1.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new D1}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yu,gM,vF),qu.set(0,0,-1).applyQuaternion(gM),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yu.x,r),t.positionY.linearRampToValueAtTime(Yu.y,r),t.positionZ.linearRampToValueAtTime(Yu.z,r),t.forwardX.linearRampToValueAtTime(qu.x,r),t.forwardY.linearRampToValueAtTime(qu.y,r),t.forwardZ.linearRampToValueAtTime(qu.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Yu.x,Yu.y,Yu.z),t.setOrientation(qu.x,qu.y,qu.z,i.x,i.y,i.z)}}let b2=class extends Mn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){if(this.detune=e,this.source.detune!==void 0)return this.isPlaying===!0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}};const Zu=new Q,vM=new Qi,xF=new Q,Ku=new Q;class SF extends b2{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Zu,vM,xF),Ku.set(0,0,1).applyQuaternion(vM);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Zu.x,i),t.positionY.linearRampToValueAtTime(Zu.y,i),t.positionZ.linearRampToValueAtTime(Zu.z,i),t.orientationX.linearRampToValueAtTime(Ku.x,i),t.orientationY.linearRampToValueAtTime(Ku.y,i),t.orientationZ.linearRampToValueAtTime(Ku.z,i)}else t.setPosition(Zu.x,Zu.y,Zu.z),t.setOrientation(Ku.x,Ku.y,Ku.z)}}class _F{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class A2{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,a;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,a=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,a=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,a=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=a,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let a=this.cumulativeWeight;if(a===0){for(let l=0;l!==r;++l)i[s+l]=i[l];a=t}else{a+=t;const l=t/a;this._mixBufferRegion(i,s,0,l,r)}this.cumulativeWeight=a}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,a=this.cumulativeWeightAdditive,l=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const c=t*this._origIndex;this._mixBufferRegion(i,r,c,1-s,t)}a>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let c=t,f=t+t;c!==f;++c)if(i[c]!==i[c+t]){l.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,a=r;s!==a;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let a=0;a!==s;++a)e[t+a]=e[i+a]}_slerp(e,t,i,r){Qi.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const a=this._workIndex*s;Qi.multiplyQuaternionsFlat(e,a,e,t,e,i),Qi.slerpFlat(e,t,e,t,e,a,r)}_lerp(e,t,i,r,s){const a=1-r;for(let l=0;l!==s;++l){const c=t+l;e[c]=e[c]*a+e[i+l]*r}}_lerpAdditive(e,t,i,r,s){for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]+e[i+a]*r}}}const L1="\\[\\]\\.:\\/",MF=new RegExp("["+L1+"]","g"),I1="[^"+L1+"]",wF="[^"+L1.replace("\\.","")+"]",TF=/((?:WC+[\/:])*)/.source.replace("WC",I1),EF=/(WCOD+)?/.source.replace("WCOD",wF),bF=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",I1),AF=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",I1),CF=new RegExp("^"+TF+EF+bF+AF+"$"),RF=["material","materials","bones","map"];class PF{constructor(e,t,i){const r=i||_n.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class _n{constructor(e,t,i){this.path=t,this.parsedPath=i||_n.parseTrackName(t),this.node=_n.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new _n.Composite(e,t,i):new _n(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(MF,"")}static parseTrackName(e){const t=CF.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);RF.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let a=0;a<s.length;a++){const l=s[a];if(l.name===t||l.uuid===t)return l;const c=i(l.children);if(c)return c}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=_n.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let f=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let p=0;p<e.length;p++)if(e[p].name===f){f=p;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(f!==void 0){if(e[f]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[f]}}const a=e[r];if(a===void 0){const f=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+f+"."+r+" but it wasn't found.",e);return}let l=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?l=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(l=this.Versioning.MatrixWorldNeedsUpdate);let c=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}c=this.BindingType.ArrayElement,this.resolvedProperty=a,this.propertyIndex=s}else a.fromArray!==void 0&&a.toArray!==void 0?(c=this.BindingType.HasFromToArray,this.resolvedProperty=a):Array.isArray(a)?(c=this.BindingType.EntireArray,this.resolvedProperty=a):this.propertyName=r;this.getValue=this.GetterByBindingType[c],this.setValue=this.SetterByBindingTypeAndVersioning[c][l]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}_n.Composite=PF;_n.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};_n.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};_n.prototype.GetterByBindingType=[_n.prototype._getValue_direct,_n.prototype._getValue_array,_n.prototype._getValue_arrayElement,_n.prototype._getValue_toArray];_n.prototype.SetterByBindingTypeAndVersioning=[[_n.prototype._setValue_direct,_n.prototype._setValue_direct_setNeedsUpdate,_n.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_array,_n.prototype._setValue_array_setNeedsUpdate,_n.prototype._setValue_array_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_arrayElement,_n.prototype._setValue_arrayElement_setNeedsUpdate,_n.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[_n.prototype._setValue_fromArray,_n.prototype._setValue_fromArray_setNeedsUpdate,_n.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class DF{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ks(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,a=s.length;let l,c=e.length,f=this.nCachedObjects_;for(let p=0,g=arguments.length;p!==g;++p){const v=arguments[p],y=v.uuid;let S=t[y];if(S===void 0){S=c++,t[y]=S,e.push(v);for(let T=0,w=a;T!==w;++T)s[T].push(new _n(v,i[T],r[T]))}else if(S<f){l=e[S];const T=--f,w=e[T];t[w.uuid]=S,e[S]=w,t[y]=T,e[T]=v;for(let M=0,A=a;M!==A;++M){const b=s[M],R=b[T];let I=b[S];b[S]=R,I===void 0&&(I=new _n(v,i[M],r[M])),b[T]=I}}else e[S]!==l&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=f}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],f=c.uuid,p=t[f];if(p!==void 0&&p>=s){const g=s++,v=e[g];t[v.uuid]=p,e[p]=v,t[f]=g,e[g]=c;for(let y=0,S=r;y!==S;++y){const T=i[y],w=T[g],M=T[p];T[p]=w,T[g]=M}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,a=e.length;for(let l=0,c=arguments.length;l!==c;++l){const f=arguments[l],p=f.uuid,g=t[p];if(g!==void 0)if(delete t[p],g<s){const v=--s,y=e[v],S=--a,T=e[S];t[y.uuid]=g,e[g]=y,t[T.uuid]=v,e[v]=T,e.pop();for(let w=0,M=r;w!==M;++w){const A=i[w],b=A[v],R=A[S];A[g]=b,A[v]=R,A.pop()}}else{const v=--a,y=e[v];v>0&&(t[y.uuid]=g),e[g]=y,e.pop();for(let S=0,T=r;S!==T;++S){const w=i[S];w[g]=w[v],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const a=this._paths,l=this._parsedPaths,c=this._objects,f=c.length,p=this.nCachedObjects_,g=new Array(f);r=s.length,i[e]=r,a.push(e),l.push(t),s.push(g);for(let v=p,y=c.length;v!==y;++v){const S=c[v];g[v]=new _n(S,e,t)}return g}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,a=this._bindings,l=a.length-1,c=a[l],f=e[l];t[f]=i,a[i]=c,a.pop(),s[i]=s[l],s.pop(),r[i]=r[l],r.pop()}}}class C2{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,a=s.length,l=new Array(a),c={endingStart:rc,endingEnd:rc};for(let f=0;f!==a;++f){const p=s[f].createInterpolant(null);l[f]=p,p.settings=c}this._interpolantSettings=c,this._interpolants=l,this._propertyBindings=new Array(a),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=dE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,a=s/r,l=r/s;e.warp(1,a,t),this.warp(l,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,a=this.timeScale;let l=this._timeScaleInterpolant;l===null&&(l=r._lendControlInterpolant(),this._timeScaleInterpolant=l);const c=l.parameterPositions,f=l.sampleValues;return c[0]=s,c[1]=s+i,f[0]=e/a,f[1]=t/a,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const c=(e-s)*i;c<0||i===0?t=0:(this._startTime=null,t=i*c)}t*=this._updateTimeScale(e);const a=this._updateTime(t),l=this._updateWeight(e);if(l>0){const c=this._interpolants,f=this._propertyBindings;switch(this.blendMode){case t1:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(a),f[p].accumulateAdditive(l);break;case pv:default:for(let p=0,g=c.length;p!==g;++p)c[p].evaluate(a),f[p].accumulate(r,l)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const a=i===pE;if(e===0)return s===-1?r:a&&(s&1)===1?t-r:r;if(i===hE){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,a)):this._setEndings(this.repetitions===0,!0,a)),r>=t||r<0){const l=Math.floor(r/t);r-=t*l,s+=Math.abs(l);const c=this.repetitions-s;if(c<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(c===1){const f=e<0;this._setEndings(f,!f,a)}else this._setEndings(!1,!1,a);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:l})}}else this.time=r;if(a&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=sc,r.endingEnd=sc):(e?r.endingStart=this.zeroSlopeAtStart?sc:rc:r.endingStart=fp,t?r.endingEnd=this.zeroSlopeAtEnd?sc:rc:r.endingEnd=fp)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let a=this._weightInterpolant;a===null&&(a=r._lendControlInterpolant(),this._weightInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,c[0]=t,l[1]=s+e,c[1]=i,this}}const LF=new Float32Array(1);class IF extends sa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,a=e._propertyBindings,l=e._interpolants,c=i.uuid,f=this._bindingsByRootAndName;let p=f[c];p===void 0&&(p={},f[c]=p);for(let g=0;g!==s;++g){const v=r[g],y=v.name;let S=p[y];if(S!==void 0)++S.referenceCount,a[g]=S;else{if(S=a[g],S!==void 0){S._cacheIndex===null&&(++S.referenceCount,this._addInactiveBinding(S,c,y));continue}const T=t&&t._propertyBindings[g].binding.parsedPath;S=new A2(_n.create(i,y,T),v.ValueTypeName,v.getValueSize()),++S.referenceCount,this._addInactiveBinding(S,c,y),a[g]=S}l[g].resultBuffer=S.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let a=s[t];if(a===void 0)a={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=a;else{const l=a.knownActions;e._byClipCacheIndex=l.length,l.push(e)}e._cacheIndex=r.length,r.push(e),a.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,a=this._actionsByClip,l=a[s],c=l.knownActions,f=c[c.length-1],p=e._byClipCacheIndex;f._byClipCacheIndex=p,c[p]=f,c.pop(),e._byClipCacheIndex=null;const g=l.actionByRoot,v=(e._localRoot||this._root).uuid;delete g[v],c.length===0&&delete a[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let a=r[t];a===void 0&&(a={},r[t]=a),a[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,a=this._bindingsByRootAndName,l=a[r],c=t[t.length-1],f=e._cacheIndex;c._cacheIndex=f,t[f]=c,t.pop(),delete l[s],Object.keys(l).length===0&&delete a[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new E1(new Float32Array(2),new Float32Array(2),1,LF),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let a=typeof e=="string"?_p.findByName(r,e):e;const l=a!==null?a.uuid:e,c=this._actionsByClip[l];let f=null;if(i===void 0&&(a!==null?i=a.blendMode:i=pv),c!==void 0){const g=c.actionByRoot[s];if(g!==void 0&&g.blendMode===i)return g;f=c.knownActions[0],a===null&&(a=f._clip)}if(a===null)return null;const p=new C2(this,a,t,i);return this._bindAction(p,f),this._addInactiveAction(p,l,s),p}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?_p.findByName(i,e):e,a=s?s.uuid:e,l=this._actionsByClip[a];return l!==void 0&&l.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),a=this._accuIndex^=1;for(let f=0;f!==i;++f)t[f]._update(r,e,s,a);const l=this._bindings,c=this._nActiveBindings;for(let f=0;f!==c;++f)l[f].apply(a);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const a=s.knownActions;for(let l=0,c=a.length;l!==c;++l){const f=a[l];this._deactivateAction(f);const p=f._cacheIndex,g=t[t.length-1];f._cacheIndex=null,f._byClipCacheIndex=null,g._cacheIndex=p,t[p]=g,t.pop(),this._removeInactiveBindingsForAction(f)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const a in i){const l=i[a].actionByRoot,c=l[t];c!==void 0&&(this._deactivateAction(c),this._removeInactiveAction(c))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const a in s){const l=s[a];l.restoreOriginalState(),this._removeInactiveBinding(l)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class Ee{constructor(e){this.value=e}clone(){return new Ee(this.value.clone===void 0?this.value:this.value.clone())}}let UF=0;class NF extends sa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:UF++}),this.name="",this.usage=hp,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++)this.uniforms.push(t[i].clone());return this}clone(){return new this.constructor().copy(this)}}class FF extends Mv{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class kF{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}class U1{constructor(e,t,i=0,r=1/0){this.ray=new fh(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new pc,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}intersectObject(e,t=!0,i=[]){return xx(e,this,i,t),i.sort(yM),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)xx(e[r],this,i,t);return i.sort(yM),i}}function yM(n,e){return n.distance-e.distance}function xx(n,e,t,i){if(n.layers.test(e.layers)&&n.raycast(e,t),i===!0){const r=n.children;for(let s=0,a=r.length;s<a;s++)xx(r[s],e,t,!0)}}class N1{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(yi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class OF{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}const xM=new _e;class BF{constructor(e=new _e(1/0,1/0),t=new _e(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=xM.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return!(e.x<this.min.x||e.x>this.max.x||e.y<this.min.y||e.y>this.max.y)}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return!(e.max.x<this.min.x||e.min.x>this.max.x||e.max.y<this.min.y||e.min.y>this.max.y)}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,xM).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const SM=new Q,yg=new Q;class zF{constructor(e=new Q,t=new Q){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){SM.subVectors(e,this.start),yg.subVectors(this.end,this.start);const i=yg.dot(yg);let s=yg.dot(SM)/i;return t&&(s=yi(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const _M=new Q;class HF extends Mn{constructor(e,t){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new nn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let a=0,l=1,c=32;a<c;a++,l++){const f=a/c*Math.PI*2,p=l/c*Math.PI*2;r.push(Math.cos(f),Math.sin(f),1,Math.cos(p),Math.sin(p),1)}i.setAttribute("position",new Ct(r,3));const s=new ts({fog:!1,toneMapped:!1});this.cone=new xo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),_M.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(_M),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Yl=new Q,xg=new vt,oy=new vt;class GF extends xo{constructor(e){const t=R2(e),i=new nn,r=[],s=[],a=new Je(0,0,1),l=new Je(0,1,0);for(let f=0;f<t.length;f++){const p=t[f];p.parent&&p.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(a.r,a.g,a.b),s.push(l.r,l.g,l.b))}i.setAttribute("position",new Ct(r,3)),i.setAttribute("color",new Ct(s,3));const c=new ts({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,c),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");oy.copy(this.root.matrixWorld).invert();for(let s=0,a=0;s<t.length;s++){const l=t[s];l.parent&&l.parent.isBone&&(xg.multiplyMatrices(oy,l.matrixWorld),Yl.setFromMatrixPosition(xg),r.setXYZ(a,Yl.x,Yl.y,Yl.z),xg.multiplyMatrices(oy,l.parent.matrixWorld),Yl.setFromMatrixPosition(xg),r.setXYZ(a+1,Yl.x,Yl.y,Yl.z),a+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function R2(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,R2(n.children[t]));return e}class VF extends xi{constructor(e,t,i){const r=new Fp(t,4,2),s=new fl({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const WF=new Q,MM=new Je,wM=new Je;class jF extends Mn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Np(t);r.rotateY(Math.PI*.5),this.material=new fl({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),a=new Float32Array(s.count*3);r.setAttribute("color",new cn(a,3)),this.add(new xi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");MM.copy(this.light.color),wM.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?MM:wM;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(WF.setFromMatrixPosition(this.light.matrixWorld).negate())}}class XF extends xo{constructor(e=10,t=10,i=4473924,r=8947848){i=new Je(i),r=new Je(r);const s=t/2,a=e/t,l=e/2,c=[],f=[];for(let v=0,y=0,S=-l;v<=t;v++,S+=a){c.push(-l,0,S,l,0,S),c.push(S,0,-l,S,0,l);const T=v===s?i:r;T.toArray(f,y),y+=3,T.toArray(f,y),y+=3,T.toArray(f,y),y+=3,T.toArray(f,y),y+=3}const p=new nn;p.setAttribute("position",new Ct(c,3)),p.setAttribute("color",new Ct(f,3));const g=new ts({vertexColors:!0,toneMapped:!1});super(p,g),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class YF extends xo{constructor(e=10,t=16,i=8,r=64,s=4473924,a=8947848){s=new Je(s),a=new Je(a);const l=[],c=[];if(t>1)for(let g=0;g<t;g++){const v=g/t*(Math.PI*2),y=Math.sin(v)*e,S=Math.cos(v)*e;l.push(0,0,0),l.push(y,0,S);const T=g&1?s:a;c.push(T.r,T.g,T.b),c.push(T.r,T.g,T.b)}for(let g=0;g<i;g++){const v=g&1?s:a,y=e-e/i*g;for(let S=0;S<r;S++){let T=S/r*(Math.PI*2),w=Math.sin(T)*y,M=Math.cos(T)*y;l.push(w,0,M),c.push(v.r,v.g,v.b),T=(S+1)/r*(Math.PI*2),w=Math.sin(T)*y,M=Math.cos(T)*y,l.push(w,0,M),c.push(v.r,v.g,v.b)}}const f=new nn;f.setAttribute("position",new Ct(l,3)),f.setAttribute("color",new Ct(c,3));const p=new ts({vertexColors:!0,toneMapped:!1});super(f,p),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const TM=new Q,Sg=new Q,EM=new Q;class qF extends Mn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new nn;r.setAttribute("position",new Ct([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ts({fog:!1,toneMapped:!1});this.lightPlane=new iu(r,s),this.add(this.lightPlane),r=new nn,r.setAttribute("position",new Ct([0,0,0,0,0,1],3)),this.targetLine=new iu(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),TM.setFromMatrixPosition(this.light.matrixWorld),Sg.setFromMatrixPosition(this.light.target.matrixWorld),EM.subVectors(Sg,TM),this.lightPlane.lookAt(Sg),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(Sg),this.targetLine.scale.z=EM.length()}}const _g=new Q,vi=new dh;class ZF extends xo{constructor(e){const t=new nn,i=new ts({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],a={};l("n1","n2"),l("n2","n4"),l("n4","n3"),l("n3","n1"),l("f1","f2"),l("f2","f4"),l("f4","f3"),l("f3","f1"),l("n1","f1"),l("n2","f2"),l("n3","f3"),l("n4","f4"),l("p","n1"),l("p","n2"),l("p","n3"),l("p","n4"),l("u1","u2"),l("u2","u3"),l("u3","u1"),l("c","t"),l("p","c"),l("cn1","cn2"),l("cn3","cn4"),l("cf1","cf2"),l("cf3","cf4");function l(S,T){c(S),c(T)}function c(S){r.push(0,0,0),s.push(0,0,0),a[S]===void 0&&(a[S]=[]),a[S].push(r.length/3-1)}t.setAttribute("position",new Ct(r,3)),t.setAttribute("color",new Ct(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=a,this.update();const f=new Je(16755200),p=new Je(16711680),g=new Je(43775),v=new Je(16777215),y=new Je(3355443);this.setColors(f,p,g,v,y)}setColors(e,t,i,r,s){const l=this.geometry.getAttribute("color");l.setXYZ(0,e.r,e.g,e.b),l.setXYZ(1,e.r,e.g,e.b),l.setXYZ(2,e.r,e.g,e.b),l.setXYZ(3,e.r,e.g,e.b),l.setXYZ(4,e.r,e.g,e.b),l.setXYZ(5,e.r,e.g,e.b),l.setXYZ(6,e.r,e.g,e.b),l.setXYZ(7,e.r,e.g,e.b),l.setXYZ(8,e.r,e.g,e.b),l.setXYZ(9,e.r,e.g,e.b),l.setXYZ(10,e.r,e.g,e.b),l.setXYZ(11,e.r,e.g,e.b),l.setXYZ(12,e.r,e.g,e.b),l.setXYZ(13,e.r,e.g,e.b),l.setXYZ(14,e.r,e.g,e.b),l.setXYZ(15,e.r,e.g,e.b),l.setXYZ(16,e.r,e.g,e.b),l.setXYZ(17,e.r,e.g,e.b),l.setXYZ(18,e.r,e.g,e.b),l.setXYZ(19,e.r,e.g,e.b),l.setXYZ(20,e.r,e.g,e.b),l.setXYZ(21,e.r,e.g,e.b),l.setXYZ(22,e.r,e.g,e.b),l.setXYZ(23,e.r,e.g,e.b),l.setXYZ(24,t.r,t.g,t.b),l.setXYZ(25,t.r,t.g,t.b),l.setXYZ(26,t.r,t.g,t.b),l.setXYZ(27,t.r,t.g,t.b),l.setXYZ(28,t.r,t.g,t.b),l.setXYZ(29,t.r,t.g,t.b),l.setXYZ(30,t.r,t.g,t.b),l.setXYZ(31,t.r,t.g,t.b),l.setXYZ(32,i.r,i.g,i.b),l.setXYZ(33,i.r,i.g,i.b),l.setXYZ(34,i.r,i.g,i.b),l.setXYZ(35,i.r,i.g,i.b),l.setXYZ(36,i.r,i.g,i.b),l.setXYZ(37,i.r,i.g,i.b),l.setXYZ(38,r.r,r.g,r.b),l.setXYZ(39,r.r,r.g,r.b),l.setXYZ(40,s.r,s.g,s.b),l.setXYZ(41,s.r,s.g,s.b),l.setXYZ(42,s.r,s.g,s.b),l.setXYZ(43,s.r,s.g,s.b),l.setXYZ(44,s.r,s.g,s.b),l.setXYZ(45,s.r,s.g,s.b),l.setXYZ(46,s.r,s.g,s.b),l.setXYZ(47,s.r,s.g,s.b),l.setXYZ(48,s.r,s.g,s.b),l.setXYZ(49,s.r,s.g,s.b),l.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;vi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),bi("c",t,e,vi,0,0,-1),bi("t",t,e,vi,0,0,1),bi("n1",t,e,vi,-1,-1,-1),bi("n2",t,e,vi,i,-1,-1),bi("n3",t,e,vi,-1,r,-1),bi("n4",t,e,vi,i,r,-1),bi("f1",t,e,vi,-1,-1,1),bi("f2",t,e,vi,i,-1,1),bi("f3",t,e,vi,-1,r,1),bi("f4",t,e,vi,i,r,1),bi("u1",t,e,vi,i*.7,r*1.1,-1),bi("u2",t,e,vi,-1*.7,r*1.1,-1),bi("u3",t,e,vi,0,r*2,-1),bi("cf1",t,e,vi,-1,0,1),bi("cf2",t,e,vi,i,0,1),bi("cf3",t,e,vi,0,-1,1),bi("cf4",t,e,vi,0,r,1),bi("cn1",t,e,vi,-1,0,-1),bi("cn2",t,e,vi,i,0,-1),bi("cn3",t,e,vi,0,-1,-1),bi("cn4",t,e,vi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function bi(n,e,t,i,r,s,a){_g.set(r,s,a).unproject(i);const l=e[n];if(l!==void 0){const c=t.getAttribute("position");for(let f=0,p=l.length;f<p;f++)c.setXYZ(l[f],_g.x,_g.y,_g.z)}}const Mg=new aa;class KF extends xo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new nn;s.setIndex(new cn(i,1)),s.setAttribute("position",new cn(r,3)),super(s,new ts({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&Mg.setFromObject(this.object),Mg.isEmpty())return;const t=Mg.min,i=Mg.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class QF extends xo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new nn;s.setIndex(new cn(i,1)),s.setAttribute("position",new Ct(r,3)),super(s,new ts({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class JF extends iu{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],a=new nn;a.setAttribute("position",new Ct(s,3)),a.computeBoundingSphere(),super(a,new ts({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const l=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],c=new nn;c.setAttribute("position",new Ct(l,3)),c.computeBoundingSphere(),this.add(new xi(c,new fl({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const bM=new Q;let wg,ly;class $F extends Mn{constructor(e=new Q(0,0,1),t=new Q(0,0,0),i=1,r=16776960,s=i*.2,a=s*.2){super(),this.type="ArrowHelper",wg===void 0&&(wg=new nn,wg.setAttribute("position",new Ct([0,0,0,0,1,0],3)),ly=new gh(0,.5,1,5,1),ly.translate(0,-.5,0)),this.position.copy(t),this.line=new iu(wg,new ts({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new xi(ly,new fl({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,a)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{bM.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(bM,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class ek extends xo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new nn;r.setAttribute("position",new Ct(t,3)),r.setAttribute("color",new Ct(i,3));const s=new ts({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new Je,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class tk{constructor(){this.type="ShapePath",this.color=new Je,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new mp,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,a){return this.currentPath.bezierCurveTo(e,t,i,r,s,a),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(M){const A=[];for(let b=0,R=M.length;b<R;b++){const I=M[b],k=new mc;k.curves=I.curves,A.push(k)}return A}function i(M,A){const b=A.length;let R=!1;for(let I=b-1,k=0;k<b;I=k++){let F=A[I],z=A[k],U=z.x-F.x,O=z.y-F.y;if(Math.abs(O)>Number.EPSILON){if(O<0&&(F=A[k],U=-U,z=A[I],O=-O),M.y<F.y||M.y>z.y)continue;if(M.y===F.y){if(M.x===F.x)return!0}else{const $=O*(M.x-F.x)-U*(M.y-F.y);if($===0)return!0;if($<0)continue;R=!R}}else{if(M.y!==F.y)continue;if(z.x<=M.x&&M.x<=F.x||F.x<=M.x&&M.x<=z.x)return!0}}return R}const r=po.isClockWise,s=this.subPaths;if(s.length===0)return[];let a,l,c;const f=[];if(s.length===1)return l=s[0],c=new mc,c.curves=l.curves,f.push(c),f;let p=!r(s[0].getPoints());p=e?!p:p;const g=[],v=[];let y=[],S=0,T;v[S]=void 0,y[S]=[];for(let M=0,A=s.length;M<A;M++)l=s[M],T=l.getPoints(),a=r(T),a=e?!a:a,a?(!p&&v[S]&&S++,v[S]={s:new mc,p:T},v[S].s.curves=l.curves,p&&S++,y[S]=[]):y[S].push({h:l,p:T[0]});if(!v[0])return t(s);if(v.length>1){let M=!1,A=0;for(let b=0,R=v.length;b<R;b++)g[b]=[];for(let b=0,R=v.length;b<R;b++){const I=y[b];for(let k=0;k<I.length;k++){const F=I[k];let z=!0;for(let U=0;U<v.length;U++)i(F.p,v[U].p)&&(b!==U&&A++,z?(z=!1,g[U].push(F)):M=!0);z&&g[b].push(F)}}A>0&&M===!1&&(y=g)}let w;for(let M=0,A=v.length;M<A;M++){c=v[M].s,f.push(c),w=y[M];for(let b=0,R=w.length;b<R;b++)c.holes.push(w[b].h)}return f}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:yo}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=yo);const nk=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:Xx,AddEquation:tc,AddOperation:tE,AdditiveAnimationBlendMode:t1,AdditiveBlending:Kg,AlphaFormat:lE,AlwaysCompare:TE,AlwaysDepth:Vx,AlwaysStencilFunc:gE,AmbientLight:M2,AmbientLightProbe:mF,AnimationAction:C2,AnimationClip:_p,AnimationLoader:iF,AnimationMixer:IF,AnimationObjectGroup:DF,AnimationUtils:$N,ArcCurve:qE,ArrayCamera:OE,ArrowHelper:$F,Audio:b2,AudioAnalyser:_F,AudioContext:P1,AudioListener:yF,AudioLoader:dF,AxesHelper:ek,BackSide:Zi,BasicDepthPacking:Ji,BasicShadowMap:HT,Bone:d1,BooleanKeyframeTrack:wc,Box2:BF,Box3:aa,Box3Helper:QF,BoxGeometry:Mc,BoxHelper:KF,BufferAttribute:cn,BufferGeometry:nn,BufferGeometryLoader:E2,ByteType:aE,Cache:Sc,Camera:dh,CameraHelper:ZF,CanvasTexture:wN,CapsuleGeometry:bv,CatmullRomCurve3:ZE,CineonToneMapping:rE,CircleGeometry:Av,ClampToEdgeWrapping:qi,Clock:D1,Color:Je,ColorKeyframeTrack:b1,ColorManagement:ta,CompressedArrayTexture:_N,CompressedCubeTexture:MN,CompressedTexture:Tv,CompressedTextureLoader:rF,ConeGeometry:Cv,CubeCamera:u1,CubeReflectionMapping:ol,CubeRefractionMapping:eu,CubeTexture:Pp,CubeTextureLoader:sF,CubeUVReflectionMapping:ch,CubicBezierCurve:g1,CubicBezierCurve3:KE,CubicInterpolant:d2,CullFaceBack:zT,CullFaceFront:yP,CullFaceFrontBack:xP,CullFaceNone:vP,Curve:Va,CurvePath:JE,CustomBlending:GT,CustomToneMapping:sE,CylinderGeometry:gh,Cylindrical:OF,Data3DTexture:dc,DataArrayTexture:mv,DataTexture:ho,DataTextureLoader:aF,DataUtils:PD,DecrementStencilOp:DP,DecrementWrapStencilOp:IP,DefaultLoadingManager:g2,DepthFormat:Jl,DepthStencilFormat:nu,DepthTexture:Lp,DirectionalLight:_2,DirectionalLightHelper:qF,DiscreteInterpolant:p2,DisplayP3ColorSpace:i1,DodecahedronGeometry:Rv,DoubleSide:Qr,DstAlphaFactor:ZT,DstColorFactor:QT,DynamicCopyUsage:qP,DynamicDrawUsage:GP,DynamicReadUsage:jP,EdgesGeometry:$E,EllipseCurve:Ip,EqualCompare:xE,EqualDepth:sp,EqualStencilFunc:kP,EquirectangularReflectionMapping:ap,EquirectangularRefractionMapping:op,Euler:hh,EventDispatcher:sa,ExtrudeGeometry:Dv,FileLoader:ll,Float16BufferAttribute:FD,Float32BufferAttribute:Ct,Float64BufferAttribute:kD,FloatType:li,Fog:_v,FogExp2:Sv,FramebufferTexture:px,FrontSide:go,Frustum:vv,GLBufferAttribute:kF,GLSL1:KP,GLSL3:$g,GreaterCompare:_E,GreaterDepth:jx,GreaterEqualCompare:wE,GreaterEqualDepth:Wx,GreaterEqualStencilFunc:HP,GreaterStencilFunc:BP,GridHelper:XF,Group:Kf,HalfFloatType:Tr,HemisphereLight:y2,HemisphereLightHelper:jF,HemisphereLightProbe:pF,IcosahedronGeometry:Lv,ImageBitmapLoader:hF,ImageLoader:Mp,ImageUtils:s1,IncrementStencilOp:PP,IncrementWrapStencilOp:LP,InstancedBufferAttribute:yc,InstancedBufferGeometry:R1,InstancedInterleavedBuffer:FF,InstancedMesh:WE,Int16BufferAttribute:UD,Int32BufferAttribute:ND,Int8BufferAttribute:DD,IntType:qx,InterleavedBuffer:Mv,InterleavedBufferAttribute:vc,Interpolant:kp,InterpolateDiscrete:up,InterpolateLinear:cp,InterpolateSmooth:zg,InvertStencilOp:UP,KeepStencilOp:Hg,KeyframeTrack:Wa,LOD:GE,LatheGeometry:Up,Layers:pc,LessCompare:yE,LessDepth:Qg,LessEqualCompare:SE,LessEqualDepth:rp,LessEqualStencilFunc:OP,LessStencilFunc:FP,Light:au,LightProbe:Bv,Line:iu,Line3:zF,LineBasicMaterial:ts,LineCurve:Ev,LineCurve3:QE,LineDashedMaterial:f2,LineLoop:jE,LineSegments:xo,LinearEncoding:n1,LinearFilter:Et,LinearInterpolant:E1,LinearMipMapLinearFilter:TP,LinearMipMapNearestFilter:wP,LinearMipmapLinearFilter:tu,LinearMipmapNearestFilter:Yx,LinearSRGBColorSpace:Jr,LinearToneMapping:nE,Loader:Ss,LoaderUtils:yx,LoadingManager:A1,LoopOnce:hE,LoopPingPong:pE,LoopRepeat:dE,LuminanceAlphaFormat:uE,LuminanceFormat:hv,MOUSE:mP,Material:hr,MaterialLoader:zv,MathUtils:bE,Matrix3:sn,Matrix4:vt,MaxEquation:Hy,Mesh:xi,MeshBasicMaterial:fl,MeshDepthMaterial:Dp,MeshDistanceMaterial:xv,MeshLambertMaterial:u2,MeshMatcapMaterial:c2,MeshNormalMaterial:M1,MeshPhongMaterial:o2,MeshPhysicalMaterial:a2,MeshStandardMaterial:_1,MeshToonMaterial:l2,MinEquation:zy,MirroredRepeatWrapping:lp,MixOperation:eE,MultiplyBlending:By,MultiplyOperation:Rp,NearestFilter:$t,NearestMipMapLinearFilter:MP,NearestMipMapNearestFilter:_P,NearestMipmapLinearFilter:Xd,NearestMipmapNearestFilter:Jg,NeverCompare:vE,NeverDepth:Gx,NeverStencilFunc:NP,NoBlending:Kn,NoColorSpace:Ha,NoToneMapping:fo,NormalAnimationBlendMode:pv,NormalBlending:fc,NotEqualCompare:ME,NotEqualDepth:uv,NotEqualStencilFunc:zP,NumberKeyframeTrack:xp,Object3D:Mn,ObjectLoader:cF,ObjectSpaceNormalMap:mE,OctahedronGeometry:Np,OneFactor:XT,OneMinusDstAlphaFactor:KT,OneMinusDstColorFactor:JT,OneMinusSrcAlphaFactor:Hx,OneMinusSrcColorFactor:qT,OrthographicCamera:ph,PCFShadowMap:lv,PCFSoftShadowMap:jd,PMREMGenerator:nv,Path:mp,PerspectiveCamera:ui,Plane:Kl,PlaneGeometry:ru,PlaneHelper:JF,PointLight:S2,PointLightHelper:VF,Points:XE,PointsMaterial:p1,PolarGridHelper:YF,PolyhedronGeometry:su,PositionalAudio:SF,PropertyBinding:_n,PropertyMixer:A2,QuadraticBezierCurve:v1,QuadraticBezierCurve3:y1,Quaternion:Qi,QuaternionKeyframeTrack:vh,QuaternionLinearInterpolant:m2,RED_GREEN_RGTC2_Format:ux,RED_RGTC1_Format:fE,REVISION:yo,RGBADepthPacking:ia,RGBAFormat:Dn,RGBAIntegerFormat:e1,RGBA_ASTC_10x10_Format:sx,RGBA_ASTC_10x5_Format:nx,RGBA_ASTC_10x6_Format:ix,RGBA_ASTC_10x8_Format:rx,RGBA_ASTC_12x10_Format:ax,RGBA_ASTC_12x12_Format:ox,RGBA_ASTC_4x4_Format:qy,RGBA_ASTC_5x4_Format:Zy,RGBA_ASTC_5x5_Format:Ky,RGBA_ASTC_6x5_Format:Qy,RGBA_ASTC_6x6_Format:Jy,RGBA_ASTC_8x5_Format:$y,RGBA_ASTC_8x6_Format:ex,RGBA_ASTC_8x8_Format:tx,RGBA_BPTC_Format:Bg,RGBA_ETC2_EAC_Format:Yy,RGBA_PVRTC_2BPPV1_Format:jy,RGBA_PVRTC_4BPPV1_Format:Wy,RGBA_S3TC_DXT1_Format:Fg,RGBA_S3TC_DXT3_Format:kg,RGBA_S3TC_DXT5_Format:Og,RGB_ETC1_Format:cE,RGB_ETC2_Format:Xy,RGB_PVRTC_2BPPV1_Format:Vy,RGB_PVRTC_4BPPV1_Format:Gy,RGB_S3TC_DXT1_Format:Ng,RGFormat:Jx,RGIntegerFormat:$x,RawShaderMaterial:s2,Ray:fh,Raycaster:U1,RectAreaLight:w2,RedFormat:dv,RedIntegerFormat:Qx,ReinhardToneMapping:iE,RenderTarget:CE,RepeatWrapping:Ga,ReplaceStencilOp:RP,ReverseSubtractEquation:WT,RingGeometry:Iv,SIGNED_RED_GREEN_RGTC2_Format:cx,SIGNED_RED_RGTC1_Format:lx,SRGBColorSpace:yt,Scene:sh,ShaderChunk:Nt,ShaderLib:Oa,ShaderMaterial:tn,ShadowMaterial:r2,Shape:mc,ShapeGeometry:Uv,ShapePath:tk,ShapeUtils:po,ShortType:oE,Skeleton:wv,SkeletonHelper:GF,SkinnedMesh:VE,Source:ac,Sphere:Os,SphereGeometry:Fp,Spherical:N1,SphericalHarmonics3:T2,SplineCurve:x1,SpotLight:x2,SpotLightHelper:HF,Sprite:HE,SpriteMaterial:h1,SrcAlphaFactor:zx,SrcAlphaSaturateFactor:$T,SrcColorFactor:YT,StaticCopyUsage:YP,StaticDrawUsage:hp,StaticReadUsage:WP,StereoCamera:gF,StreamCopyUsage:ZP,StreamDrawUsage:VP,StreamReadUsage:XP,StringKeyframeTrack:Tc,SubtractEquation:VT,SubtractiveBlending:Oy,TOUCH:gP,TangentSpaceNormalMap:cl,TetrahedronGeometry:Nv,Texture:Qn,TextureLoader:v2,TorusGeometry:Fv,TorusKnotGeometry:kv,Triangle:ys,TriangleFanDrawMode:AP,TriangleStripDrawMode:bP,TrianglesDrawMode:EP,TubeGeometry:Ov,TwoPassDoubleSide:SP,UVMapping:cv,Uint16BufferAttribute:a1,Uint32BufferAttribute:o1,Uint8BufferAttribute:LD,Uint8ClampedBufferAttribute:ID,Uniform:Ee,UniformsGroup:NF,UniformsLib:dt,UniformsUtils:l1,UnsignedByteType:zn,UnsignedInt248Type:sl,UnsignedIntType:za,UnsignedShort4444Type:Zx,UnsignedShort5551Type:Kx,UnsignedShortType:fv,VSMShadowMap:ka,Vector2:_e,Vector3:Q,Vector4:hn,VectorKeyframeTrack:Sp,VideoTexture:YE,WebGL1Renderer:BE,WebGL3DRenderTarget:SD,WebGLArrayRenderTarget:xD,WebGLCoordinateSystem:co,WebGLCubeRenderTarget:gv,WebGLMultipleRenderTargets:RE,WebGLRenderTarget:an,WebGLRenderer:f1,WebGLUtils:kE,WebGPUCoordinateSystem:dp,WireframeGeometry:i2,WrapAroundEnding:fp,ZeroCurvatureEnding:rc,ZeroFactor:jT,ZeroSlopeEnding:sc,ZeroStencilOp:CP,_SRGBAFormat:ev,sRGBEncoding:al},Symbol.toStringTag,{value:"Module"}));var uy={exports:{}},ql={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AM;function ik(){return AM||(AM=1,ql.ConcurrentRoot=1,ql.ContinuousEventPriority=4,ql.DefaultEventPriority=16,ql.DiscreteEventPriority=1,ql.IdleEventPriority=536870912,ql.LegacyRoot=0),ql}var CM;function rk(){return CM||(CM=1,uy.exports=ik()),uy.exports}var Jf=rk();function sk(n){let e;const t=new Set,i=(f,p)=>{const g=typeof f=="function"?f(e):f;if(g!==e){const v=e;e=p?g:Object.assign({},e,g),t.forEach(y=>y(e,v))}},r=()=>e,s=(f,p=r,g=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let v=p(e);function y(){const S=p(e);if(!g(v,S)){const T=v;f(v=S,T)}}return t.add(y),()=>t.delete(y)},c={setState:i,getState:r,subscribe:(f,p,g)=>p||g?s(f,p,g):(t.add(f),()=>t.delete(f)),destroy:()=>t.clear()};return e=n(i,r,c),c}const ak=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),RM=ak?K.useEffect:K.useLayoutEffect;function P2(n){const e=typeof n=="function"?sk(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=K.useReducer(w=>w+1,0),a=e.getState(),l=K.useRef(a),c=K.useRef(i),f=K.useRef(r),p=K.useRef(!1),g=K.useRef();g.current===void 0&&(g.current=i(a));let v,y=!1;(l.current!==a||c.current!==i||f.current!==r||p.current)&&(v=i(a),y=!r(g.current,v)),RM(()=>{y&&(g.current=v),l.current=a,c.current=i,f.current=r,p.current=!1});const S=K.useRef(a);RM(()=>{const w=()=>{try{const A=e.getState(),b=c.current(A);f.current(g.current,b)||(l.current=A,g.current=b,s())}catch{p.current=!0,s()}},M=e.subscribe(w);return e.getState()!==S.current&&w(),M},[]);const T=y?v:g.current;return K.useDebugValue(T),T};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}const ok=n=>typeof n=="object"&&typeof n.then=="function",lc=[];function D2(n,e,t=(i,r)=>i===r){if(n===e)return!0;if(!n||!e)return!1;const i=n.length;if(e.length!==i)return!1;for(let r=0;r<i;r++)if(!t(n[r],e[r]))return!1;return!0}function L2(n,e=null,t=!1,i={}){e===null&&(e=[n]);for(const s of lc)if(D2(e,s.keys,s.equal)){if(t)return;if(Object.prototype.hasOwnProperty.call(s,"error"))throw s.error;if(Object.prototype.hasOwnProperty.call(s,"response"))return i.lifespan&&i.lifespan>0&&(s.timeout&&clearTimeout(s.timeout),s.timeout=setTimeout(s.remove,i.lifespan)),s.response;if(!t)throw s.promise}const r={keys:e,equal:i.equal,remove:()=>{const s=lc.indexOf(r);s!==-1&&lc.splice(s,1)},promise:(ok(n)?n:n(...e)).then(s=>{r.response=s,i.lifespan&&i.lifespan>0&&(r.timeout=setTimeout(r.remove,i.lifespan))}).catch(s=>r.error=s)};if(lc.push(r),!t)throw r.promise}const I2=(n,e,t)=>L2(n,e,!1,t),lk=(n,e,t)=>void L2(n,e,!0,t),uk=n=>{if(n===void 0||n.length===0)lc.splice(0,lc.length);else{const e=lc.find(t=>D2(n,t.keys,t.equal));e&&e.remove()}};var cy={exports:{}},fy={exports:{}},hy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var PM;function ck(){return PM||(PM=1,function(n){function e(V,j){var W=V.length;V.push(j);e:for(;0<W;){var L=W-1>>>1,B=V[L];if(0<r(B,j))V[L]=j,V[W]=B,W=L;else break e}}function t(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var j=V[0],W=V.pop();if(W!==j){V[0]=W;e:for(var L=0,B=V.length,te=B>>>1;L<te;){var ie=2*(L+1)-1,re=V[ie],de=ie+1,he=V[de];if(0>r(re,W))de<B&&0>r(he,re)?(V[L]=he,V[de]=W,L=de):(V[L]=re,V[ie]=W,L=ie);else if(de<B&&0>r(he,W))V[L]=he,V[de]=W,L=de;else break e}}return j}function r(V,j){var W=V.sortIndex-j.sortIndex;return W!==0?W:V.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,g=null,v=3,y=!1,S=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var j=t(f);j!==null;){if(j.callback===null)i(f);else if(j.startTime<=V)i(f),j.sortIndex=j.expirationTime,e(c,j);else break;j=t(f)}}function R(V){if(T=!1,b(V),!S)if(t(c)!==null)S=!0,oe(I);else{var j=t(f);j!==null&&ue(R,j.startTime-V)}}function I(V,j){S=!1,T&&(T=!1,M(z),z=-1),y=!0;var W=v;try{for(b(j),g=t(c);g!==null&&(!(g.expirationTime>j)||V&&!$());){var L=g.callback;if(typeof L=="function"){g.callback=null,v=g.priorityLevel;var B=L(g.expirationTime<=j);j=n.unstable_now(),typeof B=="function"?g.callback=B:g===t(c)&&i(c),b(j)}else i(c);g=t(c)}if(g!==null)var te=!0;else{var ie=t(f);ie!==null&&ue(R,ie.startTime-j),te=!1}return te}finally{g=null,v=W,y=!1}}var k=!1,F=null,z=-1,U=5,O=-1;function $(){return!(n.unstable_now()-O<U)}function Y(){if(F!==null){var V=n.unstable_now();O=V;var j=!0;try{j=F(!0,V)}finally{j?q():(k=!1,F=null)}}else k=!1}var q;if(typeof A=="function")q=function(){A(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=Y,q=function(){ae.postMessage(null)}}else q=function(){w(Y,0)};function oe(V){F=V,k||(k=!0,q())}function ue(V,j){z=w(function(){V(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,oe(I))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(V){switch(v){case 1:case 2:case 3:var j=3;break;default:j=v}var W=v;v=j;try{return V()}finally{v=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,j){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var W=v;v=V;try{return j()}finally{v=W}},n.unstable_scheduleCallback=function(V,j,W){var L=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,V){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,V={id:p++,callback:j,priorityLevel:V,startTime:W,expirationTime:B,sortIndex:-1},W>L?(V.sortIndex=W,e(f,V),t(c)===null&&V===t(f)&&(T?(M(z),z=-1):T=!0,ue(R,W-L))):(V.sortIndex=B,e(c,V),S||y||(S=!0,oe(I))),V},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(V){var j=v;return function(){var W=v;v=j;try{return V.apply(this,arguments)}finally{v=W}}}}(hy)),hy}var DM;function fk(){return DM||(DM=1,fy.exports=ck()),fy.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy,LM;function hk(){return LM||(LM=1,dy=function(e){var t={},i=oh(),r=fk(),s=Object.assign;function a(h){for(var d="https://reactjs.org/docs/error-decoder.html?invariant="+h,x=1;x<arguments.length;x++)d+="&args[]="+encodeURIComponent(arguments[x]);return"Minified React error #"+h+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),f=Symbol.for("react.portal"),p=Symbol.for("react.fragment"),g=Symbol.for("react.strict_mode"),v=Symbol.for("react.profiler"),y=Symbol.for("react.provider"),S=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),A=Symbol.for("react.memo"),b=Symbol.for("react.lazy"),R=Symbol.for("react.offscreen"),I=Symbol.iterator;function k(h){return h===null||typeof h!="object"?null:(h=I&&h[I]||h["@@iterator"],typeof h=="function"?h:null)}function F(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case p:return"Fragment";case f:return"Portal";case v:return"Profiler";case g:return"StrictMode";case w:return"Suspense";case M:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case S:return(h.displayName||"Context")+".Consumer";case y:return(h._context.displayName||"Context")+".Provider";case T:var d=h.render;return h=h.displayName,h||(h=d.displayName||d.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case A:return d=h.displayName||null,d!==null?d:F(h.type)||"Memo";case b:d=h._payload,h=h._init;try{return F(h(d))}catch{}}return null}function z(h){var d=h.type;switch(h.tag){case 24:return"Cache";case 9:return(d.displayName||"Context")+".Consumer";case 10:return(d._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=d.render,h=h.displayName||h.name||"",d.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return d;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return F(d);case 8:return d===g?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d}return null}function U(h){var d=h,x=h;if(h.alternate)for(;d.return;)d=d.return;else{h=d;do d=h,d.flags&4098&&(x=d.return),h=d.return;while(h)}return d.tag===3?x:null}function O(h){if(U(h)!==h)throw Error(a(188))}function $(h){var d=h.alternate;if(!d){if(d=U(h),d===null)throw Error(a(188));return d!==h?null:h}for(var x=h,E=d;;){var P=x.return;if(P===null)break;var N=P.alternate;if(N===null){if(E=P.return,E!==null){x=E;continue}break}if(P.child===N.child){for(N=P.child;N;){if(N===x)return O(P),h;if(N===E)return O(P),d;N=N.sibling}throw Error(a(188))}if(x.return!==E.return)x=P,E=N;else{for(var ne=!1,ge=P.child;ge;){if(ge===x){ne=!0,x=P,E=N;break}if(ge===E){ne=!0,E=P,x=N;break}ge=ge.sibling}if(!ne){for(ge=N.child;ge;){if(ge===x){ne=!0,x=N,E=P;break}if(ge===E){ne=!0,E=N,x=P;break}ge=ge.sibling}if(!ne)throw Error(a(189))}}if(x.alternate!==E)throw Error(a(190))}if(x.tag!==3)throw Error(a(188));return x.stateNode.current===x?h:d}function Y(h){return h=$(h),h!==null?q(h):null}function q(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var d=q(h);if(d!==null)return d;h=h.sibling}return null}function J(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var d=J(h);if(d!==null)return d}h=h.sibling}return null}var ae=Array.isArray,oe=e.getPublicInstance,ue=e.getRootHostContext,V=e.getChildHostContext,j=e.prepareForCommit,W=e.resetAfterCommit,L=e.createInstance,B=e.appendInitialChild,te=e.finalizeInitialChildren,ie=e.prepareUpdate,re=e.shouldSetTextContent,de=e.createTextInstance,he=e.scheduleTimeout,ve=e.cancelTimeout,Ve=e.noTimeout,rt=e.isPrimaryRenderer,Ue=e.supportsMutation,Z=e.supportsPersistence,Fe=e.supportsHydration,we=e.getInstanceFromNode,ke=e.preparePortalMount,Pe=e.getCurrentEventPriority,et=e.detachDeletedInstance,Le=e.supportsMicrotasks,Xe=e.scheduleMicrotask,Ze=e.supportsTestSelectors,Ae=e.findFiberRoot,ht=e.getBoundingRect,X=e.getTextContent,H=e.isHiddenSubtree,ce=e.matchAccessibilityRole,qe=e.setFocusIfFocusable,be=e.setupIntersectionObserver,Ne=e.appendChild,Ke=e.appendChildToContainer,We=e.commitTextUpdate,xe=e.commitMount,ct=e.commitUpdate,nt=e.insertBefore,tt=e.insertInContainerBefore,Ye=e.removeChild,st=e.removeChildFromContainer,_t=e.resetTextContent,Wt=e.hideInstance,le=e.hideTextInstance,je=e.unhideInstance,Se=e.unhideTextInstance,at=e.clearContainer,Qe=e.cloneInstance,mt=e.createContainerChildSet,Gt=e.appendChildToContainerChildSet,Vt=e.finalizeContainerChildren,Lt=e.replaceContainerChildren,Dt=e.cloneHiddenInstance,wn=e.cloneHiddenTextInstance,ln=e.canHydrateInstance,Un=e.canHydrateTextInstance,hi=e.canHydrateSuspenseInstance,Fr=e.isSuspenseInstancePending,Jn=e.isSuspenseInstanceFallback,tr=e.registerSuspenseInstanceRetry,ri=e.getNextHydratableSibling,nr=e.getFirstHydratableChild,Si=e.getFirstHydratableChildWithinContainer,_s=e.getFirstHydratableChildWithinSuspenseInstance,hl=e.hydrateInstance,ee=e.hydrateTextInstance,Ce=e.hydrateSuspenseInstance,ze=e.getNextHydratableInstanceAfterSuspenseInstance,Me=e.commitHydratedContainer,Be=e.commitHydratedSuspenseInstance,xt=e.clearSuspenseBoundary,Pt=e.clearSuspenseBoundaryFromContainer,It=e.shouldDeleteUnhydratedTailInstances,Ot=e.didNotMatchHydratedContainerTextInstance,Kt=e.didNotMatchHydratedTextInstance,Ge;function Ft(h){if(Ge===void 0)try{throw Error()}catch(x){var d=x.stack.trim().match(/\n( *(at )?)/);Ge=d&&d[1]||""}return`
`+Ge+h}var Tn=!1;function pn(h,d){if(!h||Tn)return"";Tn=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(d)if(d=function(){throw Error()},Object.defineProperty(d.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(d,[])}catch(lt){var E=lt}Reflect.construct(h,[],d)}else{try{d.call()}catch(lt){E=lt}h.call(d.prototype)}else{try{throw Error()}catch(lt){E=lt}h()}}catch(lt){if(lt&&E&&typeof lt.stack=="string"){for(var P=lt.stack.split(`
`),N=E.stack.split(`
`),ne=P.length-1,ge=N.length-1;1<=ne&&0<=ge&&P[ne]!==N[ge];)ge--;for(;1<=ne&&0<=ge;ne--,ge--)if(P[ne]!==N[ge]){if(ne!==1||ge!==1)do if(ne--,ge--,0>ge||P[ne]!==N[ge]){var He=`
`+P[ne].replace(" at new "," at ");return h.displayName&&He.includes("<anonymous>")&&(He=He.replace("<anonymous>",h.displayName)),He}while(1<=ne&&0<=ge);break}}}finally{Tn=!1,Error.prepareStackTrace=x}return(h=h?h.displayName||h.name:"")?Ft(h):""}var $n=Object.prototype.hasOwnProperty,ir=[],gn=-1;function Ut(h){return{current:h}}function Qt(h){0>gn||(h.current=ir[gn],ir[gn]=null,gn--)}function Bt(h,d){gn++,ir[gn]=h.current,h.current=d}var yn={},ei=Ut(yn),Hn=Ut(!1),Er=yn;function xn(h,d){var x=h.type.contextTypes;if(!x)return yn;var E=h.stateNode;if(E&&E.__reactInternalMemoizedUnmaskedChildContext===d)return E.__reactInternalMemoizedMaskedChildContext;var P={},N;for(N in x)P[N]=d[N];return E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=d,h.__reactInternalMemoizedMaskedChildContext=P),P}function An(h){return h=h.childContextTypes,h!=null}function _i(){Qt(Hn),Qt(ei)}function Xn(h,d,x){if(ei.current!==yn)throw Error(a(168));Bt(ei,d),Bt(Hn,x)}function Bs(h,d,x){var E=h.stateNode;if(d=d.childContextTypes,typeof E.getChildContext!="function")return x;E=E.getChildContext();for(var P in E)if(!(P in d))throw Error(a(108,z(h)||"Unknown",P));return s({},x,E)}function zs(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||yn,Er=ei.current,Bt(ei,h),Bt(Hn,Hn.current),!0}function Ci(h,d,x){var E=h.stateNode;if(!E)throw Error(a(169));x?(h=Bs(h,d,Er),E.__reactInternalMemoizedMergedChildContext=h,Qt(Hn),Qt(ei),Bt(ei,h)):Qt(Hn),Bt(Hn,x)}var br=Math.clz32?Math.clz32:bc,ja=Math.log,Ms=Math.LN2;function bc(h){return h>>>=0,h===0?32:31-(ja(h)/Ms|0)|0}var ws=64,un=4194304;function Hs(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function Xa(h,d){var x=h.pendingLanes;if(x===0)return 0;var E=0,P=h.suspendedLanes,N=h.pingedLanes,ne=x&268435455;if(ne!==0){var ge=ne&~P;ge!==0?E=Hs(ge):(N&=ne,N!==0&&(E=Hs(N)))}else ne=x&~P,ne!==0?E=Hs(ne):N!==0&&(E=Hs(N));if(E===0)return 0;if(d!==0&&d!==E&&!(d&P)&&(P=E&-E,N=d&-d,P>=N||P===16&&(N&4194240)!==0))return d;if(E&4&&(E|=x&16),d=h.entangledLanes,d!==0)for(h=h.entanglements,d&=E;0<d;)x=31-br(d),P=1<<x,E|=h[x],d&=~P;return E}function dl(h,d){switch(h){case 1:case 2:case 4:return d+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pl(h,d){for(var x=h.suspendedLanes,E=h.pingedLanes,P=h.expirationTimes,N=h.pendingLanes;0<N;){var ne=31-br(N),ge=1<<ne,He=P[ne];He===-1?(!(ge&x)||ge&E)&&(P[ne]=dl(ge,d)):He<=d&&(h.expiredLanes|=ge),N&=~ge}}function Gs(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function So(h){for(var d=[],x=0;31>x;x++)d.push(h);return d}function ns(h,d,x){h.pendingLanes|=d,d!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,d=31-br(d),h[d]=x}function Ts(h,d){var x=h.pendingLanes&~d;h.pendingLanes=d,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=d,h.mutableReadLanes&=d,h.entangledLanes&=d,d=h.entanglements;var E=h.eventTimes;for(h=h.expirationTimes;0<x;){var P=31-br(x),N=1<<P;d[P]=0,E[P]=-1,h[P]=-1,x&=~N}}function zi(h,d){var x=h.entangledLanes|=d;for(h=h.entanglements;x;){var E=31-br(x),P=1<<E;P&d|h[E]&d&&(h[E]|=d),x&=~P}}var jt=0;function is(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var kr=r.unstable_scheduleCallback,Vs=r.unstable_cancelCallback,rs=r.unstable_shouldYield,Ac=r.unstable_requestPaint,Gn=r.unstable_now,Es=r.unstable_ImmediatePriority,Cc=r.unstable_UserBlockingPriority,rr=r.unstable_NormalPriority,Ya=r.unstable_IdlePriority,qa=null,Or=null;function oa(h){if(Or&&typeof Or.onCommitFiberRoot=="function")try{Or.onCommitFiberRoot(qa,h,void 0,(h.current.flags&128)===128)}catch{}}function Za(h,d){return h===d&&(h!==0||1/h===1/d)||h!==h&&d!==d}var Ri=typeof Object.is=="function"?Object.is:Za,Pi=null,Ws=!1,ss=!1;function _o(h){Pi===null?Pi=[h]:Pi.push(h)}function Ka(h){Ws=!0,_o(h)}function sr(){if(!ss&&Pi!==null){ss=!0;var h=0,d=jt;try{var x=Pi;for(jt=1;h<x.length;h++){var E=x[h];do E=E(!0);while(E!==null)}Pi=null,Ws=!1}catch(P){throw Pi!==null&&(Pi=Pi.slice(h+1)),kr(Es,sr),P}finally{jt=d,ss=!1}}return null}var Qa=l.ReactCurrentBatchConfig;function Ar(h,d){if(Ri(h,d))return!0;if(typeof h!="object"||h===null||typeof d!="object"||d===null)return!1;var x=Object.keys(h),E=Object.keys(d);if(x.length!==E.length)return!1;for(E=0;E<x.length;E++){var P=x[E];if(!$n.call(d,P)||!Ri(h[P],d[P]))return!1}return!0}function la(h){switch(h.tag){case 5:return Ft(h.type);case 16:return Ft("Lazy");case 13:return Ft("Suspense");case 19:return Ft("SuspenseList");case 0:case 2:case 15:return h=pn(h.type,!1),h;case 11:return h=pn(h.type.render,!1),h;case 1:return h=pn(h.type,!0),h;default:return""}}function Di(h,d){if(h&&h.defaultProps){d=s({},d),h=h.defaultProps;for(var x in h)d[x]===void 0&&(d[x]=h[x]);return d}return d}var Mi=Ut(null),ua=null,Cr=null,ca=null;function Li(){ca=Cr=ua=null}function fa(h,d,x){rt?(Bt(Mi,d._currentValue),d._currentValue=x):(Bt(Mi,d._currentValue2),d._currentValue2=x)}function di(h){var d=Mi.current;Qt(Mi),rt?h._currentValue=d:h._currentValue2=d}function wi(h,d,x){for(;h!==null;){var E=h.alternate;if((h.childLanes&d)!==d?(h.childLanes|=d,E!==null&&(E.childLanes|=d)):E!==null&&(E.childLanes&d)!==d&&(E.childLanes|=d),h===x)break;h=h.return}}function si(h,d){ua=h,ca=Cr=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&d&&(Fi=!0),h.firstContext=null)}function Yn(h){var d=rt?h._currentValue:h._currentValue2;if(ca!==h)if(h={context:h,memoizedValue:d,next:null},Cr===null){if(ua===null)throw Error(a(308));Cr=h,ua.dependencies={lanes:0,firstContext:h}}else Cr=Cr.next=h;return d}var dr=null,as=!1;function ml(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(h,d){h=h.updateQueue,d.updateQueue===h&&(d.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function ha(h,d){return{eventTime:h,lane:d,tag:0,payload:null,callback:null,next:null}}function Ja(h,d){var x=h.updateQueue;x!==null&&(x=x.shared,oi!==null&&h.mode&1&&!(en&2)?(h=x.interleaved,h===null?(d.next=d,dr===null?dr=[x]:dr.push(x)):(d.next=h.next,h.next=d),x.interleaved=d):(h=x.pending,h===null?d.next=d:(d.next=h.next,h.next=d),x.pending=d))}function Rc(h,d,x){if(d=d.updateQueue,d!==null&&(d=d.shared,(x&4194240)!==0)){var E=d.lanes;E&=h.pendingLanes,x|=E,d.lanes=x,zi(h,x)}}function Pc(h,d){var x=h.updateQueue,E=h.alternate;if(E!==null&&(E=E.updateQueue,x===E)){var P=null,N=null;if(x=x.firstBaseUpdate,x!==null){do{var ne={eventTime:x.eventTime,lane:x.lane,tag:x.tag,payload:x.payload,callback:x.callback,next:null};N===null?P=N=ne:N=N.next=ne,x=x.next}while(x!==null);N===null?P=N=d:N=N.next=d}else P=N=d;x={baseState:E.baseState,firstBaseUpdate:P,lastBaseUpdate:N,shared:E.shared,effects:E.effects},h.updateQueue=x;return}h=x.lastBaseUpdate,h===null?x.firstBaseUpdate=d:h.next=d,x.lastBaseUpdate=d}function Dc(h,d,x,E){var P=h.updateQueue;as=!1;var N=P.firstBaseUpdate,ne=P.lastBaseUpdate,ge=P.shared.pending;if(ge!==null){P.shared.pending=null;var He=ge,lt=He.next;He.next=null,ne===null?N=lt:ne.next=lt,ne=He;var Mt=h.alternate;Mt!==null&&(Mt=Mt.updateQueue,ge=Mt.lastBaseUpdate,ge!==ne&&(ge===null?Mt.firstBaseUpdate=lt:ge.next=lt,Mt.lastBaseUpdate=He))}if(N!==null){var Yt=P.baseState;ne=0,Mt=lt=He=null,ge=N;do{var kt=ge.lane,rn=ge.eventTime;if((E&kt)===kt){Mt!==null&&(Mt=Mt.next={eventTime:rn,lane:0,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null});e:{var gt=h,Xi=ge;switch(kt=d,rn=x,Xi.tag){case 1:if(gt=Xi.payload,typeof gt=="function"){Yt=gt.call(rn,Yt,kt);break e}Yt=gt;break e;case 3:gt.flags=gt.flags&-65537|128;case 0:if(gt=Xi.payload,kt=typeof gt=="function"?gt.call(rn,Yt,kt):gt,kt==null)break e;Yt=s({},Yt,kt);break e;case 2:as=!0}}ge.callback!==null&&ge.lane!==0&&(h.flags|=64,kt=P.effects,kt===null?P.effects=[ge]:kt.push(ge))}else rn={eventTime:rn,lane:kt,tag:ge.tag,payload:ge.payload,callback:ge.callback,next:null},Mt===null?(lt=Mt=rn,He=Yt):Mt=Mt.next=rn,ne|=kt;if(ge=ge.next,ge===null){if(ge=P.shared.pending,ge===null)break;kt=ge,ge=kt.next,kt.next=null,P.lastBaseUpdate=kt,P.shared.pending=null}}while(!0);if(Mt===null&&(He=Yt),P.baseState=He,P.firstBaseUpdate=lt,P.lastBaseUpdate=Mt,d=P.shared.interleaved,d!==null){P=d;do ne|=P.lane,P=P.next;while(P!==d)}else N===null&&(P.shared.lanes=0);qs|=ne,h.lanes=ne,h.memoizedState=Yt}}function zp(h,d,x){if(h=d.effects,d.effects=null,h!==null)for(d=0;d<h.length;d++){var E=h[d],P=E.callback;if(P!==null){if(E.callback=null,E=x,typeof P!="function")throw Error(a(191,P));P.call(E)}}}var Hp=new i.Component().refs;function wh(h,d,x,E){d=h.memoizedState,x=x(E,d),x=x==null?d:s({},d,x),h.memoizedState=x,h.lanes===0&&(h.updateQueue.baseState=x)}var Lc={isMounted:function(h){return(h=h._reactInternals)?U(h)===h:!1},enqueueSetState:function(h,d,x){h=h._reactInternals;var E=vn(),P=Ls(h),N=ha(E,P);N.payload=d,x!=null&&(N.callback=x),Ja(h,N),d=lr(h,P,E),d!==null&&Rc(d,h,P)},enqueueReplaceState:function(h,d,x){h=h._reactInternals;var E=vn(),P=Ls(h),N=ha(E,P);N.tag=1,N.payload=d,x!=null&&(N.callback=x),Ja(h,N),d=lr(h,P,E),d!==null&&Rc(d,h,P)},enqueueForceUpdate:function(h,d){h=h._reactInternals;var x=vn(),E=Ls(h),P=ha(x,E);P.tag=2,d!=null&&(P.callback=d),Ja(h,P),d=lr(h,E,x),d!==null&&Rc(d,h,E)}};function Th(h,d,x,E,P,N,ne){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(E,N,ne):d.prototype&&d.prototype.isPureReactComponent?!Ar(x,E)||!Ar(P,N):!0}function Gp(h,d,x){var E=!1,P=yn,N=d.contextType;return typeof N=="object"&&N!==null?N=Yn(N):(P=An(d)?Er:ei.current,E=d.contextTypes,N=(E=E!=null)?xn(h,P):yn),d=new d(x,N),h.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Lc,h.stateNode=d,d._reactInternals=h,E&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=P,h.__reactInternalMemoizedMaskedChildContext=N),d}function Vp(h,d,x,E){h=d.state,typeof d.componentWillReceiveProps=="function"&&d.componentWillReceiveProps(x,E),typeof d.UNSAFE_componentWillReceiveProps=="function"&&d.UNSAFE_componentWillReceiveProps(x,E),d.state!==h&&Lc.enqueueReplaceState(d,d.state,null)}function Eh(h,d,x,E){var P=h.stateNode;P.props=x,P.state=h.memoizedState,P.refs=Hp,ml(h);var N=d.contextType;typeof N=="object"&&N!==null?P.context=Yn(N):(N=An(d)?Er:ei.current,P.context=xn(h,N)),P.state=h.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(wh(h,d,N,x),P.state=h.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(d=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),d!==P.state&&Lc.enqueueReplaceState(P,P.state,null),Dc(h,x,P,E),P.state=h.memoizedState),typeof P.componentDidMount=="function"&&(h.flags|=4194308)}var gl=[],$a=0,Ic=null,Uc=0,os=[],Br=0,Mo=null,da=1,pa="";function wo(h,d){gl[$a++]=Uc,gl[$a++]=Ic,Ic=h,Uc=d}function Wp(h,d,x){os[Br++]=da,os[Br++]=pa,os[Br++]=Mo,Mo=h;var E=da;h=pa;var P=32-br(E)-1;E&=~(1<<P),x+=1;var N=32-br(d)+P;if(30<N){var ne=P-P%5;N=(E&(1<<ne)-1).toString(32),E>>=ne,P-=ne,da=1<<32-br(d)+P|x<<P|E,pa=N+h}else da=1<<N|x<<P|E,pa=h}function bh(h){h.return!==null&&(wo(h,1),Wp(h,1,0))}function Ah(h){for(;h===Ic;)Ic=gl[--$a],gl[$a]=null,Uc=gl[--$a],gl[$a]=null;for(;h===Mo;)Mo=os[--Br],os[Br]=null,pa=os[--Br],os[Br]=null,da=os[--Br],os[Br]=null}var pr=null,Hi=null,Vn=!1,vl=!1,ls=null;function Ch(h,d){var x=Xr(5,null,null,0);x.elementType="DELETED",x.stateNode=d,x.return=h,d=h.deletions,d===null?(h.deletions=[x],h.flags|=16):d.push(x)}function Rh(h,d){switch(h.tag){case 5:return d=ln(d,h.type,h.pendingProps),d!==null?(h.stateNode=d,pr=h,Hi=nr(d),!0):!1;case 6:return d=Un(d,h.pendingProps),d!==null?(h.stateNode=d,pr=h,Hi=null,!0):!1;case 13:if(d=hi(d),d!==null){var x=Mo!==null?{id:da,overflow:pa}:null;return h.memoizedState={dehydrated:d,treeContext:x,retryLane:1073741824},x=Xr(18,null,null,0),x.stateNode=d,x.return=h,h.child=x,pr=h,Hi=null,!0}return!1;default:return!1}}function Nc(h){return(h.mode&1)!==0&&(h.flags&128)===0}function eo(h){if(Vn){var d=Hi;if(d){var x=d;if(!Rh(h,d)){if(Nc(h))throw Error(a(418));d=ri(x);var E=pr;d&&Rh(h,d)?Ch(E,x):(h.flags=h.flags&-4097|2,Vn=!1,pr=h)}}else{if(Nc(h))throw Error(a(418));h.flags=h.flags&-4097|2,Vn=!1,pr=h}}}function jp(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;pr=h}function uu(h){if(!Fe||h!==pr)return!1;if(!Vn)return jp(h),Vn=!0,!1;if(h.tag!==3&&(h.tag!==5||It(h.type)&&!re(h.type,h.memoizedProps))){var d=Hi;if(d){if(Nc(h)){for(h=Hi;h;)h=ri(h);throw Error(a(418))}for(;d;)Ch(h,d),d=ri(d)}}if(jp(h),h.tag===13){if(!Fe)throw Error(a(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));Hi=ze(h)}else Hi=pr?ri(h.stateNode):null;return!0}function yl(){Fe&&(Hi=pr=null,vl=Vn=!1)}function Fc(h){ls===null?ls=[h]:ls.push(h)}function xl(h,d,x){if(h=x.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(x._owner){if(x=x._owner,x){if(x.tag!==1)throw Error(a(309));var E=x.stateNode}if(!E)throw Error(a(147,h));var P=E,N=""+h;return d!==null&&d.ref!==null&&typeof d.ref=="function"&&d.ref._stringRef===N?d.ref:(d=function(ne){var ge=P.refs;ge===Hp&&(ge=P.refs={}),ne===null?delete ge[N]:ge[N]=ne},d._stringRef=N,d)}if(typeof h!="string")throw Error(a(284));if(!x._owner)throw Error(a(290,h))}return h}function to(h,d){throw h=Object.prototype.toString.call(d),Error(a(31,h==="[object Object]"?"object with keys {"+Object.keys(d).join(", ")+"}":h))}function Sl(h){var d=h._init;return d(h._payload)}function Xp(h){function d(De,ye){if(h){var Oe=De.deletions;Oe===null?(De.deletions=[ye],De.flags|=16):Oe.push(ye)}}function x(De,ye){if(!h)return null;for(;ye!==null;)d(De,ye),ye=ye.sibling;return null}function E(De,ye){for(De=new Map;ye!==null;)ye.key!==null?De.set(ye.key,ye):De.set(ye.index,ye),ye=ye.sibling;return De}function P(De,ye){return De=Ca(De,ye),De.index=0,De.sibling=null,De}function N(De,ye,Oe){return De.index=Oe,h?(Oe=De.alternate,Oe!==null?(Oe=Oe.index,Oe<ye?(De.flags|=2,ye):Oe):(De.flags|=2,ye)):(De.flags|=1048576,ye)}function ne(De){return h&&De.alternate===null&&(De.flags|=2),De}function ge(De,ye,Oe,pt){return ye===null||ye.tag!==6?(ye=cf(Oe,De.mode,pt),ye.return=De,ye):(ye=P(ye,Oe),ye.return=De,ye)}function He(De,ye,Oe,pt){var At=Oe.type;return At===p?Mt(De,ye,Oe.props.children,pt,Oe.key):ye!==null&&(ye.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===b&&Sl(At)===ye.type)?(pt=P(ye,Oe.props),pt.ref=xl(De,ye,Oe),pt.return=De,pt):(pt=uf(Oe.type,Oe.key,Oe.props,null,De.mode,pt),pt.ref=xl(De,ye,Oe),pt.return=De,pt)}function lt(De,ye,Oe,pt){return ye===null||ye.tag!==4||ye.stateNode.containerInfo!==Oe.containerInfo||ye.stateNode.implementation!==Oe.implementation?(ye=ff(Oe,De.mode,pt),ye.return=De,ye):(ye=P(ye,Oe.children||[]),ye.return=De,ye)}function Mt(De,ye,Oe,pt,At){return ye===null||ye.tag!==7?(ye=jo(Oe,De.mode,pt,At),ye.return=De,ye):(ye=P(ye,Oe),ye.return=De,ye)}function Yt(De,ye,Oe){if(typeof ye=="string"&&ye!==""||typeof ye=="number")return ye=cf(""+ye,De.mode,Oe),ye.return=De,ye;if(typeof ye=="object"&&ye!==null){switch(ye.$$typeof){case c:return Oe=uf(ye.type,ye.key,ye.props,null,De.mode,Oe),Oe.ref=xl(De,null,ye),Oe.return=De,Oe;case f:return ye=ff(ye,De.mode,Oe),ye.return=De,ye;case b:var pt=ye._init;return Yt(De,pt(ye._payload),Oe)}if(ae(ye)||k(ye))return ye=jo(ye,De.mode,Oe,null),ye.return=De,ye;to(De,ye)}return null}function kt(De,ye,Oe,pt){var At=ye!==null?ye.key:null;if(typeof Oe=="string"&&Oe!==""||typeof Oe=="number")return At!==null?null:ge(De,ye,""+Oe,pt);if(typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case c:return Oe.key===At?He(De,ye,Oe,pt):null;case f:return Oe.key===At?lt(De,ye,Oe,pt):null;case b:return At=Oe._init,kt(De,ye,At(Oe._payload),pt)}if(ae(Oe)||k(Oe))return At!==null?null:Mt(De,ye,Oe,pt,null);to(De,Oe)}return null}function rn(De,ye,Oe,pt,At){if(typeof pt=="string"&&pt!==""||typeof pt=="number")return De=De.get(Oe)||null,ge(ye,De,""+pt,At);if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case c:return De=De.get(pt.key===null?Oe:pt.key)||null,He(ye,De,pt,At);case f:return De=De.get(pt.key===null?Oe:pt.key)||null,lt(ye,De,pt,At);case b:var Jt=pt._init;return rn(De,ye,Oe,Jt(pt._payload),At)}if(ae(pt)||k(pt))return De=De.get(Oe)||null,Mt(ye,De,pt,At,null);to(ye,pt)}return null}function gt(De,ye,Oe,pt){for(var At=null,Jt=null,qt=ye,mn=ye=0,mi=null;qt!==null&&mn<Oe.length;mn++){qt.index>mn?(mi=qt,qt=null):mi=qt.sibling;var dn=kt(De,qt,Oe[mn],pt);if(dn===null){qt===null&&(qt=mi);break}h&&qt&&dn.alternate===null&&d(De,qt),ye=N(dn,ye,mn),Jt===null?At=dn:Jt.sibling=dn,Jt=dn,qt=mi}if(mn===Oe.length)return x(De,qt),Vn&&wo(De,mn),At;if(qt===null){for(;mn<Oe.length;mn++)qt=Yt(De,Oe[mn],pt),qt!==null&&(ye=N(qt,ye,mn),Jt===null?At=qt:Jt.sibling=qt,Jt=qt);return Vn&&wo(De,mn),At}for(qt=E(De,qt);mn<Oe.length;mn++)mi=rn(qt,De,mn,Oe[mn],pt),mi!==null&&(h&&mi.alternate!==null&&qt.delete(mi.key===null?mn:mi.key),ye=N(mi,ye,mn),Jt===null?At=mi:Jt.sibling=mi,Jt=mi);return h&&qt.forEach(function(Ra){return d(De,Ra)}),Vn&&wo(De,mn),At}function Xi(De,ye,Oe,pt){var At=k(Oe);if(typeof At!="function")throw Error(a(150));if(Oe=At.call(Oe),Oe==null)throw Error(a(151));for(var Jt=At=null,qt=ye,mn=ye=0,mi=null,dn=Oe.next();qt!==null&&!dn.done;mn++,dn=Oe.next()){qt.index>mn?(mi=qt,qt=null):mi=qt.sibling;var Ra=kt(De,qt,dn.value,pt);if(Ra===null){qt===null&&(qt=mi);break}h&&qt&&Ra.alternate===null&&d(De,qt),ye=N(Ra,ye,mn),Jt===null?At=Ra:Jt.sibling=Ra,Jt=Ra,qt=mi}if(dn.done)return x(De,qt),Vn&&wo(De,mn),At;if(qt===null){for(;!dn.done;mn++,dn=Oe.next())dn=Yt(De,dn.value,pt),dn!==null&&(ye=N(dn,ye,mn),Jt===null?At=dn:Jt.sibling=dn,Jt=dn);return Vn&&wo(De,mn),At}for(qt=E(De,qt);!dn.done;mn++,dn=Oe.next())dn=rn(qt,De,mn,dn.value,pt),dn!==null&&(h&&dn.alternate!==null&&qt.delete(dn.key===null?mn:dn.key),ye=N(dn,ye,mn),Jt===null?At=dn:Jt.sibling=dn,Jt=dn);return h&&qt.forEach(function(ad){return d(De,ad)}),Vn&&wo(De,mn),At}function Yr(De,ye,Oe,pt){if(typeof Oe=="object"&&Oe!==null&&Oe.type===p&&Oe.key===null&&(Oe=Oe.props.children),typeof Oe=="object"&&Oe!==null){switch(Oe.$$typeof){case c:e:{for(var At=Oe.key,Jt=ye;Jt!==null;){if(Jt.key===At){if(At=Oe.type,At===p){if(Jt.tag===7){x(De,Jt.sibling),ye=P(Jt,Oe.props.children),ye.return=De,De=ye;break e}}else if(Jt.elementType===At||typeof At=="object"&&At!==null&&At.$$typeof===b&&Sl(At)===Jt.type){x(De,Jt.sibling),ye=P(Jt,Oe.props),ye.ref=xl(De,Jt,Oe),ye.return=De,De=ye;break e}x(De,Jt);break}else d(De,Jt);Jt=Jt.sibling}Oe.type===p?(ye=jo(Oe.props.children,De.mode,pt,Oe.key),ye.return=De,De=ye):(pt=uf(Oe.type,Oe.key,Oe.props,null,De.mode,pt),pt.ref=xl(De,ye,Oe),pt.return=De,De=pt)}return ne(De);case f:e:{for(Jt=Oe.key;ye!==null;){if(ye.key===Jt)if(ye.tag===4&&ye.stateNode.containerInfo===Oe.containerInfo&&ye.stateNode.implementation===Oe.implementation){x(De,ye.sibling),ye=P(ye,Oe.children||[]),ye.return=De,De=ye;break e}else{x(De,ye);break}else d(De,ye);ye=ye.sibling}ye=ff(Oe,De.mode,pt),ye.return=De,De=ye}return ne(De);case b:return Jt=Oe._init,Yr(De,ye,Jt(Oe._payload),pt)}if(ae(Oe))return gt(De,ye,Oe,pt);if(k(Oe))return Xi(De,ye,Oe,pt);to(De,Oe)}return typeof Oe=="string"&&Oe!==""||typeof Oe=="number"?(Oe=""+Oe,ye!==null&&ye.tag===6?(x(De,ye.sibling),ye=P(ye,Oe),ye.return=De,De=ye):(x(De,ye),ye=cf(Oe,De.mode,pt),ye.return=De,De=ye),ne(De)):x(De,ye)}return Yr}var ma=Xp(!0),Yp=Xp(!1),_l={},Rr=Ut(_l),To=Ut(_l),Eo=Ut(_l);function bs(h){if(h===_l)throw Error(a(174));return h}function kc(h,d){Bt(Eo,d),Bt(To,h),Bt(Rr,_l),h=ue(d),Qt(Rr),Bt(Rr,h)}function Ml(){Qt(Rr),Qt(To),Qt(Eo)}function qp(h){var d=bs(Eo.current),x=bs(Rr.current);d=V(x,h.type,d),x!==d&&(Bt(To,h),Bt(Rr,d))}function Ph(h){To.current===h&&(Qt(Rr),Qt(To))}var qn=Ut(0);function Oc(h){for(var d=h;d!==null;){if(d.tag===13){var x=d.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||Fr(x)||Jn(x)))return d}else if(d.tag===19&&d.memoizedProps.revealOrder!==void 0){if(d.flags&128)return d}else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return null;d=d.return}d.sibling.return=d.return,d=d.sibling}return null}var zr=[];function bo(){for(var h=0;h<zr.length;h++){var d=zr[h];rt?d._workInProgressVersionPrimary=null:d._workInProgressVersionSecondary=null}zr.length=0}var cu=l.ReactCurrentDispatcher,Hr=l.ReactCurrentBatchConfig,Ao=0,Zn=null,Ii=null,Ui=null,Bc=!1,js=!1,Co=0,fu=0;function Ni(){throw Error(a(321))}function zc(h,d){if(d===null)return!1;for(var x=0;x<d.length&&x<h.length;x++)if(!Ri(h[x],d[x]))return!1;return!0}function wl(h,d,x,E,P,N){if(Ao=N,Zn=d,d.memoizedState=null,d.updateQueue=null,d.lanes=0,cu.current=h===null||h.memoizedState===null?Fh:kh,h=x(E,P),js){N=0;do{if(js=!1,Co=0,25<=N)throw Error(a(301));N+=1,Ui=Ii=null,d.updateQueue=null,cu.current=Oh,h=x(E,P)}while(js)}if(cu.current=Al,d=Ii!==null&&Ii.next!==null,Ao=0,Ui=Ii=Zn=null,Bc=!1,d)throw Error(a(300));return h}function no(){var h=Co!==0;return Co=0,h}function As(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?Zn.memoizedState=Ui=h:Ui=Ui.next=h,Ui}function Cs(){if(Ii===null){var h=Zn.alternate;h=h!==null?h.memoizedState:null}else h=Ii.next;var d=Ui===null?Zn.memoizedState:Ui.next;if(d!==null)Ui=d,Ii=h;else{if(h===null)throw Error(a(310));Ii=h,h={memoizedState:Ii.memoizedState,baseState:Ii.baseState,baseQueue:Ii.baseQueue,queue:Ii.queue,next:null},Ui===null?Zn.memoizedState=Ui=h:Ui=Ui.next=h}return Ui}function Xs(h,d){return typeof d=="function"?d(h):d}function hu(h){var d=Cs(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=h;var E=Ii,P=E.baseQueue,N=x.pending;if(N!==null){if(P!==null){var ne=P.next;P.next=N.next,N.next=ne}E.baseQueue=P=N,x.pending=null}if(P!==null){N=P.next,E=E.baseState;var ge=ne=null,He=null,lt=N;do{var Mt=lt.lane;if((Ao&Mt)===Mt)He!==null&&(He=He.next={lane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),E=lt.hasEagerState?lt.eagerState:h(E,lt.action);else{var Yt={lane:Mt,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null};He===null?(ge=He=Yt,ne=E):He=He.next=Yt,Zn.lanes|=Mt,qs|=Mt}lt=lt.next}while(lt!==null&&lt!==N);He===null?ne=E:He.next=ge,Ri(E,d.memoizedState)||(Fi=!0),d.memoizedState=E,d.baseState=ne,d.baseQueue=He,x.lastRenderedState=E}if(h=x.interleaved,h!==null){P=h;do N=P.lane,Zn.lanes|=N,qs|=N,P=P.next;while(P!==h)}else P===null&&(x.lanes=0);return[d.memoizedState,x.dispatch]}function du(h){var d=Cs(),x=d.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=h;var E=x.dispatch,P=x.pending,N=d.memoizedState;if(P!==null){x.pending=null;var ne=P=P.next;do N=h(N,ne.action),ne=ne.next;while(ne!==P);Ri(N,d.memoizedState)||(Fi=!0),d.memoizedState=N,d.baseQueue===null&&(d.baseState=N),x.lastRenderedState=N}return[N,E]}function Dh(){}function Lh(h,d){var x=Zn,E=Cs(),P=d(),N=!Ri(E.memoizedState,P);if(N&&(E.memoizedState=P,Fi=!0),E=E.queue,Tl(ga.bind(null,x,E,h),[h]),E.getSnapshot!==d||N||Ui!==null&&Ui.memoizedState.tag&1){if(x.flags|=2048,mu(9,Uh.bind(null,x,E,P,d),void 0,null),oi===null)throw Error(a(349));Ao&30||Ih(x,d,P)}return P}function Ih(h,d,x){h.flags|=16384,h={getSnapshot:d,value:x},d=Zn.updateQueue,d===null?(d={lastEffect:null,stores:null},Zn.updateQueue=d,d.stores=[h]):(x=d.stores,x===null?d.stores=[h]:x.push(h))}function Uh(h,d,x,E){d.value=x,d.getSnapshot=E,Hc(d)&&lr(h,1,-1)}function ga(h,d,x){return x(function(){Hc(d)&&lr(h,1,-1)})}function Hc(h){var d=h.getSnapshot;h=h.value;try{var x=d();return!Ri(h,x)}catch{return!0}}function pu(h){var d=As();return typeof h=="function"&&(h=h()),d.memoizedState=d.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Xs,lastRenderedState:h},d.queue=h,h=h.dispatch=Vv.bind(null,Zn,h),[d.memoizedState,h]}function mu(h,d,x,E){return h={tag:h,create:d,destroy:x,deps:E,next:null},d=Zn.updateQueue,d===null?(d={lastEffect:null,stores:null},Zn.updateQueue=d,d.lastEffect=h.next=h):(x=d.lastEffect,x===null?d.lastEffect=h.next=h:(E=x.next,x.next=h,h.next=E,d.lastEffect=h)),h}function Zp(){return Cs().memoizedState}function io(h,d,x,E){var P=As();Zn.flags|=h,P.memoizedState=mu(1|d,x,void 0,E===void 0?null:E)}function Gc(h,d,x,E){var P=Cs();E=E===void 0?null:E;var N=void 0;if(Ii!==null){var ne=Ii.memoizedState;if(N=ne.destroy,E!==null&&zc(E,ne.deps)){P.memoizedState=mu(d,x,N,E);return}}Zn.flags|=h,P.memoizedState=mu(1|d,x,N,E)}function Vc(h,d){return io(8390656,8,h,d)}function Tl(h,d){return Gc(2048,8,h,d)}function Nn(h,d){return Gc(4,2,h,d)}function Wc(h,d){return Gc(4,4,h,d)}function gu(h,d){if(typeof d=="function")return h=h(),d(h),function(){d(null)};if(d!=null)return h=h(),d.current=h,function(){d.current=null}}function El(h,d,x){return x=x!=null?x.concat([h]):null,Gc(4,4,gu.bind(null,d,h),x)}function jc(){}function Xc(h,d){var x=Cs();d=d===void 0?null:d;var E=x.memoizedState;return E!==null&&d!==null&&zc(d,E[1])?E[0]:(x.memoizedState=[h,d],h)}function bl(h,d){var x=Cs();d=d===void 0?null:d;var E=x.memoizedState;return E!==null&&d!==null&&zc(d,E[1])?E[0]:(h=h(),x.memoizedState=[h,d],h)}function Yc(h,d){var x=jt;jt=x!==0&&4>x?x:4,h(!0);var E=Hr.transition;Hr.transition={};try{h(!1),d()}finally{jt=x,Hr.transition=E}}function Ro(){return Cs().memoizedState}function Kp(h,d,x){var E=Ls(h);x={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null},Qp(h)?Nh(d,x):(vu(h,d,x),x=vn(),h=lr(h,E,x),h!==null&&yu(h,d,E))}function Vv(h,d,x){var E=Ls(h),P={lane:E,action:x,hasEagerState:!1,eagerState:null,next:null};if(Qp(h))Nh(d,P);else{vu(h,d,P);var N=h.alternate;if(h.lanes===0&&(N===null||N.lanes===0)&&(N=d.lastRenderedReducer,N!==null))try{var ne=d.lastRenderedState,ge=N(ne,x);if(P.hasEagerState=!0,P.eagerState=ge,Ri(ge,ne))return}catch{}finally{}x=vn(),h=lr(h,E,x),h!==null&&yu(h,d,E)}}function Qp(h){var d=h.alternate;return h===Zn||d!==null&&d===Zn}function Nh(h,d){js=Bc=!0;var x=h.pending;x===null?d.next=d:(d.next=x.next,x.next=d),h.pending=d}function vu(h,d,x){oi!==null&&h.mode&1&&!(en&2)?(h=d.interleaved,h===null?(x.next=x,dr===null?dr=[d]:dr.push(d)):(x.next=h.next,h.next=x),d.interleaved=x):(h=d.pending,h===null?x.next=x:(x.next=h.next,h.next=x),d.pending=x)}function yu(h,d,x){if(x&4194240){var E=d.lanes;E&=h.pendingLanes,x|=E,d.lanes=x,zi(h,x)}}var Al={readContext:Yn,useCallback:Ni,useContext:Ni,useEffect:Ni,useImperativeHandle:Ni,useInsertionEffect:Ni,useLayoutEffect:Ni,useMemo:Ni,useReducer:Ni,useRef:Ni,useState:Ni,useDebugValue:Ni,useDeferredValue:Ni,useTransition:Ni,useMutableSource:Ni,useSyncExternalStore:Ni,useId:Ni,unstable_isNewReconciler:!1},Fh={readContext:Yn,useCallback:function(h,d){return As().memoizedState=[h,d===void 0?null:d],h},useContext:Yn,useEffect:Vc,useImperativeHandle:function(h,d,x){return x=x!=null?x.concat([h]):null,io(4194308,4,gu.bind(null,d,h),x)},useLayoutEffect:function(h,d){return io(4194308,4,h,d)},useInsertionEffect:function(h,d){return io(4,2,h,d)},useMemo:function(h,d){var x=As();return d=d===void 0?null:d,h=h(),x.memoizedState=[h,d],h},useReducer:function(h,d,x){var E=As();return d=x!==void 0?x(d):d,E.memoizedState=E.baseState=d,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:d},E.queue=h,h=h.dispatch=Kp.bind(null,Zn,h),[E.memoizedState,h]},useRef:function(h){var d=As();return h={current:h},d.memoizedState=h},useState:pu,useDebugValue:jc,useDeferredValue:function(h){var d=pu(h),x=d[0],E=d[1];return Vc(function(){var P=Hr.transition;Hr.transition={};try{E(h)}finally{Hr.transition=P}},[h]),x},useTransition:function(){var h=pu(!1),d=h[0];return h=Yc.bind(null,h[1]),As().memoizedState=h,[d,h]},useMutableSource:function(){},useSyncExternalStore:function(h,d,x){var E=Zn,P=As();if(Vn){if(x===void 0)throw Error(a(407));x=x()}else{if(x=d(),oi===null)throw Error(a(349));Ao&30||Ih(E,d,x)}P.memoizedState=x;var N={value:x,getSnapshot:d};return P.queue=N,Vc(ga.bind(null,E,N,h),[h]),E.flags|=2048,mu(9,Uh.bind(null,E,N,x,d),void 0,null),x},useId:function(){var h=As(),d=oi.identifierPrefix;if(Vn){var x=pa,E=da;x=(E&~(1<<32-br(E)-1)).toString(32)+x,d=":"+d+"R"+x,x=Co++,0<x&&(d+="H"+x.toString(32)),d+=":"}else x=fu++,d=":"+d+"r"+x.toString(32)+":";return h.memoizedState=d},unstable_isNewReconciler:!1},kh={readContext:Yn,useCallback:Xc,useContext:Yn,useEffect:Tl,useImperativeHandle:El,useInsertionEffect:Nn,useLayoutEffect:Wc,useMemo:bl,useReducer:hu,useRef:Zp,useState:function(){return hu(Xs)},useDebugValue:jc,useDeferredValue:function(h){var d=hu(Xs),x=d[0],E=d[1];return Tl(function(){var P=Hr.transition;Hr.transition={};try{E(h)}finally{Hr.transition=P}},[h]),x},useTransition:function(){var h=hu(Xs)[0],d=Cs().memoizedState;return[h,d]},useMutableSource:Dh,useSyncExternalStore:Lh,useId:Ro,unstable_isNewReconciler:!1},Oh={readContext:Yn,useCallback:Xc,useContext:Yn,useEffect:Tl,useImperativeHandle:El,useInsertionEffect:Nn,useLayoutEffect:Wc,useMemo:bl,useReducer:du,useRef:Zp,useState:function(){return du(Xs)},useDebugValue:jc,useDeferredValue:function(h){var d=du(Xs),x=d[0],E=d[1];return Tl(function(){var P=Hr.transition;Hr.transition={};try{E(h)}finally{Hr.transition=P}},[h]),x},useTransition:function(){var h=du(Xs)[0],d=Cs().memoizedState;return[h,d]},useMutableSource:Dh,useSyncExternalStore:Lh,useId:Ro,unstable_isNewReconciler:!1};function Bh(h,d){try{var x="",E=d;do x+=la(E),E=E.return;while(E);var P=x}catch(N){P=`
Error generating stack: `+N.message+`
`+N.stack}return{value:h,source:d,stack:P}}function qc(h,d){try{console.error(d.value)}catch(x){setTimeout(function(){throw x})}}var Wv=typeof WeakMap=="function"?WeakMap:Map;function Jp(h,d,x){x=ha(-1,x),x.tag=3,x.payload={element:null};var E=d.value;return x.callback=function(){Il||(Il=!0,Bn=E),qc(h,d)},x}function Zc(h,d,x){x=ha(-1,x),x.tag=3;var E=h.type.getDerivedStateFromError;if(typeof E=="function"){var P=d.value;x.payload=function(){return E(P)},x.callback=function(){qc(h,d)}}var N=h.stateNode;return N!==null&&typeof N.componentDidCatch=="function"&&(x.callback=function(){qc(h,d),typeof E!="function"&&(Ds===null?Ds=new Set([this]):Ds.add(this));var ne=d.stack;this.componentDidCatch(d.value,{componentStack:ne!==null?ne:""})}),x}function va(h,d,x){var E=h.pingCache;if(E===null){E=h.pingCache=new Wv;var P=new Set;E.set(d,P)}else P=E.get(d),P===void 0&&(P=new Set,E.set(d,P));P.has(x)||(P.add(x),h=id.bind(null,h,d,x),d.then(h,h))}function zh(h){do{var d;if((d=h.tag===13)&&(d=h.memoizedState,d=d!==null?d.dehydrated!==null:!0),d)return h;h=h.return}while(h!==null);return null}function Po(h,d,x,E,P){return h.mode&1?(h.flags|=65536,h.lanes=P,h):(h===d?h.flags|=65536:(h.flags|=128,x.flags|=131072,x.flags&=-52805,x.tag===1&&(x.alternate===null?x.tag=17:(d=ha(-1,1),d.tag=2,Ja(x,d))),x.lanes|=1),h)}function Ti(h){h.flags|=4}function Cl(h,d){if(h!==null&&h.child===d.child)return!0;if(d.flags&16)return!1;for(h=d.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var Gr,Do,Kc,Qc;if(Ue)Gr=function(h,d){for(var x=d.child;x!==null;){if(x.tag===5||x.tag===6)B(h,x.stateNode);else if(x.tag!==4&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===d)break;for(;x.sibling===null;){if(x.return===null||x.return===d)return;x=x.return}x.sibling.return=x.return,x=x.sibling}},Do=function(){},Kc=function(h,d,x,E,P){if(h=h.memoizedProps,h!==E){var N=d.stateNode,ne=bs(Rr.current);x=ie(N,x,h,E,P,ne),(d.updateQueue=x)&&Ti(d)}},Qc=function(h,d,x,E){x!==E&&Ti(d)};else if(Z){Gr=function(h,d,x,E){for(var P=d.child;P!==null;){if(P.tag===5){var N=P.stateNode;x&&E&&(N=Dt(N,P.type,P.memoizedProps,P)),B(h,N)}else if(P.tag===6)N=P.stateNode,x&&E&&(N=wn(N,P.memoizedProps,P)),B(h,N);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)N=P.child,N!==null&&(N.return=P),Gr(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===d)break;for(;P.sibling===null;){if(P.return===null||P.return===d)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var ro=function(h,d,x,E){for(var P=d.child;P!==null;){if(P.tag===5){var N=P.stateNode;x&&E&&(N=Dt(N,P.type,P.memoizedProps,P)),Gt(h,N)}else if(P.tag===6)N=P.stateNode,x&&E&&(N=wn(N,P.memoizedProps,P)),Gt(h,N);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)N=P.child,N!==null&&(N.return=P),ro(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===d)break;for(;P.sibling===null;){if(P.return===null||P.return===d)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};Do=function(h,d){var x=d.stateNode;if(!Cl(h,d)){h=x.containerInfo;var E=mt(h);ro(E,d,!1,!1),x.pendingChildren=E,Ti(d),Vt(h,E)}},Kc=function(h,d,x,E,P){var N=h.stateNode,ne=h.memoizedProps;if((h=Cl(h,d))&&ne===E)d.stateNode=N;else{var ge=d.stateNode,He=bs(Rr.current),lt=null;ne!==E&&(lt=ie(ge,x,ne,E,P,He)),h&&lt===null?d.stateNode=N:(N=Qe(N,lt,x,ne,E,d,h,ge),te(N,x,E,P,He)&&Ti(d),d.stateNode=N,h?Ti(d):Gr(N,d,!1,!1))}},Qc=function(h,d,x,E){x!==E?(h=bs(Eo.current),x=bs(Rr.current),d.stateNode=de(E,h,x,d),Ti(d)):d.stateNode=h.stateNode}}else Do=function(){},Kc=function(){},Qc=function(){};function ya(h,d){if(!Vn)switch(h.tailMode){case"hidden":d=h.tail;for(var x=null;d!==null;)d.alternate!==null&&(x=d),d=d.sibling;x===null?h.tail=null:x.sibling=null;break;case"collapsed":x=h.tail;for(var E=null;x!==null;)x.alternate!==null&&(E=x),x=x.sibling;E===null?d||h.tail===null?h.tail=null:h.tail.sibling=null:E.sibling=null}}function ai(h){var d=h.alternate!==null&&h.alternate.child===h.child,x=0,E=0;if(d)for(var P=h.child;P!==null;)x|=P.lanes|P.childLanes,E|=P.subtreeFlags&14680064,E|=P.flags&14680064,P.return=h,P=P.sibling;else for(P=h.child;P!==null;)x|=P.lanes|P.childLanes,E|=P.subtreeFlags,E|=P.flags,P.return=h,P=P.sibling;return h.subtreeFlags|=E,h.childLanes=x,d}function Jc(h,d,x){var E=d.pendingProps;switch(Ah(d),d.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ai(d),null;case 1:return An(d.type)&&_i(),ai(d),null;case 3:return E=d.stateNode,Ml(),Qt(Hn),Qt(ei),bo(),E.pendingContext&&(E.context=E.pendingContext,E.pendingContext=null),(h===null||h.child===null)&&(uu(d)?Ti(d):h===null||h.memoizedState.isDehydrated&&!(d.flags&256)||(d.flags|=1024,ls!==null&&(Du(ls),ls=null))),Do(h,d),ai(d),null;case 5:Ph(d),x=bs(Eo.current);var P=d.type;if(h!==null&&d.stateNode!=null)Kc(h,d,P,E,x),h.ref!==d.ref&&(d.flags|=512,d.flags|=2097152);else{if(!E){if(d.stateNode===null)throw Error(a(166));return ai(d),null}if(h=bs(Rr.current),uu(d)){if(!Fe)throw Error(a(175));h=hl(d.stateNode,d.type,d.memoizedProps,x,h,d,!vl),d.updateQueue=h,h!==null&&Ti(d)}else{var N=L(P,E,x,h,d);Gr(N,d,!1,!1),d.stateNode=N,te(N,P,E,x,h)&&Ti(d)}d.ref!==null&&(d.flags|=512,d.flags|=2097152)}return ai(d),null;case 6:if(h&&d.stateNode!=null)Qc(h,d,h.memoizedProps,E);else{if(typeof E!="string"&&d.stateNode===null)throw Error(a(166));if(h=bs(Eo.current),x=bs(Rr.current),uu(d)){if(!Fe)throw Error(a(176));if(h=d.stateNode,E=d.memoizedProps,(x=ee(h,E,d,!vl))&&(P=pr,P!==null))switch(N=(P.mode&1)!==0,P.tag){case 3:Ot(P.stateNode.containerInfo,h,E,N);break;case 5:Kt(P.type,P.memoizedProps,P.stateNode,h,E,N)}x&&Ti(d)}else d.stateNode=de(E,h,x,d)}return ai(d),null;case 13:if(Qt(qn),E=d.memoizedState,Vn&&Hi!==null&&d.mode&1&&!(d.flags&128)){for(h=Hi;h;)h=ri(h);return yl(),d.flags|=98560,d}if(E!==null&&E.dehydrated!==null){if(E=uu(d),h===null){if(!E)throw Error(a(318));if(!Fe)throw Error(a(344));if(h=d.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(a(317));Ce(h,d)}else yl(),!(d.flags&128)&&(d.memoizedState=null),d.flags|=4;return ai(d),null}return ls!==null&&(Du(ls),ls=null),d.flags&128?(d.lanes=x,d):(E=E!==null,x=!1,h===null?uu(d):x=h.memoizedState!==null,E&&!x&&(d.child.flags|=8192,d.mode&1&&(h===null||qn.current&1?ni===0&&(ni=3):af())),d.updateQueue!==null&&(d.flags|=4),ai(d),null);case 4:return Ml(),Do(h,d),h===null&&ke(d.stateNode.containerInfo),ai(d),null;case 10:return di(d.type._context),ai(d),null;case 17:return An(d.type)&&_i(),ai(d),null;case 19:if(Qt(qn),P=d.memoizedState,P===null)return ai(d),null;if(E=(d.flags&128)!==0,N=P.rendering,N===null)if(E)ya(P,!1);else{if(ni!==0||h!==null&&h.flags&128)for(h=d.child;h!==null;){if(N=Oc(h),N!==null){for(d.flags|=128,ya(P,!1),h=N.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),d.subtreeFlags=0,h=x,E=d.child;E!==null;)x=E,P=h,x.flags&=14680066,N=x.alternate,N===null?(x.childLanes=0,x.lanes=P,x.child=null,x.subtreeFlags=0,x.memoizedProps=null,x.memoizedState=null,x.updateQueue=null,x.dependencies=null,x.stateNode=null):(x.childLanes=N.childLanes,x.lanes=N.lanes,x.child=N.child,x.subtreeFlags=0,x.deletions=null,x.memoizedProps=N.memoizedProps,x.memoizedState=N.memoizedState,x.updateQueue=N.updateQueue,x.type=N.type,P=N.dependencies,x.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),E=E.sibling;return Bt(qn,qn.current&1|2),d.child}h=h.sibling}P.tail!==null&&Gn()>oo&&(d.flags|=128,E=!0,ya(P,!1),d.lanes=4194304)}else{if(!E)if(h=Oc(N),h!==null){if(d.flags|=128,E=!0,h=h.updateQueue,h!==null&&(d.updateQueue=h,d.flags|=4),ya(P,!0),P.tail===null&&P.tailMode==="hidden"&&!N.alternate&&!Vn)return ai(d),null}else 2*Gn()-P.renderingStartTime>oo&&x!==1073741824&&(d.flags|=128,E=!0,ya(P,!1),d.lanes=4194304);P.isBackwards?(N.sibling=d.child,d.child=N):(h=P.last,h!==null?h.sibling=N:d.child=N,P.last=N)}return P.tail!==null?(d=P.tail,P.rendering=d,P.tail=d.sibling,P.renderingStartTime=Gn(),d.sibling=null,h=qn.current,Bt(qn,E?h&1|2:h&1),d):(ai(d),null);case 22:case 23:return Lu(),E=d.memoizedState!==null,h!==null&&h.memoizedState!==null!==E&&(d.flags|=8192),E&&d.mode&1?or&1073741824&&(ai(d),Ue&&d.subtreeFlags&6&&(d.flags|=8192)):ai(d),null;case 24:return null;case 25:return null}throw Error(a(156,d.tag))}var Hh=l.ReactCurrentOwner,Fi=!1;function ti(h,d,x,E){d.child=h===null?Yp(d,null,x,E):ma(d,h.child,x,E)}function Fn(h,d,x,E,P){x=x.render;var N=d.ref;return si(d,P),E=wl(h,d,x,E,N,P),x=no(),h!==null&&!Fi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~P,Pr(h,d,P)):(Vn&&x&&bh(d),d.flags|=1,ti(h,d,E,P),d.child)}function In(h,d,x,E,P){if(h===null){var N=x.type;return typeof N=="function"&&!lf(N)&&N.defaultProps===void 0&&x.compare===null&&x.defaultProps===void 0?(d.tag=15,d.type=N,xa(h,d,N,E,P)):(h=uf(x.type,null,E,d,d.mode,P),h.ref=d.ref,h.return=d,d.child=h)}if(N=h.child,!(h.lanes&P)){var ne=N.memoizedProps;if(x=x.compare,x=x!==null?x:Ar,x(ne,E)&&h.ref===d.ref)return Pr(h,d,P)}return d.flags|=1,h=Ca(N,E),h.ref=d.ref,h.return=d,d.child=h}function xa(h,d,x,E,P){if(h!==null&&Ar(h.memoizedProps,E)&&h.ref===d.ref)if(Fi=!1,(h.lanes&P)!==0)h.flags&131072&&(Fi=!0);else return d.lanes=h.lanes,Pr(h,d,P);return Sa(h,d,x,E,P)}function Gi(h,d,x){var E=d.pendingProps,P=E.children,N=h!==null?h.memoizedState:null;if(E.mode==="hidden")if(!(d.mode&1))d.memoizedState={baseLanes:0,cachePool:null},Bt(zo,or),or|=x;else if(x&1073741824)d.memoizedState={baseLanes:0,cachePool:null},E=N!==null?N.baseLanes:x,Bt(zo,or),or|=E;else return h=N!==null?N.baseLanes|x:x,d.lanes=d.childLanes=1073741824,d.memoizedState={baseLanes:h,cachePool:null},d.updateQueue=null,Bt(zo,or),or|=h,null;else N!==null?(E=N.baseLanes|x,d.memoizedState=null):E=x,Bt(zo,or),or|=E;return ti(h,d,P,x),d.child}function mr(h,d){var x=d.ref;(h===null&&x!==null||h!==null&&h.ref!==x)&&(d.flags|=512,d.flags|=2097152)}function Sa(h,d,x,E,P){var N=An(x)?Er:ei.current;return N=xn(d,N),si(d,P),x=wl(h,d,x,E,N,P),E=no(),h!==null&&!Fi?(d.updateQueue=h.updateQueue,d.flags&=-2053,h.lanes&=~P,Pr(h,d,P)):(Vn&&E&&bh(d),d.flags|=1,ti(h,d,x,P),d.child)}function Lo(h,d,x,E,P){if(An(x)){var N=!0;zs(d)}else N=!1;if(si(d,P),d.stateNode===null)h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),Gp(d,x,E),Eh(d,x,E,P),E=!0;else if(h===null){var ne=d.stateNode,ge=d.memoizedProps;ne.props=ge;var He=ne.context,lt=x.contextType;typeof lt=="object"&&lt!==null?lt=Yn(lt):(lt=An(x)?Er:ei.current,lt=xn(d,lt));var Mt=x.getDerivedStateFromProps,Yt=typeof Mt=="function"||typeof ne.getSnapshotBeforeUpdate=="function";Yt||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ge!==E||He!==lt)&&Vp(d,ne,E,lt),as=!1;var kt=d.memoizedState;ne.state=kt,Dc(d,E,ne,P),He=d.memoizedState,ge!==E||kt!==He||Hn.current||as?(typeof Mt=="function"&&(wh(d,x,Mt,E),He=d.memoizedState),(ge=as||Th(d,x,ge,E,kt,He,lt))?(Yt||typeof ne.UNSAFE_componentWillMount!="function"&&typeof ne.componentWillMount!="function"||(typeof ne.componentWillMount=="function"&&ne.componentWillMount(),typeof ne.UNSAFE_componentWillMount=="function"&&ne.UNSAFE_componentWillMount()),typeof ne.componentDidMount=="function"&&(d.flags|=4194308)):(typeof ne.componentDidMount=="function"&&(d.flags|=4194308),d.memoizedProps=E,d.memoizedState=He),ne.props=E,ne.state=He,ne.context=lt,E=ge):(typeof ne.componentDidMount=="function"&&(d.flags|=4194308),E=!1)}else{ne=d.stateNode,Mh(h,d),ge=d.memoizedProps,lt=d.type===d.elementType?ge:Di(d.type,ge),ne.props=lt,Yt=d.pendingProps,kt=ne.context,He=x.contextType,typeof He=="object"&&He!==null?He=Yn(He):(He=An(x)?Er:ei.current,He=xn(d,He));var rn=x.getDerivedStateFromProps;(Mt=typeof rn=="function"||typeof ne.getSnapshotBeforeUpdate=="function")||typeof ne.UNSAFE_componentWillReceiveProps!="function"&&typeof ne.componentWillReceiveProps!="function"||(ge!==Yt||kt!==He)&&Vp(d,ne,E,He),as=!1,kt=d.memoizedState,ne.state=kt,Dc(d,E,ne,P);var gt=d.memoizedState;ge!==Yt||kt!==gt||Hn.current||as?(typeof rn=="function"&&(wh(d,x,rn,E),gt=d.memoizedState),(lt=as||Th(d,x,lt,E,kt,gt,He)||!1)?(Mt||typeof ne.UNSAFE_componentWillUpdate!="function"&&typeof ne.componentWillUpdate!="function"||(typeof ne.componentWillUpdate=="function"&&ne.componentWillUpdate(E,gt,He),typeof ne.UNSAFE_componentWillUpdate=="function"&&ne.UNSAFE_componentWillUpdate(E,gt,He)),typeof ne.componentDidUpdate=="function"&&(d.flags|=4),typeof ne.getSnapshotBeforeUpdate=="function"&&(d.flags|=1024)):(typeof ne.componentDidUpdate!="function"||ge===h.memoizedProps&&kt===h.memoizedState||(d.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ge===h.memoizedProps&&kt===h.memoizedState||(d.flags|=1024),d.memoizedProps=E,d.memoizedState=gt),ne.props=E,ne.state=gt,ne.context=He,E=lt):(typeof ne.componentDidUpdate!="function"||ge===h.memoizedProps&&kt===h.memoizedState||(d.flags|=4),typeof ne.getSnapshotBeforeUpdate!="function"||ge===h.memoizedProps&&kt===h.memoizedState||(d.flags|=1024),E=!1)}return ar(h,d,x,E,N,P)}function ar(h,d,x,E,P,N){mr(h,d);var ne=(d.flags&128)!==0;if(!E&&!ne)return P&&Ci(d,x,!1),Pr(h,d,N);E=d.stateNode,Hh.current=d;var ge=ne&&typeof x.getDerivedStateFromError!="function"?null:E.render();return d.flags|=1,h!==null&&ne?(d.child=ma(d,h.child,null,N),d.child=ma(d,null,ge,N)):ti(h,d,ge,N),d.memoizedState=E.state,P&&Ci(d,x,!0),d.child}function xu(h){var d=h.stateNode;d.pendingContext?Xn(h,d.pendingContext,d.pendingContext!==d.context):d.context&&Xn(h,d.context,!1),kc(h,d.containerInfo)}function Gh(h,d,x,E,P){return yl(),Fc(P),d.flags|=256,ti(h,d,x,E),d.child}var Su={dehydrated:null,treeContext:null,retryLane:0};function Io(h){return{baseLanes:h,cachePool:null}}function Vh(h,d,x){var E=d.pendingProps,P=qn.current,N=!1,ne=(d.flags&128)!==0,ge;if((ge=ne)||(ge=h!==null&&h.memoizedState===null?!1:(P&2)!==0),ge?(N=!0,d.flags&=-129):(h===null||h.memoizedState!==null)&&(P|=1),Bt(qn,P&1),h===null)return eo(d),h=d.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(d.mode&1?Jn(h)?d.lanes=8:d.lanes=1073741824:d.lanes=1,null):(P=E.children,h=E.fallback,N?(E=d.mode,N=d.child,P={mode:"hidden",children:P},!(E&1)&&N!==null?(N.childLanes=0,N.pendingProps=P):N=Nu(P,E,0,null),h=jo(h,E,x,null),N.return=d,h.return=d,N.sibling=h,d.child=N,d.child.memoizedState=Io(x),d.memoizedState=Su,h):Rs(d,P));if(P=h.memoizedState,P!==null){if(ge=P.dehydrated,ge!==null){if(ne)return d.flags&256?(d.flags&=-257,Mu(h,d,x,Error(a(422)))):d.memoizedState!==null?(d.child=h.child,d.flags|=128,null):(N=E.fallback,P=d.mode,E=Nu({mode:"visible",children:E.children},P,0,null),N=jo(N,P,x,null),N.flags|=2,E.return=d,N.return=d,E.sibling=N,d.child=E,d.mode&1&&ma(d,h.child,null,x),d.child.memoizedState=Io(x),d.memoizedState=Su,N);if(!(d.mode&1))d=Mu(h,d,x,null);else if(Jn(ge))d=Mu(h,d,x,Error(a(419)));else if(E=(x&h.childLanes)!==0,Fi||E){if(E=oi,E!==null){switch(x&-x){case 4:N=2;break;case 16:N=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:N=32;break;case 536870912:N=268435456;break;default:N=0}E=N&(E.suspendedLanes|x)?0:N,E!==0&&E!==P.retryLane&&(P.retryLane=E,lr(h,E,-1))}af(),d=Mu(h,d,x,Error(a(421)))}else Fr(ge)?(d.flags|=128,d.child=h.child,d=im.bind(null,h),tr(ge,d),d=null):(x=P.treeContext,Fe&&(Hi=_s(ge),pr=d,Vn=!0,ls=null,vl=!1,x!==null&&(os[Br++]=da,os[Br++]=pa,os[Br++]=Mo,da=x.id,pa=x.overflow,Mo=d)),d=Rs(d,d.pendingProps.children),d.flags|=4096);return d}return N?(E=$c(h,d,E.children,E.fallback,x),N=d.child,P=h.child.memoizedState,N.memoizedState=P===null?Io(x):{baseLanes:P.baseLanes|x,cachePool:null},N.childLanes=h.childLanes&~x,d.memoizedState=Su,E):(x=_u(h,d,E.children,x),d.memoizedState=null,x)}return N?(E=$c(h,d,E.children,E.fallback,x),N=d.child,P=h.child.memoizedState,N.memoizedState=P===null?Io(x):{baseLanes:P.baseLanes|x,cachePool:null},N.childLanes=h.childLanes&~x,d.memoizedState=Su,E):(x=_u(h,d,E.children,x),d.memoizedState=null,x)}function Rs(h,d){return d=Nu({mode:"visible",children:d},h.mode,0,null),d.return=h,h.child=d}function _u(h,d,x,E){var P=h.child;return h=P.sibling,x=Ca(P,{mode:"visible",children:x}),!(d.mode&1)&&(x.lanes=E),x.return=d,x.sibling=null,h!==null&&(E=d.deletions,E===null?(d.deletions=[h],d.flags|=16):E.push(h)),d.child=x}function $c(h,d,x,E,P){var N=d.mode;h=h.child;var ne=h.sibling,ge={mode:"hidden",children:x};return!(N&1)&&d.child!==h?(x=d.child,x.childLanes=0,x.pendingProps=ge,d.deletions=null):(x=Ca(h,ge),x.subtreeFlags=h.subtreeFlags&14680064),ne!==null?E=Ca(ne,E):(E=jo(E,N,P,null),E.flags|=2),E.return=d,x.return=d,x.sibling=E,d.child=x,E}function Mu(h,d,x,E){return E!==null&&Fc(E),ma(d,h.child,null,x),h=Rs(d,d.pendingProps.children),h.flags|=2,d.memoizedState=null,h}function $p(h,d,x){h.lanes|=d;var E=h.alternate;E!==null&&(E.lanes|=d),wi(h.return,d,x)}function Ys(h,d,x,E,P){var N=h.memoizedState;N===null?h.memoizedState={isBackwards:d,rendering:null,renderingStartTime:0,last:E,tail:x,tailMode:P}:(N.isBackwards=d,N.rendering=null,N.renderingStartTime=0,N.last=E,N.tail=x,N.tailMode=P)}function Uo(h,d,x){var E=d.pendingProps,P=E.revealOrder,N=E.tail;if(ti(h,d,E.children,x),E=qn.current,E&2)E=E&1|2,d.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=d.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&$p(h,x,d);else if(h.tag===19)$p(h,x,d);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===d)break e;for(;h.sibling===null;){if(h.return===null||h.return===d)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}E&=1}if(Bt(qn,E),!(d.mode&1))d.memoizedState=null;else switch(P){case"forwards":for(x=d.child,P=null;x!==null;)h=x.alternate,h!==null&&Oc(h)===null&&(P=x),x=x.sibling;x=P,x===null?(P=d.child,d.child=null):(P=x.sibling,x.sibling=null),Ys(d,!1,P,x,N);break;case"backwards":for(x=null,P=d.child,d.child=null;P!==null;){if(h=P.alternate,h!==null&&Oc(h)===null){d.child=P;break}h=P.sibling,P.sibling=x,x=P,P=h}Ys(d,!0,x,null,N);break;case"together":Ys(d,!1,null,null,void 0);break;default:d.memoizedState=null}return d.child}function Pr(h,d,x){if(h!==null&&(d.dependencies=h.dependencies),qs|=d.lanes,!(x&d.childLanes))return null;if(h!==null&&d.child!==h.child)throw Error(a(153));if(d.child!==null){for(h=d.child,x=Ca(h,h.pendingProps),d.child=x,x.return=d;h.sibling!==null;)h=h.sibling,x=x.sibling=Ca(h,h.pendingProps),x.return=d;x.sibling=null}return d.child}function ef(h,d,x){switch(d.tag){case 3:xu(d),yl();break;case 5:qp(d);break;case 1:An(d.type)&&zs(d);break;case 4:kc(d,d.stateNode.containerInfo);break;case 10:fa(d,d.type._context,d.memoizedProps.value);break;case 13:var E=d.memoizedState;if(E!==null)return E.dehydrated!==null?(Bt(qn,qn.current&1),d.flags|=128,null):x&d.child.childLanes?Vh(h,d,x):(Bt(qn,qn.current&1),h=Pr(h,d,x),h!==null?h.sibling:null);Bt(qn,qn.current&1);break;case 19:if(E=(x&d.childLanes)!==0,h.flags&128){if(E)return Uo(h,d,x);d.flags|=128}var P=d.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),Bt(qn,qn.current),E)break;return null;case 22:case 23:return d.lanes=0,Gi(h,d,x)}return Pr(h,d,x)}function tf(h,d){switch(Ah(d),d.tag){case 1:return An(d.type)&&_i(),h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 3:return Ml(),Qt(Hn),Qt(ei),bo(),h=d.flags,h&65536&&!(h&128)?(d.flags=h&-65537|128,d):null;case 5:return Ph(d),null;case 13:if(Qt(qn),h=d.memoizedState,h!==null&&h.dehydrated!==null){if(d.alternate===null)throw Error(a(340));yl()}return h=d.flags,h&65536?(d.flags=h&-65537|128,d):null;case 19:return Qt(qn),null;case 4:return Ml(),null;case 10:return di(d.type._context),null;case 22:case 23:return Lu(),null;case 24:return null;default:return null}}var gr=!1,ki=!1,No=typeof WeakSet=="function"?WeakSet:Set,ft=null;function us(h,d){var x=h.ref;if(x!==null)if(typeof x=="function")try{x(null)}catch(E){yr(h,d,E)}else x.current=null}function _a(h,d,x){try{x()}catch(E){yr(h,d,E)}}var Wh=!1;function jh(h,d){for(j(h.containerInfo),ft=d;ft!==null;)if(h=ft,d=h.child,(h.subtreeFlags&1028)!==0&&d!==null)d.return=h,ft=d;else for(;ft!==null;){h=ft;try{var x=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var E=x.memoizedProps,P=x.memoizedState,N=h.stateNode,ne=N.getSnapshotBeforeUpdate(h.elementType===h.type?E:Di(h.type,E),P);N.__reactInternalSnapshotBeforeUpdate=ne}break;case 3:Ue&&at(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(a(163))}}catch(ge){yr(h,h.return,ge)}if(d=h.sibling,d!==null){d.return=h.return,ft=d;break}ft=h.return}return x=Wh,Wh=!1,x}function Ma(h,d,x){var E=d.updateQueue;if(E=E!==null?E.lastEffect:null,E!==null){var P=E=E.next;do{if((P.tag&h)===h){var N=P.destroy;P.destroy=void 0,N!==void 0&&_a(d,x,N)}P=P.next}while(P!==E)}}function Vi(h,d){if(d=d.updateQueue,d=d!==null?d.lastEffect:null,d!==null){var x=d=d.next;do{if((x.tag&h)===h){var E=x.create;x.destroy=E()}x=x.next}while(x!==d)}}function vr(h){var d=h.ref;if(d!==null){var x=h.stateNode;switch(h.tag){case 5:h=oe(x);break;default:h=x}typeof d=="function"?d(h):d.current=h}}function On(h,d,x){if(Or&&typeof Or.onCommitFiberUnmount=="function")try{Or.onCommitFiberUnmount(qa,d)}catch{}switch(d.tag){case 0:case 11:case 14:case 15:if(h=d.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var E=h=h.next;do{var P=E,N=P.destroy;P=P.tag,N!==void 0&&(P&2||P&4)&&_a(d,x,N),E=E.next}while(E!==h)}break;case 1:if(us(d,x),h=d.stateNode,typeof h.componentWillUnmount=="function")try{h.props=d.memoizedProps,h.state=d.memoizedState,h.componentWillUnmount()}catch(ne){yr(d,x,ne)}break;case 5:us(d,x);break;case 4:Ue?qh(h,d,x):Z&&Z&&(d=d.stateNode.containerInfo,x=mt(d),Lt(d,x))}}function cs(h,d,x){for(var E=d;;)if(On(h,E,x),E.child===null||Ue&&E.tag===4){if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return}E.sibling.return=E.return,E=E.sibling}else E.child.return=E,E=E.child}function Xh(h){var d=h.alternate;d!==null&&(h.alternate=null,Xh(d)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(d=h.stateNode,d!==null&&et(d)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function Yh(h){return h.tag===5||h.tag===3||h.tag===4}function nf(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||Yh(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function rf(h){if(Ue){e:{for(var d=h.return;d!==null;){if(Yh(d))break e;d=d.return}throw Error(a(160))}var x=d;switch(x.tag){case 5:d=x.stateNode,x.flags&32&&(_t(d),x.flags&=-33),x=nf(h),Rl(h,x,d);break;case 3:case 4:d=x.stateNode.containerInfo,x=nf(h),sf(h,x,d);break;default:throw Error(a(161))}}}function sf(h,d,x){var E=h.tag;if(E===5||E===6)h=h.stateNode,d?tt(x,h,d):Ke(x,h);else if(E!==4&&(h=h.child,h!==null))for(sf(h,d,x),h=h.sibling;h!==null;)sf(h,d,x),h=h.sibling}function Rl(h,d,x){var E=h.tag;if(E===5||E===6)h=h.stateNode,d?nt(x,h,d):Ne(x,h);else if(E!==4&&(h=h.child,h!==null))for(Rl(h,d,x),h=h.sibling;h!==null;)Rl(h,d,x),h=h.sibling}function qh(h,d,x){for(var E=d,P=!1,N,ne;;){if(!P){P=E.return;e:for(;;){if(P===null)throw Error(a(160));switch(N=P.stateNode,P.tag){case 5:ne=!1;break e;case 3:N=N.containerInfo,ne=!0;break e;case 4:N=N.containerInfo,ne=!0;break e}P=P.return}P=!0}if(E.tag===5||E.tag===6)cs(h,E,x),ne?st(N,E.stateNode):Ye(N,E.stateNode);else if(E.tag===18)ne?Pt(N,E.stateNode):xt(N,E.stateNode);else if(E.tag===4){if(E.child!==null){N=E.stateNode.containerInfo,ne=!0,E.child.return=E,E=E.child;continue}}else if(On(h,E,x),E.child!==null){E.child.return=E,E=E.child;continue}if(E===d)break;for(;E.sibling===null;){if(E.return===null||E.return===d)return;E=E.return,E.tag===4&&(P=!1)}E.sibling.return=E.return,E=E.sibling}}function so(h,d){if(Ue){switch(d.tag){case 0:case 11:case 14:case 15:Ma(3,d,d.return),Vi(3,d),Ma(5,d,d.return);return;case 1:return;case 5:var x=d.stateNode;if(x!=null){var E=d.memoizedProps;h=h!==null?h.memoizedProps:E;var P=d.type,N=d.updateQueue;d.updateQueue=null,N!==null&&ct(x,N,P,h,E,d)}return;case 6:if(d.stateNode===null)throw Error(a(162));x=d.memoizedProps,We(d.stateNode,h!==null?h.memoizedProps:x,x);return;case 3:Fe&&h!==null&&h.memoizedState.isDehydrated&&Me(d.stateNode.containerInfo);return;case 12:return;case 13:Pl(d);return;case 19:Pl(d);return;case 17:return}throw Error(a(163))}switch(d.tag){case 0:case 11:case 14:case 15:Ma(3,d,d.return),Vi(3,d),Ma(5,d,d.return);return;case 12:return;case 13:Pl(d);return;case 19:Pl(d);return;case 3:Fe&&h!==null&&h.memoizedState.isDehydrated&&Me(d.stateNode.containerInfo);break;case 22:case 23:return}e:if(Z){switch(d.tag){case 1:case 5:case 6:break e;case 3:case 4:d=d.stateNode,Lt(d.containerInfo,d.pendingChildren);break e}throw Error(a(163))}}function Pl(h){var d=h.updateQueue;if(d!==null){h.updateQueue=null;var x=h.stateNode;x===null&&(x=h.stateNode=new No),d.forEach(function(E){var P=rm.bind(null,h,E);x.has(E)||(x.add(E),E.then(P,P))})}}function jv(h,d){for(ft=d;ft!==null;){d=ft;var x=d.deletions;if(x!==null)for(var E=0;E<x.length;E++){var P=x[E];try{var N=h;Ue?qh(N,P,d):cs(N,P,d);var ne=P.alternate;ne!==null&&(ne.return=null),P.return=null}catch(At){yr(P,d,At)}}if(x=d.child,d.subtreeFlags&12854&&x!==null)x.return=d,ft=x;else for(;ft!==null;){d=ft;try{var ge=d.flags;if(ge&32&&Ue&&_t(d.stateNode),ge&512){var He=d.alternate;if(He!==null){var lt=He.ref;lt!==null&&(typeof lt=="function"?lt(null):lt.current=null)}}if(ge&8192)switch(d.tag){case 13:if(d.memoizedState!==null){var Mt=d.alternate;(Mt===null||Mt.memoizedState===null)&&(Ru=Gn())}break;case 22:var Yt=d.memoizedState!==null,kt=d.alternate,rn=kt!==null&&kt.memoizedState!==null;if(x=d,Ue){e:if(E=x,P=Yt,N=null,Ue)for(var gt=E;;){if(gt.tag===5){if(N===null){N=gt;var Xi=gt.stateNode;P?Wt(Xi):je(gt.stateNode,gt.memoizedProps)}}else if(gt.tag===6){if(N===null){var Yr=gt.stateNode;P?le(Yr):Se(Yr,gt.memoizedProps)}}else if((gt.tag!==22&&gt.tag!==23||gt.memoizedState===null||gt===E)&&gt.child!==null){gt.child.return=gt,gt=gt.child;continue}if(gt===E)break;for(;gt.sibling===null;){if(gt.return===null||gt.return===E)break e;N===gt&&(N=null),gt=gt.return}N===gt&&(N=null),gt.sibling.return=gt.return,gt=gt.sibling}}if(Yt&&!rn&&x.mode&1){ft=x;for(var De=x.child;De!==null;){for(x=ft=De;ft!==null;){E=ft;var ye=E.child;switch(E.tag){case 0:case 11:case 14:case 15:Ma(4,E,E.return);break;case 1:us(E,E.return);var Oe=E.stateNode;if(typeof Oe.componentWillUnmount=="function"){var pt=E.return;try{Oe.props=E.memoizedProps,Oe.state=E.memoizedState,Oe.componentWillUnmount()}catch(At){yr(E,pt,At)}}break;case 5:us(E,E.return);break;case 22:if(E.memoizedState!==null){Kh(x);continue}}ye!==null?(ye.return=E,ft=ye):Kh(x)}De=De.sibling}}}switch(ge&4102){case 2:rf(d),d.flags&=-3;break;case 6:rf(d),d.flags&=-3,so(d.alternate,d);break;case 4096:d.flags&=-4097;break;case 4100:d.flags&=-4097,so(d.alternate,d);break;case 4:so(d.alternate,d)}}catch(At){yr(d,d.return,At)}if(x=d.sibling,x!==null){x.return=d.return,ft=x;break}ft=d.return}}}function wu(h,d,x){ft=h,Tu(h)}function Tu(h,d,x){for(var E=(h.mode&1)!==0;ft!==null;){var P=ft,N=P.child;if(P.tag===22&&E){var ne=P.memoizedState!==null||gr;if(!ne){var ge=P.alternate,He=ge!==null&&ge.memoizedState!==null||ki;ge=gr;var lt=ki;if(gr=ne,(ki=He)&&!lt)for(ft=P;ft!==null;)ne=ft,He=ne.child,ne.tag===22&&ne.memoizedState!==null?Fo(P):He!==null?(He.return=ne,ft=He):Fo(P);for(;N!==null;)ft=N,Tu(N),N=N.sibling;ft=P,gr=ge,ki=lt}Zh(h)}else P.subtreeFlags&8772&&N!==null?(N.return=P,ft=N):Zh(h)}}function Zh(h){for(;ft!==null;){var d=ft;if(d.flags&8772){var x=d.alternate;try{if(d.flags&8772)switch(d.tag){case 0:case 11:case 15:ki||Vi(5,d);break;case 1:var E=d.stateNode;if(d.flags&4&&!ki)if(x===null)E.componentDidMount();else{var P=d.elementType===d.type?x.memoizedProps:Di(d.type,x.memoizedProps);E.componentDidUpdate(P,x.memoizedState,E.__reactInternalSnapshotBeforeUpdate)}var N=d.updateQueue;N!==null&&zp(d,N,E);break;case 3:var ne=d.updateQueue;if(ne!==null){if(x=null,d.child!==null)switch(d.child.tag){case 5:x=oe(d.child.stateNode);break;case 1:x=d.child.stateNode}zp(d,ne,x)}break;case 5:var ge=d.stateNode;x===null&&d.flags&4&&xe(ge,d.type,d.memoizedProps,d);break;case 6:break;case 4:break;case 12:break;case 13:if(Fe&&d.memoizedState===null){var He=d.alternate;if(He!==null){var lt=He.memoizedState;if(lt!==null){var Mt=lt.dehydrated;Mt!==null&&Be(Mt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(a(163))}ki||d.flags&512&&vr(d)}catch(Yt){yr(d,d.return,Yt)}}if(d===h){ft=null;break}if(x=d.sibling,x!==null){x.return=d.return,ft=x;break}ft=d.return}}function Kh(h){for(;ft!==null;){var d=ft;if(d===h){ft=null;break}var x=d.sibling;if(x!==null){x.return=d.return,ft=x;break}ft=d.return}}function Fo(h){for(;ft!==null;){var d=ft;try{switch(d.tag){case 0:case 11:case 15:var x=d.return;try{Vi(4,d)}catch(He){yr(d,x,He)}break;case 1:var E=d.stateNode;if(typeof E.componentDidMount=="function"){var P=d.return;try{E.componentDidMount()}catch(He){yr(d,P,He)}}var N=d.return;try{vr(d)}catch(He){yr(d,N,He)}break;case 5:var ne=d.return;try{vr(d)}catch(He){yr(d,ne,He)}}}catch(He){yr(d,d.return,He)}if(d===h){ft=null;break}var ge=d.sibling;if(ge!==null){ge.return=d.return,ft=ge;break}ft=d.return}}var Eu=0,ko=1,Oo=2,wa=3,Dl=4;if(typeof Symbol=="function"&&Symbol.for){var Bo=Symbol.for;Eu=Bo("selector.component"),ko=Bo("selector.has_pseudo_class"),Oo=Bo("selector.role"),wa=Bo("selector.test_id"),Dl=Bo("selector.text")}function bu(h){var d=we(h);if(d!=null){if(typeof d.memoizedProps["data-testname"]!="string")throw Error(a(364));return d}if(h=Ae(h),h===null)throw Error(a(362));return h.stateNode.current}function Au(h,d){switch(d.$$typeof){case Eu:if(h.type===d.value)return!0;break;case ko:e:{d=d.value,h=[h,0];for(var x=0;x<h.length;){var E=h[x++],P=h[x++],N=d[P];if(E.tag!==5||!H(E)){for(;N!=null&&Au(E,N);)P++,N=d[P];if(P===d.length){d=!0;break e}else for(E=E.child;E!==null;)h.push(E,P),E=E.sibling}}d=!1}return d;case Oo:if(h.tag===5&&ce(h.stateNode,d.value))return!0;break;case Dl:if((h.tag===5||h.tag===6)&&(h=X(h),h!==null&&0<=h.indexOf(d.value)))return!0;break;case wa:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===d.value.toLowerCase()))return!0;break;default:throw Error(a(365))}return!1}function ao(h){switch(h.$$typeof){case Eu:return"<"+(F(h.value)||"Unknown")+">";case ko:return":has("+(ao(h)||"")+")";case Oo:return'[role="'+h.value+'"]';case Dl:return'"'+h.value+'"';case wa:return'[data-testname="'+h.value+'"]';default:throw Error(a(365))}}function Vr(h,d){var x=[];h=[h,0];for(var E=0;E<h.length;){var P=h[E++],N=h[E++],ne=d[N];if(P.tag!==5||!H(P)){for(;ne!=null&&Au(P,ne);)N++,ne=d[N];if(N===d.length)x.push(P);else for(P=P.child;P!==null;)h.push(P,N),P=P.sibling}}return x}function Ta(h,d){if(!Ze)throw Error(a(363));h=bu(h),h=Vr(h,d),d=[],h=Array.from(h);for(var x=0;x<h.length;){var E=h[x++];if(E.tag===5)H(E)||d.push(E.stateNode);else for(E=E.child;E!==null;)h.push(E),E=E.sibling}return d}var Qh=Math.ceil,Cu=l.ReactCurrentDispatcher,Ps=l.ReactCurrentOwner,Rn=l.ReactCurrentBatchConfig,en=0,oi=null,Pn=null,Wn=0,or=0,zo=Ut(0),ni=0,Ll=null,qs=0,Wr=0,Ho=0,Ea=null,pi=null,Ru=0,oo=1/0;function Go(){oo=Gn()+500}var Il=!1,Bn=null,Ds=null,Ul=!1,Zs=null,Vo=0,Wo=0,ba=null,kn=-1,ii=0;function vn(){return en&6?Gn():kn!==-1?kn:kn=Gn()}function Ls(h){return h.mode&1?en&2&&Wn!==0?Wn&-Wn:Qa.transition!==null?(ii===0&&(h=ws,ws<<=1,!(ws&4194240)&&(ws=64),ii=h),ii):(h=jt,h!==0?h:Pe()):1}function lr(h,d,x){if(50<Wo)throw Wo=0,ba=null,Error(a(185));var E=lo(h,d);return E===null?null:(ns(E,d,x),(!(en&2)||E!==oi)&&(E===oi&&(!(en&2)&&(Wr|=d),ni===4&&ji(E,Wn)),Dr(E,x),d===1&&en===0&&!(h.mode&1)&&(Go(),Ws&&sr())),E)}function lo(h,d){h.lanes|=d;var x=h.alternate;for(x!==null&&(x.lanes|=d),x=h,h=h.return;h!==null;)h.childLanes|=d,x=h.alternate,x!==null&&(x.childLanes|=d),x=h,h=h.return;return x.tag===3?x.stateNode:null}function Dr(h,d){var x=h.callbackNode;pl(h,d);var E=Xa(h,h===oi?Wn:0);if(E===0)x!==null&&Vs(x),h.callbackNode=null,h.callbackPriority=0;else if(d=E&-E,h.callbackPriority!==d){if(x!=null&&Vs(x),d===1)h.tag===0?Ka(jr.bind(null,h)):_o(jr.bind(null,h)),Le?Xe(function(){en===0&&sr()}):kr(Es,sr),x=null;else{switch(is(E)){case 1:x=Es;break;case 4:x=Cc;break;case 16:x=rr;break;case 536870912:x=Ya;break;default:x=rr}x=of(x,Wi.bind(null,h))}h.callbackPriority=d,h.callbackNode=x}}function Wi(h,d){if(kn=-1,ii=0,en&6)throw Error(a(327));var x=h.callbackNode;if(Ks()&&h.callbackNode!==x)return null;var E=Xa(h,h===oi?Wn:0);if(E===0)return null;if(E&30||E&h.expiredLanes||d)d=Iu(h,E);else{d=E;var P=en;en|=2;var N=ed();(oi!==h||Wn!==d)&&(Go(),Aa(h,d));do try{tm();break}catch(ge){$h(h,ge)}while(!0);Li(),Cu.current=N,en=P,Pn!==null?d=0:(oi=null,Wn=0,d=ni)}if(d!==0){if(d===2&&(P=Gs(h),P!==0&&(E=P,d=Pu(h,P))),d===1)throw x=Ll,Aa(h,0),ji(h,E),Dr(h,Gn()),x;if(d===6)ji(h,E);else{if(P=h.current.alternate,!(E&30)&&!Jh(P)&&(d=Iu(h,E),d===2&&(N=Gs(h),N!==0&&(E=N,d=Pu(h,N))),d===1))throw x=Ll,Aa(h,0),ji(h,E),Dr(h,Gn()),x;switch(h.finishedWork=P,h.finishedLanes=E,d){case 0:case 1:throw Error(a(345));case 2:Is(h,pi);break;case 3:if(ji(h,E),(E&130023424)===E&&(d=Ru+500-Gn(),10<d)){if(Xa(h,0)!==0)break;if(P=h.suspendedLanes,(P&E)!==E){vn(),h.pingedLanes|=h.suspendedLanes&P;break}h.timeoutHandle=he(Is.bind(null,h,pi),d);break}Is(h,pi);break;case 4:if(ji(h,E),(E&4194240)===E)break;for(d=h.eventTimes,P=-1;0<E;){var ne=31-br(E);N=1<<ne,ne=d[ne],ne>P&&(P=ne),E&=~N}if(E=P,E=Gn()-E,E=(120>E?120:480>E?480:1080>E?1080:1920>E?1920:3e3>E?3e3:4320>E?4320:1960*Qh(E/1960))-E,10<E){h.timeoutHandle=he(Is.bind(null,h,pi),E);break}Is(h,pi);break;case 5:Is(h,pi);break;default:throw Error(a(329))}}}return Dr(h,Gn()),h.callbackNode===x?Wi.bind(null,h):null}function Pu(h,d){var x=Ea;return h.current.memoizedState.isDehydrated&&(Aa(h,d).flags|=256),h=Iu(h,d),h!==2&&(d=pi,pi=x,d!==null&&Du(d)),h}function Du(h){pi===null?pi=h:pi.push.apply(pi,h)}function Jh(h){for(var d=h;;){if(d.flags&16384){var x=d.updateQueue;if(x!==null&&(x=x.stores,x!==null))for(var E=0;E<x.length;E++){var P=x[E],N=P.getSnapshot;P=P.value;try{if(!Ri(N(),P))return!1}catch{return!1}}}if(x=d.child,d.subtreeFlags&16384&&x!==null)x.return=d,d=x;else{if(d===h)break;for(;d.sibling===null;){if(d.return===null||d.return===h)return!0;d=d.return}d.sibling.return=d.return,d=d.sibling}}return!0}function ji(h,d){for(d&=~Ho,d&=~Wr,h.suspendedLanes|=d,h.pingedLanes&=~d,h=h.expirationTimes;0<d;){var x=31-br(d),E=1<<x;h[x]=-1,d&=~E}}function jr(h){if(en&6)throw Error(a(327));Ks();var d=Xa(h,0);if(!(d&1))return Dr(h,Gn()),null;var x=Iu(h,d);if(h.tag!==0&&x===2){var E=Gs(h);E!==0&&(d=E,x=Pu(h,E))}if(x===1)throw x=Ll,Aa(h,0),ji(h,d),Dr(h,Gn()),x;if(x===6)throw Error(a(345));return h.finishedWork=h.current.alternate,h.finishedLanes=d,Is(h,pi),Dr(h,Gn()),null}function Nl(h){Zs!==null&&Zs.tag===0&&!(en&6)&&Ks();var d=en;en|=1;var x=Rn.transition,E=jt;try{if(Rn.transition=null,jt=1,h)return h()}finally{jt=E,Rn.transition=x,en=d,!(en&6)&&sr()}}function Lu(){or=zo.current,Qt(zo)}function Aa(h,d){h.finishedWork=null,h.finishedLanes=0;var x=h.timeoutHandle;if(x!==Ve&&(h.timeoutHandle=Ve,ve(x)),Pn!==null)for(x=Pn.return;x!==null;){var E=x;switch(Ah(E),E.tag){case 1:E=E.type.childContextTypes,E!=null&&_i();break;case 3:Ml(),Qt(Hn),Qt(ei),bo();break;case 5:Ph(E);break;case 4:Ml();break;case 13:Qt(qn);break;case 19:Qt(qn);break;case 10:di(E.type._context);break;case 22:case 23:Lu()}x=x.return}if(oi=h,Pn=h=Ca(h.current,null),Wn=or=d,ni=0,Ll=null,Ho=Wr=qs=0,pi=Ea=null,dr!==null){for(d=0;d<dr.length;d++)if(x=dr[d],E=x.interleaved,E!==null){x.interleaved=null;var P=E.next,N=x.pending;if(N!==null){var ne=N.next;N.next=P,E.next=ne}x.pending=E}dr=null}return h}function $h(h,d){do{var x=Pn;try{if(Li(),cu.current=Al,Bc){for(var E=Zn.memoizedState;E!==null;){var P=E.queue;P!==null&&(P.pending=null),E=E.next}Bc=!1}if(Ao=0,Ui=Ii=Zn=null,js=!1,Co=0,Ps.current=null,x===null||x.return===null){ni=1,Ll=d,Pn=null;break}e:{var N=h,ne=x.return,ge=x,He=d;if(d=Wn,ge.flags|=32768,He!==null&&typeof He=="object"&&typeof He.then=="function"){var lt=He,Mt=ge,Yt=Mt.tag;if(!(Mt.mode&1)&&(Yt===0||Yt===11||Yt===15)){var kt=Mt.alternate;kt?(Mt.updateQueue=kt.updateQueue,Mt.memoizedState=kt.memoizedState,Mt.lanes=kt.lanes):(Mt.updateQueue=null,Mt.memoizedState=null)}var rn=zh(ne);if(rn!==null){rn.flags&=-257,Po(rn,ne,ge,N,d),rn.mode&1&&va(N,lt,d),d=rn,He=lt;var gt=d.updateQueue;if(gt===null){var Xi=new Set;Xi.add(He),d.updateQueue=Xi}else gt.add(He);break e}else{if(!(d&1)){va(N,lt,d),af();break e}He=Error(a(426))}}else if(Vn&&ge.mode&1){var Yr=zh(ne);if(Yr!==null){!(Yr.flags&65536)&&(Yr.flags|=256),Po(Yr,ne,ge,N,d),Fc(He);break e}}N=He,ni!==4&&(ni=2),Ea===null?Ea=[N]:Ea.push(N),He=Bh(He,ge),ge=ne;do{switch(ge.tag){case 3:ge.flags|=65536,d&=-d,ge.lanes|=d;var De=Jp(ge,He,d);Pc(ge,De);break e;case 1:N=He;var ye=ge.type,Oe=ge.stateNode;if(!(ge.flags&128)&&(typeof ye.getDerivedStateFromError=="function"||Oe!==null&&typeof Oe.componentDidCatch=="function"&&(Ds===null||!Ds.has(Oe)))){ge.flags|=65536,d&=-d,ge.lanes|=d;var pt=Zc(ge,N,d);Pc(ge,pt);break e}}ge=ge.return}while(ge!==null)}nd(x)}catch(At){d=At,Pn===x&&x!==null&&(Pn=x=x.return);continue}break}while(!0)}function ed(){var h=Cu.current;return Cu.current=Al,h===null?Al:h}function af(){(ni===0||ni===3||ni===2)&&(ni=4),oi===null||!(qs&268435455)&&!(Wr&268435455)||ji(oi,Wn)}function Iu(h,d){var x=en;en|=2;var E=ed();oi===h&&Wn===d||Aa(h,d);do try{em();break}catch(P){$h(h,P)}while(!0);if(Li(),en=x,Cu.current=E,Pn!==null)throw Error(a(261));return oi=null,Wn=0,ni}function em(){for(;Pn!==null;)td(Pn)}function tm(){for(;Pn!==null&&!rs();)td(Pn)}function td(h){var d=sd(h.alternate,h,or);h.memoizedProps=h.pendingProps,d===null?nd(h):Pn=d,Ps.current=null}function nd(h){var d=h;do{var x=d.alternate;if(h=d.return,d.flags&32768){if(x=tf(x,d),x!==null){x.flags&=32767,Pn=x;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{ni=6,Pn=null;return}}else if(x=Jc(x,d,or),x!==null){Pn=x;return}if(d=d.sibling,d!==null){Pn=d;return}Pn=d=h}while(d!==null);ni===0&&(ni=5)}function Is(h,d){var x=jt,E=Rn.transition;try{Rn.transition=null,jt=1,nm(h,d,x)}finally{Rn.transition=E,jt=x}return null}function nm(h,d,x){do Ks();while(Zs!==null);if(en&6)throw Error(a(327));var E=h.finishedWork,P=h.finishedLanes;if(E===null)return null;if(h.finishedWork=null,h.finishedLanes=0,E===h.current)throw Error(a(177));h.callbackNode=null,h.callbackPriority=0;var N=E.lanes|E.childLanes;if(Ts(h,N),h===oi&&(Pn=oi=null,Wn=0),!(E.subtreeFlags&2064)&&!(E.flags&2064)||Ul||(Ul=!0,of(rr,function(){return Ks(),null})),N=(E.flags&15990)!==0,E.subtreeFlags&15990||N){N=Rn.transition,Rn.transition=null;var ne=jt;jt=1;var ge=en;en|=4,Ps.current=null,jh(h,E),jv(h,E),W(h.containerInfo),h.current=E,wu(E),Ac(),en=ge,jt=ne,Rn.transition=N}else h.current=E;if(Ul&&(Ul=!1,Zs=h,Vo=P),N=h.pendingLanes,N===0&&(Ds=null),oa(E.stateNode),Dr(h,Gn()),d!==null)for(x=h.onRecoverableError,E=0;E<d.length;E++)x(d[E]);if(Il)throw Il=!1,h=Bn,Bn=null,h;return Vo&1&&h.tag!==0&&Ks(),N=h.pendingLanes,N&1?h===ba?Wo++:(Wo=0,ba=h):Wo=0,sr(),null}function Ks(){if(Zs!==null){var h=is(Vo),d=Rn.transition,x=jt;try{if(Rn.transition=null,jt=16>h?16:h,Zs===null)var E=!1;else{if(h=Zs,Zs=null,Vo=0,en&6)throw Error(a(331));var P=en;for(en|=4,ft=h.current;ft!==null;){var N=ft,ne=N.child;if(ft.flags&16){var ge=N.deletions;if(ge!==null){for(var He=0;He<ge.length;He++){var lt=ge[He];for(ft=lt;ft!==null;){var Mt=ft;switch(Mt.tag){case 0:case 11:case 15:Ma(8,Mt,N)}var Yt=Mt.child;if(Yt!==null)Yt.return=Mt,ft=Yt;else for(;ft!==null;){Mt=ft;var kt=Mt.sibling,rn=Mt.return;if(Xh(Mt),Mt===lt){ft=null;break}if(kt!==null){kt.return=rn,ft=kt;break}ft=rn}}}var gt=N.alternate;if(gt!==null){var Xi=gt.child;if(Xi!==null){gt.child=null;do{var Yr=Xi.sibling;Xi.sibling=null,Xi=Yr}while(Xi!==null)}}ft=N}}if(N.subtreeFlags&2064&&ne!==null)ne.return=N,ft=ne;else e:for(;ft!==null;){if(N=ft,N.flags&2048)switch(N.tag){case 0:case 11:case 15:Ma(9,N,N.return)}var De=N.sibling;if(De!==null){De.return=N.return,ft=De;break e}ft=N.return}}var ye=h.current;for(ft=ye;ft!==null;){ne=ft;var Oe=ne.child;if(ne.subtreeFlags&2064&&Oe!==null)Oe.return=ne,ft=Oe;else e:for(ne=ye;ft!==null;){if(ge=ft,ge.flags&2048)try{switch(ge.tag){case 0:case 11:case 15:Vi(9,ge)}}catch(At){yr(ge,ge.return,At)}if(ge===ne){ft=null;break e}var pt=ge.sibling;if(pt!==null){pt.return=ge.return,ft=pt;break e}ft=ge.return}}if(en=P,sr(),Or&&typeof Or.onPostCommitFiberRoot=="function")try{Or.onPostCommitFiberRoot(qa,h)}catch{}E=!0}return E}finally{jt=x,Rn.transition=d}}return!1}function Uu(h,d,x){d=Bh(x,d),d=Jp(h,d,1),Ja(h,d),d=vn(),h=lo(h,1),h!==null&&(ns(h,1,d),Dr(h,d))}function yr(h,d,x){if(h.tag===3)Uu(h,h,x);else for(;d!==null;){if(d.tag===3){Uu(d,h,x);break}else if(d.tag===1){var E=d.stateNode;if(typeof d.type.getDerivedStateFromError=="function"||typeof E.componentDidCatch=="function"&&(Ds===null||!Ds.has(E))){h=Bh(x,h),h=Zc(d,h,1),Ja(d,h),h=vn(),d=lo(d,1),d!==null&&(ns(d,1,h),Dr(d,h));break}}d=d.return}}function id(h,d,x){var E=h.pingCache;E!==null&&E.delete(d),d=vn(),h.pingedLanes|=h.suspendedLanes&x,oi===h&&(Wn&x)===x&&(ni===4||ni===3&&(Wn&130023424)===Wn&&500>Gn()-Ru?Aa(h,0):Ho|=x),Dr(h,d)}function rd(h,d){d===0&&(h.mode&1?(d=un,un<<=1,!(un&130023424)&&(un=4194304)):d=1);var x=vn();h=lo(h,d),h!==null&&(ns(h,d,x),Dr(h,x))}function im(h){var d=h.memoizedState,x=0;d!==null&&(x=d.retryLane),rd(h,x)}function rm(h,d){var x=0;switch(h.tag){case 13:var E=h.stateNode,P=h.memoizedState;P!==null&&(x=P.retryLane);break;case 19:E=h.stateNode;break;default:throw Error(a(314))}E!==null&&E.delete(d),rd(h,x)}var sd;sd=function(h,d,x){if(h!==null)if(h.memoizedProps!==d.pendingProps||Hn.current)Fi=!0;else{if(!(h.lanes&x)&&!(d.flags&128))return Fi=!1,ef(h,d,x);Fi=!!(h.flags&131072)}else Fi=!1,Vn&&d.flags&1048576&&Wp(d,Uc,d.index);switch(d.lanes=0,d.tag){case 2:var E=d.type;h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps;var P=xn(d,ei.current);si(d,x),P=wl(null,d,E,h,P,x);var N=no();return d.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(d.tag=1,d.memoizedState=null,d.updateQueue=null,An(E)?(N=!0,zs(d)):N=!1,d.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,ml(d),P.updater=Lc,d.stateNode=P,P._reactInternals=d,Eh(d,E,h,x),d=ar(null,d,E,!0,N,x)):(d.tag=0,Vn&&N&&bh(d),ti(null,d,P,x),d=d.child),d;case 16:E=d.elementType;e:{switch(h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),h=d.pendingProps,P=E._init,E=P(E._payload),d.type=E,P=d.tag=Xv(E),h=Di(E,h),P){case 0:d=Sa(null,d,E,h,x);break e;case 1:d=Lo(null,d,E,h,x);break e;case 11:d=Fn(null,d,E,h,x);break e;case 14:d=In(null,d,E,Di(E.type,h),x);break e}throw Error(a(306,E,""))}return d;case 0:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:Di(E,P),Sa(h,d,E,P,x);case 1:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:Di(E,P),Lo(h,d,E,P,x);case 3:e:{if(xu(d),h===null)throw Error(a(387));E=d.pendingProps,N=d.memoizedState,P=N.element,Mh(h,d),Dc(d,E,null,x);var ne=d.memoizedState;if(E=ne.element,Fe&&N.isDehydrated)if(N={element:E,isDehydrated:!1,cache:ne.cache,transitions:ne.transitions},d.updateQueue.baseState=N,d.memoizedState=N,d.flags&256){P=Error(a(423)),d=Gh(h,d,E,x,P);break e}else if(E!==P){P=Error(a(424)),d=Gh(h,d,E,x,P);break e}else for(Fe&&(Hi=Si(d.stateNode.containerInfo),pr=d,Vn=!0,ls=null,vl=!1),x=Yp(d,null,E,x),d.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(yl(),E===P){d=Pr(h,d,x);break e}ti(h,d,E,x)}d=d.child}return d;case 5:return qp(d),h===null&&eo(d),E=d.type,P=d.pendingProps,N=h!==null?h.memoizedProps:null,ne=P.children,re(E,P)?ne=null:N!==null&&re(E,N)&&(d.flags|=32),mr(h,d),ti(h,d,ne,x),d.child;case 6:return h===null&&eo(d),null;case 13:return Vh(h,d,x);case 4:return kc(d,d.stateNode.containerInfo),E=d.pendingProps,h===null?d.child=ma(d,null,E,x):ti(h,d,E,x),d.child;case 11:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:Di(E,P),Fn(h,d,E,P,x);case 7:return ti(h,d,d.pendingProps,x),d.child;case 8:return ti(h,d,d.pendingProps.children,x),d.child;case 12:return ti(h,d,d.pendingProps.children,x),d.child;case 10:e:{if(E=d.type._context,P=d.pendingProps,N=d.memoizedProps,ne=P.value,fa(d,E,ne),N!==null)if(Ri(N.value,ne)){if(N.children===P.children&&!Hn.current){d=Pr(h,d,x);break e}}else for(N=d.child,N!==null&&(N.return=d);N!==null;){var ge=N.dependencies;if(ge!==null){ne=N.child;for(var He=ge.firstContext;He!==null;){if(He.context===E){if(N.tag===1){He=ha(-1,x&-x),He.tag=2;var lt=N.updateQueue;if(lt!==null){lt=lt.shared;var Mt=lt.pending;Mt===null?He.next=He:(He.next=Mt.next,Mt.next=He),lt.pending=He}}N.lanes|=x,He=N.alternate,He!==null&&(He.lanes|=x),wi(N.return,x,d),ge.lanes|=x;break}He=He.next}}else if(N.tag===10)ne=N.type===d.type?null:N.child;else if(N.tag===18){if(ne=N.return,ne===null)throw Error(a(341));ne.lanes|=x,ge=ne.alternate,ge!==null&&(ge.lanes|=x),wi(ne,x,d),ne=N.sibling}else ne=N.child;if(ne!==null)ne.return=N;else for(ne=N;ne!==null;){if(ne===d){ne=null;break}if(N=ne.sibling,N!==null){N.return=ne.return,ne=N;break}ne=ne.return}N=ne}ti(h,d,P.children,x),d=d.child}return d;case 9:return P=d.type,E=d.pendingProps.children,si(d,x),P=Yn(P),E=E(P),d.flags|=1,ti(h,d,E,x),d.child;case 14:return E=d.type,P=Di(E,d.pendingProps),P=Di(E.type,P),In(h,d,E,P,x);case 15:return xa(h,d,d.type,d.pendingProps,x);case 17:return E=d.type,P=d.pendingProps,P=d.elementType===E?P:Di(E,P),h!==null&&(h.alternate=null,d.alternate=null,d.flags|=2),d.tag=1,An(E)?(h=!0,zs(d)):h=!1,si(d,x),Gp(d,E,P),Eh(d,E,P,x),ar(null,d,E,!0,h,x);case 19:return Uo(h,d,x);case 22:return Gi(h,d,x)}throw Error(a(156,d.tag))};function of(h,d){return kr(h,d)}function sm(h,d,x,E){this.tag=h,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=d,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=E,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xr(h,d,x,E){return new sm(h,d,x,E)}function lf(h){return h=h.prototype,!(!h||!h.isReactComponent)}function Xv(h){if(typeof h=="function")return lf(h)?1:0;if(h!=null){if(h=h.$$typeof,h===T)return 11;if(h===A)return 14}return 2}function Ca(h,d){var x=h.alternate;return x===null?(x=Xr(h.tag,d,h.key,h.mode),x.elementType=h.elementType,x.type=h.type,x.stateNode=h.stateNode,x.alternate=h,h.alternate=x):(x.pendingProps=d,x.type=h.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=h.flags&14680064,x.childLanes=h.childLanes,x.lanes=h.lanes,x.child=h.child,x.memoizedProps=h.memoizedProps,x.memoizedState=h.memoizedState,x.updateQueue=h.updateQueue,d=h.dependencies,x.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext},x.sibling=h.sibling,x.index=h.index,x.ref=h.ref,x}function uf(h,d,x,E,P,N){var ne=2;if(E=h,typeof h=="function")lf(h)&&(ne=1);else if(typeof h=="string")ne=5;else e:switch(h){case p:return jo(x.children,P,N,d);case g:ne=8,P|=8;break;case v:return h=Xr(12,x,d,P|2),h.elementType=v,h.lanes=N,h;case w:return h=Xr(13,x,d,P),h.elementType=w,h.lanes=N,h;case M:return h=Xr(19,x,d,P),h.elementType=M,h.lanes=N,h;case R:return Nu(x,P,N,d);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case y:ne=10;break e;case S:ne=9;break e;case T:ne=11;break e;case A:ne=14;break e;case b:ne=16,E=null;break e}throw Error(a(130,h==null?h:typeof h,""))}return d=Xr(ne,x,d,P),d.elementType=h,d.type=E,d.lanes=N,d}function jo(h,d,x,E){return h=Xr(7,h,E,d),h.lanes=x,h}function Nu(h,d,x,E){return h=Xr(22,h,E,d),h.elementType=R,h.lanes=x,h.stateNode={},h}function cf(h,d,x){return h=Xr(6,h,null,d),h.lanes=x,h}function ff(h,d,x){return d=Xr(4,h.children!==null?h.children:[],h.key,d),d.lanes=x,d.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},d}function hf(h,d,x,E,P){this.tag=d,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Ve,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=So(0),this.expirationTimes=So(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=So(0),this.identifierPrefix=E,this.onRecoverableError=P,Fe&&(this.mutableSourceEagerHydrationData=null)}function am(h,d,x,E,P,N,ne,ge,He){return h=new hf(h,d,x,ge,He),d===1?(d=1,N===!0&&(d|=8)):d=0,N=Xr(3,null,null,d),h.current=N,N.stateNode=h,N.memoizedState={element:E,isDehydrated:x,cache:null,transitions:null},ml(N),h}function om(h){if(!h)return yn;h=h._reactInternals;e:{if(U(h)!==h||h.tag!==1)throw Error(a(170));var d=h;do{switch(d.tag){case 3:d=d.stateNode.context;break e;case 1:if(An(d.type)){d=d.stateNode.__reactInternalMemoizedMergedChildContext;break e}}d=d.return}while(d!==null);throw Error(a(171))}if(h.tag===1){var x=h.type;if(An(x))return Bs(h,x,d)}return d}function lm(h){var d=h._reactInternals;if(d===void 0)throw typeof h.render=="function"?Error(a(188)):(h=Object.keys(h).join(","),Error(a(268,h)));return h=Y(d),h===null?null:h.stateNode}function fs(h,d){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var x=h.retryLane;h.retryLane=x!==0&&x<d?x:d}}function Fu(h,d){fs(h,d),(h=h.alternate)&&fs(h,d)}function df(h){return h=Y(h),h===null?null:h.stateNode}function um(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var d=vn();lr(h,134217728,d),Fu(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var d=vn(),x=Ls(h);lr(h,x,d),Fu(h,x)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var d=h.stateNode;if(d.current.memoizedState.isDehydrated){var x=Hs(d.pendingLanes);x!==0&&(zi(d,x|1),Dr(d,Gn()),!(en&6)&&(Go(),sr()))}break;case 13:var E=vn();Nl(function(){return lr(h,1,E)}),Fu(h,1)}},t.batchedUpdates=function(h,d){var x=en;en|=1;try{return h(d)}finally{en=x,en===0&&(Go(),Ws&&sr())}},t.createComponentSelector=function(h){return{$$typeof:Eu,value:h}},t.createContainer=function(h,d,x,E,P,N,ne){return am(h,d,!1,null,x,E,P,N,ne)},t.createHasPseudoClassSelector=function(h){return{$$typeof:ko,value:h}},t.createHydrationContainer=function(h,d,x,E,P,N,ne,ge,He){return h=am(x,E,!0,h,P,N,ne,ge,He),h.context=om(null),x=h.current,E=vn(),P=Ls(x),N=ha(E,P),N.callback=d??null,Ja(x,N),h.current.lanes=P,ns(h,P,E),Dr(h,E),h},t.createPortal=function(h,d,x){var E=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:E==null?null:""+E,children:h,containerInfo:d,implementation:x}},t.createRoleSelector=function(h){return{$$typeof:Oo,value:h}},t.createTestNameSelector=function(h){return{$$typeof:wa,value:h}},t.createTextSelector=function(h){return{$$typeof:Dl,value:h}},t.deferredUpdates=function(h){var d=jt,x=Rn.transition;try{return Rn.transition=null,jt=16,h()}finally{jt=d,Rn.transition=x}},t.discreteUpdates=function(h,d,x,E,P){var N=jt,ne=Rn.transition;try{return Rn.transition=null,jt=1,h(d,x,E,P)}finally{jt=N,Rn.transition=ne,en===0&&Go()}},t.findAllNodes=Ta,t.findBoundingRects=function(h,d){if(!Ze)throw Error(a(363));d=Ta(h,d),h=[];for(var x=0;x<d.length;x++)h.push(ht(d[x]));for(d=h.length-1;0<d;d--){x=h[d];for(var E=x.x,P=E+x.width,N=x.y,ne=N+x.height,ge=d-1;0<=ge;ge--)if(d!==ge){var He=h[ge],lt=He.x,Mt=lt+He.width,Yt=He.y,kt=Yt+He.height;if(E>=lt&&N>=Yt&&P<=Mt&&ne<=kt){h.splice(d,1);break}else if(E!==lt||x.width!==He.width||kt<N||Yt>ne){if(!(N!==Yt||x.height!==He.height||Mt<E||lt>P)){lt>E&&(He.width+=lt-E,He.x=E),Mt<P&&(He.width=P-lt),h.splice(d,1);break}}else{Yt>N&&(He.height+=Yt-N,He.y=N),kt<ne&&(He.height=ne-Yt),h.splice(d,1);break}}}return h},t.findHostInstance=lm,t.findHostInstanceWithNoPortals=function(h){return h=$(h),h=h!==null?J(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return lm(h)},t.flushControlled=function(h){var d=en;en|=1;var x=Rn.transition,E=jt;try{Rn.transition=null,jt=1,h()}finally{jt=E,Rn.transition=x,en=d,en===0&&(Go(),sr())}},t.flushPassiveEffects=Ks,t.flushSync=Nl,t.focusWithin=function(h,d){if(!Ze)throw Error(a(363));for(h=bu(h),d=Vr(h,d),d=Array.from(d),h=0;h<d.length;){var x=d[h++];if(!H(x)){if(x.tag===5&&qe(x.stateNode))return!0;for(x=x.child;x!==null;)d.push(x),x=x.sibling}}return!1},t.getCurrentUpdatePriority=function(){return jt},t.getFindAllNodesFailureDescription=function(h,d){if(!Ze)throw Error(a(363));var x=0,E=[];h=[bu(h),0];for(var P=0;P<h.length;){var N=h[P++],ne=h[P++],ge=d[ne];if((N.tag!==5||!H(N))&&(Au(N,ge)&&(E.push(ao(ge)),ne++,ne>x&&(x=ne)),ne<d.length))for(N=N.child;N!==null;)h.push(N,ne),N=N.sibling}if(x<d.length){for(h=[];x<d.length;x++)h.push(ao(d[x]));return`findAllNodes was able to match part of the selector:
  `+(E.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return oe(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:l.ReactCurrentDispatcher,findHostInstanceByFiber:df,findFiberByHostInstance:h.findFiberByHostInstance||um,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var d=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(d.isDisabled||!d.supportsFiber)h=!0;else{try{qa=d.inject(h),Or=d}catch{}h=!!d.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,d,x,E){if(!Ze)throw Error(a(363));h=Ta(h,d);var P=be(h,x,E).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(h,d){var x=d._getVersion;x=x(d._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[d,x]:h.mutableSourceEagerHydrationData.push(d,x)},t.runWithPriority=function(h,d){var x=jt;try{return jt=h,d()}finally{jt=x}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,d,x,E){var P=d.current,N=vn(),ne=Ls(P);return x=om(x),d.context===null?d.context=x:d.pendingContext=x,d=ha(N,ne),d.payload={element:h},E=E===void 0?null:E,E!==null&&(d.callback=E),Ja(P,d),h=lr(P,ne,N),h!==null&&Rc(h,P,ne),ne},t}),dy}var IM;function dk(){return IM||(IM=1,cy.exports=hk()),cy.exports}var pk=dk();const mk=Dx(pk);var py={exports:{}},my={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var UM;function gk(){return UM||(UM=1,function(n){function e(V,j){var W=V.length;V.push(j);e:for(;0<W;){var L=W-1>>>1,B=V[L];if(0<r(B,j))V[L]=j,V[W]=B,W=L;else break e}}function t(V){return V.length===0?null:V[0]}function i(V){if(V.length===0)return null;var j=V[0],W=V.pop();if(W!==j){V[0]=W;e:for(var L=0,B=V.length,te=B>>>1;L<te;){var ie=2*(L+1)-1,re=V[ie],de=ie+1,he=V[de];if(0>r(re,W))de<B&&0>r(he,re)?(V[L]=he,V[de]=W,L=de):(V[L]=re,V[ie]=W,L=ie);else if(de<B&&0>r(he,W))V[L]=he,V[de]=W,L=de;else break e}}return j}function r(V,j){var W=V.sortIndex-j.sortIndex;return W!==0?W:V.id-j.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var a=Date,l=a.now();n.unstable_now=function(){return a.now()-l}}var c=[],f=[],p=1,g=null,v=3,y=!1,S=!1,T=!1,w=typeof setTimeout=="function"?setTimeout:null,M=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(V){for(var j=t(f);j!==null;){if(j.callback===null)i(f);else if(j.startTime<=V)i(f),j.sortIndex=j.expirationTime,e(c,j);else break;j=t(f)}}function R(V){if(T=!1,b(V),!S)if(t(c)!==null)S=!0,oe(I);else{var j=t(f);j!==null&&ue(R,j.startTime-V)}}function I(V,j){S=!1,T&&(T=!1,M(z),z=-1),y=!0;var W=v;try{for(b(j),g=t(c);g!==null&&(!(g.expirationTime>j)||V&&!$());){var L=g.callback;if(typeof L=="function"){g.callback=null,v=g.priorityLevel;var B=L(g.expirationTime<=j);j=n.unstable_now(),typeof B=="function"?g.callback=B:g===t(c)&&i(c),b(j)}else i(c);g=t(c)}if(g!==null)var te=!0;else{var ie=t(f);ie!==null&&ue(R,ie.startTime-j),te=!1}return te}finally{g=null,v=W,y=!1}}var k=!1,F=null,z=-1,U=5,O=-1;function $(){return!(n.unstable_now()-O<U)}function Y(){if(F!==null){var V=n.unstable_now();O=V;var j=!0;try{j=F(!0,V)}finally{j?q():(k=!1,F=null)}}else k=!1}var q;if(typeof A=="function")q=function(){A(Y)};else if(typeof MessageChannel<"u"){var J=new MessageChannel,ae=J.port2;J.port1.onmessage=Y,q=function(){ae.postMessage(null)}}else q=function(){w(Y,0)};function oe(V){F=V,k||(k=!0,q())}function ue(V,j){z=w(function(){V(n.unstable_now())},j)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(V){V.callback=null},n.unstable_continueExecution=function(){S||y||(S=!0,oe(I))},n.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<V?Math.floor(1e3/V):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(c)},n.unstable_next=function(V){switch(v){case 1:case 2:case 3:var j=3;break;default:j=v}var W=v;v=j;try{return V()}finally{v=W}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(V,j){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var W=v;v=V;try{return j()}finally{v=W}},n.unstable_scheduleCallback=function(V,j,W){var L=n.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?L+W:L):W=L,V){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=W+B,V={id:p++,callback:j,priorityLevel:V,startTime:W,expirationTime:B,sortIndex:-1},W>L?(V.sortIndex=W,e(f,V),t(c)===null&&V===t(f)&&(T?(M(z),z=-1):T=!0,ue(R,W-L))):(V.sortIndex=B,e(c,V),S||y||(S=!0,oe(I))),V},n.unstable_shouldYield=$,n.unstable_wrapCallback=function(V){var j=v;return function(){var W=v;v=j;try{return V.apply(this,arguments)}finally{v=W}}}}(my)),my}var NM;function vk(){return NM||(NM=1,py.exports=gk()),py.exports}var FM=vk();const F1={},U2=n=>void Object.assign(F1,n);function yk(n,e){function t(p,{args:g=[],attach:v,...y},S){let T=`${p[0].toUpperCase()}${p.slice(1)}`,w;if(p==="primitive"){if(y.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const M=y.object;w=Xf(M,{type:p,root:S,attach:v,primitive:!0})}else{const M=F1[T];if(!M)throw new Error(`R3F: ${T} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(g))throw new Error("R3F: The args prop must be an array!");w=Xf(new M(...g),{type:p,root:S,attach:v,memoizedProps:{args:g}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),T!=="inject"&&yy(w,y),w}function i(p,g){let v=!1;if(g){var y,S;(y=g.__r3f)!=null&&y.attach?vy(p,g,g.__r3f.attach):g.isObject3D&&p.isObject3D&&(p.add(g),v=!0),v||(S=p.__r3f)==null||S.objects.push(g),g.__r3f||Xf(g,{}),g.__r3f.parent=p,_x(g),Yf(g)}}function r(p,g,v){let y=!1;if(g){var S,T;if((S=g.__r3f)!=null&&S.attach)vy(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){g.parent=p,g.dispatchEvent({type:"added"}),p.dispatchEvent({type:"childadded",child:g});const w=p.children.filter(A=>A!==g),M=w.indexOf(v);p.children=[...w.slice(0,M),g,...w.slice(M)],y=!0}y||(T=p.__r3f)==null||T.objects.push(g),g.__r3f||Xf(g,{}),g.__r3f.parent=p,_x(g),Yf(g)}}function s(p,g,v=!1){p&&[...p].forEach(y=>a(g,y,v))}function a(p,g,v){if(g){var y,S,T;if(g.__r3f&&(g.__r3f.parent=null),(y=p.__r3f)!=null&&y.objects&&(p.__r3f.objects=p.__r3f.objects.filter(R=>R!==g)),(S=g.__r3f)!=null&&S.attach)HM(p,g,g.__r3f.attach);else if(g.isObject3D&&p.isObject3D){var w;p.remove(g),(w=g.__r3f)!=null&&w.root&&Ek(Vg(g),g)}const A=(T=g.__r3f)==null?void 0:T.primitive,b=!A&&(v===void 0?g.dispose!==null:v);if(!A){var M;s((M=g.__r3f)==null?void 0:M.objects,g,b),s(g.children,g,b)}if(delete g.__r3f,b&&g.dispose&&g.type!=="Scene"){const R=()=>{try{g.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?FM.unstable_scheduleCallback(FM.unstable_IdlePriority,R):R()}Yf(p)}}function l(p,g,v,y){var S;const T=(S=p.__r3f)==null?void 0:S.parent;if(!T)return;const w=t(g,v,p.__r3f.root);if(p.children){for(const M of p.children)M.__r3f&&i(w,M);p.children=p.children.filter(M=>!M.__r3f)}p.__r3f.objects.forEach(M=>i(w,M)),p.__r3f.objects=[],p.__r3f.autoRemovedBeforeAppend||a(T,p),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(T,w),w.raycast&&w.__r3f.eventCount&&Vg(w).getState().internal.interaction.push(w),[y,y.alternate].forEach(M=>{M!==null&&(M.stateNode=w,M.ref&&(typeof M.ref=="function"?M.ref(w):M.ref.current=w))})}const c=()=>{};return{reconciler:mk({createInstance:t,removeChild:a,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(p,g)=>{if(!g)return;const v=p.getState().scene;v.__r3f&&(v.__r3f.root=p,i(v,g))},removeChildFromContainer:(p,g)=>{g&&a(p.getState().scene,g)},insertInContainerBefore:(p,g,v)=>{if(!g||!v)return;const y=p.getState().scene;y.__r3f&&r(y,g,v)},getRootHostContext:()=>null,getChildHostContext:p=>p,finalizeInitialChildren(p){var g;return!!((g=p==null?void 0:p.__r3f)!=null?g:{}).handlers},prepareUpdate(p,g,v,y){var S;if(((S=p==null?void 0:p.__r3f)!=null?S:{}).primitive&&y.object&&y.object!==p)return[!0];{const{args:w=[],children:M,...A}=y,{args:b=[],children:R,...I}=v;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((F,z)=>F!==b[z]))return[!0];const k=H2(p,A,I,!0);return k.changes.length?[!1,k]:null}},commitUpdate(p,[g,v],y,S,T,w){g?l(p,y,T,w):yy(p,v)},commitMount(p,g,v,y){var S;const T=(S=p.__r3f)!=null?S:{};p.raycast&&T.handlers&&T.eventCount&&Vg(p).getState().internal.interaction.push(p)},getPublicInstance:p=>p,prepareForCommit:()=>null,preparePortalMount:p=>Xf(p.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(p){var g;const{attach:v,parent:y}=(g=p.__r3f)!=null?g:{};v&&y&&HM(y,p,v),p.isObject3D&&(p.visible=!1),Yf(p)},unhideInstance(p,g){var v;const{attach:y,parent:S}=(v=p.__r3f)!=null?v:{};y&&S&&vy(S,p,y),(p.isObject3D&&g.visible==null||g.visible)&&(p.visible=!0),Yf(p)},createTextInstance:c,hideTextInstance:c,unhideTextInstance:c,getCurrentEventPriority:()=>e?e():Jf.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&jn.fun(performance.now)?performance.now:jn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:jn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:jn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:yy}}var kM,OM;const gy=n=>"colorSpace"in n||"outputColorSpace"in n,N2=()=>{var n;return(n=F1.ColorManagement)!=null?n:null},F2=n=>n&&n.isOrthographicCamera,xk=n=>n&&n.hasOwnProperty("current"),yh=typeof window<"u"&&((kM=window.document)!=null&&kM.createElement||((OM=window.navigator)==null?void 0:OM.product)==="ReactNative")?K.useLayoutEffect:K.useEffect;function k2(n){const e=K.useRef(n);return yh(()=>void(e.current=n),[n]),e}function Sk({set:n}){return yh(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class O2 extends K.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}O2.getDerivedStateFromError=()=>({error:!0});const B2="__default",BM=new Map,_k=n=>n&&!!n.memoized&&!!n.changes;function z2(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Ld=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Vg(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const jn={obj:n=>n===Object(n)&&!jn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(jn.str(n)||jn.num(n)||jn.boo(n))return n===e;const s=jn.obj(n);if(s&&i==="reference")return n===e;const a=jn.arr(n);if(a&&t==="reference")return n===e;if((a||s)&&n===e)return!0;let l;for(l in n)if(!(l in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(l in r?e:n)if(!jn.equ(n[l],e[l],{strict:r,objects:"reference"}))return!1}else for(l in r?e:n)if(n[l]!==e[l])return!1;if(jn.und(l)){if(a&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Mk(n){const e={nodes:{},materials:{}};return n&&n.traverse(t=>{t.name&&(e.nodes[t.name]=t),t.material&&!e.materials[t.material.name]&&(e.materials[t.material.name]=t.material)}),e}function wk(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function Xf(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function Sx(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,a)=>s[a],n),{target:t,key:r}}else return{target:t,key:e}}const zM=/-\d+$/;function vy(n,e,t){if(jn.str(t)){if(zM.test(t)){const s=t.replace(zM,""),{target:a,key:l}=Sx(n,s);Array.isArray(a[l])||(a[l]=[])}const{target:i,key:r}=Sx(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function HM(n,e,t){var i,r;if(jn.str(t)){const{target:s,key:a}=Sx(n,t),l=e.__r3f.previousAttach;l===void 0?delete s[a]:s[a]=l}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function H2(n,{children:e,key:t,ref:i,...r},{children:s,key:a,ref:l,...c}={},f=!1){const p=n.__r3f,g=Object.entries(r),v=[];if(f){const S=Object.keys(c);for(let T=0;T<S.length;T++)r.hasOwnProperty(S[T])||g.unshift([S[T],B2+"remove"])}g.forEach(([S,T])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&S==="object"||jn.equ(T,c[S]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(S))return v.push([S,T,!0,[]]);let M=[];S.includes("-")&&(M=S.split("-")),v.push([S,T,!1,M]);for(const A in r){const b=r[A];A.startsWith(`${S}-`)&&v.push([A,b,!1,A.split("-")])}});const y={...r};return p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.args&&(y.args=p.memoizedProps.args),p!=null&&p.memoizedProps&&p!=null&&p.memoizedProps.attach&&(y.attach=p.memoizedProps.attach),{memoized:y,changes:v}}function yy(n,e){var t;const i=n.__r3f,r=i==null?void 0:i.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:a,changes:l}=_k(e)?e:H2(n,e),c=i==null?void 0:i.eventCount;n.__r3f&&(n.__r3f.memoizedProps=a);for(let v=0;v<l.length;v++){let[y,S,T,w]=l[v];if(gy(n)){const R="srgb",I="srgb-linear";y==="encoding"?(y="colorSpace",S=S===3001?R:I):y==="outputEncoding"&&(y="outputColorSpace",S=S===3001?R:I)}let M=n,A=M[y];if(w.length&&(A=w.reduce((b,R)=>b[R],n),!(A&&A.set))){const[b,...R]=w.reverse();M=R.reverse().reduce((I,k)=>I[k],n),y=b}if(S===B2+"remove")if(M.constructor){let b=BM.get(M.constructor);b||(b=new M.constructor,BM.set(M.constructor,b)),S=b[y]}else S=0;if(T&&i)S?i.handlers[y]=S:delete i.handlers[y],i.eventCount=Object.keys(i.handlers).length;else if(A&&A.set&&(A.copy||A instanceof pc)){if(Array.isArray(S))A.fromArray?A.fromArray(S):A.set(...S);else if(A.copy&&S&&S.constructor&&A.constructor===S.constructor)A.copy(S);else if(S!==void 0){var f;const b=(f=A)==null?void 0:f.isColor;!b&&A.setScalar?A.setScalar(S):A instanceof pc&&S instanceof pc?A.mask=S.mask:A.set(S),!N2()&&s&&!s.linear&&b&&A.convertSRGBToLinear()}}else{var p;if(M[y]=S,(p=M[y])!=null&&p.isTexture&&M[y].format===Dn&&M[y].type===zn&&s){const b=M[y];gy(b)&&gy(s.gl)?b.colorSpace=s.gl.outputColorSpace:b.encoding=s.gl.outputEncoding}}Yf(n)}if(i&&i.parent&&n.raycast&&c!==i.eventCount){const v=Vg(n).getState().internal,y=v.interaction.indexOf(n);y>-1&&v.interaction.splice(y,1),i.eventCount&&v.interaction.push(n)}return!(l.length===1&&l[0][0]==="onUpdate")&&l.length&&(t=n.__r3f)!=null&&t.parent&&_x(n),n}function Yf(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function _x(n){n.onUpdate==null||n.onUpdate(n)}function G2(n,e){n.manual||(F2(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function Tg(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Tk(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Jf.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Jf.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Jf.ContinuousEventPriority;default:return Jf.DefaultEventPriority}}function V2(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Ek(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{V2(t.capturedMap,e,i,r)})}function bk(n){function e(c){const{internal:f}=n.getState(),p=c.offsetX-f.initialClick[0],g=c.offsetY-f.initialClick[1];return Math.round(Math.sqrt(p*p+g*g))}function t(c){return c.filter(f=>["Move","Over","Enter","Out","Leave"].some(p=>{var g;return(g=f.__r3f)==null?void 0:g.handlers["onPointer"+p]}))}function i(c,f){const p=n.getState(),g=new Set,v=[],y=f?f(p.internal.interaction):p.internal.interaction;for(let M=0;M<y.length;M++){const A=Ld(y[M]);A&&(A.raycaster.camera=void 0)}p.previousRoot||p.events.compute==null||p.events.compute(c,p);function S(M){const A=Ld(M);if(!A||!A.events.enabled||A.raycaster.camera===null)return[];if(A.raycaster.camera===void 0){var b;A.events.compute==null||A.events.compute(c,A,(b=A.previousRoot)==null?void 0:b.getState()),A.raycaster.camera===void 0&&(A.raycaster.camera=null)}return A.raycaster.camera?A.raycaster.intersectObject(M,!0):[]}let T=y.flatMap(S).sort((M,A)=>{const b=Ld(M.object),R=Ld(A.object);return!b||!R?M.distance-A.distance:R.events.priority-b.events.priority||M.distance-A.distance}).filter(M=>{const A=Tg(M);return g.has(A)?!1:(g.add(A),!0)});p.events.filter&&(T=p.events.filter(T,p));for(const M of T){let A=M.object;for(;A;){var w;(w=A.__r3f)!=null&&w.eventCount&&v.push({...M,eventObject:A}),A=A.parent}}if("pointerId"in c&&p.internal.capturedMap.has(c.pointerId))for(let M of p.internal.capturedMap.get(c.pointerId).values())g.has(Tg(M.intersection))||v.push(M.intersection);return v}function r(c,f,p,g){const v=n.getState();if(c.length){const y={stopped:!1};for(const S of c){const T=Ld(S.object)||v,{raycaster:w,pointer:M,camera:A,internal:b}=T,R=new Q(M.x,M.y,0).unproject(A),I=O=>{var $,Y;return($=(Y=b.capturedMap.get(O))==null?void 0:Y.has(S.eventObject))!=null?$:!1},k=O=>{const $={intersection:S,target:f.target};b.capturedMap.has(O)?b.capturedMap.get(O).set(S.eventObject,$):b.capturedMap.set(O,new Map([[S.eventObject,$]])),f.target.setPointerCapture(O)},F=O=>{const $=b.capturedMap.get(O);$&&V2(b.capturedMap,S.eventObject,$,O)};let z={};for(let O in f){let $=f[O];typeof $!="function"&&(z[O]=$)}let U={...S,...z,pointer:M,intersections:c,stopped:y.stopped,delta:p,unprojectedPoint:R,ray:w.ray,camera:A,stopPropagation(){const O="pointerId"in f&&b.capturedMap.get(f.pointerId);if((!O||O.has(S.eventObject))&&(U.stopped=y.stopped=!0,b.hovered.size&&Array.from(b.hovered.values()).find($=>$.eventObject===S.eventObject))){const $=c.slice(0,c.indexOf(S));s([...$,S])}},target:{hasPointerCapture:I,setPointerCapture:k,releasePointerCapture:F},currentTarget:{hasPointerCapture:I,setPointerCapture:k,releasePointerCapture:F},nativeEvent:f};if(g(U),y.stopped===!0)break}}return c}function s(c){const{internal:f}=n.getState();for(const p of f.hovered.values())if(!c.length||!c.find(g=>g.object===p.object&&g.index===p.index&&g.instanceId===p.instanceId)){const v=p.eventObject.__r3f,y=v==null?void 0:v.handlers;if(f.hovered.delete(Tg(p)),v!=null&&v.eventCount){const S={...p,intersections:c};y.onPointerOut==null||y.onPointerOut(S),y.onPointerLeave==null||y.onPointerLeave(S)}}}function a(c,f){for(let p=0;p<f.length;p++){const g=f[p].__r3f;g==null||g.handlers.onPointerMissed==null||g.handlers.onPointerMissed(c)}}function l(c){switch(c){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return f=>{const{internal:p}=n.getState();"pointerId"in f&&p.capturedMap.has(f.pointerId)&&requestAnimationFrame(()=>{p.capturedMap.has(f.pointerId)&&(p.capturedMap.delete(f.pointerId),s([]))})}}return function(p){const{onPointerMissed:g,internal:v}=n.getState();v.lastEvent.current=p;const y=c==="onPointerMove",S=c==="onClick"||c==="onContextMenu"||c==="onDoubleClick",w=i(p,y?t:void 0),M=S?e(p):0;c==="onPointerDown"&&(v.initialClick=[p.offsetX,p.offsetY],v.initialHits=w.map(b=>b.eventObject)),S&&!w.length&&M<=2&&(a(p,v.interaction),g&&g(p)),y&&s(w);function A(b){const R=b.eventObject,I=R.__r3f,k=I==null?void 0:I.handlers;if(I!=null&&I.eventCount)if(y){if(k.onPointerOver||k.onPointerEnter||k.onPointerOut||k.onPointerLeave){const F=Tg(b),z=v.hovered.get(F);z?z.stopped&&b.stopPropagation():(v.hovered.set(F,b),k.onPointerOver==null||k.onPointerOver(b),k.onPointerEnter==null||k.onPointerEnter(b))}k.onPointerMove==null||k.onPointerMove(b)}else{const F=k[c];F?(!S||v.initialHits.includes(R))&&(a(p,v.interaction.filter(z=>!v.initialHits.includes(z))),F(b)):S&&v.initialHits.includes(R)&&a(p,v.interaction.filter(z=>!v.initialHits.includes(z)))}}r(w,p,M,A)}}return{handlePointer:l}}const Ak=["set","get","setSize","setFrameloop","setDpr","events","invalidate","advance","size","viewport"],W2=n=>!!(n!=null&&n.render),k1=K.createContext(null),Ck=(n,e)=>{const t=P2((l,c)=>{const f=new Q,p=new Q,g=new Q;function v(M=c().camera,A=p,b=c().size){const{width:R,height:I,top:k,left:F}=b,z=R/I;A.isVector3?g.copy(A):g.set(...A);const U=M.getWorldPosition(f).distanceTo(g);if(F2(M))return{width:R/M.zoom,height:I/M.zoom,top:k,left:F,factor:1,distance:U,aspect:z};{const O=M.fov*Math.PI/180,$=2*Math.tan(O/2)*U,Y=$*(R/I);return{width:Y,height:$,top:k,left:F,factor:R/Y,distance:U,aspect:z}}}let y;const S=M=>l(A=>({performance:{...A.performance,current:M}})),T=new _e;return{set:l,get:c,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(M=1)=>n(c(),M),advance:(M,A)=>e(M,A,c()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new D1,pointer:T,mouse:T,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const M=c();y&&clearTimeout(y),M.performance.current!==M.performance.min&&S(M.performance.min),y=setTimeout(()=>S(c().performance.max),M.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:v},setEvents:M=>l(A=>({...A,events:{...A.events,...M}})),setSize:(M,A,b,R,I)=>{const k=c().camera,F={width:M,height:A,top:R||0,left:I||0,updateStyle:b};l(z=>({size:F,viewport:{...z.viewport,...v(k,p,F)}}))},setDpr:M=>l(A=>{const b=z2(M);return{viewport:{...A.viewport,dpr:b,initialDpr:A.viewport.initialDpr||b}}}),setFrameloop:(M="always")=>{const A=c().clock;A.stop(),A.elapsedTime=0,M!=="never"&&(A.start(),A.elapsedTime=0),l(()=>({frameloop:M}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:K.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(M,A,b)=>{const R=c().internal;return R.priority=R.priority+(A>0?1:0),R.subscribers.push({ref:M,priority:A,store:b}),R.subscribers=R.subscribers.sort((I,k)=>I.priority-k.priority),()=>{const I=c().internal;I!=null&&I.subscribers&&(I.priority=I.priority-(A>0?1:0),I.subscribers=I.subscribers.filter(k=>k.ref!==M))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,a=i.camera;return t.subscribe(()=>{const{camera:l,size:c,viewport:f,gl:p,set:g}=t.getState();if(c.width!==r.width||c.height!==r.height||f.dpr!==s){var v;r=c,s=f.dpr,G2(l,c),p.setPixelRatio(f.dpr);const y=(v=c.updateStyle)!=null?v:typeof HTMLCanvasElement<"u"&&p.domElement instanceof HTMLCanvasElement;p.setSize(c.width,c.height,y)}l!==a&&(a=l,g(y=>({viewport:{...y.viewport,...y.viewport.getCurrentViewport(l)}})))}),t.subscribe(l=>n(l)),t};let Eg,Rk=new Set,Pk=new Set,Dk=new Set;function xy(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Id(n,e){switch(n){case"before":return xy(Rk,e);case"after":return xy(Pk,e);case"tail":return xy(Dk,e)}}let Sy,_y;function My(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),Sy=e.internal.subscribers,Eg=0;Eg<Sy.length;Eg++)_y=Sy[Eg],_y.ref.current(_y.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Lk(n){let e=!1,t=!1,i,r,s;function a(f){r=requestAnimationFrame(a),e=!0,i=0,Id("before",f),t=!0;for(const g of n.values()){var p;s=g.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((p=s.gl.xr)!=null&&p.isPresenting)&&(i+=My(f,s))}if(t=!1,Id("after",f),i===0)return Id("tail",f),e=!1,cancelAnimationFrame(r)}function l(f,p=1){var g;if(!f)return n.forEach(v=>l(v.store.getState(),p));(g=f.gl.xr)!=null&&g.isPresenting||!f.internal.active||f.frameloop==="never"||(p>1?f.internal.frames=Math.min(60,f.internal.frames+p):t?f.internal.frames=2:f.internal.frames=1,e||(e=!0,requestAnimationFrame(a)))}function c(f,p=!0,g,v){if(p&&Id("before",f),g)My(f,g,v);else for(const y of n.values())My(f,y.store.getState());p&&Id("after",f)}return{loop:a,invalidate:l,advance:c}}function Ik(n){const e=K.useRef(null);return yh(()=>void(e.current=n.current.__r3f),[n]),e}function O1(){const n=K.useContext(k1);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function $r(n=t=>t,e){return O1()(n,e)}function ou(n,e=0){const t=O1(),i=t.getState().internal.subscribe,r=k2(n);return yh(()=>i(r,e,t),[e,i,t]),null}const GM=new WeakMap;function j2(n,e){return function(t,...i){let r=GM.get(t);return r||(r=new t,GM.set(t,r)),n&&n(r),Promise.all(i.map(s=>new Promise((a,l)=>r.load(s,c=>{c.scene&&Object.assign(c,Mk(c.scene)),a(c)},e,c=>l(new Error(`Could not load ${s}: ${c==null?void 0:c.message}`))))))}}function B1(n,e,t,i){const r=Array.isArray(e)?e:[e],s=I2(j2(t,i),[n,...r],{equal:jn.equ});return Array.isArray(e)?s:s[0]}B1.preload=function(n,e,t){const i=Array.isArray(e)?e:[e];return lk(j2(t),[n,...i])};B1.clear=function(n,e){const t=Array.isArray(e)?e:[e];return uk([n,...t])};const ah=new Map,{invalidate:VM,advance:WM}=Lk(ah),{reconciler:wp,applyProps:Hf}=yk(ah,Tk),Gf={objects:"shallow",strict:!1},Uk=(n,e)=>{const t=typeof n=="function"?n(e):n;return W2(t)?t:new f1({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Nk(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:a,updateStyle:l=t}=e;return{width:i,height:r,top:s,left:a,updateStyle:l}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:a}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:a,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function Fk(n){const e=ah.get(n),t=e==null?void 0:e.fiber,i=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Ck(VM,WM),a=t||wp.createContainer(s,Jf.ConcurrentRoot,null,!1,null,"",r,null);e||ah.set(n,{fiber:a,store:s});let l,c=!1,f;return{configure(p={}){let{gl:g,size:v,scene:y,events:S,onCreated:T,shadows:w=!1,linear:M=!1,flat:A=!1,legacy:b=!1,orthographic:R=!1,frameloop:I="always",dpr:k=[1,2],performance:F,raycaster:z,camera:U,onPointerMissed:O}=p,$=s.getState(),Y=$.gl;$.gl||$.set({gl:Y=Uk(g,n)});let q=$.raycaster;q||$.set({raycaster:q=new U1});const{params:J,...ae}=z||{};if(jn.equ(ae,q,Gf)||Hf(q,{...ae}),jn.equ(J,q.params,Gf)||Hf(q,{params:{...q.params,...J}}),!$.camera||$.camera===f&&!jn.equ(f,U,Gf)){f=U;const W=U instanceof dh,L=W?U:R?new ph(0,0,0,0,.1,1e3):new ui(75,0,.1,1e3);W||(L.position.z=5,U&&(Hf(L,U),("aspect"in U||"left"in U||"right"in U||"bottom"in U||"top"in U)&&(L.manual=!0,L.updateProjectionMatrix())),!$.camera&&!(U!=null&&U.rotation)&&L.lookAt(0,0,0)),$.set({camera:L}),q.camera=L}if(!$.scene){let W;y!=null&&y.isScene?W=y:(W=new sh,y&&Hf(W,y)),$.set({scene:Xf(W)})}if(!$.xr){var oe;const W=(te,ie)=>{const re=s.getState();re.frameloop!=="never"&&WM(te,!0,re,ie)},L=()=>{const te=s.getState();te.gl.xr.enabled=te.gl.xr.isPresenting,te.gl.xr.setAnimationLoop(te.gl.xr.isPresenting?W:null),te.gl.xr.isPresenting||VM(te)},B={connect(){const te=s.getState().gl;te.xr.addEventListener("sessionstart",L),te.xr.addEventListener("sessionend",L)},disconnect(){const te=s.getState().gl;te.xr.removeEventListener("sessionstart",L),te.xr.removeEventListener("sessionend",L)}};typeof((oe=Y.xr)==null?void 0:oe.addEventListener)=="function"&&B.connect(),$.set({xr:B})}if(Y.shadowMap){const W=Y.shadowMap.enabled,L=Y.shadowMap.type;if(Y.shadowMap.enabled=!!w,jn.boo(w))Y.shadowMap.type=jd;else if(jn.str(w)){var ue;const B={basic:HT,percentage:lv,soft:jd,variance:ka};Y.shadowMap.type=(ue=B[w])!=null?ue:jd}else jn.obj(w)&&Object.assign(Y.shadowMap,w);(W!==Y.shadowMap.enabled||L!==Y.shadowMap.type)&&(Y.shadowMap.needsUpdate=!0)}const V=N2();V&&("enabled"in V?V.enabled=!b:"legacyMode"in V&&(V.legacyMode=b)),c||Hf(Y,{outputEncoding:M?3e3:3001,toneMapping:A?fo:Xx}),$.legacy!==b&&$.set(()=>({legacy:b})),$.linear!==M&&$.set(()=>({linear:M})),$.flat!==A&&$.set(()=>({flat:A})),g&&!jn.fun(g)&&!W2(g)&&!jn.equ(g,Y,Gf)&&Hf(Y,g),S&&!$.events.handlers&&$.set({events:S(s)});const j=Nk(n,v);return jn.equ(j,$.size,Gf)||$.setSize(j.width,j.height,j.updateStyle,j.top,j.left),k&&$.viewport.dpr!==z2(k)&&$.setDpr(k),$.frameloop!==I&&$.setFrameloop(I),$.onPointerMissed||$.set({onPointerMissed:O}),F&&!jn.equ(F,$.performance,Gf)&&$.set(W=>({performance:{...W.performance,...F}})),l=T,c=!0,this},render(p){return c||this.configure(),wp.updateContainer(pe.jsx(kk,{store:s,children:p,onCreated:l,rootElement:n}),a,null,()=>{}),s},unmount(){X2(n)}}}function kk({store:n,children:e,onCreated:t,rootElement:i}){return yh(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),pe.jsx(k1.Provider,{value:n,children:e})}function X2(n,e){const t=ah.get(n),i=t==null?void 0:t.fiber;if(i){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),wp.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,a,l,c;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(a=s.renderLists)==null||a.dispose==null||a.dispose(),(l=r.gl)==null||l.forceContextLoss==null||l.forceContextLoss(),(c=r.gl)!=null&&c.xr&&r.xr.disconnect(),wk(r),ah.delete(n)}catch{}},500)})}}function Y2(n,e,t){return pe.jsx(Ok,{children:n,container:e,state:t},e.uuid)}function Ok({state:n={},children:e,container:t}){const{events:i,size:r,...s}=n,a=O1(),[l]=K.useState(()=>new U1),[c]=K.useState(()=>new _e),f=K.useCallback((g,v)=>{const y={...g};Object.keys(g).forEach(T=>{(Ak.includes(T)||g[T]!==v[T]&&v[T])&&delete y[T]});let S;if(v&&r){const T=v.camera;S=g.viewport.getCurrentViewport(T,new Q,r),T!==g.camera&&G2(T,r)}return{...y,scene:t,raycaster:l,pointer:c,mouse:c,previousRoot:a,events:{...g.events,...v==null?void 0:v.events,...i},size:{...g.size,...r},viewport:{...g.viewport,...S},...s}},[n]),[p]=K.useState(()=>{const g=a.getState();return P2((y,S)=>({...g,scene:t,raycaster:l,pointer:c,mouse:c,previousRoot:a,events:{...g.events,...i},size:{...g.size,...r},...s,set:y,get:S,setEvents:T=>y(w=>({...w,events:{...w.events,...T}}))}))});return K.useEffect(()=>{const g=a.subscribe(v=>p.setState(y=>f(v,y)));return()=>{g()}},[f]),K.useEffect(()=>{p.setState(g=>f(a.getState(),g))},[f]),K.useEffect(()=>()=>{p.destroy()},[]),pe.jsx(pe.Fragment,{children:wp.createPortal(pe.jsx(k1.Provider,{value:p,children:e}),p,null)})}wp.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:K.version});const wy={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Bk(n){const{handlePointer:e}=bk(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(wy).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(a=>({events:{...a.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([a,l])=>{const[c,f]=wy[a];t.addEventListener(c,l,{passive:f})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,a])=>{if(i&&i.connected instanceof HTMLElement){const[l]=wy[s];i.connected.removeEventListener(l,a)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function jM(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function zk({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,a]=K.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),l=K.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),c=n?typeof n=="number"?n:n.scroll:null,f=n?typeof n=="number"?n:n.resize:null,p=K.useRef(!1);K.useEffect(()=>(p.current=!0,()=>void(p.current=!1)));const[g,v,y]=K.useMemo(()=>{const M=()=>{if(!l.current.element)return;const{left:A,top:b,width:R,height:I,bottom:k,right:F,x:z,y:U}=l.current.element.getBoundingClientRect(),O={left:A,top:b,width:R,height:I,bottom:k,right:F,x:z,y:U};l.current.element instanceof HTMLElement&&i&&(O.height=l.current.element.offsetHeight,O.width=l.current.element.offsetWidth),Object.freeze(O),p.current&&!Wk(l.current.lastBounds,O)&&a(l.current.lastBounds=O)};return[M,f?jM(M,f):M,c?jM(M,c):M]},[a,i,c,f]);function S(){l.current.scrollContainers&&(l.current.scrollContainers.forEach(M=>M.removeEventListener("scroll",y,!0)),l.current.scrollContainers=null),l.current.resizeObserver&&(l.current.resizeObserver.disconnect(),l.current.resizeObserver=null),l.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",l.current.orientationHandler))}function T(){l.current.element&&(l.current.resizeObserver=new r(y),l.current.resizeObserver.observe(l.current.element),e&&l.current.scrollContainers&&l.current.scrollContainers.forEach(M=>M.addEventListener("scroll",y,{capture:!0,passive:!0})),l.current.orientationHandler=()=>{y()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",l.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",l.current.orientationHandler))}const w=M=>{!M||M===l.current.element||(S(),l.current.element=M,l.current.scrollContainers=q2(M),T())};return Gk(y,!!e),Hk(v),K.useEffect(()=>{S(),T()},[e,y,v]),K.useEffect(()=>S,[]),[w,s,g]}function Hk(n){K.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Gk(n,e){K.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function q2(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...q2(n.parentElement)]}const Vk=["x","y","top","bottom","left","right","width","height"],Wk=(n,e)=>Vk.every(t=>n[t]===e[t]);var jk=Object.defineProperty,Xk=Object.defineProperties,Yk=Object.getOwnPropertyDescriptors,XM=Object.getOwnPropertySymbols,qk=Object.prototype.hasOwnProperty,Zk=Object.prototype.propertyIsEnumerable,YM=(n,e,t)=>e in n?jk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,qM=(n,e)=>{for(var t in e||(e={}))qk.call(e,t)&&YM(n,t,e[t]);if(XM)for(var t of XM(e))Zk.call(e,t)&&YM(n,t,e[t]);return n},Kk=(n,e)=>Xk(n,Yk(e)),ZM,KM;typeof window<"u"&&((ZM=window.document)!=null&&ZM.createElement||((KM=window.navigator)==null?void 0:KM.product)==="ReactNative")?K.useLayoutEffect:K.useEffect;function Z2(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=Z2(i,e,t);if(r)return r;i=i.sibling}}function K2(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const QM=console.error;console.error=function(){const n=[...arguments].join("");if(n!=null&&n.startsWith("Warning:")&&n.includes("useContext")){console.error=QM;return}return QM.apply(this,arguments)};const z1=K2(K.createContext(null));class Q2 extends K.Component{render(){return K.createElement(z1.Provider,{value:this._reactInternals},this.props.children)}}function Qk(){const n=K.useContext(z1);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=K.useId();return K.useMemo(()=>{for(const i of[n,n==null?void 0:n.alternate]){if(!i)continue;const r=Z2(i,!1,s=>{let a=s.memoizedState;for(;a;){if(a.memoizedState===e)return!0;a=a.next}});if(r)return r}},[n,e])}function Jk(){const n=Qk(),[e]=K.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==z1&&!e.has(r)&&e.set(r,K.useContext(K2(r)))}t=t.return}return e}function $k(){const n=Jk();return K.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>K.createElement(e,null,K.createElement(t.Provider,Kk(qM({},i),{value:n.get(t)}))),e=>K.createElement(Q2,qM({},e))),[n])}const eO=K.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:a=Bk,eventSource:l,eventPrefix:c,shadows:f,linear:p,flat:g,legacy:v,orthographic:y,frameloop:S,dpr:T,performance:w,raycaster:M,camera:A,scene:b,onPointerMissed:R,onCreated:I,...k},F){K.useMemo(()=>U2(nk),[]);const z=$k(),[U,O]=zk({scroll:!0,debounce:{scroll:50,resize:0},...i}),$=K.useRef(null),Y=K.useRef(null);K.useImperativeHandle(F,()=>$.current);const q=k2(R),[J,ae]=K.useState(!1),[oe,ue]=K.useState(!1);if(J)throw J;if(oe)throw oe;const V=K.useRef(null);yh(()=>{const W=$.current;O.width>0&&O.height>0&&W&&(V.current||(V.current=Fk(W)),V.current.configure({gl:s,events:a,shadows:f,linear:p,flat:g,legacy:v,orthographic:y,frameloop:S,dpr:T,performance:w,raycaster:M,camera:A,scene:b,size:O,onPointerMissed:(...L)=>q.current==null?void 0:q.current(...L),onCreated:L=>{L.events.connect==null||L.events.connect(l?xk(l)?l.current:l:Y.current),c&&L.setEvents({compute:(B,te)=>{const ie=B[c+"X"],re=B[c+"Y"];te.pointer.set(ie/te.size.width*2-1,-(re/te.size.height)*2+1),te.raycaster.setFromCamera(te.pointer,te.camera)}}),I==null||I(L)}}),V.current.render(pe.jsx(z,{children:pe.jsx(O2,{set:ue,children:pe.jsx(K.Suspense,{fallback:pe.jsx(Sk,{set:ae}),children:e??null})})})))}),K.useEffect(()=>{const W=$.current;if(W)return()=>X2(W)},[]);const j=l?"none":"auto";return pe.jsx("div",{ref:Y,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:j,...r},...k,children:pe.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:pe.jsx("canvas",{ref:$,style:{display:"block"},children:t})})})}),J2=K.forwardRef(function(e,t){return pe.jsx(Q2,{children:pe.jsx(eO,{...e,ref:t})})});function iv(){return iv=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},iv.apply(null,arguments)}let Ud;function tO(){var n;if(Ud!==void 0)return Ud;try{let e;const t=document.createElement("canvas");return Ud=!!(window.WebGL2RenderingContext&&(e=t.getContext("webgl2"))),e&&((n=e.getExtension("WEBGL_lose_context"))==null||n.loseContext()),Ud}catch{return Ud=!1}}function nO(){var n=Object.create(null);function e(r,s){var a=r.id,l=r.name,c=r.dependencies;c===void 0&&(c=[]);var f=r.init;f===void 0&&(f=function(){});var p=r.getTransferables;if(p===void 0&&(p=null),!n[a])try{c=c.map(function(v){return v&&v.isWorkerModule&&(e(v,function(y){if(y instanceof Error)throw y}),v=n[v.id].value),v}),f=i("<"+l+">.init",f),p&&(p=i("<"+l+">.getTransferables",p));var g=null;typeof f=="function"?g=f.apply(void 0,c):console.error("worker module init function failed to rehydrate"),n[a]={id:a,value:g,getTransferables:p},s(g)}catch(v){v&&v.noLog||console.error(v),s(v)}}function t(r,s){var a,l=r.id,c=r.args;(!n[l]||typeof n[l].value!="function")&&s(new Error("Worker module "+l+": not found or its 'init' did not return a function"));try{var f=(a=n[l]).value.apply(a,c);f&&typeof f.then=="function"?f.then(p,function(g){return s(g instanceof Error?g:new Error(""+g))}):p(f)}catch(g){s(g)}function p(g){try{var v=n[l].getTransferables&&n[l].getTransferables(g);(!v||!Array.isArray(v)||!v.length)&&(v=void 0),s(g,v)}catch(y){console.error(y),s(y)}}}function i(r,s){var a=void 0;self.troikaDefine=function(c){return a=c};var l=URL.createObjectURL(new Blob(["/** "+r.replace(/\*/g,"")+` **/

troikaDefine(
`+s+`
)`],{type:"application/javascript"}));try{importScripts(l)}catch(c){console.error(c)}return URL.revokeObjectURL(l),delete self.troikaDefine,a}self.addEventListener("message",function(r){var s=r.data,a=s.messageId,l=s.action,c=s.data;try{l==="registerModule"&&e(c,function(f){f instanceof Error?postMessage({messageId:a,success:!1,error:f.message}):postMessage({messageId:a,success:!0,result:{isCallable:typeof f=="function"}})}),l==="callModule"&&t(c,function(f,p){f instanceof Error?postMessage({messageId:a,success:!1,error:f.message}):postMessage({messageId:a,success:!0,result:f},p||void 0)})}catch(f){postMessage({messageId:a,success:!1,error:f.stack})}})}function iO(n){var e=function(){for(var t=[],i=arguments.length;i--;)t[i]=arguments[i];return e._getInitResult().then(function(r){if(typeof r=="function")return r.apply(void 0,t);throw new Error("Worker module function was called but `init` did not return a callable function")})};return e._getInitResult=function(){var t=n.dependencies,i=n.init;t=Array.isArray(t)?t.map(function(s){return s&&(s=s.onMainThread||s,s._getInitResult&&(s=s._getInitResult())),s}):[];var r=Promise.all(t).then(function(s){return i.apply(null,s)});return e._getInitResult=function(){return r},r},e}var $2=function(){var n=!1;if(typeof window<"u"&&typeof window.document<"u")try{var e=new Worker(URL.createObjectURL(new Blob([""],{type:"application/javascript"})));e.terminate(),n=!0}catch(t){console.log("Troika createWorkerModule: web workers not allowed; falling back to main thread execution. Cause: ["+t.message+"]")}return $2=function(){return n},n},rO=0,sO=0,Ty=!1,Qd=Object.create(null),Jd=Object.create(null),Mx=Object.create(null);function xh(n){if((!n||typeof n.init!="function")&&!Ty)throw new Error("requires `options.init` function");var e=n.dependencies,t=n.init,i=n.getTransferables,r=n.workerId,s=iO(n);r==null&&(r="#default");var a="workerModule"+ ++rO,l=n.name||a,c=null;e=e&&e.map(function(p){return typeof p=="function"&&!p.workerModuleData&&(Ty=!0,p=xh({workerId:r,name:"<"+l+"> function dependency: "+p.name,init:`function(){return (
`+Wg(p)+`
)}`}),Ty=!1),p&&p.workerModuleData&&(p=p.workerModuleData),p});function f(){for(var p=[],g=arguments.length;g--;)p[g]=arguments[g];if(!$2())return s.apply(void 0,p);if(!c){c=JM(r,"registerModule",f.workerModuleData);var v=function(){c=null,Jd[r].delete(v)};(Jd[r]||(Jd[r]=new Set)).add(v)}return c.then(function(y){var S=y.isCallable;if(S)return JM(r,"callModule",{id:a,args:p});throw new Error("Worker module function was called but `init` did not return a callable function")})}return f.workerModuleData={isWorkerModule:!0,id:a,name:l,dependencies:e,init:Wg(t),getTransferables:i&&Wg(i)},f.onMainThread=s,f}function aO(n){Jd[n]&&Jd[n].forEach(function(e){e()}),Qd[n]&&(Qd[n].terminate(),delete Qd[n])}function Wg(n){var e=n.toString();return!/^function/.test(e)&&/^\w+\s*\(/.test(e)&&(e="function "+e),e}function oO(n){var e=Qd[n];if(!e){var t=Wg(nO);e=Qd[n]=new Worker(URL.createObjectURL(new Blob(["/** Worker Module Bootstrap: "+n.replace(/\*/g,"")+` **/

;(`+t+")()"],{type:"application/javascript"}))),e.onmessage=function(i){var r=i.data,s=r.messageId,a=Mx[s];if(!a)throw new Error("WorkerModule response with empty or unknown messageId");delete Mx[s],a(r)}}return e}function JM(n,e,t){return new Promise(function(i,r){var s=++sO;Mx[s]=function(a){a.success?i(a.result):r(new Error("Error in worker "+e+" call: "+a.error))},oO(n).postMessage({messageId:s,action:e,data:t})})}function eb(){var n=function(e){function t(j,W,L,B,te,ie,re,de){var he=1-re;de.x=he*he*j+2*he*re*L+re*re*te,de.y=he*he*W+2*he*re*B+re*re*ie}function i(j,W,L,B,te,ie,re,de,he,ve){var Ve=1-he;ve.x=Ve*Ve*Ve*j+3*Ve*Ve*he*L+3*Ve*he*he*te+he*he*he*re,ve.y=Ve*Ve*Ve*W+3*Ve*Ve*he*B+3*Ve*he*he*ie+he*he*he*de}function r(j,W){for(var L=/([MLQCZ])([^MLQCZ]*)/g,B,te,ie,re,de;B=L.exec(j);){var he=B[2].replace(/^\s*|\s*$/g,"").split(/[,\s]+/).map(function(ve){return parseFloat(ve)});switch(B[1]){case"M":re=te=he[0],de=ie=he[1];break;case"L":(he[0]!==re||he[1]!==de)&&W("L",re,de,re=he[0],de=he[1]);break;case"Q":{W("Q",re,de,re=he[2],de=he[3],he[0],he[1]);break}case"C":{W("C",re,de,re=he[4],de=he[5],he[0],he[1],he[2],he[3]);break}case"Z":(re!==te||de!==ie)&&W("L",re,de,te,ie);break}}}function s(j,W,L){L===void 0&&(L=16);var B={x:0,y:0};r(j,function(te,ie,re,de,he,ve,Ve,rt,Ue){switch(te){case"L":W(ie,re,de,he);break;case"Q":{for(var Z=ie,Fe=re,we=1;we<L;we++)t(ie,re,ve,Ve,de,he,we/(L-1),B),W(Z,Fe,B.x,B.y),Z=B.x,Fe=B.y;break}case"C":{for(var ke=ie,Pe=re,et=1;et<L;et++)i(ie,re,ve,Ve,rt,Ue,de,he,et/(L-1),B),W(ke,Pe,B.x,B.y),ke=B.x,Pe=B.y;break}}})}var a="precision highp float;attribute vec2 aUV;varying vec2 vUV;void main(){vUV=aUV;gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",l="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){gl_FragColor=texture2D(tex,vUV);}",c=new WeakMap,f={premultipliedAlpha:!1,preserveDrawingBuffer:!0,antialias:!1,depth:!1};function p(j,W){var L=j.getContext?j.getContext("webgl",f):j,B=c.get(L);if(!B){let ke=function(Ae){var ht=ie[Ae];if(!ht&&(ht=ie[Ae]=L.getExtension(Ae),!ht))throw new Error(Ae+" not supported");return ht},Pe=function(Ae,ht){var X=L.createShader(ht);return L.shaderSource(X,Ae),L.compileShader(X),X},et=function(Ae,ht,X,H){if(!re[Ae]){var ce={},qe={},be=L.createProgram();L.attachShader(be,Pe(ht,L.VERTEX_SHADER)),L.attachShader(be,Pe(X,L.FRAGMENT_SHADER)),L.linkProgram(be),re[Ae]={program:be,transaction:function(Ke){L.useProgram(be),Ke({setUniform:function(xe,ct){for(var nt=[],tt=arguments.length-2;tt-- >0;)nt[tt]=arguments[tt+2];var Ye=qe[ct]||(qe[ct]=L.getUniformLocation(be,ct));L["uniform"+xe].apply(L,[Ye].concat(nt))},setAttribute:function(xe,ct,nt,tt,Ye){var st=ce[xe];st||(st=ce[xe]={buf:L.createBuffer(),loc:L.getAttribLocation(be,xe),data:null}),L.bindBuffer(L.ARRAY_BUFFER,st.buf),L.vertexAttribPointer(st.loc,ct,L.FLOAT,!1,0,0),L.enableVertexAttribArray(st.loc),te?L.vertexAttribDivisor(st.loc,tt):ke("ANGLE_instanced_arrays").vertexAttribDivisorANGLE(st.loc,tt),Ye!==st.data&&(L.bufferData(L.ARRAY_BUFFER,Ye,nt),st.data=Ye)}})}}}re[Ae].transaction(H)},Le=function(Ae,ht){he++;try{L.activeTexture(L.TEXTURE0+he);var X=de[Ae];X||(X=de[Ae]=L.createTexture(),L.bindTexture(L.TEXTURE_2D,X),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MIN_FILTER,L.NEAREST),L.texParameteri(L.TEXTURE_2D,L.TEXTURE_MAG_FILTER,L.NEAREST)),L.bindTexture(L.TEXTURE_2D,X),ht(X,he)}finally{he--}},Xe=function(Ae,ht,X){var H=L.createFramebuffer();ve.push(H),L.bindFramebuffer(L.FRAMEBUFFER,H),L.activeTexture(L.TEXTURE0+ht),L.bindTexture(L.TEXTURE_2D,Ae),L.framebufferTexture2D(L.FRAMEBUFFER,L.COLOR_ATTACHMENT0,L.TEXTURE_2D,Ae,0);try{X(H)}finally{L.deleteFramebuffer(H),L.bindFramebuffer(L.FRAMEBUFFER,ve[--ve.length-1]||null)}},Ze=function(){ie={},re={},de={},he=-1,ve.length=0};var Ve=ke,rt=Pe,Ue=et,Z=Le,Fe=Xe,we=Ze,te=typeof WebGL2RenderingContext<"u"&&L instanceof WebGL2RenderingContext,ie={},re={},de={},he=-1,ve=[];L.canvas.addEventListener("webglcontextlost",function(Ae){Ze(),Ae.preventDefault()},!1),c.set(L,B={gl:L,isWebGL2:te,getExtension:ke,withProgram:et,withTexture:Le,withTextureFramebuffer:Xe,handleContextLoss:Ze})}W(B)}function g(j,W,L,B,te,ie,re,de){re===void 0&&(re=15),de===void 0&&(de=null),p(j,function(he){var ve=he.gl,Ve=he.withProgram,rt=he.withTexture;rt("copy",function(Ue,Z){ve.texImage2D(ve.TEXTURE_2D,0,ve.RGBA,te,ie,0,ve.RGBA,ve.UNSIGNED_BYTE,W),Ve("copy",a,l,function(Fe){var we=Fe.setUniform,ke=Fe.setAttribute;ke("aUV",2,ve.STATIC_DRAW,0,new Float32Array([0,0,2,0,0,2])),we("1i","image",Z),ve.bindFramebuffer(ve.FRAMEBUFFER,de||null),ve.disable(ve.BLEND),ve.colorMask(re&8,re&4,re&2,re&1),ve.viewport(L,B,te,ie),ve.scissor(L,B,te,ie),ve.drawArrays(ve.TRIANGLES,0,3)})})})}function v(j,W,L){var B=j.width,te=j.height;p(j,function(ie){var re=ie.gl,de=new Uint8Array(B*te*4);re.readPixels(0,0,B,te,re.RGBA,re.UNSIGNED_BYTE,de),j.width=W,j.height=L,g(re,de,0,0,B,te)})}var y=Object.freeze({__proto__:null,withWebGLContext:p,renderImageData:g,resizeWebGLCanvasWithoutClearing:v});function S(j,W,L,B,te,ie){ie===void 0&&(ie=1);var re=new Uint8Array(j*W),de=B[2]-B[0],he=B[3]-B[1],ve=[];s(L,function(ke,Pe,et,Le){ve.push({x1:ke,y1:Pe,x2:et,y2:Le,minX:Math.min(ke,et),minY:Math.min(Pe,Le),maxX:Math.max(ke,et),maxY:Math.max(Pe,Le)})}),ve.sort(function(ke,Pe){return ke.maxX-Pe.maxX});for(var Ve=0;Ve<j;Ve++)for(var rt=0;rt<W;rt++){var Ue=Fe(B[0]+de*(Ve+.5)/j,B[1]+he*(rt+.5)/W),Z=Math.pow(1-Math.abs(Ue)/te,ie)/2;Ue<0&&(Z=1-Z),Z=Math.max(0,Math.min(255,Math.round(Z*255))),re[rt*j+Ve]=Z}return re;function Fe(ke,Pe){for(var et=1/0,Le=1/0,Xe=ve.length;Xe--;){var Ze=ve[Xe];if(Ze.maxX+Le<=ke)break;if(ke+Le>Ze.minX&&Pe-Le<Ze.maxY&&Pe+Le>Ze.minY){var Ae=M(ke,Pe,Ze.x1,Ze.y1,Ze.x2,Ze.y2);Ae<et&&(et=Ae,Le=Math.sqrt(et))}}return we(ke,Pe)&&(Le=-Le),Le}function we(ke,Pe){for(var et=0,Le=ve.length;Le--;){var Xe=ve[Le];if(Xe.maxX<=ke)break;var Ze=Xe.y1>Pe!=Xe.y2>Pe&&ke<(Xe.x2-Xe.x1)*(Pe-Xe.y1)/(Xe.y2-Xe.y1)+Xe.x1;Ze&&(et+=Xe.y1<Xe.y2?1:-1)}return et!==0}}function T(j,W,L,B,te,ie,re,de,he,ve){ie===void 0&&(ie=1),de===void 0&&(de=0),he===void 0&&(he=0),ve===void 0&&(ve=0),w(j,W,L,B,te,ie,re,null,de,he,ve)}function w(j,W,L,B,te,ie,re,de,he,ve,Ve){ie===void 0&&(ie=1),he===void 0&&(he=0),ve===void 0&&(ve=0),Ve===void 0&&(Ve=0);for(var rt=S(j,W,L,B,te,ie),Ue=new Uint8Array(rt.length*4),Z=0;Z<rt.length;Z++)Ue[Z*4+Ve]=rt[Z];g(re,Ue,he,ve,j,W,1<<3-Ve,de)}function M(j,W,L,B,te,ie){var re=te-L,de=ie-B,he=re*re+de*de,ve=he?Math.max(0,Math.min(1,((j-L)*re+(W-B)*de)/he)):0,Ve=j-(L+ve*re),rt=W-(B+ve*de);return Ve*Ve+rt*rt}var A=Object.freeze({__proto__:null,generate:S,generateIntoCanvas:T,generateIntoFramebuffer:w}),b="precision highp float;uniform vec4 uGlyphBounds;attribute vec2 aUV;attribute vec4 aLineSegment;varying vec4 vLineSegment;varying vec2 vGlyphXY;void main(){vLineSegment=aLineSegment;vGlyphXY=mix(uGlyphBounds.xy,uGlyphBounds.zw,aUV);gl_Position=vec4(mix(vec2(-1.0),vec2(1.0),aUV),0.0,1.0);}",R="precision highp float;uniform vec4 uGlyphBounds;uniform float uMaxDistance;uniform float uExponent;varying vec4 vLineSegment;varying vec2 vGlyphXY;float absDistToSegment(vec2 point,vec2 lineA,vec2 lineB){vec2 lineDir=lineB-lineA;float lenSq=dot(lineDir,lineDir);float t=lenSq==0.0 ? 0.0 : clamp(dot(point-lineA,lineDir)/lenSq,0.0,1.0);vec2 linePt=lineA+t*lineDir;return distance(point,linePt);}void main(){vec4 seg=vLineSegment;vec2 p=vGlyphXY;float dist=absDistToSegment(p,seg.xy,seg.zw);float val=pow(1.0-clamp(dist/uMaxDistance,0.0,1.0),uExponent)*0.5;bool crossing=(seg.y>p.y!=seg.w>p.y)&&(p.x<(seg.z-seg.x)*(p.y-seg.y)/(seg.w-seg.y)+seg.x);bool crossingUp=crossing&&vLineSegment.y<vLineSegment.w;gl_FragColor=vec4(crossingUp ? 1.0/255.0 : 0.0,crossing&&!crossingUp ? 1.0/255.0 : 0.0,0.0,val);}",I="precision highp float;uniform sampler2D tex;varying vec2 vUV;void main(){vec4 color=texture2D(tex,vUV);bool inside=color.r!=color.g;float val=inside ? 1.0-color.a : color.a;gl_FragColor=vec4(val);}",k=new Float32Array([0,0,2,0,0,2]),F=null,z=!1,U={},O=new WeakMap;function $(j){if(!z&&!ae(j))throw new Error("WebGL generation not supported")}function Y(j,W,L,B,te,ie,re){if(ie===void 0&&(ie=1),re===void 0&&(re=null),!re&&(re=F,!re)){var de=typeof OffscreenCanvas=="function"?new OffscreenCanvas(1,1):typeof document<"u"?document.createElement("canvas"):null;if(!de)throw new Error("OffscreenCanvas or DOM canvas not supported");re=F=de.getContext("webgl",{depth:!1})}$(re);var he=new Uint8Array(j*W*4);p(re,function(Ue){var Z=Ue.gl,Fe=Ue.withTexture,we=Ue.withTextureFramebuffer;Fe("readable",function(ke,Pe){Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,j,W,0,Z.RGBA,Z.UNSIGNED_BYTE,null),we(ke,Pe,function(et){J(j,W,L,B,te,ie,Z,et,0,0,0),Z.readPixels(0,0,j,W,Z.RGBA,Z.UNSIGNED_BYTE,he)})})});for(var ve=new Uint8Array(j*W),Ve=0,rt=0;Ve<he.length;Ve+=4)ve[rt++]=he[Ve];return ve}function q(j,W,L,B,te,ie,re,de,he,ve){ie===void 0&&(ie=1),de===void 0&&(de=0),he===void 0&&(he=0),ve===void 0&&(ve=0),J(j,W,L,B,te,ie,re,null,de,he,ve)}function J(j,W,L,B,te,ie,re,de,he,ve,Ve){ie===void 0&&(ie=1),he===void 0&&(he=0),ve===void 0&&(ve=0),Ve===void 0&&(Ve=0),$(re);var rt=[];s(L,function(Ue,Z,Fe,we){rt.push(Ue,Z,Fe,we)}),rt=new Float32Array(rt),p(re,function(Ue){var Z=Ue.gl,Fe=Ue.isWebGL2,we=Ue.getExtension,ke=Ue.withProgram,Pe=Ue.withTexture,et=Ue.withTextureFramebuffer,Le=Ue.handleContextLoss;if(Pe("rawDistances",function(Xe,Ze){(j!==Xe._lastWidth||W!==Xe._lastHeight)&&Z.texImage2D(Z.TEXTURE_2D,0,Z.RGBA,Xe._lastWidth=j,Xe._lastHeight=W,0,Z.RGBA,Z.UNSIGNED_BYTE,null),ke("main",b,R,function(Ae){var ht=Ae.setAttribute,X=Ae.setUniform,H=!Fe&&we("ANGLE_instanced_arrays"),ce=!Fe&&we("EXT_blend_minmax");ht("aUV",2,Z.STATIC_DRAW,0,k),ht("aLineSegment",4,Z.DYNAMIC_DRAW,1,rt),X.apply(void 0,["4f","uGlyphBounds"].concat(B)),X("1f","uMaxDistance",te),X("1f","uExponent",ie),et(Xe,Ze,function(qe){Z.enable(Z.BLEND),Z.colorMask(!0,!0,!0,!0),Z.viewport(0,0,j,W),Z.scissor(0,0,j,W),Z.blendFunc(Z.ONE,Z.ONE),Z.blendEquationSeparate(Z.FUNC_ADD,Fe?Z.MAX:ce.MAX_EXT),Z.clear(Z.COLOR_BUFFER_BIT),Fe?Z.drawArraysInstanced(Z.TRIANGLES,0,3,rt.length/4):H.drawArraysInstancedANGLE(Z.TRIANGLES,0,3,rt.length/4)})}),ke("post",a,I,function(Ae){Ae.setAttribute("aUV",2,Z.STATIC_DRAW,0,k),Ae.setUniform("1i","tex",Ze),Z.bindFramebuffer(Z.FRAMEBUFFER,de),Z.disable(Z.BLEND),Z.colorMask(Ve===0,Ve===1,Ve===2,Ve===3),Z.viewport(he,ve,j,W),Z.scissor(he,ve,j,W),Z.drawArrays(Z.TRIANGLES,0,3)})}),Z.isContextLost())throw Le(),new Error("webgl context lost")})}function ae(j){var W=!j||j===F?U:j.canvas||j,L=O.get(W);if(L===void 0){z=!0;var B=null;try{var te=[97,106,97,61,99,137,118,80,80,118,137,99,61,97,106,97],ie=Y(4,4,"M8,8L16,8L24,24L16,24Z",[0,0,32,32],24,1,j);L=ie&&te.length===ie.length&&ie.every(function(re,de){return re===te[de]}),L||(B="bad trial run results",console.info(te,ie))}catch(re){L=!1,B=re.message}B&&console.warn("WebGL SDF generation not supported:",B),z=!1,O.set(W,L)}return L}var oe=Object.freeze({__proto__:null,generate:Y,generateIntoCanvas:q,generateIntoFramebuffer:J,isSupported:ae});function ue(j,W,L,B,te,ie){te===void 0&&(te=Math.max(B[2]-B[0],B[3]-B[1])/2),ie===void 0&&(ie=1);try{return Y.apply(oe,arguments)}catch(re){return console.info("WebGL SDF generation failed, falling back to JS",re),S.apply(A,arguments)}}function V(j,W,L,B,te,ie,re,de,he,ve){te===void 0&&(te=Math.max(B[2]-B[0],B[3]-B[1])/2),ie===void 0&&(ie=1),de===void 0&&(de=0),he===void 0&&(he=0),ve===void 0&&(ve=0);try{return q.apply(oe,arguments)}catch(Ve){return console.info("WebGL SDF generation failed, falling back to JS",Ve),T.apply(A,arguments)}}return e.forEachPathCommand=r,e.generate=ue,e.generateIntoCanvas=V,e.javascript=A,e.pathToLineSegments=s,e.webgl=oe,e.webglUtils=y,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}function lO(){var n=function(e){var t={R:"13k,1a,2,3,3,2+1j,ch+16,a+1,5+2,2+n,5,a,4,6+16,4+3,h+1b,4mo,179q,2+9,2+11,2i9+7y,2+68,4,3+4,5+13,4+3,2+4k,3+29,8+cf,1t+7z,w+17,3+3m,1t+3z,16o1+5r,8+30,8+mc,29+1r,29+4v,75+73",EN:"1c+9,3d+1,6,187+9,513,4+5,7+9,sf+j,175h+9,qw+q,161f+1d,4xt+a,25i+9",ES:"17,2,6dp+1,f+1,av,16vr,mx+1,4o,2",ET:"z+2,3h+3,b+1,ym,3e+1,2o,p4+1,8,6u,7c,g6,1wc,1n9+4,30+1b,2n,6d,qhx+1,h0m,a+1,49+2,63+1,4+1,6bb+3,12jj",AN:"16o+5,2j+9,2+1,35,ed,1ff2+9,87+u",CS:"18,2+1,b,2u,12k,55v,l,17v0,2,3,53,2+1,b",B:"a,3,f+2,2v,690",S:"9,2,k",WS:"c,k,4f4,1vk+a,u,1j,335",ON:"x+1,4+4,h+5,r+5,r+3,z,5+3,2+1,2+1,5,2+2,3+4,o,w,ci+1,8+d,3+d,6+8,2+g,39+1,9,6+1,2,33,b8,3+1,3c+1,7+1,5r,b,7h+3,sa+5,2,3i+6,jg+3,ur+9,2v,ij+1,9g+9,7+a,8m,4+1,49+x,14u,2+2,c+2,e+2,e+2,e+1,i+n,e+e,2+p,u+2,e+2,36+1,2+3,2+1,b,2+2,6+5,2,2,2,h+1,5+4,6+3,3+f,16+2,5+3l,3+81,1y+p,2+40,q+a,m+13,2r+ch,2+9e,75+hf,3+v,2+2w,6e+5,f+6,75+2a,1a+p,2+2g,d+5x,r+b,6+3,4+o,g,6+1,6+2,2k+1,4,2j,5h+z,1m+1,1e+f,t+2,1f+e,d+3,4o+3,2s+1,w,535+1r,h3l+1i,93+2,2s,b+1,3l+x,2v,4g+3,21+3,kz+1,g5v+1,5a,j+9,n+v,2,3,2+8,2+1,3+2,2,3,46+1,4+4,h+5,r+5,r+a,3h+2,4+6,b+4,78,1r+24,4+c,4,1hb,ey+6,103+j,16j+c,1ux+7,5+g,fsh,jdq+1t,4,57+2e,p1,1m,1m,1m,1m,4kt+1,7j+17,5+2r,d+e,3+e,2+e,2+10,m+4,w,1n+5,1q,4z+5,4b+rb,9+c,4+c,4+37,d+2g,8+b,l+b,5+1j,9+9,7+13,9+t,3+1,27+3c,2+29,2+3q,d+d,3+4,4+2,6+6,a+o,8+6,a+2,e+6,16+42,2+1i",BN:"0+8,6+d,2s+5,2+p,e,4m9,1kt+2,2b+5,5+5,17q9+v,7k,6p+8,6+1,119d+3,440+7,96s+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+1,1ekf+75,6p+2rz,1ben+1,1ekf+1,1ekf+1",NSM:"lc+33,7o+6,7c+18,2,2+1,2+1,2,21+a,1d+k,h,2u+6,3+5,3+1,2+3,10,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,g+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+g,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,k1+w,2db+2,3y,2p+v,ff+3,30+1,n9x+3,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,r2,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+5,3+1,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2d+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,f0c+4,1o+6,t5,1s+3,2a,f5l+1,43t+2,i+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,gzhy+6n",AL:"16w,3,2,e+1b,z+2,2+2s,g+1,8+1,b+m,2+t,s+2i,c+e,4h+f,1d+1e,1bwe+dp,3+3z,x+c,2+1,35+3y,2rm+z,5+7,b+5,dt+l,c+u,17nl+27,1t+27,4x+6n,3+d",LRO:"6ct",RLO:"6cu",LRE:"6cq",RLE:"6cr",PDF:"6cs",LRI:"6ee",RLI:"6ef",FSI:"6eg",PDI:"6eh"},i={},r={};i.L=1,r[1]="L",Object.keys(t).forEach(function(Le,Xe){i[Le]=1<<Xe+1,r[i[Le]]=Le}),Object.freeze(i);var s=i.LRI|i.RLI|i.FSI,a=i.L|i.R|i.AL,l=i.B|i.S|i.WS|i.ON|i.FSI|i.LRI|i.RLI|i.PDI,c=i.BN|i.RLE|i.LRE|i.RLO|i.LRO|i.PDF,f=i.S|i.WS|i.B|s|i.PDI|c,p=null;function g(){if(!p){p=new Map;var Le=function(Ze){if(t.hasOwnProperty(Ze)){var Ae=0;t[Ze].split(",").forEach(function(ht){var X=ht.split("+"),H=X[0],ce=X[1];H=parseInt(H,36),ce=ce?parseInt(ce,36):0,p.set(Ae+=H,i[Ze]);for(var qe=0;qe<ce;qe++)p.set(++Ae,i[Ze])})}};for(var Xe in t)Le(Xe)}}function v(Le){return g(),p.get(Le.codePointAt(0))||i.L}function y(Le){return r[v(Le)]}var S={pairs:"14>1,1e>2,u>2,2wt>1,1>1,1ge>1,1wp>1,1j>1,f>1,hm>1,1>1,u>1,u6>1,1>1,+5,28>1,w>1,1>1,+3,b8>1,1>1,+3,1>3,-1>-1,3>1,1>1,+2,1s>1,1>1,x>1,th>1,1>1,+2,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,4q>1,1e>2,u>2,2>1,+1",canonical:"6f1>-6dx,6dy>-6dx,6ec>-6ed,6ee>-6ed,6ww>2jj,-2ji>2jj,14r4>-1e7l,1e7m>-1e7l,1e7m>-1e5c,1e5d>-1e5b,1e5c>-14qx,14qy>-14qx,14vn>-1ecg,1ech>-1ecg,1edu>-1ecg,1eci>-1ecg,1eda>-1ecg,1eci>-1ecg,1eci>-168q,168r>-168q,168s>-14ye,14yf>-14ye"};function T(Le,Xe){var Ze=36,Ae=0,ht=new Map,X=Xe&&new Map,H;return Le.split(",").forEach(function ce(qe){if(qe.indexOf("+")!==-1)for(var be=+qe;be--;)ce(H);else{H=qe;var Ne=qe.split(">"),Ke=Ne[0],We=Ne[1];Ke=String.fromCodePoint(Ae+=parseInt(Ke,Ze)),We=String.fromCodePoint(Ae+=parseInt(We,Ze)),ht.set(Ke,We),Xe&&X.set(We,Ke)}}),{map:ht,reverseMap:X}}var w,M,A;function b(){if(!w){var Le=T(S.pairs,!0),Xe=Le.map,Ze=Le.reverseMap;w=Xe,M=Ze,A=T(S.canonical,!1).map}}function R(Le){return b(),w.get(Le)||null}function I(Le){return b(),M.get(Le)||null}function k(Le){return b(),A.get(Le)||null}var F=i.L,z=i.R,U=i.EN,O=i.ES,$=i.ET,Y=i.AN,q=i.CS,J=i.B,ae=i.S,oe=i.ON,ue=i.BN,V=i.NSM,j=i.AL,W=i.LRO,L=i.RLO,B=i.LRE,te=i.RLE,ie=i.PDF,re=i.LRI,de=i.RLI,he=i.FSI,ve=i.PDI;function Ve(Le,Xe){for(var Ze=125,Ae=new Uint32Array(Le.length),ht=0;ht<Le.length;ht++)Ae[ht]=v(Le[ht]);var X=new Map;function H(di,wi){var si=Ae[di];Ae[di]=wi,X.set(si,X.get(si)-1),si&l&&X.set(l,X.get(l)-1),X.set(wi,(X.get(wi)||0)+1),wi&l&&X.set(l,(X.get(l)||0)+1)}for(var ce=new Uint8Array(Le.length),qe=new Map,be=[],Ne=null,Ke=0;Ke<Le.length;Ke++)Ne||be.push(Ne={start:Ke,end:Le.length-1,level:Xe==="rtl"?1:Xe==="ltr"?0:Li(Ke,!1)}),Ae[Ke]&J&&(Ne.end=Ke,Ne=null);for(var We=te|B|L|W|s|ve|ie|J,xe=function(di){return di+(di&1?1:2)},ct=function(di){return di+(di&1?2:1)},nt=0;nt<be.length;nt++){Ne=be[nt];var tt=[{_level:Ne.level,_override:0,_isolate:0}],Ye=void 0,st=0,_t=0,Wt=0;X.clear();for(var le=Ne.start;le<=Ne.end;le++){var je=Ae[le];if(Ye=tt[tt.length-1],X.set(je,(X.get(je)||0)+1),je&l&&X.set(l,(X.get(l)||0)+1),je&We)if(je&(te|B)){ce[le]=Ye._level;var Se=(je===te?ct:xe)(Ye._level);Se<=Ze&&!st&&!_t?tt.push({_level:Se,_override:0,_isolate:0}):st||_t++}else if(je&(L|W)){ce[le]=Ye._level;var at=(je===L?ct:xe)(Ye._level);at<=Ze&&!st&&!_t?tt.push({_level:at,_override:je&L?z:F,_isolate:0}):st||_t++}else if(je&s){je&he&&(je=Li(le+1,!0)===1?de:re),ce[le]=Ye._level,Ye._override&&H(le,Ye._override);var Qe=(je===de?ct:xe)(Ye._level);Qe<=Ze&&st===0&&_t===0?(Wt++,tt.push({_level:Qe,_override:0,_isolate:1,_isolInitIndex:le})):st++}else if(je&ve){if(st>0)st--;else if(Wt>0){for(_t=0;!tt[tt.length-1]._isolate;)tt.pop();var mt=tt[tt.length-1]._isolInitIndex;mt!=null&&(qe.set(mt,le),qe.set(le,mt)),tt.pop(),Wt--}Ye=tt[tt.length-1],ce[le]=Ye._level,Ye._override&&H(le,Ye._override)}else je&ie?(st===0&&(_t>0?_t--:!Ye._isolate&&tt.length>1&&(tt.pop(),Ye=tt[tt.length-1])),ce[le]=Ye._level):je&J&&(ce[le]=Ne.level);else ce[le]=Ye._level,Ye._override&&je!==ue&&H(le,Ye._override)}for(var Gt=[],Vt=null,Lt=Ne.start;Lt<=Ne.end;Lt++){var Dt=Ae[Lt];if(!(Dt&c)){var wn=ce[Lt],ln=Dt&s,Un=Dt===ve;Vt&&wn===Vt._level?(Vt._end=Lt,Vt._endsWithIsolInit=ln):Gt.push(Vt={_start:Lt,_end:Lt,_level:wn,_startsWithPDI:Un,_endsWithIsolInit:ln})}}for(var hi=[],Fr=0;Fr<Gt.length;Fr++){var Jn=Gt[Fr];if(!Jn._startsWithPDI||Jn._startsWithPDI&&!qe.has(Jn._start)){for(var tr=[Vt=Jn],ri=void 0;Vt&&Vt._endsWithIsolInit&&(ri=qe.get(Vt._end))!=null;)for(var nr=Fr+1;nr<Gt.length;nr++)if(Gt[nr]._start===ri){tr.push(Vt=Gt[nr]);break}for(var Si=[],_s=0;_s<tr.length;_s++)for(var hl=tr[_s],ee=hl._start;ee<=hl._end;ee++)Si.push(ee);for(var Ce=ce[Si[0]],ze=Ne.level,Me=Si[0]-1;Me>=0;Me--)if(!(Ae[Me]&c)){ze=ce[Me];break}var Be=Si[Si.length-1],xt=ce[Be],Pt=Ne.level;if(!(Ae[Be]&s)){for(var It=Be+1;It<=Ne.end;It++)if(!(Ae[It]&c)){Pt=ce[It];break}}hi.push({_seqIndices:Si,_sosType:Math.max(ze,Ce)%2?z:F,_eosType:Math.max(Pt,xt)%2?z:F})}}for(var Ot=0;Ot<hi.length;Ot++){var Kt=hi[Ot],Ge=Kt._seqIndices,Ft=Kt._sosType,Tn=Kt._eosType,pn=ce[Ge[0]]&1?z:F;if(X.get(V))for(var $n=0;$n<Ge.length;$n++){var ir=Ge[$n];if(Ae[ir]&V){for(var gn=Ft,Ut=$n-1;Ut>=0;Ut--)if(!(Ae[Ge[Ut]]&c)){gn=Ae[Ge[Ut]];break}H(ir,gn&(s|ve)?oe:gn)}}if(X.get(U))for(var Qt=0;Qt<Ge.length;Qt++){var Bt=Ge[Qt];if(Ae[Bt]&U)for(var yn=Qt-1;yn>=-1;yn--){var ei=yn===-1?Ft:Ae[Ge[yn]];if(ei&a){ei===j&&H(Bt,Y);break}}}if(X.get(j))for(var Hn=0;Hn<Ge.length;Hn++){var Er=Ge[Hn];Ae[Er]&j&&H(Er,z)}if(X.get(O)||X.get(q))for(var xn=1;xn<Ge.length-1;xn++){var An=Ge[xn];if(Ae[An]&(O|q)){for(var _i=0,Xn=0,Bs=xn-1;Bs>=0&&(_i=Ae[Ge[Bs]],!!(_i&c));Bs--);for(var zs=xn+1;zs<Ge.length&&(Xn=Ae[Ge[zs]],!!(Xn&c));zs++);_i===Xn&&(Ae[An]===O?_i===U:_i&(U|Y))&&H(An,_i)}}if(X.get(U))for(var Ci=0;Ci<Ge.length;Ci++){var br=Ge[Ci];if(Ae[br]&U){for(var ja=Ci-1;ja>=0&&Ae[Ge[ja]]&($|c);ja--)H(Ge[ja],U);for(Ci++;Ci<Ge.length&&Ae[Ge[Ci]]&($|c|U);Ci++)Ae[Ge[Ci]]!==U&&H(Ge[Ci],U)}}if(X.get($)||X.get(O)||X.get(q))for(var Ms=0;Ms<Ge.length;Ms++){var bc=Ge[Ms];if(Ae[bc]&($|O|q)){H(bc,oe);for(var ws=Ms-1;ws>=0&&Ae[Ge[ws]]&c;ws--)H(Ge[ws],oe);for(var un=Ms+1;un<Ge.length&&Ae[Ge[un]]&c;un++)H(Ge[un],oe)}}if(X.get(U))for(var Hs=0,Xa=Ft;Hs<Ge.length;Hs++){var dl=Ge[Hs],pl=Ae[dl];pl&U?Xa===F&&H(dl,F):pl&a&&(Xa=pl)}if(X.get(l)){var Gs=z|U|Y,So=Gs|F,ns=[];{for(var Ts=[],zi=0;zi<Ge.length;zi++)if(Ae[Ge[zi]]&l){var jt=Le[Ge[zi]],is=void 0;if(R(jt)!==null)if(Ts.length<63)Ts.push({char:jt,seqIndex:zi});else break;else if((is=I(jt))!==null)for(var kr=Ts.length-1;kr>=0;kr--){var Vs=Ts[kr].char;if(Vs===is||Vs===I(k(jt))||R(k(Vs))===jt){ns.push([Ts[kr].seqIndex,zi]),Ts.length=kr;break}}}ns.sort(function(di,wi){return di[0]-wi[0]})}for(var rs=0;rs<ns.length;rs++){for(var Ac=ns[rs],Gn=Ac[0],Es=Ac[1],Cc=!1,rr=0,Ya=Gn+1;Ya<Es;Ya++){var qa=Ge[Ya];if(Ae[qa]&So){Cc=!0;var Or=Ae[qa]&Gs?z:F;if(Or===pn){rr=Or;break}}}if(Cc&&!rr){rr=Ft;for(var oa=Gn-1;oa>=0;oa--){var Za=Ge[oa];if(Ae[Za]&So){var Ri=Ae[Za]&Gs?z:F;Ri!==pn?rr=Ri:rr=pn;break}}}if(rr){if(Ae[Ge[Gn]]=Ae[Ge[Es]]=rr,rr!==pn){for(var Pi=Gn+1;Pi<Ge.length;Pi++)if(!(Ae[Ge[Pi]]&c)){v(Le[Ge[Pi]])&V&&(Ae[Ge[Pi]]=rr);break}}if(rr!==pn){for(var Ws=Es+1;Ws<Ge.length;Ws++)if(!(Ae[Ge[Ws]]&c)){v(Le[Ge[Ws]])&V&&(Ae[Ge[Ws]]=rr);break}}}}for(var ss=0;ss<Ge.length;ss++)if(Ae[Ge[ss]]&l){for(var _o=ss,Ka=ss,sr=Ft,Qa=ss-1;Qa>=0;Qa--)if(Ae[Ge[Qa]]&c)_o=Qa;else{sr=Ae[Ge[Qa]]&Gs?z:F;break}for(var Ar=Tn,la=ss+1;la<Ge.length;la++)if(Ae[Ge[la]]&(l|c))Ka=la;else{Ar=Ae[Ge[la]]&Gs?z:F;break}for(var Di=_o;Di<=Ka;Di++)Ae[Ge[Di]]=sr===Ar?sr:pn;ss=Ka}}}for(var Mi=Ne.start;Mi<=Ne.end;Mi++){var ua=ce[Mi],Cr=Ae[Mi];if(ua&1?Cr&(F|U|Y)&&ce[Mi]++:Cr&z?ce[Mi]++:Cr&(Y|U)&&(ce[Mi]+=2),Cr&c&&(ce[Mi]=Mi===0?Ne.level:ce[Mi-1]),Mi===Ne.end||v(Le[Mi])&(ae|J))for(var ca=Mi;ca>=0&&v(Le[ca])&f;ca--)ce[ca]=Ne.level}}return{levels:ce,paragraphs:be};function Li(di,wi){for(var si=di;si<Le.length;si++){var Yn=Ae[si];if(Yn&(z|j))return 1;if(Yn&(J|F)||wi&&Yn===ve)return 0;if(Yn&s){var dr=fa(si);si=dr===-1?Le.length:dr}}return 0}function fa(di){for(var wi=1,si=di+1;si<Le.length;si++){var Yn=Ae[si];if(Yn&J)break;if(Yn&ve){if(--wi===0)return si}else Yn&s&&wi++}return-1}}var rt="14>1,j>2,t>2,u>2,1a>g,2v3>1,1>1,1ge>1,1wd>1,b>1,1j>1,f>1,ai>3,-2>3,+1,8>1k0,-1jq>1y7,-1y6>1hf,-1he>1h6,-1h5>1ha,-1h8>1qi,-1pu>1,6>3u,-3s>7,6>1,1>1,f>1,1>1,+2,3>1,1>1,+13,4>1,1>1,6>1eo,-1ee>1,3>1mg,-1me>1mk,-1mj>1mi,-1mg>1mi,-1md>1,1>1,+2,1>10k,-103>1,1>1,4>1,5>1,1>1,+10,3>1,1>8,-7>8,+1,-6>7,+1,a>1,1>1,u>1,u6>1,1>1,+5,26>1,1>1,2>1,2>2,8>1,7>1,4>1,1>1,+5,b8>1,1>1,+3,1>3,-2>1,2>1,1>1,+2,c>1,3>1,1>1,+2,h>1,3>1,a>1,1>1,2>1,3>1,1>1,d>1,f>1,3>1,1a>1,1>1,6>1,7>1,13>1,k>1,1>1,+19,4>1,1>1,+2,2>1,1>1,+18,m>1,a>1,1>1,lk>1,1>1,4>1,2>1,f>1,3>1,1>1,+3,db>1,1>1,+3,3>1,1>1,+2,14qm>1,1>1,+1,6>1,4j>1,j>2,t>2,u>2,2>1,+1",Ue;function Z(){if(!Ue){var Le=T(rt,!0),Xe=Le.map,Ze=Le.reverseMap;Ze.forEach(function(Ae,ht){Xe.set(ht,Ae)}),Ue=Xe}}function Fe(Le){return Z(),Ue.get(Le)||null}function we(Le,Xe,Ze,Ae){var ht=Le.length;Ze=Math.max(0,Ze==null?0:+Ze),Ae=Math.min(ht-1,Ae==null?ht-1:+Ae);for(var X=new Map,H=Ze;H<=Ae;H++)if(Xe[H]&1){var ce=Fe(Le[H]);ce!==null&&X.set(H,ce)}return X}function ke(Le,Xe,Ze,Ae){var ht=Le.length;Ze=Math.max(0,Ze==null?0:+Ze),Ae=Math.min(ht-1,Ae==null?ht-1:+Ae);var X=[];return Xe.paragraphs.forEach(function(H){var ce=Math.max(Ze,H.start),qe=Math.min(Ae,H.end);if(ce<qe){for(var be=Xe.levels.slice(ce,qe+1),Ne=qe;Ne>=ce&&v(Le[Ne])&f;Ne--)be[Ne]=H.level;for(var Ke=H.level,We=1/0,xe=0;xe<be.length;xe++){var ct=be[xe];ct>Ke&&(Ke=ct),ct<We&&(We=ct|1)}for(var nt=Ke;nt>=We;nt--)for(var tt=0;tt<be.length;tt++)if(be[tt]>=nt){for(var Ye=tt;tt+1<be.length&&be[tt+1]>=nt;)tt++;tt>Ye&&X.push([Ye+ce,tt+ce])}}}),X}function Pe(Le,Xe,Ze,Ae){var ht=et(Le,Xe,Ze,Ae),X=[].concat(Le);return ht.forEach(function(H,ce){X[ce]=(Xe.levels[H]&1?Fe(Le[H]):null)||Le[H]}),X.join("")}function et(Le,Xe,Ze,Ae){for(var ht=ke(Le,Xe,Ze,Ae),X=[],H=0;H<Le.length;H++)X[H]=H;return ht.forEach(function(ce){for(var qe=ce[0],be=ce[1],Ne=X.slice(qe,be+1),Ke=Ne.length;Ke--;)X[be-Ke]=Ne[Ke]}),X}return e.closingToOpeningBracket=I,e.getBidiCharType=v,e.getBidiCharTypeName=y,e.getCanonicalBracket=k,e.getEmbeddingLevels=Ve,e.getMirroredCharacter=Fe,e.getMirroredCharactersMap=we,e.getReorderSegments=ke,e.getReorderedIndices=et,e.getReorderedString=Pe,e.openingToClosingBracket=R,Object.defineProperty(e,"__esModule",{value:!0}),e}({});return n}const tb=/\bvoid\s+main\s*\(\s*\)\s*{/g;function wx(n){const e=/^[ \t]*#include +<([\w\d./]+)>/gm;function t(i,r){let s=Nt[r];return s?wx(s):i}return n.replace(e,t)}const _r=[];for(let n=0;n<256;n++)_r[n]=(n<16?"0":"")+n.toString(16);function uO(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(_r[n&255]+_r[n>>8&255]+_r[n>>16&255]+_r[n>>24&255]+"-"+_r[e&255]+_r[e>>8&255]+"-"+_r[e>>16&15|64]+_r[e>>24&255]+"-"+_r[t&63|128]+_r[t>>8&255]+"-"+_r[t>>16&255]+_r[t>>24&255]+_r[i&255]+_r[i>>8&255]+_r[i>>16&255]+_r[i>>24&255]).toUpperCase()}const Qu=Object.assign||function(){let n=arguments[0];for(let e=1,t=arguments.length;e<t;e++){let i=arguments[e];if(i)for(let r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])}return n},cO=Date.now(),$M=new WeakMap,ew=new Map;let fO=1e10;function Tx(n,e){const t=mO(e);let i=$M.get(n);if(i||$M.set(n,i=Object.create(null)),i[t])return new i[t];const r=`_onBeforeCompile${t}`,s=function(f,p){n.onBeforeCompile.call(this,f,p);const g=this.customProgramCacheKey()+"|"+f.vertexShader+"|"+f.fragmentShader;let v=ew[g];if(!v){const y=hO(this,f,e,t);v=ew[g]=y}f.vertexShader=v.vertexShader,f.fragmentShader=v.fragmentShader,Qu(f.uniforms,this.uniforms),e.timeUniform&&(f.uniforms[e.timeUniform]={get value(){return Date.now()-cO}}),this[r]&&this[r](f)},a=function(){return l(e.chained?n:n.clone())},l=function(f){const p=Object.create(f,c);return Object.defineProperty(p,"baseMaterial",{value:n}),Object.defineProperty(p,"id",{value:fO++}),p.uuid=uO(),p.uniforms=Qu({},f.uniforms,e.uniforms),p.defines=Qu({},f.defines,e.defines),p.defines[`TROIKA_DERIVED_MATERIAL_${t}`]="",p.extensions=Qu({},f.extensions,e.extensions),p._listeners=void 0,p},c={constructor:{value:a},isDerivedMaterial:{value:!0},type:{get:()=>n.type,set:f=>{n.type=f}},isDerivedFrom:{writable:!0,configurable:!0,value:function(f){const p=this.baseMaterial;return f===p||p.isDerivedMaterial&&p.isDerivedFrom(f)||!1}},customProgramCacheKey:{writable:!0,configurable:!0,value:function(){return n.customProgramCacheKey()+"|"+t}},onBeforeCompile:{get(){return s},set(f){this[r]=f}},copy:{writable:!0,configurable:!0,value:function(f){return n.copy.call(this,f),!n.isShaderMaterial&&!n.isDerivedMaterial&&(Qu(this.extensions,f.extensions),Qu(this.defines,f.defines),Qu(this.uniforms,l1.clone(f.uniforms))),this}},clone:{writable:!0,configurable:!0,value:function(){const f=new n.constructor;return l(f).copy(this)}},getDepthMaterial:{writable:!0,configurable:!0,value:function(){let f=this._depthMaterial;return f||(f=this._depthMaterial=Tx(n.isDerivedMaterial?n.getDepthMaterial():new Dp({depthPacking:ia}),e),f.defines.IS_DEPTH_MATERIAL="",f.uniforms=this.uniforms),f}},getDistanceMaterial:{writable:!0,configurable:!0,value:function(){let f=this._distanceMaterial;return f||(f=this._distanceMaterial=Tx(n.isDerivedMaterial?n.getDistanceMaterial():new xv,e),f.defines.IS_DISTANCE_MATERIAL="",f.uniforms=this.uniforms),f}},dispose:{writable:!0,configurable:!0,value(){const{_depthMaterial:f,_distanceMaterial:p}=this;f&&f.dispose(),p&&p.dispose(),n.dispose.call(this)}}};return i[t]=a,new a}function hO(n,{vertexShader:e,fragmentShader:t},i,r){let{vertexDefs:s,vertexMainIntro:a,vertexMainOutro:l,vertexTransform:c,fragmentDefs:f,fragmentMainIntro:p,fragmentMainOutro:g,fragmentColorTransform:v,customRewriter:y,timeUniform:S}=i;if(s=s||"",a=a||"",l=l||"",f=f||"",p=p||"",g=g||"",(c||y)&&(e=wx(e)),(v||y)&&(t=t.replace(/^[ \t]*#include <((?:tonemapping|encodings|colorspace|fog|premultiplied_alpha|dithering)_fragment)>/gm,`
//!BEGIN_POST_CHUNK $1
$&
//!END_POST_CHUNK
`),t=wx(t)),y){let T=y({vertexShader:e,fragmentShader:t});e=T.vertexShader,t=T.fragmentShader}if(v){let T=[];t=t.replace(/^\/\/!BEGIN_POST_CHUNK[^]+?^\/\/!END_POST_CHUNK/gm,w=>(T.push(w),"")),g=`${v}
${T.join(`
`)}
${g}`}if(S){const T=`
uniform float ${S};
`;s=T+s,f=T+f}return c&&(e=`vec3 troika_position_${r};
vec3 troika_normal_${r};
vec2 troika_uv_${r};
${e}
`,s=`${s}
void troikaVertexTransform${r}(inout vec3 position, inout vec3 normal, inout vec2 uv) {
  ${c}
}
`,a=`
troika_position_${r} = vec3(position);
troika_normal_${r} = vec3(normal);
troika_uv_${r} = vec2(uv);
troikaVertexTransform${r}(troika_position_${r}, troika_normal_${r}, troika_uv_${r});
${a}
`,e=e.replace(/\b(position|normal|uv)\b/g,(T,w,M,A)=>/\battribute\s+vec[23]\s+$/.test(A.substr(0,M))?w:`troika_${w}_${r}`),n.map&&n.map.channel>0||(e=e.replace(/\bMAP_UV\b/g,`troika_uv_${r}`))),e=tw(e,r,s,a,l),t=tw(t,r,f,p,g),{vertexShader:e,fragmentShader:t}}function tw(n,e,t,i,r){return(i||r||t)&&(n=n.replace(tb,`
${t}
void troikaOrigMain${e}() {`),n+=`
void main() {
  ${i}
  troikaOrigMain${e}();
  ${r}
}`),n}function dO(n,e){return n==="uniforms"?void 0:typeof e=="function"?e.toString():e}let pO=0;const nw=new Map;function mO(n){const e=JSON.stringify(n,dO);let t=nw.get(e);return t==null&&nw.set(e,t=++pO),t}/*!
Custom build of Typr.ts (https://github.com/fredli74/Typr.ts) for use in Troika text rendering.
Original MIT license applies: https://github.com/fredli74/Typr.ts/blob/master/LICENSE
*/function gO(){return typeof window>"u"&&(self.window=self),function(n){var e={parse:function(r){var s=e._bin,a=new Uint8Array(r);if(s.readASCII(a,0,4)=="ttcf"){var l=4;s.readUshort(a,l),l+=2,s.readUshort(a,l),l+=2;var c=s.readUint(a,l);l+=4;for(var f=[],p=0;p<c;p++){var g=s.readUint(a,l);l+=4,f.push(e._readFont(a,g))}return f}return[e._readFont(a,0)]},_readFont:function(r,s){var a=e._bin,l=s;a.readFixed(r,s),s+=4;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2;for(var f=["cmap","head","hhea","maxp","hmtx","name","OS/2","post","loca","glyf","kern","CFF ","GDEF","GPOS","GSUB","SVG "],p={_data:r,_offset:l},g={},v=0;v<c;v++){var y=a.readASCII(r,s,4);s+=4,a.readUint(r,s),s+=4;var S=a.readUint(r,s);s+=4;var T=a.readUint(r,s);s+=4,g[y]={offset:S,length:T}}for(v=0;v<f.length;v++){var w=f[v];g[w]&&(p[w.trim()]=e[w.trim()].parse(r,g[w].offset,g[w].length,p))}return p},_tabOffset:function(r,s,a){for(var l=e._bin,c=l.readUshort(r,a+4),f=a+12,p=0;p<c;p++){var g=l.readASCII(r,f,4);f+=4,l.readUint(r,f),f+=4;var v=l.readUint(r,f);if(f+=4,l.readUint(r,f),f+=4,g==s)return v}return 0}};e._bin={readFixed:function(r,s){return(r[s]<<8|r[s+1])+(r[s+2]<<8|r[s+3])/65540},readF2dot14:function(r,s){return e._bin.readShort(r,s)/16384},readInt:function(r,s){return e._bin._view(r).getInt32(s)},readInt8:function(r,s){return e._bin._view(r).getInt8(s)},readShort:function(r,s){return e._bin._view(r).getInt16(s)},readUshort:function(r,s){return e._bin._view(r).getUint16(s)},readUshorts:function(r,s,a){for(var l=[],c=0;c<a;c++)l.push(e._bin.readUshort(r,s+2*c));return l},readUint:function(r,s){return e._bin._view(r).getUint32(s)},readUint64:function(r,s){return 4294967296*e._bin.readUint(r,s)+e._bin.readUint(r,s+4)},readASCII:function(r,s,a){for(var l="",c=0;c<a;c++)l+=String.fromCharCode(r[s+c]);return l},readUnicode:function(r,s,a){for(var l="",c=0;c<a;c++){var f=r[s++]<<8|r[s++];l+=String.fromCharCode(f)}return l},_tdec:typeof window<"u"&&window.TextDecoder?new window.TextDecoder:null,readUTF8:function(r,s,a){var l=e._bin._tdec;return l&&s==0&&a==r.length?l.decode(r):e._bin.readASCII(r,s,a)},readBytes:function(r,s,a){for(var l=[],c=0;c<a;c++)l.push(r[s+c]);return l},readASCIIArray:function(r,s,a){for(var l=[],c=0;c<a;c++)l.push(String.fromCharCode(r[s+c]));return l},_view:function(r){return r._dataView||(r._dataView=r.buffer?new DataView(r.buffer,r.byteOffset,r.byteLength):new DataView(new Uint8Array(r).buffer))}},e._lctf={},e._lctf.parse=function(r,s,a,l,c){var f=e._bin,p={},g=s;f.readFixed(r,s),s+=4;var v=f.readUshort(r,s);s+=2;var y=f.readUshort(r,s);s+=2;var S=f.readUshort(r,s);return s+=2,p.scriptList=e._lctf.readScriptList(r,g+v),p.featureList=e._lctf.readFeatureList(r,g+y),p.lookupList=e._lctf.readLookupList(r,g+S,c),p},e._lctf.readLookupList=function(r,s,a){var l=e._bin,c=s,f=[],p=l.readUshort(r,s);s+=2;for(var g=0;g<p;g++){var v=l.readUshort(r,s);s+=2;var y=e._lctf.readLookupTable(r,c+v,a);f.push(y)}return f},e._lctf.readLookupTable=function(r,s,a){var l=e._bin,c=s,f={tabs:[]};f.ltype=l.readUshort(r,s),s+=2,f.flag=l.readUshort(r,s),s+=2;var p=l.readUshort(r,s);s+=2;for(var g=f.ltype,v=0;v<p;v++){var y=l.readUshort(r,s);s+=2;var S=a(r,g,c+y,f);f.tabs.push(S)}return f},e._lctf.numOfOnes=function(r){for(var s=0,a=0;a<32;a++)r>>>a&1&&s++;return s},e._lctf.readClassDef=function(r,s){var a=e._bin,l=[],c=a.readUshort(r,s);if(s+=2,c==1){var f=a.readUshort(r,s);s+=2;var p=a.readUshort(r,s);s+=2;for(var g=0;g<p;g++)l.push(f+g),l.push(f+g),l.push(a.readUshort(r,s)),s+=2}if(c==2){var v=a.readUshort(r,s);for(s+=2,g=0;g<v;g++)l.push(a.readUshort(r,s)),s+=2,l.push(a.readUshort(r,s)),s+=2,l.push(a.readUshort(r,s)),s+=2}return l},e._lctf.getInterval=function(r,s){for(var a=0;a<r.length;a+=3){var l=r[a],c=r[a+1];if(r[a+2],l<=s&&s<=c)return a}return-1},e._lctf.readCoverage=function(r,s){var a=e._bin,l={};l.fmt=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);return s+=2,l.fmt==1&&(l.tab=a.readUshorts(r,s,c)),l.fmt==2&&(l.tab=a.readUshorts(r,s,3*c)),l},e._lctf.coverageIndex=function(r,s){var a=r.tab;if(r.fmt==1)return a.indexOf(s);if(r.fmt==2){var l=e._lctf.getInterval(a,s);if(l!=-1)return a[l+2]+(s-a[l])}return-1},e._lctf.readFeatureList=function(r,s){var a=e._bin,l=s,c=[],f=a.readUshort(r,s);s+=2;for(var p=0;p<f;p++){var g=a.readASCII(r,s,4);s+=4;var v=a.readUshort(r,s);s+=2;var y=e._lctf.readFeatureTable(r,l+v);y.tag=g.trim(),c.push(y)}return c},e._lctf.readFeatureTable=function(r,s){var a=e._bin,l=s,c={},f=a.readUshort(r,s);s+=2,f>0&&(c.featureParams=l+f);var p=a.readUshort(r,s);s+=2,c.tab=[];for(var g=0;g<p;g++)c.tab.push(a.readUshort(r,s+2*g));return c},e._lctf.readScriptList=function(r,s){var a=e._bin,l=s,c={},f=a.readUshort(r,s);s+=2;for(var p=0;p<f;p++){var g=a.readASCII(r,s,4);s+=4;var v=a.readUshort(r,s);s+=2,c[g.trim()]=e._lctf.readScriptTable(r,l+v)}return c},e._lctf.readScriptTable=function(r,s){var a=e._bin,l=s,c={},f=a.readUshort(r,s);s+=2,f>0&&(c.default=e._lctf.readLangSysTable(r,l+f));var p=a.readUshort(r,s);s+=2;for(var g=0;g<p;g++){var v=a.readASCII(r,s,4);s+=4;var y=a.readUshort(r,s);s+=2,c[v.trim()]=e._lctf.readLangSysTable(r,l+y)}return c},e._lctf.readLangSysTable=function(r,s){var a=e._bin,l={};a.readUshort(r,s),s+=2,l.reqFeature=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);return s+=2,l.features=a.readUshorts(r,s,c),l},e.CFF={},e.CFF.parse=function(r,s,a){var l=e._bin;(r=new Uint8Array(r.buffer,s,a))[s=0],r[++s],r[++s],r[++s],s++;var c=[];s=e.CFF.readIndex(r,s,c);for(var f=[],p=0;p<c.length-1;p++)f.push(l.readASCII(r,s+c[p],c[p+1]-c[p]));s+=c[c.length-1];var g=[];s=e.CFF.readIndex(r,s,g);var v=[];for(p=0;p<g.length-1;p++)v.push(e.CFF.readDict(r,s+g[p],s+g[p+1]));s+=g[g.length-1];var y=v[0],S=[];s=e.CFF.readIndex(r,s,S);var T=[];for(p=0;p<S.length-1;p++)T.push(l.readASCII(r,s+S[p],S[p+1]-S[p]));if(s+=S[S.length-1],e.CFF.readSubrs(r,s,y),y.CharStrings){s=y.CharStrings,S=[],s=e.CFF.readIndex(r,s,S);var w=[];for(p=0;p<S.length-1;p++)w.push(l.readBytes(r,s+S[p],S[p+1]-S[p]));y.CharStrings=w}if(y.ROS){s=y.FDArray;var M=[];for(s=e.CFF.readIndex(r,s,M),y.FDArray=[],p=0;p<M.length-1;p++){var A=e.CFF.readDict(r,s+M[p],s+M[p+1]);e.CFF._readFDict(r,A,T),y.FDArray.push(A)}s+=M[M.length-1],s=y.FDSelect,y.FDSelect=[];var b=r[s];if(s++,b!=3)throw b;var R=l.readUshort(r,s);for(s+=2,p=0;p<R+1;p++)y.FDSelect.push(l.readUshort(r,s),r[s+2]),s+=3}return y.Encoding&&(y.Encoding=e.CFF.readEncoding(r,y.Encoding,y.CharStrings.length)),y.charset&&(y.charset=e.CFF.readCharset(r,y.charset,y.CharStrings.length)),e.CFF._readFDict(r,y,T),y},e.CFF._readFDict=function(r,s,a){var l;for(var c in s.Private&&(l=s.Private[1],s.Private=e.CFF.readDict(r,l,l+s.Private[0]),s.Private.Subrs&&e.CFF.readSubrs(r,l+s.Private.Subrs,s.Private)),s)["FamilyName","FontName","FullName","Notice","version","Copyright"].indexOf(c)!=-1&&(s[c]=a[s[c]-426+35])},e.CFF.readSubrs=function(r,s,a){var l=e._bin,c=[];s=e.CFF.readIndex(r,s,c);var f,p=c.length;f=p<1240?107:p<33900?1131:32768,a.Bias=f,a.Subrs=[];for(var g=0;g<c.length-1;g++)a.Subrs.push(l.readBytes(r,s+c[g],c[g+1]-c[g]))},e.CFF.tableSE=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,0,111,112,113,114,0,115,116,117,118,119,120,121,122,0,123,0,124,125,126,127,128,129,130,131,0,132,133,0,134,135,136,137,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,138,0,139,0,0,0,0,140,141,142,143,0,0,0,0,0,144,0,0,0,145,0,0,146,147,148,149,0,0,0,0],e.CFF.glyphByUnicode=function(r,s){for(var a=0;a<r.charset.length;a++)if(r.charset[a]==s)return a;return-1},e.CFF.glyphBySE=function(r,s){return s<0||s>255?-1:e.CFF.glyphByUnicode(r,e.CFF.tableSE[s])},e.CFF.readEncoding=function(r,s,a){e._bin;var l=[".notdef"],c=r[s];if(s++,c!=0)throw"error: unknown encoding format: "+c;var f=r[s];s++;for(var p=0;p<f;p++)l.push(r[s+p]);return l},e.CFF.readCharset=function(r,s,a){var l=e._bin,c=[".notdef"],f=r[s];if(s++,f==0)for(var p=0;p<a;p++){var g=l.readUshort(r,s);s+=2,c.push(g)}else{if(f!=1&&f!=2)throw"error: format: "+f;for(;c.length<a;){g=l.readUshort(r,s),s+=2;var v=0;for(f==1?(v=r[s],s++):(v=l.readUshort(r,s),s+=2),p=0;p<=v;p++)c.push(g),g++}}return c},e.CFF.readIndex=function(r,s,a){var l=e._bin,c=l.readUshort(r,s)+1,f=r[s+=2];if(s++,f==1)for(var p=0;p<c;p++)a.push(r[s+p]);else if(f==2)for(p=0;p<c;p++)a.push(l.readUshort(r,s+2*p));else if(f==3)for(p=0;p<c;p++)a.push(16777215&l.readUint(r,s+3*p-1));else if(c!=1)throw"unsupported offset size: "+f+", count: "+c;return(s+=c*f)-1},e.CFF.getCharString=function(r,s,a){var l=e._bin,c=r[s],f=r[s+1];r[s+2],r[s+3],r[s+4];var p=1,g=null,v=null;c<=20&&(g=c,p=1),c==12&&(g=100*c+f,p=2),21<=c&&c<=27&&(g=c,p=1),c==28&&(v=l.readShort(r,s+1),p=3),29<=c&&c<=31&&(g=c,p=1),32<=c&&c<=246&&(v=c-139,p=1),247<=c&&c<=250&&(v=256*(c-247)+f+108,p=2),251<=c&&c<=254&&(v=256*-(c-251)-f-108,p=2),c==255&&(v=l.readInt(r,s+1)/65535,p=5),a.val=v??"o"+g,a.size=p},e.CFF.readCharString=function(r,s,a){for(var l=s+a,c=e._bin,f=[];s<l;){var p=r[s],g=r[s+1];r[s+2],r[s+3],r[s+4];var v=1,y=null,S=null;p<=20&&(y=p,v=1),p==12&&(y=100*p+g,v=2),p!=19&&p!=20||(y=p,v=2),21<=p&&p<=27&&(y=p,v=1),p==28&&(S=c.readShort(r,s+1),v=3),29<=p&&p<=31&&(y=p,v=1),32<=p&&p<=246&&(S=p-139,v=1),247<=p&&p<=250&&(S=256*(p-247)+g+108,v=2),251<=p&&p<=254&&(S=256*-(p-251)-g-108,v=2),p==255&&(S=c.readInt(r,s+1)/65535,v=5),f.push(S??"o"+y),s+=v}return f},e.CFF.readDict=function(r,s,a){for(var l=e._bin,c={},f=[];s<a;){var p=r[s],g=r[s+1];r[s+2],r[s+3],r[s+4];var v=1,y=null,S=null;if(p==28&&(S=l.readShort(r,s+1),v=3),p==29&&(S=l.readInt(r,s+1),v=5),32<=p&&p<=246&&(S=p-139,v=1),247<=p&&p<=250&&(S=256*(p-247)+g+108,v=2),251<=p&&p<=254&&(S=256*-(p-251)-g-108,v=2),p==255)throw S=l.readInt(r,s+1)/65535,v=5,"unknown number";if(p==30){var T=[];for(v=1;;){var w=r[s+v];v++;var M=w>>4,A=15&w;if(M!=15&&T.push(M),A!=15&&T.push(A),A==15)break}for(var b="",R=[0,1,2,3,4,5,6,7,8,9,".","e","e-","reserved","-","endOfNumber"],I=0;I<T.length;I++)b+=R[T[I]];S=parseFloat(b)}p<=21&&(y=["version","Notice","FullName","FamilyName","Weight","FontBBox","BlueValues","OtherBlues","FamilyBlues","FamilyOtherBlues","StdHW","StdVW","escape","UniqueID","XUID","charset","Encoding","CharStrings","Private","Subrs","defaultWidthX","nominalWidthX"][p],v=1,p==12&&(y=["Copyright","isFixedPitch","ItalicAngle","UnderlinePosition","UnderlineThickness","PaintType","CharstringType","FontMatrix","StrokeWidth","BlueScale","BlueShift","BlueFuzz","StemSnapH","StemSnapV","ForceBold",0,0,"LanguageGroup","ExpansionFactor","initialRandomSeed","SyntheticBase","PostScript","BaseFontName","BaseFontBlend",0,0,0,0,0,0,"ROS","CIDFontVersion","CIDFontRevision","CIDFontType","CIDCount","UIDBase","FDArray","FDSelect","FontName"][g],v=2)),y!=null?(c[y]=f.length==1?f[0]:f,f=[]):f.push(S),s+=v}return c},e.cmap={},e.cmap.parse=function(r,s,a){r=new Uint8Array(r.buffer,s,a),s=0;var l=e._bin,c={};l.readUshort(r,s),s+=2;var f=l.readUshort(r,s);s+=2;var p=[];c.tables=[];for(var g=0;g<f;g++){var v=l.readUshort(r,s);s+=2;var y=l.readUshort(r,s);s+=2;var S=l.readUint(r,s);s+=4;var T="p"+v+"e"+y,w=p.indexOf(S);if(w==-1){var M;w=c.tables.length,p.push(S);var A=l.readUshort(r,S);A==0?M=e.cmap.parse0(r,S):A==4?M=e.cmap.parse4(r,S):A==6?M=e.cmap.parse6(r,S):A==12?M=e.cmap.parse12(r,S):console.debug("unknown format: "+A,v,y,S),c.tables.push(M)}if(c[T]!=null)throw"multiple tables for one platform+encoding";c[T]=w}return c},e.cmap.parse0=function(r,s){var a=e._bin,l={};l.format=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2,l.map=[];for(var f=0;f<c-6;f++)l.map.push(r[s+f]);return l},e.cmap.parse4=function(r,s){var a=e._bin,l=s,c={};c.format=a.readUshort(r,s),s+=2;var f=a.readUshort(r,s);s+=2,a.readUshort(r,s),s+=2;var p=a.readUshort(r,s);s+=2;var g=p/2;c.searchRange=a.readUshort(r,s),s+=2,c.entrySelector=a.readUshort(r,s),s+=2,c.rangeShift=a.readUshort(r,s),s+=2,c.endCount=a.readUshorts(r,s,g),s+=2*g,s+=2,c.startCount=a.readUshorts(r,s,g),s+=2*g,c.idDelta=[];for(var v=0;v<g;v++)c.idDelta.push(a.readShort(r,s)),s+=2;for(c.idRangeOffset=a.readUshorts(r,s,g),s+=2*g,c.glyphIdArray=[];s<l+f;)c.glyphIdArray.push(a.readUshort(r,s)),s+=2;return c},e.cmap.parse6=function(r,s){var a=e._bin,l={};l.format=a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,a.readUshort(r,s),s+=2,l.firstCode=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2,l.glyphIdArray=[];for(var f=0;f<c;f++)l.glyphIdArray.push(a.readUshort(r,s)),s+=2;return l},e.cmap.parse12=function(r,s){var a=e._bin,l={};l.format=a.readUshort(r,s),s+=2,s+=2,a.readUint(r,s),s+=4,a.readUint(r,s),s+=4;var c=a.readUint(r,s);s+=4,l.groups=[];for(var f=0;f<c;f++){var p=s+12*f,g=a.readUint(r,p+0),v=a.readUint(r,p+4),y=a.readUint(r,p+8);l.groups.push([g,v,y])}return l},e.glyf={},e.glyf.parse=function(r,s,a,l){for(var c=[],f=0;f<l.maxp.numGlyphs;f++)c.push(null);return c},e.glyf._parseGlyf=function(r,s){var a=e._bin,l=r._data,c=e._tabOffset(l,"glyf",r._offset)+r.loca[s];if(r.loca[s]==r.loca[s+1])return null;var f={};if(f.noc=a.readShort(l,c),c+=2,f.xMin=a.readShort(l,c),c+=2,f.yMin=a.readShort(l,c),c+=2,f.xMax=a.readShort(l,c),c+=2,f.yMax=a.readShort(l,c),c+=2,f.xMin>=f.xMax||f.yMin>=f.yMax)return null;if(f.noc>0){f.endPts=[];for(var p=0;p<f.noc;p++)f.endPts.push(a.readUshort(l,c)),c+=2;var g=a.readUshort(l,c);if(c+=2,l.length-c<g)return null;f.instructions=a.readBytes(l,c,g),c+=g;var v=f.endPts[f.noc-1]+1;for(f.flags=[],p=0;p<v;p++){var y=l[c];if(c++,f.flags.push(y),(8&y)!=0){var S=l[c];c++;for(var T=0;T<S;T++)f.flags.push(y),p++}}for(f.xs=[],p=0;p<v;p++){var w=(2&f.flags[p])!=0,M=(16&f.flags[p])!=0;w?(f.xs.push(M?l[c]:-l[c]),c++):M?f.xs.push(0):(f.xs.push(a.readShort(l,c)),c+=2)}for(f.ys=[],p=0;p<v;p++)w=(4&f.flags[p])!=0,M=(32&f.flags[p])!=0,w?(f.ys.push(M?l[c]:-l[c]),c++):M?f.ys.push(0):(f.ys.push(a.readShort(l,c)),c+=2);var A=0,b=0;for(p=0;p<v;p++)A+=f.xs[p],b+=f.ys[p],f.xs[p]=A,f.ys[p]=b}else{var R;f.parts=[];do{R=a.readUshort(l,c),c+=2;var I={m:{a:1,b:0,c:0,d:1,tx:0,ty:0},p1:-1,p2:-1};if(f.parts.push(I),I.glyphIndex=a.readUshort(l,c),c+=2,1&R){var k=a.readShort(l,c);c+=2;var F=a.readShort(l,c);c+=2}else k=a.readInt8(l,c),c++,F=a.readInt8(l,c),c++;2&R?(I.m.tx=k,I.m.ty=F):(I.p1=k,I.p2=F),8&R?(I.m.a=I.m.d=a.readF2dot14(l,c),c+=2):64&R?(I.m.a=a.readF2dot14(l,c),c+=2,I.m.d=a.readF2dot14(l,c),c+=2):128&R&&(I.m.a=a.readF2dot14(l,c),c+=2,I.m.b=a.readF2dot14(l,c),c+=2,I.m.c=a.readF2dot14(l,c),c+=2,I.m.d=a.readF2dot14(l,c),c+=2)}while(32&R);if(256&R){var z=a.readUshort(l,c);for(c+=2,f.instr=[],p=0;p<z;p++)f.instr.push(l[c]),c++}}return f},e.GDEF={},e.GDEF.parse=function(r,s,a,l){var c=s;s+=4;var f=e._bin.readUshort(r,s);return{glyphClassDef:f===0?null:e._lctf.readClassDef(r,c+f)}},e.GPOS={},e.GPOS.parse=function(r,s,a,l){return e._lctf.parse(r,s,a,l,e.GPOS.subt)},e.GPOS.subt=function(r,s,a,l){var c=e._bin,f=a,p={};if(p.fmt=c.readUshort(r,a),a+=2,s==1||s==2||s==3||s==7||s==8&&p.fmt<=2){var g=c.readUshort(r,a);a+=2,p.coverage=e._lctf.readCoverage(r,g+f)}if(s==1&&p.fmt==1){var v=c.readUshort(r,a);a+=2,v!=0&&(p.pos=e.GPOS.readValueRecord(r,a,v))}else if(s==2&&p.fmt>=1&&p.fmt<=2){v=c.readUshort(r,a),a+=2;var y=c.readUshort(r,a);a+=2;var S=e._lctf.numOfOnes(v),T=e._lctf.numOfOnes(y);if(p.fmt==1){p.pairsets=[];var w=c.readUshort(r,a);a+=2;for(var M=0;M<w;M++){var A=f+c.readUshort(r,a);a+=2;var b=c.readUshort(r,A);A+=2;for(var R=[],I=0;I<b;I++){var k=c.readUshort(r,A);A+=2,v!=0&&(Y=e.GPOS.readValueRecord(r,A,v),A+=2*S),y!=0&&(q=e.GPOS.readValueRecord(r,A,y),A+=2*T),R.push({gid2:k,val1:Y,val2:q})}p.pairsets.push(R)}}if(p.fmt==2){var F=c.readUshort(r,a);a+=2;var z=c.readUshort(r,a);a+=2;var U=c.readUshort(r,a);a+=2;var O=c.readUshort(r,a);for(a+=2,p.classDef1=e._lctf.readClassDef(r,f+F),p.classDef2=e._lctf.readClassDef(r,f+z),p.matrix=[],M=0;M<U;M++){var $=[];for(I=0;I<O;I++){var Y=null,q=null;v!=0&&(Y=e.GPOS.readValueRecord(r,a,v),a+=2*S),y!=0&&(q=e.GPOS.readValueRecord(r,a,y),a+=2*T),$.push({val1:Y,val2:q})}p.matrix.push($)}}}else if(s==4&&p.fmt==1)p.markCoverage=e._lctf.readCoverage(r,c.readUshort(r,a)+f),p.baseCoverage=e._lctf.readCoverage(r,c.readUshort(r,a+2)+f),p.markClassCount=c.readUshort(r,a+4),p.markArray=e.GPOS.readMarkArray(r,c.readUshort(r,a+6)+f),p.baseArray=e.GPOS.readBaseArray(r,c.readUshort(r,a+8)+f,p.markClassCount);else if(s==6&&p.fmt==1)p.mark1Coverage=e._lctf.readCoverage(r,c.readUshort(r,a)+f),p.mark2Coverage=e._lctf.readCoverage(r,c.readUshort(r,a+2)+f),p.markClassCount=c.readUshort(r,a+4),p.mark1Array=e.GPOS.readMarkArray(r,c.readUshort(r,a+6)+f),p.mark2Array=e.GPOS.readBaseArray(r,c.readUshort(r,a+8)+f,p.markClassCount);else{if(s==9&&p.fmt==1){var J=c.readUshort(r,a);a+=2;var ae=c.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=J;else if(l.ltype!=J)throw"invalid extension substitution";return e.GPOS.subt(r,l.ltype,f+ae)}console.debug("unsupported GPOS table LookupType",s,"format",p.fmt)}return p},e.GPOS.readValueRecord=function(r,s,a){var l=e._bin,c=[];return c.push(1&a?l.readShort(r,s):0),s+=1&a?2:0,c.push(2&a?l.readShort(r,s):0),s+=2&a?2:0,c.push(4&a?l.readShort(r,s):0),s+=4&a?2:0,c.push(8&a?l.readShort(r,s):0),s+=8&a?2:0,c},e.GPOS.readBaseArray=function(r,s,a){var l=e._bin,c=[],f=s,p=l.readUshort(r,s);s+=2;for(var g=0;g<p;g++){for(var v=[],y=0;y<a;y++)v.push(e.GPOS.readAnchorRecord(r,f+l.readUshort(r,s))),s+=2;c.push(v)}return c},e.GPOS.readMarkArray=function(r,s){var a=e._bin,l=[],c=s,f=a.readUshort(r,s);s+=2;for(var p=0;p<f;p++){var g=e.GPOS.readAnchorRecord(r,a.readUshort(r,s+2)+c);g.markClass=a.readUshort(r,s),l.push(g),s+=4}return l},e.GPOS.readAnchorRecord=function(r,s){var a=e._bin,l={};return l.fmt=a.readUshort(r,s),l.x=a.readShort(r,s+2),l.y=a.readShort(r,s+4),l},e.GSUB={},e.GSUB.parse=function(r,s,a,l){return e._lctf.parse(r,s,a,l,e.GSUB.subt)},e.GSUB.subt=function(r,s,a,l){var c=e._bin,f=a,p={};if(p.fmt=c.readUshort(r,a),a+=2,s!=1&&s!=2&&s!=4&&s!=5&&s!=6)return null;if(s==1||s==2||s==4||s==5&&p.fmt<=2||s==6&&p.fmt<=2){var g=c.readUshort(r,a);a+=2,p.coverage=e._lctf.readCoverage(r,f+g)}if(s==1&&p.fmt>=1&&p.fmt<=2){if(p.fmt==1)p.delta=c.readShort(r,a),a+=2;else if(p.fmt==2){var v=c.readUshort(r,a);a+=2,p.newg=c.readUshorts(r,a,v),a+=2*p.newg.length}}else if(s==2&&p.fmt==1){v=c.readUshort(r,a),a+=2,p.seqs=[];for(var y=0;y<v;y++){var S=c.readUshort(r,a)+f;a+=2;var T=c.readUshort(r,S);p.seqs.push(c.readUshorts(r,S+2,T))}}else if(s==4)for(p.vals=[],v=c.readUshort(r,a),a+=2,y=0;y<v;y++){var w=c.readUshort(r,a);a+=2,p.vals.push(e.GSUB.readLigatureSet(r,f+w))}else if(s==5&&p.fmt==2){if(p.fmt==2){var M=c.readUshort(r,a);a+=2,p.cDef=e._lctf.readClassDef(r,f+M),p.scset=[];var A=c.readUshort(r,a);for(a+=2,y=0;y<A;y++){var b=c.readUshort(r,a);a+=2,p.scset.push(b==0?null:e.GSUB.readSubClassSet(r,f+b))}}}else if(s==6&&p.fmt==3){if(p.fmt==3){for(y=0;y<3;y++){v=c.readUshort(r,a),a+=2;for(var R=[],I=0;I<v;I++)R.push(e._lctf.readCoverage(r,f+c.readUshort(r,a+2*I)));a+=2*v,y==0&&(p.backCvg=R),y==1&&(p.inptCvg=R),y==2&&(p.ahedCvg=R)}v=c.readUshort(r,a),a+=2,p.lookupRec=e.GSUB.readSubstLookupRecords(r,a,v)}}else{if(s==7&&p.fmt==1){var k=c.readUshort(r,a);a+=2;var F=c.readUint(r,a);if(a+=4,l.ltype==9)l.ltype=k;else if(l.ltype!=k)throw"invalid extension substitution";return e.GSUB.subt(r,l.ltype,f+F)}console.debug("unsupported GSUB table LookupType",s,"format",p.fmt)}return p},e.GSUB.readSubClassSet=function(r,s){var a=e._bin.readUshort,l=s,c=[],f=a(r,s);s+=2;for(var p=0;p<f;p++){var g=a(r,s);s+=2,c.push(e.GSUB.readSubClassRule(r,l+g))}return c},e.GSUB.readSubClassRule=function(r,s){var a=e._bin.readUshort,l={},c=a(r,s),f=a(r,s+=2);s+=2,l.input=[];for(var p=0;p<c-1;p++)l.input.push(a(r,s)),s+=2;return l.substLookupRecords=e.GSUB.readSubstLookupRecords(r,s,f),l},e.GSUB.readSubstLookupRecords=function(r,s,a){for(var l=e._bin.readUshort,c=[],f=0;f<a;f++)c.push(l(r,s),l(r,s+2)),s+=4;return c},e.GSUB.readChainSubClassSet=function(r,s){var a=e._bin,l=s,c=[],f=a.readUshort(r,s);s+=2;for(var p=0;p<f;p++){var g=a.readUshort(r,s);s+=2,c.push(e.GSUB.readChainSubClassRule(r,l+g))}return c},e.GSUB.readChainSubClassRule=function(r,s){for(var a=e._bin,l={},c=["backtrack","input","lookahead"],f=0;f<c.length;f++){var p=a.readUshort(r,s);s+=2,f==1&&p--,l[c[f]]=a.readUshorts(r,s,p),s+=2*l[c[f]].length}return p=a.readUshort(r,s),s+=2,l.subst=a.readUshorts(r,s,2*p),s+=2*l.subst.length,l},e.GSUB.readLigatureSet=function(r,s){var a=e._bin,l=s,c=[],f=a.readUshort(r,s);s+=2;for(var p=0;p<f;p++){var g=a.readUshort(r,s);s+=2,c.push(e.GSUB.readLigature(r,l+g))}return c},e.GSUB.readLigature=function(r,s){var a=e._bin,l={chain:[]};l.nglyph=a.readUshort(r,s),s+=2;var c=a.readUshort(r,s);s+=2;for(var f=0;f<c-1;f++)l.chain.push(a.readUshort(r,s)),s+=2;return l},e.head={},e.head.parse=function(r,s,a){var l=e._bin,c={};return l.readFixed(r,s),s+=4,c.fontRevision=l.readFixed(r,s),s+=4,l.readUint(r,s),s+=4,l.readUint(r,s),s+=4,c.flags=l.readUshort(r,s),s+=2,c.unitsPerEm=l.readUshort(r,s),s+=2,c.created=l.readUint64(r,s),s+=8,c.modified=l.readUint64(r,s),s+=8,c.xMin=l.readShort(r,s),s+=2,c.yMin=l.readShort(r,s),s+=2,c.xMax=l.readShort(r,s),s+=2,c.yMax=l.readShort(r,s),s+=2,c.macStyle=l.readUshort(r,s),s+=2,c.lowestRecPPEM=l.readUshort(r,s),s+=2,c.fontDirectionHint=l.readShort(r,s),s+=2,c.indexToLocFormat=l.readShort(r,s),s+=2,c.glyphDataFormat=l.readShort(r,s),s+=2,c},e.hhea={},e.hhea.parse=function(r,s,a){var l=e._bin,c={};return l.readFixed(r,s),s+=4,c.ascender=l.readShort(r,s),s+=2,c.descender=l.readShort(r,s),s+=2,c.lineGap=l.readShort(r,s),s+=2,c.advanceWidthMax=l.readUshort(r,s),s+=2,c.minLeftSideBearing=l.readShort(r,s),s+=2,c.minRightSideBearing=l.readShort(r,s),s+=2,c.xMaxExtent=l.readShort(r,s),s+=2,c.caretSlopeRise=l.readShort(r,s),s+=2,c.caretSlopeRun=l.readShort(r,s),s+=2,c.caretOffset=l.readShort(r,s),s+=2,s+=8,c.metricDataFormat=l.readShort(r,s),s+=2,c.numberOfHMetrics=l.readUshort(r,s),s+=2,c},e.hmtx={},e.hmtx.parse=function(r,s,a,l){for(var c=e._bin,f={aWidth:[],lsBearing:[]},p=0,g=0,v=0;v<l.maxp.numGlyphs;v++)v<l.hhea.numberOfHMetrics&&(p=c.readUshort(r,s),s+=2,g=c.readShort(r,s),s+=2),f.aWidth.push(p),f.lsBearing.push(g);return f},e.kern={},e.kern.parse=function(r,s,a,l){var c=e._bin,f=c.readUshort(r,s);if(s+=2,f==1)return e.kern.parseV1(r,s-2,a,l);var p=c.readUshort(r,s);s+=2;for(var g={glyph1:[],rval:[]},v=0;v<p;v++){s+=2,a=c.readUshort(r,s),s+=2;var y=c.readUshort(r,s);s+=2;var S=y>>>8;if((S&=15)!=0)throw"unknown kern table format: "+S;s=e.kern.readFormat0(r,s,g)}return g},e.kern.parseV1=function(r,s,a,l){var c=e._bin;c.readFixed(r,s),s+=4;var f=c.readUint(r,s);s+=4;for(var p={glyph1:[],rval:[]},g=0;g<f;g++){c.readUint(r,s),s+=4;var v=c.readUshort(r,s);s+=2,c.readUshort(r,s),s+=2;var y=v>>>8;if((y&=15)!=0)throw"unknown kern table format: "+y;s=e.kern.readFormat0(r,s,p)}return p},e.kern.readFormat0=function(r,s,a){var l=e._bin,c=-1,f=l.readUshort(r,s);s+=2,l.readUshort(r,s),s+=2,l.readUshort(r,s),s+=2,l.readUshort(r,s),s+=2;for(var p=0;p<f;p++){var g=l.readUshort(r,s);s+=2;var v=l.readUshort(r,s);s+=2;var y=l.readShort(r,s);s+=2,g!=c&&(a.glyph1.push(g),a.rval.push({glyph2:[],vals:[]}));var S=a.rval[a.rval.length-1];S.glyph2.push(v),S.vals.push(y),c=g}return s},e.loca={},e.loca.parse=function(r,s,a,l){var c=e._bin,f=[],p=l.head.indexToLocFormat,g=l.maxp.numGlyphs+1;if(p==0)for(var v=0;v<g;v++)f.push(c.readUshort(r,s+(v<<1))<<1);if(p==1)for(v=0;v<g;v++)f.push(c.readUint(r,s+(v<<2)));return f},e.maxp={},e.maxp.parse=function(r,s,a){var l=e._bin,c={},f=l.readUint(r,s);return s+=4,c.numGlyphs=l.readUshort(r,s),s+=2,f==65536&&(c.maxPoints=l.readUshort(r,s),s+=2,c.maxContours=l.readUshort(r,s),s+=2,c.maxCompositePoints=l.readUshort(r,s),s+=2,c.maxCompositeContours=l.readUshort(r,s),s+=2,c.maxZones=l.readUshort(r,s),s+=2,c.maxTwilightPoints=l.readUshort(r,s),s+=2,c.maxStorage=l.readUshort(r,s),s+=2,c.maxFunctionDefs=l.readUshort(r,s),s+=2,c.maxInstructionDefs=l.readUshort(r,s),s+=2,c.maxStackElements=l.readUshort(r,s),s+=2,c.maxSizeOfInstructions=l.readUshort(r,s),s+=2,c.maxComponentElements=l.readUshort(r,s),s+=2,c.maxComponentDepth=l.readUshort(r,s),s+=2),c},e.name={},e.name.parse=function(r,s,a){var l=e._bin,c={};l.readUshort(r,s),s+=2;var f=l.readUshort(r,s);s+=2,l.readUshort(r,s);for(var p,g=["copyright","fontFamily","fontSubfamily","ID","fullName","version","postScriptName","trademark","manufacturer","designer","description","urlVendor","urlDesigner","licence","licenceURL","---","typoFamilyName","typoSubfamilyName","compatibleFull","sampleText","postScriptCID","wwsFamilyName","wwsSubfamilyName","lightPalette","darkPalette"],v=s+=2,y=0;y<f;y++){var S=l.readUshort(r,s);s+=2;var T=l.readUshort(r,s);s+=2;var w=l.readUshort(r,s);s+=2;var M=l.readUshort(r,s);s+=2;var A=l.readUshort(r,s);s+=2;var b=l.readUshort(r,s);s+=2;var R,I=g[M],k=v+12*f+b;if(S==0)R=l.readUnicode(r,k,A/2);else if(S==3&&T==0)R=l.readUnicode(r,k,A/2);else if(T==0)R=l.readASCII(r,k,A);else if(T==1)R=l.readUnicode(r,k,A/2);else if(T==3)R=l.readUnicode(r,k,A/2);else{if(S!=1)throw"unknown encoding "+T+", platformID: "+S;R=l.readASCII(r,k,A),console.debug("reading unknown MAC encoding "+T+" as ASCII")}var F="p"+S+","+w.toString(16);c[F]==null&&(c[F]={}),c[F][I!==void 0?I:M]=R,c[F]._lang=w}for(var z in c)if(c[z].postScriptName!=null&&c[z]._lang==1033)return c[z];for(var z in c)if(c[z].postScriptName!=null&&c[z]._lang==0)return c[z];for(var z in c)if(c[z].postScriptName!=null&&c[z]._lang==3084)return c[z];for(var z in c)if(c[z].postScriptName!=null)return c[z];for(var z in c){p=z;break}return console.debug("returning name table with languageID "+c[p]._lang),c[p]},e["OS/2"]={},e["OS/2"].parse=function(r,s,a){var l=e._bin.readUshort(r,s);s+=2;var c={};if(l==0)e["OS/2"].version0(r,s,c);else if(l==1)e["OS/2"].version1(r,s,c);else if(l==2||l==3||l==4)e["OS/2"].version2(r,s,c);else{if(l!=5)throw"unknown OS/2 table version: "+l;e["OS/2"].version5(r,s,c)}return c},e["OS/2"].version0=function(r,s,a){var l=e._bin;return a.xAvgCharWidth=l.readShort(r,s),s+=2,a.usWeightClass=l.readUshort(r,s),s+=2,a.usWidthClass=l.readUshort(r,s),s+=2,a.fsType=l.readUshort(r,s),s+=2,a.ySubscriptXSize=l.readShort(r,s),s+=2,a.ySubscriptYSize=l.readShort(r,s),s+=2,a.ySubscriptXOffset=l.readShort(r,s),s+=2,a.ySubscriptYOffset=l.readShort(r,s),s+=2,a.ySuperscriptXSize=l.readShort(r,s),s+=2,a.ySuperscriptYSize=l.readShort(r,s),s+=2,a.ySuperscriptXOffset=l.readShort(r,s),s+=2,a.ySuperscriptYOffset=l.readShort(r,s),s+=2,a.yStrikeoutSize=l.readShort(r,s),s+=2,a.yStrikeoutPosition=l.readShort(r,s),s+=2,a.sFamilyClass=l.readShort(r,s),s+=2,a.panose=l.readBytes(r,s,10),s+=10,a.ulUnicodeRange1=l.readUint(r,s),s+=4,a.ulUnicodeRange2=l.readUint(r,s),s+=4,a.ulUnicodeRange3=l.readUint(r,s),s+=4,a.ulUnicodeRange4=l.readUint(r,s),s+=4,a.achVendID=[l.readInt8(r,s),l.readInt8(r,s+1),l.readInt8(r,s+2),l.readInt8(r,s+3)],s+=4,a.fsSelection=l.readUshort(r,s),s+=2,a.usFirstCharIndex=l.readUshort(r,s),s+=2,a.usLastCharIndex=l.readUshort(r,s),s+=2,a.sTypoAscender=l.readShort(r,s),s+=2,a.sTypoDescender=l.readShort(r,s),s+=2,a.sTypoLineGap=l.readShort(r,s),s+=2,a.usWinAscent=l.readUshort(r,s),s+=2,a.usWinDescent=l.readUshort(r,s),s+=2},e["OS/2"].version1=function(r,s,a){var l=e._bin;return s=e["OS/2"].version0(r,s,a),a.ulCodePageRange1=l.readUint(r,s),s+=4,a.ulCodePageRange2=l.readUint(r,s),s+=4},e["OS/2"].version2=function(r,s,a){var l=e._bin;return s=e["OS/2"].version1(r,s,a),a.sxHeight=l.readShort(r,s),s+=2,a.sCapHeight=l.readShort(r,s),s+=2,a.usDefault=l.readUshort(r,s),s+=2,a.usBreak=l.readUshort(r,s),s+=2,a.usMaxContext=l.readUshort(r,s),s+=2},e["OS/2"].version5=function(r,s,a){var l=e._bin;return s=e["OS/2"].version2(r,s,a),a.usLowerOpticalPointSize=l.readUshort(r,s),s+=2,a.usUpperOpticalPointSize=l.readUshort(r,s),s+=2},e.post={},e.post.parse=function(r,s,a){var l=e._bin,c={};return c.version=l.readFixed(r,s),s+=4,c.italicAngle=l.readFixed(r,s),s+=4,c.underlinePosition=l.readShort(r,s),s+=2,c.underlineThickness=l.readShort(r,s),s+=2,c},e==null&&(e={}),e.U==null&&(e.U={}),e.U.codeToGlyph=function(r,s){var a=r.cmap,l=-1;if(a.p0e4!=null?l=a.p0e4:a.p3e1!=null?l=a.p3e1:a.p1e0!=null?l=a.p1e0:a.p0e3!=null&&(l=a.p0e3),l==-1)throw"no familiar platform and encoding!";var c=a.tables[l];if(c.format==0)return s>=c.map.length?0:c.map[s];if(c.format==4){for(var f=-1,p=0;p<c.endCount.length;p++)if(s<=c.endCount[p]){f=p;break}return f==-1||c.startCount[f]>s?0:65535&(c.idRangeOffset[f]!=0?c.glyphIdArray[s-c.startCount[f]+(c.idRangeOffset[f]>>1)-(c.idRangeOffset.length-f)]:s+c.idDelta[f])}if(c.format==12){if(s>c.groups[c.groups.length-1][1])return 0;for(p=0;p<c.groups.length;p++){var g=c.groups[p];if(g[0]<=s&&s<=g[1])return g[2]+(s-g[0])}return 0}throw"unknown cmap table format "+c.format},e.U.glyphToPath=function(r,s){var a={cmds:[],crds:[]};if(r.SVG&&r.SVG.entries[s]){var l=r.SVG.entries[s];return l==null?a:(typeof l=="string"&&(l=e.SVG.toPath(l),r.SVG.entries[s]=l),l)}if(r.CFF){var c={x:0,y:0,stack:[],nStems:0,haveWidth:!1,width:r.CFF.Private?r.CFF.Private.defaultWidthX:0,open:!1},f=r.CFF,p=r.CFF.Private;if(f.ROS){for(var g=0;f.FDSelect[g+2]<=s;)g+=2;p=f.FDArray[f.FDSelect[g+1]].Private}e.U._drawCFF(r.CFF.CharStrings[s],c,f,p,a)}else r.glyf&&e.U._drawGlyf(s,r,a);return a},e.U._drawGlyf=function(r,s,a){var l=s.glyf[r];l==null&&(l=s.glyf[r]=e.glyf._parseGlyf(s,r)),l!=null&&(l.noc>-1?e.U._simpleGlyph(l,a):e.U._compoGlyph(l,s,a))},e.U._simpleGlyph=function(r,s){for(var a=0;a<r.noc;a++){for(var l=a==0?0:r.endPts[a-1]+1,c=r.endPts[a],f=l;f<=c;f++){var p=f==l?c:f-1,g=f==c?l:f+1,v=1&r.flags[f],y=1&r.flags[p],S=1&r.flags[g],T=r.xs[f],w=r.ys[f];if(f==l)if(v){if(!y){e.U.P.moveTo(s,T,w);continue}e.U.P.moveTo(s,r.xs[p],r.ys[p])}else y?e.U.P.moveTo(s,r.xs[p],r.ys[p]):e.U.P.moveTo(s,(r.xs[p]+T)/2,(r.ys[p]+w)/2);v?y&&e.U.P.lineTo(s,T,w):S?e.U.P.qcurveTo(s,T,w,r.xs[g],r.ys[g]):e.U.P.qcurveTo(s,T,w,(T+r.xs[g])/2,(w+r.ys[g])/2)}e.U.P.closePath(s)}},e.U._compoGlyph=function(r,s,a){for(var l=0;l<r.parts.length;l++){var c={cmds:[],crds:[]},f=r.parts[l];e.U._drawGlyf(f.glyphIndex,s,c);for(var p=f.m,g=0;g<c.crds.length;g+=2){var v=c.crds[g],y=c.crds[g+1];a.crds.push(v*p.a+y*p.b+p.tx),a.crds.push(v*p.c+y*p.d+p.ty)}for(g=0;g<c.cmds.length;g++)a.cmds.push(c.cmds[g])}},e.U._getGlyphClass=function(r,s){var a=e._lctf.getInterval(s,r);return a==-1?0:s[a+2]},e.U._applySubs=function(r,s,a,l){for(var c=r.length-s-1,f=0;f<a.tabs.length;f++)if(a.tabs[f]!=null){var p,g=a.tabs[f];if(!g.coverage||(p=e._lctf.coverageIndex(g.coverage,r[s]))!=-1){if(a.ltype==1)r[s],g.fmt==1?r[s]=r[s]+g.delta:r[s]=g.newg[p];else if(a.ltype==4)for(var v=g.vals[p],y=0;y<v.length;y++){var S=v[y],T=S.chain.length;if(!(T>c)){for(var w=!0,M=0,A=0;A<T;A++){for(;r[s+M+(1+A)]==-1;)M++;S.chain[A]!=r[s+M+(1+A)]&&(w=!1)}if(w){for(r[s]=S.nglyph,A=0;A<T+M;A++)r[s+A+1]=-1;break}}}else if(a.ltype==5&&g.fmt==2)for(var b=e._lctf.getInterval(g.cDef,r[s]),R=g.cDef[b+2],I=g.scset[R],k=0;k<I.length;k++){var F=I[k],z=F.input;if(!(z.length>c)){for(w=!0,A=0;A<z.length;A++){var U=e._lctf.getInterval(g.cDef,r[s+1+A]);if(b==-1&&g.cDef[U+2]!=z[A]){w=!1;break}}if(w){var O=F.substLookupRecords;for(y=0;y<O.length;y+=2)O[y],O[y+1]}}}else if(a.ltype==6&&g.fmt==3){if(!e.U._glsCovered(r,g.backCvg,s-g.backCvg.length)||!e.U._glsCovered(r,g.inptCvg,s)||!e.U._glsCovered(r,g.ahedCvg,s+g.inptCvg.length))continue;var $=g.lookupRec;for(k=0;k<$.length;k+=2){b=$[k];var Y=l[$[k+1]];e.U._applySubs(r,s+b,Y,l)}}}}},e.U._glsCovered=function(r,s,a){for(var l=0;l<s.length;l++)if(e._lctf.coverageIndex(s[l],r[a+l])==-1)return!1;return!0},e.U.glyphsToPath=function(r,s,a){for(var l={cmds:[],crds:[]},c=0,f=0;f<s.length;f++){var p=s[f];if(p!=-1){for(var g=f<s.length-1&&s[f+1]!=-1?s[f+1]:0,v=e.U.glyphToPath(r,p),y=0;y<v.crds.length;y+=2)l.crds.push(v.crds[y]+c),l.crds.push(v.crds[y+1]);for(a&&l.cmds.push(a),y=0;y<v.cmds.length;y++)l.cmds.push(v.cmds[y]);a&&l.cmds.push("X"),c+=r.hmtx.aWidth[p],f<s.length-1&&(c+=e.U.getPairAdjustment(r,p,g))}}return l},e.U.P={},e.U.P.moveTo=function(r,s,a){r.cmds.push("M"),r.crds.push(s,a)},e.U.P.lineTo=function(r,s,a){r.cmds.push("L"),r.crds.push(s,a)},e.U.P.curveTo=function(r,s,a,l,c,f,p){r.cmds.push("C"),r.crds.push(s,a,l,c,f,p)},e.U.P.qcurveTo=function(r,s,a,l,c){r.cmds.push("Q"),r.crds.push(s,a,l,c)},e.U.P.closePath=function(r){r.cmds.push("Z")},e.U._drawCFF=function(r,s,a,l,c){for(var f=s.stack,p=s.nStems,g=s.haveWidth,v=s.width,y=s.open,S=0,T=s.x,w=s.y,M=0,A=0,b=0,R=0,I=0,k=0,F=0,z=0,U=0,O=0,$={val:0,size:0};S<r.length;){e.CFF.getCharString(r,S,$);var Y=$.val;if(S+=$.size,Y=="o1"||Y=="o18")f.length%2!=0&&!g&&(v=f.shift()+l.nominalWidthX),p+=f.length>>1,f.length=0,g=!0;else if(Y=="o3"||Y=="o23")f.length%2!=0&&!g&&(v=f.shift()+l.nominalWidthX),p+=f.length>>1,f.length=0,g=!0;else if(Y=="o4")f.length>1&&!g&&(v=f.shift()+l.nominalWidthX,g=!0),y&&e.U.P.closePath(c),w+=f.pop(),e.U.P.moveTo(c,T,w),y=!0;else if(Y=="o5")for(;f.length>0;)T+=f.shift(),w+=f.shift(),e.U.P.lineTo(c,T,w);else if(Y=="o6"||Y=="o7")for(var q=f.length,J=Y=="o6",ae=0;ae<q;ae++){var oe=f.shift();J?T+=oe:w+=oe,J=!J,e.U.P.lineTo(c,T,w)}else if(Y=="o8"||Y=="o24"){q=f.length;for(var ue=0;ue+6<=q;)M=T+f.shift(),A=w+f.shift(),b=M+f.shift(),R=A+f.shift(),T=b+f.shift(),w=R+f.shift(),e.U.P.curveTo(c,M,A,b,R,T,w),ue+=6;Y=="o24"&&(T+=f.shift(),w+=f.shift(),e.U.P.lineTo(c,T,w))}else{if(Y=="o11")break;if(Y=="o1234"||Y=="o1235"||Y=="o1236"||Y=="o1237")Y=="o1234"&&(A=w,b=(M=T+f.shift())+f.shift(),O=R=A+f.shift(),k=R,z=w,T=(F=(I=(U=b+f.shift())+f.shift())+f.shift())+f.shift(),e.U.P.curveTo(c,M,A,b,R,U,O),e.U.P.curveTo(c,I,k,F,z,T,w)),Y=="o1235"&&(M=T+f.shift(),A=w+f.shift(),b=M+f.shift(),R=A+f.shift(),U=b+f.shift(),O=R+f.shift(),I=U+f.shift(),k=O+f.shift(),F=I+f.shift(),z=k+f.shift(),T=F+f.shift(),w=z+f.shift(),f.shift(),e.U.P.curveTo(c,M,A,b,R,U,O),e.U.P.curveTo(c,I,k,F,z,T,w)),Y=="o1236"&&(M=T+f.shift(),A=w+f.shift(),b=M+f.shift(),O=R=A+f.shift(),k=R,F=(I=(U=b+f.shift())+f.shift())+f.shift(),z=k+f.shift(),T=F+f.shift(),e.U.P.curveTo(c,M,A,b,R,U,O),e.U.P.curveTo(c,I,k,F,z,T,w)),Y=="o1237"&&(M=T+f.shift(),A=w+f.shift(),b=M+f.shift(),R=A+f.shift(),U=b+f.shift(),O=R+f.shift(),I=U+f.shift(),k=O+f.shift(),F=I+f.shift(),z=k+f.shift(),Math.abs(F-T)>Math.abs(z-w)?T=F+f.shift():w=z+f.shift(),e.U.P.curveTo(c,M,A,b,R,U,O),e.U.P.curveTo(c,I,k,F,z,T,w));else if(Y=="o14"){if(f.length>0&&!g&&(v=f.shift()+a.nominalWidthX,g=!0),f.length==4){var V=f.shift(),j=f.shift(),W=f.shift(),L=f.shift(),B=e.CFF.glyphBySE(a,W),te=e.CFF.glyphBySE(a,L);e.U._drawCFF(a.CharStrings[B],s,a,l,c),s.x=V,s.y=j,e.U._drawCFF(a.CharStrings[te],s,a,l,c)}y&&(e.U.P.closePath(c),y=!1)}else if(Y=="o19"||Y=="o20")f.length%2!=0&&!g&&(v=f.shift()+l.nominalWidthX),p+=f.length>>1,f.length=0,g=!0,S+=p+7>>3;else if(Y=="o21")f.length>2&&!g&&(v=f.shift()+l.nominalWidthX,g=!0),w+=f.pop(),T+=f.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,T,w),y=!0;else if(Y=="o22")f.length>1&&!g&&(v=f.shift()+l.nominalWidthX,g=!0),T+=f.pop(),y&&e.U.P.closePath(c),e.U.P.moveTo(c,T,w),y=!0;else if(Y=="o25"){for(;f.length>6;)T+=f.shift(),w+=f.shift(),e.U.P.lineTo(c,T,w);M=T+f.shift(),A=w+f.shift(),b=M+f.shift(),R=A+f.shift(),T=b+f.shift(),w=R+f.shift(),e.U.P.curveTo(c,M,A,b,R,T,w)}else if(Y=="o26")for(f.length%2&&(T+=f.shift());f.length>0;)M=T,A=w+f.shift(),T=b=M+f.shift(),w=(R=A+f.shift())+f.shift(),e.U.P.curveTo(c,M,A,b,R,T,w);else if(Y=="o27")for(f.length%2&&(w+=f.shift());f.length>0;)A=w,b=(M=T+f.shift())+f.shift(),R=A+f.shift(),T=b+f.shift(),w=R,e.U.P.curveTo(c,M,A,b,R,T,w);else if(Y=="o10"||Y=="o29"){var ie=Y=="o10"?l:a;if(f.length==0)console.debug("error: empty stack");else{var re=f.pop(),de=ie.Subrs[re+ie.Bias];s.x=T,s.y=w,s.nStems=p,s.haveWidth=g,s.width=v,s.open=y,e.U._drawCFF(de,s,a,l,c),T=s.x,w=s.y,p=s.nStems,g=s.haveWidth,v=s.width,y=s.open}}else if(Y=="o30"||Y=="o31"){var he=f.length,ve=(ue=0,Y=="o31");for(ue+=he-(q=-3&he);ue<q;)ve?(A=w,b=(M=T+f.shift())+f.shift(),w=(R=A+f.shift())+f.shift(),q-ue==5?(T=b+f.shift(),ue++):T=b,ve=!1):(M=T,A=w+f.shift(),b=M+f.shift(),R=A+f.shift(),T=b+f.shift(),q-ue==5?(w=R+f.shift(),ue++):w=R,ve=!0),e.U.P.curveTo(c,M,A,b,R,T,w),ue+=4}else{if((Y+"").charAt(0)=="o")throw console.debug("Unknown operation: "+Y,r),Y;f.push(Y)}}}s.x=T,s.y=w,s.nStems=p,s.haveWidth=g,s.width=v,s.open=y};var t=e,i={Typr:t};return n.Typr=t,n.default=i,Object.defineProperty(n,"__esModule",{value:!0}),n}({}).Typr}/*!
Custom bundle of woff2otf (https://github.com/arty-name/woff2otf) with fflate
(https://github.com/101arrowz/fflate) for use in Troika text rendering. 
Original licenses apply: 
- fflate: https://github.com/101arrowz/fflate/blob/master/LICENSE (MIT)
- woff2otf.js: https://github.com/arty-name/woff2otf/blob/master/woff2otf.js (Apache2)
*/function vO(){return function(n){var e=Uint8Array,t=Uint16Array,i=Uint32Array,r=new e([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),s=new e([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new e([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),l=function(Y,q){for(var J=new t(31),ae=0;ae<31;++ae)J[ae]=q+=1<<Y[ae-1];var oe=new i(J[30]);for(ae=1;ae<30;++ae)for(var ue=J[ae];ue<J[ae+1];++ue)oe[ue]=ue-J[ae]<<5|ae;return[J,oe]},c=l(r,2),f=c[0],p=c[1];f[28]=258,p[258]=28;for(var g=l(s,0)[0],v=new t(32768),y=0;y<32768;++y){var S=(43690&y)>>>1|(21845&y)<<1;S=(61680&(S=(52428&S)>>>2|(13107&S)<<2))>>>4|(3855&S)<<4,v[y]=((65280&S)>>>8|(255&S)<<8)>>>1}var T=function(Y,q,J){for(var ae=Y.length,oe=0,ue=new t(q);oe<ae;++oe)++ue[Y[oe]-1];var V,j=new t(q);for(oe=0;oe<q;++oe)j[oe]=j[oe-1]+ue[oe-1]<<1;{V=new t(1<<q);var W=15-q;for(oe=0;oe<ae;++oe)if(Y[oe])for(var L=oe<<4|Y[oe],B=q-Y[oe],te=j[Y[oe]-1]++<<B,ie=te|(1<<B)-1;te<=ie;++te)V[v[te]>>>W]=L}return V},w=new e(288);for(y=0;y<144;++y)w[y]=8;for(y=144;y<256;++y)w[y]=9;for(y=256;y<280;++y)w[y]=7;for(y=280;y<288;++y)w[y]=8;var M=new e(32);for(y=0;y<32;++y)M[y]=5;var A=T(w,9),b=T(M,5),R=function(Y){for(var q=Y[0],J=1;J<Y.length;++J)Y[J]>q&&(q=Y[J]);return q},I=function(Y,q,J){var ae=q/8|0;return(Y[ae]|Y[ae+1]<<8)>>(7&q)&J},k=function(Y,q){var J=q/8|0;return(Y[J]|Y[J+1]<<8|Y[J+2]<<16)>>(7&q)},F=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],z=function(Y,q,J){var ae=new Error(q||F[Y]);if(ae.code=Y,Error.captureStackTrace&&Error.captureStackTrace(ae,z),!J)throw ae;return ae},U=function(Y,q,J){var ae=Y.length;if(!ae||J&&!J.l&&ae<5)return q||new e(0);var oe=!q||J,ue=!J||J.i;J||(J={}),q||(q=new e(3*ae));var V,j=function(Ye){var st=q.length;if(Ye>st){var _t=new e(Math.max(2*st,Ye));_t.set(q),q=_t}},W=J.f||0,L=J.p||0,B=J.b||0,te=J.l,ie=J.d,re=J.m,de=J.n,he=8*ae;do{if(!te){J.f=W=I(Y,L,1);var ve=I(Y,L+1,3);if(L+=3,!ve){var Ve=Y[(Ze=((V=L)/8|0)+(7&V&&1)+4)-4]|Y[Ze-3]<<8,rt=Ze+Ve;if(rt>ae){ue&&z(0);break}oe&&j(B+Ve),q.set(Y.subarray(Ze,rt),B),J.b=B+=Ve,J.p=L=8*rt;continue}if(ve==1)te=A,ie=b,re=9,de=5;else if(ve==2){var Ue=I(Y,L,31)+257,Z=I(Y,L+10,15)+4,Fe=Ue+I(Y,L+5,31)+1;L+=14;for(var we=new e(Fe),ke=new e(19),Pe=0;Pe<Z;++Pe)ke[a[Pe]]=I(Y,L+3*Pe,7);L+=3*Z;var et=R(ke),Le=(1<<et)-1,Xe=T(ke,et);for(Pe=0;Pe<Fe;){var Ze,Ae=Xe[I(Y,L,Le)];if(L+=15&Ae,(Ze=Ae>>>4)<16)we[Pe++]=Ze;else{var ht=0,X=0;for(Ze==16?(X=3+I(Y,L,3),L+=2,ht=we[Pe-1]):Ze==17?(X=3+I(Y,L,7),L+=3):Ze==18&&(X=11+I(Y,L,127),L+=7);X--;)we[Pe++]=ht}}var H=we.subarray(0,Ue),ce=we.subarray(Ue);re=R(H),de=R(ce),te=T(H,re),ie=T(ce,de)}else z(1);if(L>he){ue&&z(0);break}}oe&&j(B+131072);for(var qe=(1<<re)-1,be=(1<<de)-1,Ne=L;;Ne=L){var Ke=(ht=te[k(Y,L)&qe])>>>4;if((L+=15&ht)>he){ue&&z(0);break}if(ht||z(2),Ke<256)q[B++]=Ke;else{if(Ke==256){Ne=L,te=null;break}var We=Ke-254;if(Ke>264){var xe=r[Pe=Ke-257];We=I(Y,L,(1<<xe)-1)+f[Pe],L+=xe}var ct=ie[k(Y,L)&be],nt=ct>>>4;if(ct||z(3),L+=15&ct,ce=g[nt],nt>3&&(xe=s[nt],ce+=k(Y,L)&(1<<xe)-1,L+=xe),L>he){ue&&z(0);break}oe&&j(B+131072);for(var tt=B+We;B<tt;B+=4)q[B]=q[B-ce],q[B+1]=q[B+1-ce],q[B+2]=q[B+2-ce],q[B+3]=q[B+3-ce];B=tt}}J.l=te,J.p=Ne,J.b=B,te&&(W=1,J.m=re,J.d=ie,J.n=de)}while(!W);return B==q.length?q:function(Ye,st,_t){(_t==null||_t>Ye.length)&&(_t=Ye.length);var Wt=new(Ye instanceof t?t:Ye instanceof i?i:e)(_t-st);return Wt.set(Ye.subarray(st,_t)),Wt}(q,0,B)},O=new e(0),$=typeof TextDecoder<"u"&&new TextDecoder;try{$.decode(O,{stream:!0})}catch{}return n.convert_streams=function(Y){var q=new DataView(Y),J=0;function ae(){var Ue=q.getUint16(J);return J+=2,Ue}function oe(){var Ue=q.getUint32(J);return J+=4,Ue}function ue(Ue){Ve.setUint16(rt,Ue),rt+=2}function V(Ue){Ve.setUint32(rt,Ue),rt+=4}for(var j={signature:oe(),flavor:oe(),length:oe(),numTables:ae(),reserved:ae(),totalSfntSize:oe(),majorVersion:ae(),minorVersion:ae(),metaOffset:oe(),metaLength:oe(),metaOrigLength:oe(),privOffset:oe(),privLength:oe()},W=0;Math.pow(2,W)<=j.numTables;)W++;W--;for(var L=16*Math.pow(2,W),B=16*j.numTables-L,te=12,ie=[],re=0;re<j.numTables;re++)ie.push({tag:oe(),offset:oe(),compLength:oe(),origLength:oe(),origChecksum:oe()}),te+=16;var de,he=new Uint8Array(12+16*ie.length+ie.reduce(function(Ue,Z){return Ue+Z.origLength+4},0)),ve=he.buffer,Ve=new DataView(ve),rt=0;return V(j.flavor),ue(j.numTables),ue(L),ue(W),ue(B),ie.forEach(function(Ue){V(Ue.tag),V(Ue.origChecksum),V(te),V(Ue.origLength),Ue.outOffset=te,(te+=Ue.origLength)%4!=0&&(te+=4-te%4)}),ie.forEach(function(Ue){var Z,Fe=Y.slice(Ue.offset,Ue.offset+Ue.compLength);if(Ue.compLength!=Ue.origLength){var we=new Uint8Array(Ue.origLength);Z=new Uint8Array(Fe,2),U(Z,we)}else we=new Uint8Array(Fe);he.set(we,Ue.outOffset);var ke=0;(te=Ue.outOffset+Ue.origLength)%4!=0&&(ke=4-te%4),he.set(new Uint8Array(ke).buffer,Ue.outOffset+Ue.origLength),de=te+ke}),ve.slice(0,de)},Object.defineProperty(n,"__esModule",{value:!0}),n}({}).convert_streams}function yO(n,e){const t={M:2,L:2,Q:4,C:6,Z:0},i={C:"18g,ca,368,1kz",D:"17k,6,2,2+4,5+c,2+6,2+1,10+1,9+f,j+11,2+1,a,2,2+1,15+2,3,j+2,6+3,2+8,2,2,2+1,w+a,4+e,3+3,2,3+2,3+5,23+w,2f+4,3,2+9,2,b,2+3,3,1k+9,6+1,3+1,2+2,2+d,30g,p+y,1,1+1g,f+x,2,sd2+1d,jf3+4,f+3,2+4,2+2,b+3,42,2,4+2,2+1,2,3,t+1,9f+w,2,el+2,2+g,d+2,2l,2+1,5,3+1,2+1,2,3,6,16wm+1v",R:"17m+3,2,2,6+3,m,15+2,2+2,h+h,13,3+8,2,2,3+1,2,p+1,x,5+4,5,a,2,2,3,u,c+2,g+1,5,2+1,4+1,5j,6+1,2,b,2+2,f,2+1,1s+2,2,3+1,7,1ez0,2,2+1,4+4,b,4,3,b,42,2+2,4,3,2+1,2,o+3,ae,ep,x,2o+2,3+1,3,5+1,6",L:"x9u,jff,a,fd,jv",T:"4t,gj+33,7o+4,1+1,7c+18,2,2+1,2+1,2,21+a,2,1b+k,h,2u+6,3+5,3+1,2+3,y,2,v+q,2k+a,1n+8,a,p+3,2+8,2+2,2+4,18+2,3c+e,2+v,1k,2,5+7,5,4+6,b+1,u,1n,5+3,9,l+1,r,3+1,1m,5+1,5+1,3+2,4,v+1,4,c+1,1m,5+4,2+1,5,l+1,n+5,2,1n,3,2+3,9,8+1,c+1,v,1q,d,1f,4,1m+2,6+2,2+3,8+1,c+1,u,1n,3,7,6+1,l+1,t+1,1m+1,5+3,9,l+1,u,21,8+2,2,2j,3+6,d+7,2r,3+8,c+5,23+1,s,2,2,1k+d,2+4,2+1,6+a,2+z,a,2v+3,2+5,2+1,3+1,q+1,5+2,h+3,e,3+1,7,g,jk+2,qb+2,u+2,u+1,v+1,1t+1,2+6,9,3+a,a,1a+2,3c+1,z,3b+2,5+1,a,7+2,64+1,3,1n,2+6,2,2,3+7,7+9,3,1d+d,1,1+1,1s+3,1d,2+4,2,6,15+8,d+1,x+3,3+1,2+2,1l,2+1,4,2+2,1n+7,3+1,49+2,2+c,2+6,5,7,4+1,5j+1l,2+4,ek,3+1,r+4,1e+4,6+5,2p+c,1+3,1,1+2,1+b,2db+2,3y,2p+v,ff+3,30+1,n9x,1+2,2+9,x+1,29+1,7l,4,5,q+1,6,48+1,r+h,e,13+7,q+a,1b+2,1d,3+3,3+1,14,1w+5,3+1,3+1,d,9,1c,1g,2+2,3+1,6+1,2,17+1,9,6n,3,5,fn5,ki+f,h+f,5s,6y+2,ea,6b,46+4,1af+2,2+1,6+3,15+2,5,4m+1,fy+3,as+1,4a+a,4x,1j+e,1l+2,1e+3,3+1,1y+2,11+4,2+7,1r,d+1,1h+8,b+3,3,2o+2,3,2+1,7,4h,4+7,m+1,1m+1,4,12+6,4+4,5g+7,3+2,2,o,2d+5,2,5+1,2+1,6n+3,7+1,2+1,s+1,2e+7,3,2+1,2z,2,3+5,2,2u+2,3+3,2+4,78+8,2+1,75+1,2,5,41+3,3+1,5,x+9,15+5,3+3,9,a+5,3+2,1b+c,2+1,bb+6,2+5,2,2b+l,3+6,2+1,2+1,3f+5,4,2+1,2+6,2,21+1,4,2,9o+1,470+8,at4+4,1o+6,t5,1s+3,2a,f5l+1,2+3,43o+2,a+7,1+7,3+6,v+3,45+2,1j0+1i,5+1d,9,f,n+4,2+e,11t+6,2+g,3+6,2+1,2+4,7a+6,c6+3,15t+6,32+6,1,gzau,v+2n,3l+6n"},r=1,s=2,a=4,l=8,c=16,f=32;let p;function g(F){if(!p){const z={R:s,L:r,D:a,C:c,U:f,T:l};p=new Map;for(let U in i){let O=0;i[U].split(",").forEach($=>{let[Y,q]=$.split("+");Y=parseInt(Y,36),q=q?parseInt(q,36):0,p.set(O+=Y,z[U]);for(let J=q;J--;)p.set(++O,z[U])})}}return p.get(F)||f}const v=1,y=2,S=3,T=4,w=[null,"isol","init","fina","medi"];function M(F){const z=new Uint8Array(F.length);let U=f,O=v,$=-1;for(let Y=0;Y<F.length;Y++){const q=F.codePointAt(Y);let J=g(q)|0,ae=v;J&l||(U&(r|a|c)?J&(s|a|c)?(ae=S,(O===v||O===S)&&z[$]++):J&(r|f)&&(O===y||O===T)&&z[$]--:U&(s|f)&&(O===y||O===T)&&z[$]--,O=z[Y]=ae,U=J,$=Y,q>65535&&Y++)}return z}function A(F,z){const U=[];for(let $=0;$<z.length;$++){const Y=z.codePointAt($);Y>65535&&$++,U.push(n.U.codeToGlyph(F,Y))}const O=F.GSUB;if(O){const{lookupList:$,featureList:Y}=O;let q;const J=/^(rlig|liga|mset|isol|init|fina|medi|half|pres|blws|ccmp)$/,ae=[];Y.forEach(oe=>{if(J.test(oe.tag))for(let ue=0;ue<oe.tab.length;ue++){if(ae[oe.tab[ue]])continue;ae[oe.tab[ue]]=!0;const V=$[oe.tab[ue]],j=/^(isol|init|fina|medi)$/.test(oe.tag);j&&!q&&(q=M(z));for(let W=0;W<U.length;W++)(!q||!j||w[q[W]]===oe.tag)&&n.U._applySubs(U,W,V,$)}})}return U}function b(F,z){const U=new Int16Array(z.length*3);let O=0;for(;O<z.length;O++){const J=z[O];if(J===-1)continue;U[O*3+2]=F.hmtx.aWidth[J];const ae=F.GPOS;if(ae){const oe=ae.lookupList;for(let ue=0;ue<oe.length;ue++){const V=oe[ue];for(let j=0;j<V.tabs.length;j++){const W=V.tabs[j];if(V.ltype===1){if(n._lctf.coverageIndex(W.coverage,J)!==-1&&W.pos){q(W.pos,O);break}}else if(V.ltype===2){let L=null,B=$();if(B!==-1){const te=n._lctf.coverageIndex(W.coverage,z[B]);if(te!==-1){if(W.fmt===1){const ie=W.pairsets[te];for(let re=0;re<ie.length;re++)ie[re].gid2===J&&(L=ie[re])}else if(W.fmt===2){const ie=n.U._getGlyphClass(z[B],W.classDef1),re=n.U._getGlyphClass(J,W.classDef2);L=W.matrix[ie][re]}if(L){L.val1&&q(L.val1,B),L.val2&&q(L.val2,O);break}}}}else if(V.ltype===4){const L=n._lctf.coverageIndex(W.markCoverage,J);if(L!==-1){const B=$(Y),te=B===-1?-1:n._lctf.coverageIndex(W.baseCoverage,z[B]);if(te!==-1){const ie=W.markArray[L],re=W.baseArray[te][ie.markClass];U[O*3]=re.x-ie.x+U[B*3]-U[B*3+2],U[O*3+1]=re.y-ie.y+U[B*3+1];break}}}else if(V.ltype===6){const L=n._lctf.coverageIndex(W.mark1Coverage,J);if(L!==-1){const B=$();if(B!==-1){const te=z[B];if(R(F,te)===3){const ie=n._lctf.coverageIndex(W.mark2Coverage,te);if(ie!==-1){const re=W.mark1Array[L],de=W.mark2Array[ie][re.markClass];U[O*3]=de.x-re.x+U[B*3]-U[B*3+2],U[O*3+1]=de.y-re.y+U[B*3+1];break}}}}}}}}else if(F.kern&&!F.cff){const oe=$();if(oe!==-1){const ue=F.kern.glyph1.indexOf(z[oe]);if(ue!==-1){const V=F.kern.rval[ue].glyph2.indexOf(J);V!==-1&&(U[oe*3+2]+=F.kern.rval[ue].vals[V])}}}}return U;function $(J){for(let ae=O-1;ae>=0;ae--)if(z[ae]!==-1&&(!J||J(z[ae])))return ae;return-1}function Y(J){return R(F,J)===1}function q(J,ae){for(let oe=0;oe<3;oe++)U[ae*3+oe]+=J[oe]||0}}function R(F,z){const U=F.GDEF&&F.GDEF.glyphClassDef;return U?n.U._getGlyphClass(z,U):0}function I(...F){for(let z=0;z<F.length;z++)if(typeof F[z]=="number")return F[z]}function k(F){const z=Object.create(null),U=F["OS/2"],O=F.hhea,$=F.head.unitsPerEm,Y=I(U&&U.sTypoAscender,O&&O.ascender,$),q={unitsPerEm:$,ascender:Y,descender:I(U&&U.sTypoDescender,O&&O.descender,0),capHeight:I(U&&U.sCapHeight,Y),xHeight:I(U&&U.sxHeight,Y),lineGap:I(U&&U.sTypoLineGap,O&&O.lineGap),supportsCodePoint(J){return n.U.codeToGlyph(F,J)>0},forEachGlyph(J,ae,oe,ue){let V=0;const j=1/q.unitsPerEm*ae,W=A(F,J);let L=0;const B=b(F,W);return W.forEach((te,ie)=>{if(te!==-1){let re=z[te];if(!re){const{cmds:de,crds:he}=n.U.glyphToPath(F,te);let ve="",Ve=0;for(let we=0,ke=de.length;we<ke;we++){const Pe=t[de[we]];ve+=de[we];for(let et=1;et<=Pe;et++)ve+=(et>1?",":"")+he[Ve++]}let rt,Ue,Z,Fe;if(he.length){rt=Ue=1/0,Z=Fe=-1/0;for(let we=0,ke=he.length;we<ke;we+=2){let Pe=he[we],et=he[we+1];Pe<rt&&(rt=Pe),et<Ue&&(Ue=et),Pe>Z&&(Z=Pe),et>Fe&&(Fe=et)}}else rt=Z=Ue=Fe=0;re=z[te]={index:te,advanceWidth:F.hmtx.aWidth[te],xMin:rt,yMin:Ue,xMax:Z,yMax:Fe,path:ve}}ue.call(null,re,V+B[ie*3]*j,B[ie*3+1]*j,L),V+=B[ie*3+2]*j,oe&&(V+=oe*ae)}L+=J.codePointAt(L)>65535?2:1}),V}};return q}return function(z){const U=new Uint8Array(z,0,4),O=n._bin.readASCII(U,0,4);if(O==="wOFF")z=e(z);else if(O==="wOF2")throw new Error("woff2 fonts not supported");return k(n.parse(z)[0])}}const xO=xh({name:"Typr Font Parser",dependencies:[gO,vO,yO],init(n,e,t){const i=n(),r=e();return t(i,r)}});/*!
Custom bundle of @unicode-font-resolver/client v1.0.2 (https://github.com/lojjic/unicode-font-resolver)
for use in Troika text rendering. 
Original MIT license applies
*/function SO(){return function(n){var e=function(){this.buckets=new Map};e.prototype.add=function(b){var R=b>>5;this.buckets.set(R,(this.buckets.get(R)||0)|1<<(31&b))},e.prototype.has=function(b){var R=this.buckets.get(b>>5);return R!==void 0&&(R&1<<(31&b))!=0},e.prototype.serialize=function(){var b=[];return this.buckets.forEach(function(R,I){b.push((+I).toString(36)+":"+R.toString(36))}),b.join(",")},e.prototype.deserialize=function(b){var R=this;this.buckets.clear(),b.split(",").forEach(function(I){var k=I.split(":");R.buckets.set(parseInt(k[0],36),parseInt(k[1],36))})};var t=Math.pow(2,8),i=t-1,r=~i;function s(b){var R=function(k){return k&r}(b).toString(16),I=function(k){return(k&r)+t-1}(b).toString(16);return"codepoint-index/plane"+(b>>16)+"/"+R+"-"+I+".json"}function a(b,R){var I=b&i,k=R.codePointAt(I/6|0);return((k=(k||48)-48)&1<<I%6)!=0}function l(b,R){var I;(I=b,I.replace(/U\+/gi,"").replace(/^,+|,+$/g,"").split(/,+/).map(function(k){return k.split("-").map(function(F){return parseInt(F.trim(),16)})})).forEach(function(k){var F=k[0],z=k[1];z===void 0&&(z=F),R(F,z)})}function c(b,R){l(b,function(I,k){for(var F=I;F<=k;F++)R(F)})}var f={},p={},g=new WeakMap,v="https://cdn.jsdelivr.net/gh/lojjic/unicode-font-resolver@v1.0.1/packages/data";function y(b){var R=g.get(b);return R||(R=new e,c(b.ranges,function(I){return R.add(I)}),g.set(b,R)),R}var S,T=new Map;function w(b,R,I){return b[R]?R:b[I]?I:function(k){for(var F in k)return F}(b)}function M(b,R){var I=R;if(!b.includes(I)){I=1/0;for(var k=0;k<b.length;k++)Math.abs(b[k]-R)<Math.abs(I-R)&&(I=b[k])}return I}function A(b){return S||(S=new Set,c("9-D,20,85,A0,1680,2000-200A,2028-202F,205F,3000",function(R){S.add(R)})),S.has(b)}return n.CodePointSet=e,n.clearCache=function(){f={},p={}},n.getFontsForString=function(b,R){R===void 0&&(R={});var I,k=R.lang;k===void 0&&(k=new RegExp("\\p{Script=Hangul}","u").test(I=b)?"ko":new RegExp("\\p{Script=Hiragana}|\\p{Script=Katakana}","u").test(I)?"ja":"en");var F=R.category;F===void 0&&(F="sans-serif");var z=R.style;z===void 0&&(z="normal");var U=R.weight;U===void 0&&(U=400);var O=(R.dataUrl||v).replace(/\/$/g,""),$=new Map,Y=new Uint8Array(b.length),q={},J={},ae=new Array(b.length),oe=new Map,ue=!1;function V(L){var B=T.get(L);return B||(B=fetch(O+"/"+L).then(function(te){if(!te.ok)throw new Error(te.statusText);return te.json().then(function(ie){if(!Array.isArray(ie)||ie[0]!==1)throw new Error("Incorrect schema version; need 1, got "+ie[0]);return ie[1]})}).catch(function(te){if(O!==v)return ue||(console.error('unicode-font-resolver: Failed loading from dataUrl "'+O+'", trying default CDN. '+te.message),ue=!0),O=v,T.delete(L),V(L);throw te}),T.set(L,B)),B}for(var j=function(L){var B=b.codePointAt(L),te=s(B);ae[L]=te,f[te]||oe.has(te)||oe.set(te,V(te).then(function(ie){f[te]=ie})),B>65535&&(L++,W=L)},W=0;W<b.length;W++)j(W);return Promise.all(oe.values()).then(function(){oe.clear();for(var L=function(te){var ie=b.codePointAt(te),re=null,de=f[ae[te]],he=void 0;for(var ve in de){var Ve=J[ve];if(Ve===void 0&&(Ve=J[ve]=new RegExp(ve).test(k||"en")),Ve){for(var rt in he=ve,de[ve])if(a(ie,de[ve][rt])){re=rt;break}break}}if(!re){e:for(var Ue in de)if(Ue!==he){for(var Z in de[Ue])if(a(ie,de[Ue][Z])){re=Z;break e}}}re||(console.debug("No font coverage for U+"+ie.toString(16)),re="latin"),ae[te]=re,p[re]||oe.has(re)||oe.set(re,V("font-meta/"+re+".json").then(function(Fe){p[re]=Fe})),ie>65535&&(te++,B=te)},B=0;B<b.length;B++)L(B);return Promise.all(oe.values())}).then(function(){for(var L,B=null,te=0;te<b.length;te++){var ie=b.codePointAt(te);if(B&&(A(ie)||y(B).has(ie)))Y[te]=Y[te-1];else{B=p[ae[te]];var re=q[B.id];if(!re){var de=B.typeforms,he=w(de,F,"sans-serif"),ve=w(de[he],z,"normal"),Ve=M((L=de[he])===null||L===void 0?void 0:L[ve],U);re=q[B.id]=O+"/font-files/"+B.id+"/"+he+"."+ve+"."+Ve+".woff"}var rt=$.get(re);rt==null&&(rt=$.size,$.set(re,rt)),Y[te]=rt}ie>65535&&(te++,Y[te]=Y[te-1])}return{fontUrls:Array.from($.keys()),chars:Y}})},Object.defineProperty(n,"__esModule",{value:!0}),n}({})}function _O(n,e){const t=Object.create(null),i=Object.create(null);function r(a,l){const c=f=>{console.error(`Failure loading font ${a}`,f)};try{const f=new XMLHttpRequest;f.open("get",a,!0),f.responseType="arraybuffer",f.onload=function(){if(f.status>=400)c(new Error(f.statusText));else if(f.status>0)try{const p=n(f.response);p.src=a,l(p)}catch(p){c(p)}},f.onerror=c,f.send()}catch(f){c(f)}}function s(a,l){let c=t[a];c?l(c):i[a]?i[a].push(l):(i[a]=[l],r(a,f=>{f.src=a,t[a]=f,i[a].forEach(p=>p(f)),delete i[a]}))}return function(a,l,{lang:c,fonts:f=[],style:p="normal",weight:g="normal",unicodeFontsURL:v}={}){const y=new Uint8Array(a.length),S=[];a.length||A();const T=new Map,w=[];if(p!=="italic"&&(p="normal"),typeof g!="number"&&(g=g==="bold"?700:400),f&&!Array.isArray(f)&&(f=[f]),f=f.slice().filter(R=>!R.lang||R.lang.test(c)).reverse(),f.length){let F=0;(function z(U=0){for(let O=U,$=a.length;O<$;O++){const Y=a.codePointAt(O);if(F===1&&S[y[O-1]].supportsCodePoint(Y)||O>0&&/\s/.test(a[O]))y[O]=y[O-1],F===2&&(w[w.length-1][1]=O);else for(let q=y[O],J=f.length;q<=J;q++)if(q===J){const ae=F===2?w[w.length-1]:w[w.length]=[O,O];ae[1]=O,F=2}else{y[O]=q;const{src:ae,unicodeRange:oe}=f[q];if(!oe||b(Y,oe)){const ue=t[ae];if(!ue){s(ae,()=>{z(O)});return}if(ue.supportsCodePoint(Y)){let V=T.get(ue);typeof V!="number"&&(V=S.length,S.push(ue),T.set(ue,V)),y[O]=V,F=1;break}}}Y>65535&&O+1<$&&(y[O+1]=y[O],O++,F===2&&(w[w.length-1][1]=O))}M()})()}else w.push([0,a.length-1]),M();function M(){if(w.length){const R=w.map(I=>a.substring(I[0],I[1]+1)).join(`
`);e.getFontsForString(R,{lang:c||void 0,style:p,weight:g,dataUrl:v}).then(({fontUrls:I,chars:k})=>{const F=S.length;let z=0;w.forEach(O=>{for(let $=0,Y=O[1]-O[0];$<=Y;$++)y[O[0]+$]=k[z++]+F;z++});let U=0;I.forEach((O,$)=>{s(O,Y=>{S[$+F]=Y,++U===I.length&&A()})})})}else A()}function A(){l({chars:y,fonts:S})}function b(R,I){for(let k=0;k<I.length;k++){const[F,z=F]=I[k];if(F<=R&&R<=z)return!0}return!1}}}const MO=xh({name:"FontResolver",dependencies:[_O,xO,SO],init(n,e,t){return n(e,t())}});function wO(n,e){const i=/[\u00AD\u034F\u061C\u115F-\u1160\u17B4-\u17B5\u180B-\u180E\u200B-\u200F\u202A-\u202E\u2060-\u206F\u3164\uFE00-\uFE0F\uFEFF\uFFA0\uFFF0-\uFFF8]/,r="[^\\S\\u00A0]",s=new RegExp(`${r}|[\\-\\u007C\\u00AD\\u2010\\u2012-\\u2014\\u2027\\u2056\\u2E17\\u2E40]`);function a({text:S,lang:T,fonts:w,style:M,weight:A,preResolvedFonts:b,unicodeFontsURL:R},I){const k=({chars:F,fonts:z})=>{let U,O;const $=[];for(let Y=0;Y<F.length;Y++)F[Y]!==O?(O=F[Y],$.push(U={start:Y,end:Y,fontObj:z[F[Y]]})):U.end=Y;I($)};b?k(b):n(S,k,{lang:T,fonts:w,style:M,weight:A,unicodeFontsURL:R})}function l({text:S="",font:T,lang:w,sdfGlyphSize:M=64,fontSize:A=400,fontWeight:b=1,fontStyle:R="normal",letterSpacing:I=0,lineHeight:k="normal",maxWidth:F=1/0,direction:z,textAlign:U="left",textIndent:O=0,whiteSpace:$="normal",overflowWrap:Y="normal",anchorX:q=0,anchorY:J=0,metricsOnly:ae=!1,unicodeFontsURL:oe,preResolvedFonts:ue=null,includeCaretPositions:V=!1,chunkedBoundsSize:j=8192,colorRanges:W=null},L){const B=g(),te={fontLoad:0,typesetting:0};S.indexOf("\r")>-1&&(console.info("Typesetter: got text with \\r chars; normalizing to \\n"),S=S.replace(/\r\n/g,`
`).replace(/\r/g,`
`)),A=+A,I=+I,F=+F,k=k||"normal",O=+O,a({text:S,lang:w,style:R,weight:b,fonts:typeof T=="string"?[{src:T}]:T,unicodeFontsURL:oe,preResolvedFonts:ue},ie=>{te.fontLoad=g()-B;const re=isFinite(F);let de=null,he=null,ve=null,Ve=null,rt=null,Ue=null,Z=null,Fe=null,we=0,ke=0,Pe=$!=="nowrap";const et=new Map,Le=g();let Xe=O,Ze=0,Ae=new v;const ht=[Ae];ie.forEach(be=>{const{fontObj:Ne}=be,{ascender:Ke,descender:We,unitsPerEm:xe,lineGap:ct,capHeight:nt,xHeight:tt}=Ne;let Ye=et.get(Ne);if(!Ye){const je=A/xe,Se=k==="normal"?(Ke-We+ct)*je:k*A,at=(Se-(Ke-We)*je)/2,Qe=Math.min(Se,(Ke-We)*je),mt=(Ke+We)/2*je+Qe/2;Ye={index:et.size,src:Ne.src,fontObj:Ne,fontSizeMult:je,unitsPerEm:xe,ascender:Ke*je,descender:We*je,capHeight:nt*je,xHeight:tt*je,lineHeight:Se,baseline:-at-Ke*je,caretTop:mt,caretBottom:mt-Qe},et.set(Ne,Ye)}const{fontSizeMult:st}=Ye,_t=S.slice(be.start,be.end+1);let Wt,le;Ne.forEachGlyph(_t,A,I,(je,Se,at,Qe)=>{Se+=Ze,Qe+=be.start,Wt=Se,le=je;const mt=S.charAt(Qe),Gt=je.advanceWidth*st,Vt=Ae.count;let Lt;if("isEmpty"in je||(je.isWhitespace=!!mt&&new RegExp(r).test(mt),je.canBreakAfter=!!mt&&s.test(mt),je.isEmpty=je.xMin===je.xMax||je.yMin===je.yMax||i.test(mt)),!je.isWhitespace&&!je.isEmpty&&ke++,Pe&&re&&!je.isWhitespace&&Se+Gt+Xe>F&&Vt){if(Ae.glyphAt(Vt-1).glyphObj.canBreakAfter)Lt=new v,Xe=-Se;else for(let wn=Vt;wn--;)if(wn===0&&Y==="break-word"){Lt=new v,Xe=-Se;break}else if(Ae.glyphAt(wn).glyphObj.canBreakAfter){Lt=Ae.splitAt(wn+1);const ln=Lt.glyphAt(0).x;Xe-=ln;for(let Un=Lt.count;Un--;)Lt.glyphAt(Un).x-=ln;break}Lt&&(Ae.isSoftWrapped=!0,Ae=Lt,ht.push(Ae),we=F)}let Dt=Ae.glyphAt(Ae.count);Dt.glyphObj=je,Dt.x=Se+Xe,Dt.y=at,Dt.width=Gt,Dt.charIndex=Qe,Dt.fontData=Ye,mt===`
`&&(Ae=new v,ht.push(Ae),Xe=-(Se+Gt+I*A)+O)}),Ze=Wt+le.advanceWidth*st+I*A});let X=0;ht.forEach(be=>{let Ne=!0;for(let Ke=be.count;Ke--;){const We=be.glyphAt(Ke);Ne&&!We.glyphObj.isWhitespace&&(be.width=We.x+We.width,be.width>we&&(we=be.width),Ne=!1);let{lineHeight:xe,capHeight:ct,xHeight:nt,baseline:tt}=We.fontData;xe>be.lineHeight&&(be.lineHeight=xe);const Ye=tt-be.baseline;Ye<0&&(be.baseline+=Ye,be.cap+=Ye,be.ex+=Ye),be.cap=Math.max(be.cap,be.baseline+ct),be.ex=Math.max(be.ex,be.baseline+nt)}be.baseline-=X,be.cap-=X,be.ex-=X,X+=be.lineHeight});let H=0,ce=0;if(q&&(typeof q=="number"?H=-q:typeof q=="string"&&(H=-we*(q==="left"?0:q==="center"?.5:q==="right"?1:f(q)))),J&&(typeof J=="number"?ce=-J:typeof J=="string"&&(ce=J==="top"?0:J==="top-baseline"?-ht[0].baseline:J==="top-cap"?-ht[0].cap:J==="top-ex"?-ht[0].ex:J==="middle"?X/2:J==="bottom"?X:J==="bottom-baseline"?-ht[ht.length-1].baseline:f(J)*X)),!ae){const be=e.getEmbeddingLevels(S,z);de=new Uint16Array(ke),he=new Uint8Array(ke),ve=new Float32Array(ke*2),Ve={},Z=[1/0,1/0,-1/0,-1/0],Fe=[],V&&(Ue=new Float32Array(S.length*4)),W&&(rt=new Uint8Array(ke*3));let Ne=0,Ke=-1,We=-1,xe,ct;if(ht.forEach((nt,tt)=>{let{count:Ye,width:st}=nt;if(Ye>0){let _t=0;for(let Qe=Ye;Qe--&&nt.glyphAt(Qe).glyphObj.isWhitespace;)_t++;let Wt=0,le=0;if(U==="center")Wt=(we-st)/2;else if(U==="right")Wt=we-st;else if(U==="justify"&&nt.isSoftWrapped){let Qe=0;for(let mt=Ye-_t;mt--;)nt.glyphAt(mt).glyphObj.isWhitespace&&Qe++;le=(we-st)/Qe}if(le||Wt){let Qe=0;for(let mt=0;mt<Ye;mt++){let Gt=nt.glyphAt(mt);const Vt=Gt.glyphObj;Gt.x+=Wt+Qe,le!==0&&Vt.isWhitespace&&mt<Ye-_t&&(Qe+=le,Gt.width+=le)}}const je=e.getReorderSegments(S,be,nt.glyphAt(0).charIndex,nt.glyphAt(nt.count-1).charIndex);for(let Qe=0;Qe<je.length;Qe++){const[mt,Gt]=je[Qe];let Vt=1/0,Lt=-1/0;for(let Dt=0;Dt<Ye;Dt++)if(nt.glyphAt(Dt).charIndex>=mt){let wn=Dt,ln=Dt;for(;ln<Ye;ln++){let Un=nt.glyphAt(ln);if(Un.charIndex>Gt)break;ln<Ye-_t&&(Vt=Math.min(Vt,Un.x),Lt=Math.max(Lt,Un.x+Un.width))}for(let Un=wn;Un<ln;Un++){const hi=nt.glyphAt(Un);hi.x=Lt-(hi.x+hi.width-Vt)}break}}let Se;const at=Qe=>Se=Qe;for(let Qe=0;Qe<Ye;Qe++){const mt=nt.glyphAt(Qe);Se=mt.glyphObj;const Gt=Se.index,Vt=be.levels[mt.charIndex]&1;if(Vt){const Lt=e.getMirroredCharacter(S[mt.charIndex]);Lt&&mt.fontData.fontObj.forEachGlyph(Lt,0,0,at)}if(V){const{charIndex:Lt,fontData:Dt}=mt,wn=mt.x+H,ln=mt.x+mt.width+H;Ue[Lt*4]=Vt?ln:wn,Ue[Lt*4+1]=Vt?wn:ln,Ue[Lt*4+2]=nt.baseline+Dt.caretBottom+ce,Ue[Lt*4+3]=nt.baseline+Dt.caretTop+ce;const Un=Lt-Ke;Un>1&&p(Ue,Ke,Un),Ke=Lt}if(W){const{charIndex:Lt}=mt;for(;Lt>We;)We++,W.hasOwnProperty(We)&&(ct=W[We])}if(!Se.isWhitespace&&!Se.isEmpty){const Lt=Ne++,{fontSizeMult:Dt,src:wn,index:ln}=mt.fontData,Un=Ve[wn]||(Ve[wn]={});Un[Gt]||(Un[Gt]={path:Se.path,pathBounds:[Se.xMin,Se.yMin,Se.xMax,Se.yMax]});const hi=mt.x+H,Fr=mt.y+nt.baseline+ce;ve[Lt*2]=hi,ve[Lt*2+1]=Fr;const Jn=hi+Se.xMin*Dt,tr=Fr+Se.yMin*Dt,ri=hi+Se.xMax*Dt,nr=Fr+Se.yMax*Dt;Jn<Z[0]&&(Z[0]=Jn),tr<Z[1]&&(Z[1]=tr),ri>Z[2]&&(Z[2]=ri),nr>Z[3]&&(Z[3]=nr),Lt%j===0&&(xe={start:Lt,end:Lt,rect:[1/0,1/0,-1/0,-1/0]},Fe.push(xe)),xe.end++;const Si=xe.rect;if(Jn<Si[0]&&(Si[0]=Jn),tr<Si[1]&&(Si[1]=tr),ri>Si[2]&&(Si[2]=ri),nr>Si[3]&&(Si[3]=nr),de[Lt]=Gt,he[Lt]=ln,W){const _s=Lt*3;rt[_s]=ct>>16&255,rt[_s+1]=ct>>8&255,rt[_s+2]=ct&255}}}}}),Ue){const nt=S.length-Ke;nt>1&&p(Ue,Ke,nt)}}const qe=[];et.forEach(({index:be,src:Ne,unitsPerEm:Ke,ascender:We,descender:xe,lineHeight:ct,capHeight:nt,xHeight:tt})=>{qe[be]={src:Ne,unitsPerEm:Ke,ascender:We,descender:xe,lineHeight:ct,capHeight:nt,xHeight:tt}}),te.typesetting=g()-Le,L({glyphIds:de,glyphFontIndices:he,glyphPositions:ve,glyphData:Ve,fontData:qe,caretPositions:Ue,glyphColors:rt,chunkedBounds:Fe,fontSize:A,topBaseline:ce+ht[0].baseline,blockBounds:[H,ce-X,H+we,ce],visibleBounds:Z,timings:te})})}function c(S,T){l({...S,metricsOnly:!0},w=>{const[M,A,b,R]=w.blockBounds;T({width:b-M,height:R-A})})}function f(S){let T=S.match(/^([\d.]+)%$/),w=T?parseFloat(T[1]):NaN;return isNaN(w)?0:w/100}function p(S,T,w){const M=S[T*4],A=S[T*4+1],b=S[T*4+2],R=S[T*4+3],I=(A-M)/w;for(let k=0;k<w;k++){const F=(T+k)*4;S[F]=M+I*k,S[F+1]=M+I*(k+1),S[F+2]=b,S[F+3]=R}}function g(){return(self.performance||Date).now()}function v(){this.data=[]}const y=["glyphObj","x","y","width","charIndex","fontData"];return v.prototype={width:0,lineHeight:0,baseline:0,cap:0,ex:0,isSoftWrapped:!1,get count(){return Math.ceil(this.data.length/y.length)},glyphAt(S){let T=v.flyweight;return T.data=this.data,T.index=S,T},splitAt(S){let T=new v;return T.data=this.data.splice(S*y.length),T}},v.flyweight=y.reduce((S,T,w,M)=>(Object.defineProperty(S,T,{get(){return this.data[this.index*y.length+w]},set(A){this.data[this.index*y.length+w]=A}}),S),{data:null,index:0}),{typeset:l,measure:c}}const gc=()=>(self.performance||Date).now(),Hv=eb();let iw;function TO(n,e,t,i,r,s,a,l,c,f,p=!0){return p?bO(n,e,t,i,r,s,a,l,c,f).then(null,g=>(iw||(console.warn("WebGL SDF generation failed, falling back to JS",g),iw=!0),sw(n,e,t,i,r,s,a,l,c,f))):sw(n,e,t,i,r,s,a,l,c,f)}const jg=[],EO=5;let Ex=0;function nb(){const n=gc();for(;jg.length&&gc()-n<EO;)jg.shift()();Ex=jg.length?setTimeout(nb,0):0}const bO=(...n)=>new Promise((e,t)=>{jg.push(()=>{const i=gc();try{Hv.webgl.generateIntoCanvas(...n),e({timing:gc()-i})}catch(r){t(r)}}),Ex||(Ex=setTimeout(nb,0))}),AO=4,CO=2e3,rw={};let RO=0;function sw(n,e,t,i,r,s,a,l,c,f){const p="TroikaTextSDFGenerator_JS_"+RO++%AO;let g=rw[p];return g||(g=rw[p]={workerModule:xh({name:p,workerId:p,dependencies:[eb,gc],init(v,y){const S=v().javascript.generate;return function(...T){const w=y();return{textureData:S(...T),timing:y()-w}}},getTransferables(v){return[v.textureData.buffer]}}),requests:0,idleTimer:null}),g.requests++,clearTimeout(g.idleTimer),g.workerModule(n,e,t,i,r,s).then(({textureData:v,timing:y})=>{const S=gc(),T=new Uint8Array(v.length*4);for(let w=0;w<v.length;w++)T[w*4+f]=v[w];return Hv.webglUtils.renderImageData(a,T,l,c,n,e,1<<3-f),y+=gc()-S,--g.requests===0&&(g.idleTimer=setTimeout(()=>{aO(p)},CO)),{timing:y}})}function PO(n){n._warm||(Hv.webgl.isSupported(n),n._warm=!0)}const DO=Hv.webglUtils.resizeWebGLCanvasWithoutClearing,Vd={unicodeFontsURL:null,sdfGlyphSize:64,sdfMargin:1/16,sdfExponent:9,textureWidth:2048},LO=new Je;function Vf(){return(self.performance||Date).now()}const aw=Object.create(null);function ib(n,e){n=NO({},n);const t=Vf(),i=[];if(n.font&&i.push({label:"user",src:FO(n.font)}),n.font=i,n.text=""+n.text,n.sdfGlyphSize=n.sdfGlyphSize||Vd.sdfGlyphSize,n.unicodeFontsURL=n.unicodeFontsURL||Vd.unicodeFontsURL,n.colorRanges!=null){let v={};for(let y in n.colorRanges)if(n.colorRanges.hasOwnProperty(y)){let S=n.colorRanges[y];typeof S!="number"&&(S=LO.set(S).getHex()),v[y]=S}n.colorRanges=v}Object.freeze(n);const{textureWidth:r,sdfExponent:s}=Vd,{sdfGlyphSize:a}=n,l=r/a*4;let c=aw[a];if(!c){const v=document.createElement("canvas");v.width=r,v.height=a*256/l,c=aw[a]={glyphCount:0,sdfGlyphSize:a,sdfCanvas:v,sdfTexture:new Qn(v,void 0,void 0,void 0,Et,Et),contextLost:!1,glyphsByFont:new Map},c.sdfTexture.generateMipmaps=!1,IO(c)}const{sdfTexture:f,sdfCanvas:p}=c;ab(n).then(v=>{const{glyphIds:y,glyphFontIndices:S,fontData:T,glyphPositions:w,fontSize:M,timings:A}=v,b=[],R=new Float32Array(y.length*4);let I=0,k=0;const F=Vf(),z=T.map(q=>{let J=c.glyphsByFont.get(q.src);return J||c.glyphsByFont.set(q.src,J=new Map),J});y.forEach((q,J)=>{const ae=S[J],{src:oe,unitsPerEm:ue}=T[ae];let V=z[ae].get(q);if(!V){const{path:te,pathBounds:ie}=v.glyphData[oe][q],re=Math.max(ie[2]-ie[0],ie[3]-ie[1])/a*(Vd.sdfMargin*a+.5),de=c.glyphCount++,he=[ie[0]-re,ie[1]-re,ie[2]+re,ie[3]+re];z[ae].set(q,V={path:te,atlasIndex:de,sdfViewBox:he}),b.push(V)}const{sdfViewBox:j}=V,W=w[k++],L=w[k++],B=M/ue;R[I++]=W+j[0]*B,R[I++]=L+j[1]*B,R[I++]=W+j[2]*B,R[I++]=L+j[3]*B,y[J]=V.atlasIndex}),A.quads=(A.quads||0)+(Vf()-F);const U=Vf();A.sdf={};const O=p.height,$=Math.ceil(c.glyphCount/l),Y=Math.pow(2,Math.ceil(Math.log2($*a)));Y>O&&(console.info(`Increasing SDF texture size ${O}->${Y}`),DO(p,r,Y),f.dispose()),Promise.all(b.map(q=>rb(q,c,n.gpuAccelerateSDF).then(({timing:J})=>{A.sdf[q.atlasIndex]=J}))).then(()=>{b.length&&!c.contextLost&&(sb(c),f.needsUpdate=!0),A.sdfTotal=Vf()-U,A.total=Vf()-t,e(Object.freeze({parameters:n,sdfTexture:f,sdfGlyphSize:a,sdfExponent:s,glyphBounds:R,glyphAtlasIndices:y,glyphColors:v.glyphColors,caretPositions:v.caretPositions,chunkedBounds:v.chunkedBounds,ascender:v.ascender,descender:v.descender,lineHeight:v.lineHeight,capHeight:v.capHeight,xHeight:v.xHeight,topBaseline:v.topBaseline,blockBounds:v.blockBounds,visibleBounds:v.visibleBounds,timings:v.timings}))})}),Promise.resolve().then(()=>{c.contextLost||PO(p)})}function rb({path:n,atlasIndex:e,sdfViewBox:t},{sdfGlyphSize:i,sdfCanvas:r,contextLost:s},a){if(s)return Promise.resolve({timing:-1});const{textureWidth:l,sdfExponent:c}=Vd,f=Math.max(t[2]-t[0],t[3]-t[1]),p=Math.floor(e/4),g=p%(l/i)*i,v=Math.floor(p/(l/i))*i,y=e%4;return TO(i,i,n,t,f,c,r,g,v,y,a)}function IO(n){const e=n.sdfCanvas;e.addEventListener("webglcontextlost",t=>{console.log("Context Lost",t),t.preventDefault(),n.contextLost=!0}),e.addEventListener("webglcontextrestored",t=>{console.log("Context Restored",t),n.contextLost=!1;const i=[];n.glyphsByFont.forEach(r=>{r.forEach(s=>{i.push(rb(s,n,!0))})}),Promise.all(i).then(()=>{sb(n),n.sdfTexture.needsUpdate=!0})})}function UO({font:n,characters:e,sdfGlyphSize:t},i){let r=Array.isArray(e)?e.join(`
`):""+e;ib({font:n,sdfGlyphSize:t,text:r},i)}function NO(n,e){for(let t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n}let bg;function FO(n){return bg||(bg=typeof document>"u"?{}:document.createElement("a")),bg.href=n,bg.href}function sb(n){if(typeof createImageBitmap!="function"){console.info("Safari<15: applying SDF canvas workaround");const{sdfCanvas:e,sdfTexture:t}=n,{width:i,height:r}=e,s=n.sdfCanvas.getContext("webgl");let a=t.image.data;(!a||a.length!==i*r*4)&&(a=new Uint8Array(i*r*4),t.image={width:i,height:r,data:a},t.flipY=!1,t.isDataTexture=!0),s.readPixels(0,0,i,r,s.RGBA,s.UNSIGNED_BYTE,a)}}const kO=xh({name:"Typesetter",dependencies:[wO,MO,lO],init(n,e,t){return n(e,t())}}),ab=xh({name:"Typesetter",dependencies:[kO],init(n){return function(e){return new Promise(t=>{n.typeset(e,t)})}},getTransferables(n){const e=[];for(let t in n)n[t]&&n[t].buffer&&e.push(n[t].buffer);return e}});ab.onMainThread;const ow={};function OO(n){let e=ow[n];return e||(e=ow[n]=new ru(1,1,n,n).translate(.5,.5,0)),e}const BO="aTroikaGlyphBounds",lw="aTroikaGlyphIndex",zO="aTroikaGlyphColor";class HO extends R1{constructor(){super(),this.detail=1,this.curveRadius=0,this.groups=[{start:0,count:1/0,materialIndex:0},{start:0,count:1/0,materialIndex:1}],this.boundingSphere=new Os,this.boundingBox=new aa}computeBoundingSphere(){}computeBoundingBox(){}set detail(e){if(e!==this._detail){this._detail=e,(typeof e!="number"||e<1)&&(e=1);let t=OO(e);["position","normal","uv"].forEach(i=>{this.attributes[i]=t.attributes[i].clone()}),this.setIndex(t.getIndex().clone())}}get detail(){return this._detail}set curveRadius(e){e!==this._curveRadius&&(this._curveRadius=e,this._updateBounds())}get curveRadius(){return this._curveRadius}updateGlyphs(e,t,i,r,s){this.updateAttributeData(BO,e,4),this.updateAttributeData(lw,t,1),this.updateAttributeData(zO,s,3),this._blockBounds=i,this._chunkedBounds=r,this.instanceCount=t.length,this._updateBounds()}_updateBounds(){const e=this._blockBounds;if(e){const{curveRadius:t,boundingBox:i}=this;if(t){const{PI:r,floor:s,min:a,max:l,sin:c,cos:f}=Math,p=r/2,g=r*2,v=Math.abs(t),y=e[0]/v,S=e[2]/v,T=s((y+p)/g)!==s((S+p)/g)?-v:a(c(y)*v,c(S)*v),w=s((y-p)/g)!==s((S-p)/g)?v:l(c(y)*v,c(S)*v),M=s((y+r)/g)!==s((S+r)/g)?v*2:l(v-f(y)*v,v-f(S)*v);i.min.set(T,e[1],t<0?-M:0),i.max.set(w,e[3],t<0?0:M)}else i.min.set(e[0],e[1],0),i.max.set(e[2],e[3],0);i.getBoundingSphere(this.boundingSphere)}}applyClipRect(e){let t=this.getAttribute(lw).count,i=this._chunkedBounds;if(i)for(let r=i.length;r--;){t=i[r].end;let s=i[r].rect;if(s[1]<e.w&&s[3]>e.y&&s[0]<e.z&&s[2]>e.x)break}this.instanceCount=t}updateAttributeData(e,t,i){const r=this.getAttribute(e);t?r&&r.array.length===t.length?(r.array.set(t),r.needsUpdate=!0):(this.setAttribute(e,new yc(t,i)),delete this._maxInstanceCount,this.dispose()):r&&this.deleteAttribute(e)}}const GO=`
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform vec4 uTroikaTotalBounds;
uniform vec4 uTroikaClipRect;
uniform mat3 uTroikaOrient;
uniform bool uTroikaUseGlyphColors;
uniform float uTroikaEdgeOffset;
uniform float uTroikaBlurRadius;
uniform vec2 uTroikaPositionOffset;
uniform float uTroikaCurveRadius;
attribute vec4 aTroikaGlyphBounds;
attribute float aTroikaGlyphIndex;
attribute vec3 aTroikaGlyphColor;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec3 vTroikaGlyphColor;
varying vec2 vTroikaGlyphDimensions;
`,VO=`
vec4 bounds = aTroikaGlyphBounds;
bounds.xz += uTroikaPositionOffset.x;
bounds.yw -= uTroikaPositionOffset.y;

vec4 outlineBounds = vec4(
  bounds.xy - uTroikaEdgeOffset - uTroikaBlurRadius,
  bounds.zw + uTroikaEdgeOffset + uTroikaBlurRadius
);
vec4 clippedBounds = vec4(
  clamp(outlineBounds.xy, uTroikaClipRect.xy, uTroikaClipRect.zw),
  clamp(outlineBounds.zw, uTroikaClipRect.xy, uTroikaClipRect.zw)
);

vec2 clippedXY = (mix(clippedBounds.xy, clippedBounds.zw, position.xy) - bounds.xy) / (bounds.zw - bounds.xy);

position.xy = mix(bounds.xy, bounds.zw, clippedXY);

uv = (position.xy - uTroikaTotalBounds.xy) / (uTroikaTotalBounds.zw - uTroikaTotalBounds.xy);

float rad = uTroikaCurveRadius;
if (rad != 0.0) {
  float angle = position.x / rad;
  position.xz = vec2(sin(angle) * rad, rad - cos(angle) * rad);
  normal.xz = vec2(sin(angle), cos(angle));
}
  
position = uTroikaOrient * position;
normal = uTroikaOrient * normal;

vTroikaGlyphUV = clippedXY.xy;
vTroikaGlyphDimensions = vec2(bounds[2] - bounds[0], bounds[3] - bounds[1]);


float txCols = uTroikaSDFTextureSize.x / uTroikaSDFGlyphSize;
vec2 txUvPerSquare = uTroikaSDFGlyphSize / uTroikaSDFTextureSize;
vec2 txStartUV = txUvPerSquare * vec2(
  mod(floor(aTroikaGlyphIndex / 4.0), txCols),
  floor(floor(aTroikaGlyphIndex / 4.0) / txCols)
);
vTroikaTextureUVBounds = vec4(txStartUV, vec2(txStartUV) + txUvPerSquare);
vTroikaTextureChannel = mod(aTroikaGlyphIndex, 4.0);
`,WO=`
uniform sampler2D uTroikaSDFTexture;
uniform vec2 uTroikaSDFTextureSize;
uniform float uTroikaSDFGlyphSize;
uniform float uTroikaSDFExponent;
uniform float uTroikaEdgeOffset;
uniform float uTroikaFillOpacity;
uniform float uTroikaBlurRadius;
uniform vec3 uTroikaStrokeColor;
uniform float uTroikaStrokeWidth;
uniform float uTroikaStrokeOpacity;
uniform bool uTroikaSDFDebug;
varying vec2 vTroikaGlyphUV;
varying vec4 vTroikaTextureUVBounds;
varying float vTroikaTextureChannel;
varying vec2 vTroikaGlyphDimensions;

float troikaSdfValueToSignedDistance(float alpha) {
  // Inverse of exponential encoding in webgl-sdf-generator
  
  float maxDimension = max(vTroikaGlyphDimensions.x, vTroikaGlyphDimensions.y);
  float absDist = (1.0 - pow(2.0 * (alpha > 0.5 ? 1.0 - alpha : alpha), 1.0 / uTroikaSDFExponent)) * maxDimension;
  float signedDist = absDist * (alpha > 0.5 ? -1.0 : 1.0);
  return signedDist;
}

float troikaGlyphUvToSdfValue(vec2 glyphUV) {
  vec2 textureUV = mix(vTroikaTextureUVBounds.xy, vTroikaTextureUVBounds.zw, glyphUV);
  vec4 rgba = texture2D(uTroikaSDFTexture, textureUV);
  float ch = floor(vTroikaTextureChannel + 0.5); //NOTE: can't use round() in WebGL1
  return ch == 0.0 ? rgba.r : ch == 1.0 ? rgba.g : ch == 2.0 ? rgba.b : rgba.a;
}

float troikaGlyphUvToDistance(vec2 uv) {
  return troikaSdfValueToSignedDistance(troikaGlyphUvToSdfValue(uv));
}

float troikaGetAADist() {
  
  #if defined(GL_OES_standard_derivatives) || __VERSION__ >= 300
  return length(fwidth(vTroikaGlyphUV * vTroikaGlyphDimensions)) * 0.5;
  #else
  return vTroikaGlyphDimensions.x / 64.0;
  #endif
}

float troikaGetFragDistValue() {
  vec2 clampedGlyphUV = clamp(vTroikaGlyphUV, 0.5 / uTroikaSDFGlyphSize, 1.0 - 0.5 / uTroikaSDFGlyphSize);
  float distance = troikaGlyphUvToDistance(clampedGlyphUV);
 
  // Extrapolate distance when outside bounds:
  distance += clampedGlyphUV == vTroikaGlyphUV ? 0.0 : 
    length((vTroikaGlyphUV - clampedGlyphUV) * vTroikaGlyphDimensions);

  

  return distance;
}

float troikaGetEdgeAlpha(float distance, float distanceOffset, float aaDist) {
  #if defined(IS_DEPTH_MATERIAL) || defined(IS_DISTANCE_MATERIAL)
  float alpha = step(-distanceOffset, -distance);
  #else

  float alpha = smoothstep(
    distanceOffset + aaDist,
    distanceOffset - aaDist,
    distance
  );
  #endif

  return alpha;
}
`,jO=`
float aaDist = troikaGetAADist();
float fragDistance = troikaGetFragDistValue();
float edgeAlpha = uTroikaSDFDebug ?
  troikaGlyphUvToSdfValue(vTroikaGlyphUV) :
  troikaGetEdgeAlpha(fragDistance, uTroikaEdgeOffset, max(aaDist, uTroikaBlurRadius));

#if !defined(IS_DEPTH_MATERIAL) && !defined(IS_DISTANCE_MATERIAL)
vec4 fillRGBA = gl_FragColor;
fillRGBA.a *= uTroikaFillOpacity;
vec4 strokeRGBA = uTroikaStrokeWidth == 0.0 ? fillRGBA : vec4(uTroikaStrokeColor, uTroikaStrokeOpacity);
if (fillRGBA.a == 0.0) fillRGBA.rgb = strokeRGBA.rgb;
gl_FragColor = mix(fillRGBA, strokeRGBA, smoothstep(
  -uTroikaStrokeWidth - aaDist,
  -uTroikaStrokeWidth + aaDist,
  fragDistance
));
gl_FragColor.a *= edgeAlpha;
#endif

if (edgeAlpha == 0.0) {
  discard;
}
`;function XO(n){const e=Tx(n,{chained:!0,extensions:{derivatives:!0},uniforms:{uTroikaSDFTexture:{value:null},uTroikaSDFTextureSize:{value:new _e},uTroikaSDFGlyphSize:{value:0},uTroikaSDFExponent:{value:0},uTroikaTotalBounds:{value:new hn(0,0,0,0)},uTroikaClipRect:{value:new hn(0,0,0,0)},uTroikaEdgeOffset:{value:0},uTroikaFillOpacity:{value:1},uTroikaPositionOffset:{value:new _e},uTroikaCurveRadius:{value:0},uTroikaBlurRadius:{value:0},uTroikaStrokeWidth:{value:0},uTroikaStrokeColor:{value:new Je},uTroikaStrokeOpacity:{value:1},uTroikaOrient:{value:new sn},uTroikaUseGlyphColors:{value:!0},uTroikaSDFDebug:{value:!1}},vertexDefs:GO,vertexTransform:VO,fragmentDefs:WO,fragmentColorTransform:jO,customRewriter({vertexShader:t,fragmentShader:i}){let r=/\buniform\s+vec3\s+diffuse\b/;return r.test(i)&&(i=i.replace(r,"varying vec3 vTroikaGlyphColor").replace(/\bdiffuse\b/g,"vTroikaGlyphColor"),r.test(t)||(t=t.replace(tb,`uniform vec3 diffuse;
$&
vTroikaGlyphColor = uTroikaUseGlyphColors ? aTroikaGlyphColor / 255.0 : diffuse;
`))),{vertexShader:t,fragmentShader:i}}});return e.transparent=!0,e.forceSinglePass=!0,Object.defineProperties(e,{isTroikaTextMaterial:{value:!0},shadowSide:{get(){return this.side},set(){}}}),e}const H1=new fl({color:16777215,side:Qr,transparent:!0}),uw=8421504,cw=new vt,Ag=new Q,Ey=new Q,Nd=[],YO=new Q,by="+x+y";function fw(n){return Array.isArray(n)?n[0]:n}let ob=()=>{const n=new xi(new ru(1,1),H1);return ob=()=>n,n},lb=()=>{const n=new xi(new ru(1,1,32,1),H1);return lb=()=>n,n};const qO={type:"syncstart"},ZO={type:"synccomplete"},ub=["font","fontSize","fontStyle","fontWeight","lang","letterSpacing","lineHeight","maxWidth","overflowWrap","text","direction","textAlign","textIndent","whiteSpace","anchorX","anchorY","colorRanges","sdfGlyphSize"],KO=ub.concat("material","color","depthOffset","clipRect","curveRadius","orientation","glyphGeometryDetail");let cb=class extends xi{constructor(){const e=new HO;super(e,null),this.text="",this.anchorX=0,this.anchorY=0,this.curveRadius=0,this.direction="auto",this.font=null,this.unicodeFontsURL=null,this.fontSize=.1,this.fontWeight="normal",this.fontStyle="normal",this.lang=null,this.letterSpacing=0,this.lineHeight="normal",this.maxWidth=1/0,this.overflowWrap="normal",this.textAlign="left",this.textIndent=0,this.whiteSpace="normal",this.material=null,this.color=null,this.colorRanges=null,this.outlineWidth=0,this.outlineColor=0,this.outlineOpacity=1,this.outlineBlur=0,this.outlineOffsetX=0,this.outlineOffsetY=0,this.strokeWidth=0,this.strokeColor=uw,this.strokeOpacity=1,this.fillOpacity=1,this.depthOffset=0,this.clipRect=null,this.orientation=by,this.glyphGeometryDetail=1,this.sdfGlyphSize=null,this.gpuAccelerateSDF=!0,this.debugSDF=!1}sync(e){this._needsSync&&(this._needsSync=!1,this._isSyncing?(this._queuedSyncs||(this._queuedSyncs=[])).push(e):(this._isSyncing=!0,this.dispatchEvent(qO),ib({text:this.text,font:this.font,lang:this.lang,fontSize:this.fontSize||.1,fontWeight:this.fontWeight||"normal",fontStyle:this.fontStyle||"normal",letterSpacing:this.letterSpacing||0,lineHeight:this.lineHeight||"normal",maxWidth:this.maxWidth,direction:this.direction||"auto",textAlign:this.textAlign,textIndent:this.textIndent,whiteSpace:this.whiteSpace,overflowWrap:this.overflowWrap,anchorX:this.anchorX,anchorY:this.anchorY,colorRanges:this.colorRanges,includeCaretPositions:!0,sdfGlyphSize:this.sdfGlyphSize,gpuAccelerateSDF:this.gpuAccelerateSDF,unicodeFontsURL:this.unicodeFontsURL},t=>{this._isSyncing=!1,this._textRenderInfo=t,this.geometry.updateGlyphs(t.glyphBounds,t.glyphAtlasIndices,t.blockBounds,t.chunkedBounds,t.glyphColors);const i=this._queuedSyncs;i&&(this._queuedSyncs=null,this._needsSync=!0,this.sync(()=>{i.forEach(r=>r&&r())})),this.dispatchEvent(ZO),e&&e()})))}onBeforeRender(e,t,i,r,s,a){this.sync(),s.isTroikaTextMaterial&&this._prepareForRender(s)}dispose(){this.geometry.dispose()}get textRenderInfo(){return this._textRenderInfo||null}createDerivedMaterial(e){return XO(e)}get material(){let e=this._derivedMaterial;const t=this._baseMaterial||this._defaultMaterial||(this._defaultMaterial=H1.clone());if((!e||!e.isDerivedFrom(t))&&(e=this._derivedMaterial=this.createDerivedMaterial(t),t.addEventListener("dispose",function i(){t.removeEventListener("dispose",i),e.dispose()})),this.hasOutline()){let i=e._outlineMtl;return i||(i=e._outlineMtl=Object.create(e,{id:{value:e.id+.1}}),i.isTextOutlineMaterial=!0,i.depthWrite=!1,i.map=null,e.addEventListener("dispose",function r(){e.removeEventListener("dispose",r),i.dispose()})),[i,e]}else return e}set material(e){e&&e.isTroikaTextMaterial?(this._derivedMaterial=e,this._baseMaterial=e.baseMaterial):this._baseMaterial=e}hasOutline(){return!!(this.outlineWidth||this.outlineBlur||this.outlineOffsetX||this.outlineOffsetY)}get glyphGeometryDetail(){return this.geometry.detail}set glyphGeometryDetail(e){this.geometry.detail=e}get curveRadius(){return this.geometry.curveRadius}set curveRadius(e){this.geometry.curveRadius=e}get customDepthMaterial(){return fw(this.material).getDepthMaterial()}get customDistanceMaterial(){return fw(this.material).getDistanceMaterial()}_prepareForRender(e){const t=e.isTextOutlineMaterial,i=e.uniforms,r=this.textRenderInfo;if(r){const{sdfTexture:l,blockBounds:c}=r;i.uTroikaSDFTexture.value=l,i.uTroikaSDFTextureSize.value.set(l.image.width,l.image.height),i.uTroikaSDFGlyphSize.value=r.sdfGlyphSize,i.uTroikaSDFExponent.value=r.sdfExponent,i.uTroikaTotalBounds.value.fromArray(c),i.uTroikaUseGlyphColors.value=!t&&!!r.glyphColors;let f=0,p=0,g=0,v,y,S,T=0,w=0;if(t){let{outlineWidth:A,outlineOffsetX:b,outlineOffsetY:R,outlineBlur:I,outlineOpacity:k}=this;f=this._parsePercent(A)||0,p=Math.max(0,this._parsePercent(I)||0),v=k,T=this._parsePercent(b)||0,w=this._parsePercent(R)||0}else g=Math.max(0,this._parsePercent(this.strokeWidth)||0),g&&(S=this.strokeColor,i.uTroikaStrokeColor.value.set(S??uw),y=this.strokeOpacity,y==null&&(y=1)),v=this.fillOpacity;i.uTroikaEdgeOffset.value=f,i.uTroikaPositionOffset.value.set(T,w),i.uTroikaBlurRadius.value=p,i.uTroikaStrokeWidth.value=g,i.uTroikaStrokeOpacity.value=y,i.uTroikaFillOpacity.value=v??1,i.uTroikaCurveRadius.value=this.curveRadius||0;let M=this.clipRect;if(M&&Array.isArray(M)&&M.length===4)i.uTroikaClipRect.value.fromArray(M);else{const A=(this.fontSize||.1)*100;i.uTroikaClipRect.value.set(c[0]-A,c[1]-A,c[2]+A,c[3]+A)}this.geometry.applyClipRect(i.uTroikaClipRect.value)}i.uTroikaSDFDebug.value=!!this.debugSDF,e.polygonOffset=!!this.depthOffset,e.polygonOffsetFactor=e.polygonOffsetUnits=this.depthOffset||0;const s=t?this.outlineColor||0:this.color;if(s==null)delete e.color;else{const l=e.hasOwnProperty("color")?e.color:e.color=new Je;(s!==l._input||typeof s=="object")&&l.set(l._input=s)}let a=this.orientation||by;if(a!==e._orientation){let l=i.uTroikaOrient.value;a=a.replace(/[^-+xyz]/g,"");let c=a!==by&&a.match(/^([-+])([xyz])([-+])([xyz])$/);if(c){let[,f,p,g,v]=c;Ag.set(0,0,0)[p]=f==="-"?1:-1,Ey.set(0,0,0)[v]=g==="-"?-1:1,cw.lookAt(YO,Ag.cross(Ey),Ey),l.setFromMatrix4(cw)}else l.identity();e._orientation=a}}_parsePercent(e){if(typeof e=="string"){let t=e.match(/^(-?[\d.]+)%$/),i=t?parseFloat(t[1]):NaN;e=(isNaN(i)?0:i/100)*this.fontSize}return e}localPositionToTextCoords(e,t=new _e){t.copy(e);const i=this.curveRadius;return i&&(t.x=Math.atan2(e.x,Math.abs(i)-Math.abs(e.z))*Math.abs(i)),t}worldPositionToTextCoords(e,t=new _e){return Ag.copy(e),this.localPositionToTextCoords(this.worldToLocal(Ag),t)}raycast(e,t){const{textRenderInfo:i,curveRadius:r}=this;if(i){const s=i.blockBounds,a=r?lb():ob(),l=a.geometry,{position:c,uv:f}=l.attributes;for(let p=0;p<f.count;p++){let g=s[0]+f.getX(p)*(s[2]-s[0]);const v=s[1]+f.getY(p)*(s[3]-s[1]);let y=0;r&&(y=r-Math.cos(g/r)*r,g=Math.sin(g/r)*r),c.setXYZ(p,g,v,y)}l.boundingSphere=this.geometry.boundingSphere,l.boundingBox=this.geometry.boundingBox,a.matrixWorld=this.matrixWorld,a.material.side=this.material.side,Nd.length=0,a.raycast(e,Nd);for(let p=0;p<Nd.length;p++)Nd[p].object=this,t.push(Nd[p])}}copy(e){const t=this.geometry;return super.copy(e),this.geometry=t,KO.forEach(i=>{this[i]=e[i]}),this}clone(){return new this.constructor().copy(this)}};ub.forEach(n=>{const e="_private_"+n;Object.defineProperty(cb.prototype,n,{get(){return this[e]},set(t){t!==this[e]&&(this[e]=t,this._needsSync=!0)}})});new aa;new Je;const Cg=K.forwardRef(({sdfGlyphSize:n=64,anchorX:e="center",anchorY:t="middle",font:i,fontSize:r=1,children:s,characters:a,onSync:l,...c},f)=>{const p=$r(({invalidate:S})=>S),[g]=K.useState(()=>new cb),[v,y]=K.useMemo(()=>{const S=[];let T="";return K.Children.forEach(s,w=>{typeof w=="string"||typeof w=="number"?T+=w:S.push(w)}),[S,T]},[s]);return I2(()=>new Promise(S=>UO({font:i,characters:a},S)),["troika-text",i,a]),K.useLayoutEffect(()=>void g.sync(()=>{p(),l&&l(g)})),K.useEffect(()=>()=>g.dispose(),[g]),K.createElement("primitive",iv({object:g,ref:f,font:i,text:y,anchorX:e,anchorY:t,fontSize:r,sdfGlyphSize:n},c),v)}),QO=()=>parseInt(yo.replace(/\D+/g,"")),JO=QO();var $O=Object.defineProperty,eB=(n,e,t)=>e in n?$O(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,Cn=(n,e,t)=>(eB(n,typeof e!="symbol"?e+"":e,t),t);function Ay(n,e,t,i,r){let s;if(n=n.subarray||n.slice?n:n.buffer,t=t.subarray||t.slice?t:t.buffer,n=e?n.subarray?n.subarray(e,r&&e+r):n.slice(e,r&&e+r):n,t.set)t.set(n,i);else for(s=0;s<n.length;s++)t[s+i]=n[s];return t}function tB(n){return n instanceof Float32Array?n:n instanceof nn?n.getAttribute("position").array:n.map(e=>{const t=Array.isArray(e);return e instanceof Q?[e.x,e.y,e.z]:e instanceof _e?[e.x,e.y,0]:t&&e.length===3?[e[0],e[1],e[2]]:t&&e.length===2?[e[0],e[1],0]:e}).flat()}class nB extends nn{constructor(){super(),Cn(this,"type","MeshLine"),Cn(this,"isMeshLine",!0),Cn(this,"positions",[]),Cn(this,"previous",[]),Cn(this,"next",[]),Cn(this,"side",[]),Cn(this,"width",[]),Cn(this,"indices_array",[]),Cn(this,"uvs",[]),Cn(this,"counters",[]),Cn(this,"widthCallback",null),Cn(this,"_attributes"),Cn(this,"_points",[]),Cn(this,"points"),Cn(this,"matrixWorld",new vt),Object.defineProperties(this,{points:{enumerable:!0,get(){return this._points},set(e){this.setPoints(e,this.widthCallback)}}})}setMatrixWorld(e){this.matrixWorld=e}setPoints(e,t){if(e=tB(e),this._points=e,this.widthCallback=t??null,this.positions=[],this.counters=[],e.length&&e[0]instanceof Q)for(let i=0;i<e.length;i++){const r=e[i],s=i/(e.length-1);this.positions.push(r.x,r.y,r.z),this.positions.push(r.x,r.y,r.z),this.counters.push(s),this.counters.push(s)}else for(let i=0;i<e.length;i+=3){const r=i/(e.length-1);this.positions.push(e[i],e[i+1],e[i+2]),this.positions.push(e[i],e[i+1],e[i+2]),this.counters.push(r),this.counters.push(r)}this.process()}compareV3(e,t){const i=e*6,r=t*6;return this.positions[i]===this.positions[r]&&this.positions[i+1]===this.positions[r+1]&&this.positions[i+2]===this.positions[r+2]}copyV3(e){const t=e*6;return[this.positions[t],this.positions[t+1],this.positions[t+2]]}process(){const e=this.positions.length/6;this.previous=[],this.next=[],this.side=[],this.width=[],this.indices_array=[],this.uvs=[];let t,i;this.compareV3(0,e-1)?i=this.copyV3(e-2):i=this.copyV3(0),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);for(let r=0;r<e;r++){if(this.side.push(1),this.side.push(-1),this.widthCallback?t=this.widthCallback(r/(e-1)):t=1,this.width.push(t),this.width.push(t),this.uvs.push(r/(e-1),0),this.uvs.push(r/(e-1),1),r<e-1){i=this.copyV3(r),this.previous.push(i[0],i[1],i[2]),this.previous.push(i[0],i[1],i[2]);const s=r*2;this.indices_array.push(s,s+1,s+2),this.indices_array.push(s+2,s+1,s+3)}r>0&&(i=this.copyV3(r),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]))}this.compareV3(e-1,0)?i=this.copyV3(1):i=this.copyV3(e-1),this.next.push(i[0],i[1],i[2]),this.next.push(i[0],i[1],i[2]),!this._attributes||this._attributes.position.count!==this.counters.length?this._attributes={position:new cn(new Float32Array(this.positions),3),previous:new cn(new Float32Array(this.previous),3),next:new cn(new Float32Array(this.next),3),side:new cn(new Float32Array(this.side),1),width:new cn(new Float32Array(this.width),1),uv:new cn(new Float32Array(this.uvs),2),index:new cn(new Uint16Array(this.indices_array),1),counters:new cn(new Float32Array(this.counters),1)}:(this._attributes.position.copyArray(new Float32Array(this.positions)),this._attributes.position.needsUpdate=!0,this._attributes.previous.copyArray(new Float32Array(this.previous)),this._attributes.previous.needsUpdate=!0,this._attributes.next.copyArray(new Float32Array(this.next)),this._attributes.next.needsUpdate=!0,this._attributes.side.copyArray(new Float32Array(this.side)),this._attributes.side.needsUpdate=!0,this._attributes.width.copyArray(new Float32Array(this.width)),this._attributes.width.needsUpdate=!0,this._attributes.uv.copyArray(new Float32Array(this.uvs)),this._attributes.uv.needsUpdate=!0,this._attributes.index.copyArray(new Uint16Array(this.indices_array)),this._attributes.index.needsUpdate=!0),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setAttribute("position",this._attributes.position),this.setAttribute("previous",this._attributes.previous),this.setAttribute("next",this._attributes.next),this.setAttribute("side",this._attributes.side),this.setAttribute("width",this._attributes.width),this.setAttribute("uv",this._attributes.uv),this.setAttribute("counters",this._attributes.counters),this.setIndex(this._attributes.index),this.computeBoundingSphere(),this.computeBoundingBox()}advance({x:e,y:t,z:i}){const r=this._attributes.position.array,s=this._attributes.previous.array,a=this._attributes.next.array,l=r.length;Ay(r,0,s,0,l),Ay(r,6,r,0,l-6),r[l-6]=e,r[l-5]=t,r[l-4]=i,r[l-3]=e,r[l-2]=t,r[l-1]=i,Ay(r,6,a,0,l-6),a[l-6]=e,a[l-5]=t,a[l-4]=i,a[l-3]=e,a[l-2]=t,a[l-1]=i,this._attributes.position.needsUpdate=!0,this._attributes.previous.needsUpdate=!0,this._attributes.next.needsUpdate=!0}}const iB=`
  #include <common>
  #include <logdepthbuf_pars_vertex>
  #include <fog_pars_vertex>
  #include <clipping_planes_pars_vertex>

  attribute vec3 previous;
  attribute vec3 next;
  attribute float side;
  attribute float width;
  attribute float counters;
  
  uniform vec2 resolution;
  uniform float lineWidth;
  uniform vec3 color;
  uniform float opacity;
  uniform float sizeAttenuation;
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  vec2 fix(vec4 i, float aspect) {
    vec2 res = i.xy / i.w;
    res.x *= aspect;
    return res;
  }
  
  void main() {
    float aspect = resolution.x / resolution.y;
    vColor = vec4(color, opacity);
    vUV = uv;
    vCounters = counters;
  
    mat4 m = projectionMatrix * modelViewMatrix;
    vec4 finalPosition = m * vec4(position, 1.0) * aspect;
    vec4 prevPos = m * vec4(previous, 1.0);
    vec4 nextPos = m * vec4(next, 1.0);
  
    vec2 currentP = fix(finalPosition, aspect);
    vec2 prevP = fix(prevPos, aspect);
    vec2 nextP = fix(nextPos, aspect);
  
    float w = lineWidth * width;
  
    vec2 dir;
    if (nextP == currentP) dir = normalize(currentP - prevP);
    else if (prevP == currentP) dir = normalize(nextP - currentP);
    else {
      vec2 dir1 = normalize(currentP - prevP);
      vec2 dir2 = normalize(nextP - currentP);
      dir = normalize(dir1 + dir2);
  
      vec2 perp = vec2(-dir1.y, dir1.x);
      vec2 miter = vec2(-dir.y, dir.x);
      //w = clamp(w / dot(miter, perp), 0., 4. * lineWidth * width);
    }
  
    //vec2 normal = (cross(vec3(dir, 0.), vec3(0., 0., 1.))).xy;
    vec4 normal = vec4(-dir.y, dir.x, 0., 1.);
    normal.xy *= .5 * w;
    //normal *= projectionMatrix;
    if (sizeAttenuation == 0.) {
      normal.xy *= finalPosition.w;
      normal.xy /= (vec4(resolution, 0., 1.) * projectionMatrix).xy * aspect;
    }
  
    finalPosition.xy += normal.xy * side;
    gl_Position = finalPosition;
    #include <logdepthbuf_vertex>
    #include <fog_vertex>
    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);
    #include <clipping_planes_vertex>
    #include <fog_vertex>
  }
`,rB=parseInt(yo.replace(/\D+/g,"")),sB=rB>=154?"colorspace_fragment":"encodings_fragment",aB=`
  #include <fog_pars_fragment>
  #include <logdepthbuf_pars_fragment>
  #include <clipping_planes_pars_fragment>
  
  uniform sampler2D map;
  uniform sampler2D alphaMap;
  uniform float useGradient;
  uniform float useMap;
  uniform float useAlphaMap;
  uniform float useDash;
  uniform float dashArray;
  uniform float dashOffset;
  uniform float dashRatio;
  uniform float visibility;
  uniform float alphaTest;
  uniform vec2 repeat;
  uniform vec3 gradient[2];
  
  varying vec2 vUV;
  varying vec4 vColor;
  varying float vCounters;
  
  void main() {
    #include <logdepthbuf_fragment>
    vec4 diffuseColor = vColor;
    if (useGradient == 1.) diffuseColor = vec4(mix(gradient[0], gradient[1], vCounters), 1.0);
    if (useMap == 1.) diffuseColor *= texture2D(map, vUV * repeat);
    if (useAlphaMap == 1.) diffuseColor.a *= texture2D(alphaMap, vUV * repeat).a;
    if (diffuseColor.a < alphaTest) discard;
    if (useDash == 1.) diffuseColor.a *= ceil(mod(vCounters + dashOffset, dashArray) - (dashArray * dashRatio));
    diffuseColor.a *= step(vCounters, visibility);
    #include <clipping_planes_fragment>
    gl_FragColor = diffuseColor;     
    #include <fog_fragment>
    #include <tonemapping_fragment>
    #include <${sB}>
  }
`;class oB extends tn{constructor(e){super({uniforms:{...dt.fog,lineWidth:{value:1},map:{value:null},useMap:{value:0},alphaMap:{value:null},useAlphaMap:{value:0},color:{value:new Je(16777215)},gradient:{value:[new Je(16711680),new Je(65280)]},opacity:{value:1},resolution:{value:new _e(1,1)},sizeAttenuation:{value:1},dashArray:{value:0},dashOffset:{value:0},dashRatio:{value:.5},useDash:{value:0},useGradient:{value:0},visibility:{value:1},alphaTest:{value:0},repeat:{value:new _e(1,1)}},vertexShader:iB,fragmentShader:aB}),Cn(this,"lineWidth"),Cn(this,"map"),Cn(this,"useMap"),Cn(this,"alphaMap"),Cn(this,"useAlphaMap"),Cn(this,"color"),Cn(this,"gradient"),Cn(this,"resolution"),Cn(this,"sizeAttenuation"),Cn(this,"dashArray"),Cn(this,"dashOffset"),Cn(this,"dashRatio"),Cn(this,"useDash"),Cn(this,"useGradient"),Cn(this,"visibility"),Cn(this,"repeat"),this.type="MeshLineMaterial",Object.defineProperties(this,{lineWidth:{enumerable:!0,get(){return this.uniforms.lineWidth.value},set(t){this.uniforms.lineWidth.value=t}},map:{enumerable:!0,get(){return this.uniforms.map.value},set(t){this.uniforms.map.value=t}},useMap:{enumerable:!0,get(){return this.uniforms.useMap.value},set(t){this.uniforms.useMap.value=t}},alphaMap:{enumerable:!0,get(){return this.uniforms.alphaMap.value},set(t){this.uniforms.alphaMap.value=t}},useAlphaMap:{enumerable:!0,get(){return this.uniforms.useAlphaMap.value},set(t){this.uniforms.useAlphaMap.value=t}},color:{enumerable:!0,get(){return this.uniforms.color.value},set(t){this.uniforms.color.value=t}},gradient:{enumerable:!0,get(){return this.uniforms.gradient.value},set(t){this.uniforms.gradient.value=t}},opacity:{enumerable:!0,get(){return this.uniforms.opacity.value},set(t){this.uniforms.opacity.value=t}},resolution:{enumerable:!0,get(){return this.uniforms.resolution.value},set(t){this.uniforms.resolution.value.copy(t)}},sizeAttenuation:{enumerable:!0,get(){return this.uniforms.sizeAttenuation.value},set(t){this.uniforms.sizeAttenuation.value=t}},dashArray:{enumerable:!0,get(){return this.uniforms.dashArray.value},set(t){this.uniforms.dashArray.value=t,this.useDash=t!==0?1:0}},dashOffset:{enumerable:!0,get(){return this.uniforms.dashOffset.value},set(t){this.uniforms.dashOffset.value=t}},dashRatio:{enumerable:!0,get(){return this.uniforms.dashRatio.value},set(t){this.uniforms.dashRatio.value=t}},useDash:{enumerable:!0,get(){return this.uniforms.useDash.value},set(t){this.uniforms.useDash.value=t}},useGradient:{enumerable:!0,get(){return this.uniforms.useGradient.value},set(t){this.uniforms.useGradient.value=t}},visibility:{enumerable:!0,get(){return this.uniforms.visibility.value},set(t){this.uniforms.visibility.value=t}},alphaTest:{enumerable:!0,get(){return this.uniforms.alphaTest.value},set(t){this.uniforms.alphaTest.value=t}},repeat:{enumerable:!0,get(){return this.uniforms.repeat.value},set(t){this.uniforms.repeat.value.copy(t)}}}),this.setValues(e)}copy(e){return super.copy(e),this.lineWidth=e.lineWidth,this.map=e.map,this.useMap=e.useMap,this.alphaMap=e.alphaMap,this.useAlphaMap=e.useAlphaMap,this.color.copy(e.color),this.gradient=e.gradient,this.opacity=e.opacity,this.resolution.copy(e.resolution),this.sizeAttenuation=e.sizeAttenuation,this.dashArray=e.dashArray,this.dashOffset=e.dashOffset,this.dashRatio=e.dashRatio,this.useDash=e.useDash,this.useGradient=e.useGradient,this.visibility=e.visibility,this.alphaTest=e.alphaTest,this.repeat.copy(e.repeat),this}}const fb={width:.2,length:1,decay:1,local:!1,stride:0,interval:1},lB=(n,e=1)=>(n.set(n.subarray(e)),n.fill(-1/0,-e),n);function uB(n,e){const{length:t,local:i,decay:r,interval:s,stride:a}={...fb,...e},l=K.useRef(),[c]=K.useState(()=>new Q);K.useLayoutEffect(()=>{n&&(l.current=Float32Array.from({length:t*10*3},(g,v)=>n.position.getComponent(v%3)))},[t,n]);const f=K.useRef(new Q),p=K.useRef(0);return ou(()=>{if(n&&l.current){if(p.current===0){let g;i?g=n.position:(n.getWorldPosition(c),g=c);const v=1*r;for(let y=0;y<v;y++)g.distanceTo(f.current)<a||(lB(l.current,3),l.current.set(g.toArray(),l.current.length-3));f.current.copy(g)}p.current++,p.current=p.current%s}}),l}const cB=K.forwardRef((n,e)=>{const{children:t}=n,{width:i,length:r,decay:s,local:a,stride:l,interval:c}={...fb,...n},{color:f="hotpink",attenuation:p,target:g}=n,v=$r(R=>R.size),y=$r(R=>R.scene),S=K.useRef(null),[T,w]=K.useState(null),M=uB(T,{length:r,decay:s,local:a,stride:l,interval:c});K.useEffect(()=>{const R=(g==null?void 0:g.current)||S.current.children.find(I=>I instanceof Mn);R&&w(R)},[M,g]);const A=K.useMemo(()=>new nB,[]),b=K.useMemo(()=>{var R;const I=new oB({lineWidth:.1*i,color:f,sizeAttenuation:1,resolution:new _e(v.width,v.height)});let k;if(t)if(Array.isArray(t))k=t.find(F=>{const z=F;return typeof z.type=="string"&&z.type==="meshLineMaterial"});else{const F=t;typeof F.type=="string"&&F.type==="meshLineMaterial"&&(k=F)}return typeof((R=k)==null?void 0:R.props)=="object"&&I.setValues(k.props),I},[i,f,v,t]);return K.useEffect(()=>{b.uniforms.resolution.value.set(v.width,v.height)},[v]),ou(()=>{M.current&&A.setPoints(M.current,p)}),K.createElement("group",null,Y2(K.createElement("mesh",{ref:e,geometry:A,material:b}),y),K.createElement("group",{ref:S},t))});function fB(n,e){const t=n+"Geometry";return K.forwardRef(({args:i,children:r,...s},a)=>{const l=K.useRef(null);return K.useImperativeHandle(a,()=>l.current),K.useLayoutEffect(()=>void(e==null?void 0:e(l.current))),K.createElement("mesh",iv({ref:l},s),K.createElement(t,{attach:"geometry",args:i}),r)})}const hb=fB("sphere"),hB=K.forwardRef(({children:n,enabled:e=!0,speed:t=1,rotationIntensity:i=1,floatIntensity:r=1,floatingRange:s=[-.1,.1],autoInvalidate:a=!1,...l},c)=>{const f=K.useRef(null);K.useImperativeHandle(c,()=>f.current,[]);const p=K.useRef(Math.random()*1e4);return ou(g=>{var v,y;if(!e||t===0)return;a&&g.invalidate();const S=p.current+g.clock.getElapsedTime();f.current.rotation.x=Math.cos(S/4*t)/8*i,f.current.rotation.y=Math.sin(S/4*t)/8*i,f.current.rotation.z=Math.sin(S/4*t)/20*i;let T=Math.sin(S/4*t)/10;T=bE.mapLinear(T,-.1,.1,(v=s==null?void 0:s[0])!==null&&v!==void 0?v:-.1,(y=s==null?void 0:s[1])!==null&&y!==void 0?y:.1),f.current.position.y=T*r,f.current.updateMatrix()}),K.createElement("group",l,K.createElement("group",{ref:f,matrixAutoUpdate:!1},n))});class dB extends tn{constructor(){super({uniforms:{time:{value:0},fade:{value:1}},vertexShader:`
      uniform float time;
      attribute float size;
      varying vec3 vColor;
      void main() {
        vColor = color;
        vec4 mvPosition = modelViewMatrix * vec4(position, 0.5);
        gl_PointSize = size * (30.0 / -mvPosition.z) * (3.0 + sin(time + 100.0));
        gl_Position = projectionMatrix * mvPosition;
      }`,fragmentShader:`
      uniform sampler2D pointTexture;
      uniform float fade;
      varying vec3 vColor;
      void main() {
        float opacity = 1.0;
        if (fade == 1.0) {
          float d = distance(gl_PointCoord, vec2(0.5, 0.5));
          opacity = 1.0 / (1.0 + exp(16.0 * (d - 0.25)));
        }
        gl_FragColor = vec4(vColor, opacity);

        #include <tonemapping_fragment>
	      #include <${JO>=154?"colorspace_fragment":"encodings_fragment"}>
      }`})}}const pB=n=>new Q().setFromSpherical(new N1(n,Math.acos(1-Math.random()*2),Math.random()*2*Math.PI)),mB=K.forwardRef(({radius:n=100,depth:e=50,count:t=5e3,saturation:i=0,factor:r=4,fade:s=!1,speed:a=1},l)=>{const c=K.useRef(),[f,p,g]=K.useMemo(()=>{const y=[],S=[],T=Array.from({length:t},()=>(.5+.5*Math.random())*r),w=new Je;let M=n+e;const A=e/t;for(let b=0;b<t;b++)M-=A*Math.random(),y.push(...pB(M).toArray()),w.setHSL(b/t,i,.9),S.push(w.r,w.g,w.b);return[new Float32Array(y),new Float32Array(S),new Float32Array(T)]},[t,e,r,n,i]);ou(y=>c.current&&(c.current.uniforms.time.value=y.clock.getElapsedTime()*a));const[v]=K.useState(()=>new dB);return K.createElement("points",{ref:l},K.createElement("bufferGeometry",null,K.createElement("bufferAttribute",{attach:"attributes-position",args:[f,3]}),K.createElement("bufferAttribute",{attach:"attributes-color",args:[p,3]}),K.createElement("bufferAttribute",{attach:"attributes-size",args:[g,1]})),K.createElement("primitive",{ref:c,object:v,attach:"material",blending:Kg,"uniforms-fade-value":s,depthWrite:!1,transparent:!0,vertexColors:!0}))});/**
 * postprocessing v6.37.1 build Thu Mar 06 2025
 * https://github.com/pmndrs/postprocessing
 * Copyright 2015-2025 Raoul van Rschen
 * @license Zlib
 */var Cy=1/1e3,gB=1e3,vB=class{constructor(){this.startTime=performance.now(),this.previousTime=0,this.currentTime=0,this._delta=0,this._elapsed=0,this._fixedDelta=1e3/60,this.timescale=1,this.useFixedDelta=!1,this._autoReset=!1}get autoReset(){return this._autoReset}set autoReset(n){typeof document<"u"&&document.hidden!==void 0&&(n?document.addEventListener("visibilitychange",this):document.removeEventListener("visibilitychange",this),this._autoReset=n)}get delta(){return this._delta*Cy}get fixedDelta(){return this._fixedDelta*Cy}set fixedDelta(n){this._fixedDelta=n*gB}get elapsed(){return this._elapsed*Cy}update(n){this.useFixedDelta?this._delta=this.fixedDelta:(this.previousTime=this.currentTime,this.currentTime=(n!==void 0?n:performance.now())-this.startTime,this._delta=this.currentTime-this.previousTime),this._delta*=this.timescale,this._elapsed+=this._delta}reset(){this._delta=0,this._elapsed=0,this.currentTime=performance.now()-this.startTime}getDelta(){return this.delta}getElapsed(){return this.elapsed}handleEvent(n){document.hidden||(this.currentTime=performance.now()-this.startTime)}dispose(){this.autoReset=!1}},yB=(()=>{const n=new Float32Array([-1,-1,0,3,-1,0,-1,3,0]),e=new Float32Array([0,0,2,0,0,2]),t=new nn;return t.setAttribute("position",new cn(n,3)),t.setAttribute("uv",new cn(e,2)),t})(),Ai=class bx{static get fullscreenGeometry(){return yB}constructor(e="Pass",t=new sh,i=new dh){this.name=e,this.renderer=null,this.scene=t,this.camera=i,this.screen=null,this.rtt=!0,this.needsSwap=!0,this.needsDepthTexture=!1,this.enabled=!0}get renderToScreen(){return!this.rtt}set renderToScreen(e){if(this.rtt===e){const t=this.fullscreenMaterial;t!==null&&(t.needsUpdate=!0),this.rtt=!e}}set mainScene(e){}set mainCamera(e){}setRenderer(e){this.renderer=e}isEnabled(){return this.enabled}setEnabled(e){this.enabled=e}get fullscreenMaterial(){return this.screen!==null?this.screen.material:null}set fullscreenMaterial(e){let t=this.screen;t!==null?t.material=e:(t=new xi(bx.fullscreenGeometry,e),t.frustumCulled=!1,this.scene===null&&(this.scene=new sh),this.scene.add(t),this.screen=t)}getFullscreenMaterial(){return this.fullscreenMaterial}setFullscreenMaterial(e){this.fullscreenMaterial=e}getDepthTexture(){return null}setDepthTexture(e,t=Ji){}render(e,t,i,r,s){throw new Error("Render method not implemented!")}setSize(e,t){}initialize(e,t,i){}dispose(){for(const e of Object.keys(this)){const t=this[e];(t instanceof an||t instanceof hr||t instanceof Qn||t instanceof bx)&&this[e].dispose()}this.fullscreenMaterial!==null&&this.fullscreenMaterial.dispose()}},xB=class extends Ai{constructor(){super("ClearMaskPass",null,null),this.needsSwap=!1}render(n,e,t,i,r){const s=n.state.buffers.stencil;s.setLocked(!1),s.setTest(!1)}},SB=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform float opacity;varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=opacity*texel;
#include <colorspace_fragment>
#include <dithering_fragment>
}`,Ec="varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}",db=class extends tn{constructor(){super({name:"CopyMaterial",uniforms:{inputBuffer:new Ee(null),opacity:new Ee(1)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:SB,vertexShader:Ec})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}getOpacity(n){return this.uniforms.opacity.value}setOpacity(n){this.uniforms.opacity.value=n}},pb=class extends Ai{constructor(n,e=!0){super("CopyPass"),this.fullscreenMaterial=new db,this.needsSwap=!1,this.renderTarget=n,n===void 0&&(this.renderTarget=new an(1,1,{minFilter:Et,magFilter:Et,stencilBuffer:!1,depthBuffer:!1}),this.renderTarget.texture.name="CopyPass.Target"),this.autoResize=e}get resize(){return this.autoResize}set resize(n){this.autoResize=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}setAutoResizeEnabled(n){this.autoResize=n}render(n,e,t,i,r){this.fullscreenMaterial.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.autoResize&&this.renderTarget.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTarget.texture.type=t,t!==zn?this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1":n!==null&&n.outputColorSpace===yt&&(this.renderTarget.texture.colorSpace=yt))}},hw=new Je,Op=class extends Ai{constructor(n=!0,e=!0,t=!1){super("ClearPass",null,null),this.needsSwap=!1,this.color=n,this.depth=e,this.stencil=t,this.overrideClearColor=null,this.overrideClearAlpha=-1}setClearFlags(n,e,t){this.color=n,this.depth=e,this.stencil=t}getOverrideClearColor(){return this.overrideClearColor}setOverrideClearColor(n){this.overrideClearColor=n}getOverrideClearAlpha(){return this.overrideClearAlpha}setOverrideClearAlpha(n){this.overrideClearAlpha=n}render(n,e,t,i,r){const s=this.overrideClearColor,a=this.overrideClearAlpha,l=n.getClearAlpha(),c=s!==null,f=a>=0;c?(n.getClearColor(hw),n.setClearColor(s,f?a:l)):f&&n.setClearAlpha(a),n.setRenderTarget(this.renderToScreen?null:e),n.clear(this.color,this.depth,this.stencil),c?n.setClearColor(hw,l):f&&n.setClearAlpha(l)}},_B=class extends Ai{constructor(n,e){super("MaskPass",n,e),this.needsSwap=!1,this.clearPass=new Op(!1,!1,!0),this.inverse=!1}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get inverted(){return this.inverse}set inverted(n){this.inverse=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getClearPass(){return this.clearPass}isInverted(){return this.inverted}setInverted(n){this.inverted=n}render(n,e,t,i,r){const s=n.getContext(),a=n.state.buffers,l=this.scene,c=this.camera,f=this.clearPass,p=this.inverted?0:1,g=1-p;a.color.setMask(!1),a.depth.setMask(!1),a.color.setLocked(!0),a.depth.setLocked(!0),a.stencil.setTest(!0),a.stencil.setOp(s.REPLACE,s.REPLACE,s.REPLACE),a.stencil.setFunc(s.ALWAYS,p,4294967295),a.stencil.setClear(g),a.stencil.setLocked(!0),this.clearPass.enabled&&(this.renderToScreen?f.render(n,null):(f.render(n,e),f.render(n,t))),this.renderToScreen?(n.setRenderTarget(null),n.render(l,c)):(n.setRenderTarget(e),n.render(l,c),n.setRenderTarget(t),n.render(l,c)),a.color.setLocked(!1),a.depth.setLocked(!1),a.stencil.setLocked(!1),a.stencil.setFunc(s.EQUAL,1,4294967295),a.stencil.setOp(s.KEEP,s.KEEP,s.KEEP),a.stencil.setLocked(!0)}},MB=class{constructor(e=null,{depthBuffer:t=!0,stencilBuffer:i=!1,multisampling:r=0,frameBufferType:s}={}){this.renderer=null,this.inputBuffer=this.createBuffer(t,i,s,r),this.outputBuffer=this.inputBuffer.clone(),this.copyPass=new pb,this.depthTexture=null,this.passes=[],this.timer=new vB,this.autoRenderToScreen=!0,this.setRenderer(e)}get multisampling(){return this.inputBuffer.samples||0}set multisampling(e){const t=this.inputBuffer,i=this.multisampling;i>0&&e>0?(this.inputBuffer.samples=e,this.outputBuffer.samples=e,this.inputBuffer.dispose(),this.outputBuffer.dispose()):i!==e&&(this.inputBuffer.dispose(),this.outputBuffer.dispose(),this.inputBuffer=this.createBuffer(t.depthBuffer,t.stencilBuffer,t.texture.type,e),this.inputBuffer.depthTexture=this.depthTexture,this.outputBuffer=this.inputBuffer.clone())}getTimer(){return this.timer}getRenderer(){return this.renderer}setRenderer(e){if(this.renderer=e,e!==null){const t=e.getSize(new _e),i=e.getContext().getContextAttributes().alpha,r=this.inputBuffer.texture.type;r===zn&&e.outputColorSpace===yt&&(this.inputBuffer.texture.colorSpace=yt,this.outputBuffer.texture.colorSpace=yt,this.inputBuffer.dispose(),this.outputBuffer.dispose()),e.autoClear=!1,this.setSize(t.width,t.height);for(const s of this.passes)s.initialize(e,i,r)}}replaceRenderer(e,t=!0){const i=this.renderer,r=i.domElement.parentNode;return this.setRenderer(e),t&&r!==null&&(r.removeChild(i.domElement),r.appendChild(e.domElement)),i}createDepthTexture(){const e=this.depthTexture=new Lp;return this.inputBuffer.depthTexture=e,this.inputBuffer.dispose(),this.inputBuffer.stencilBuffer?(e.format=nu,e.type=sl):e.type=za,e}deleteDepthTexture(){if(this.depthTexture!==null){this.depthTexture.dispose(),this.depthTexture=null,this.inputBuffer.depthTexture=null,this.inputBuffer.dispose();for(const e of this.passes)e.setDepthTexture(null)}}createBuffer(e,t,i,r){const s=this.renderer,a=s===null?new _e:s.getDrawingBufferSize(new _e),l={minFilter:Et,magFilter:Et,stencilBuffer:t,depthBuffer:e,type:i},c=new an(a.width,a.height,l);return r>0&&(c.ignoreDepthForMultisampleCopy=!1,c.samples=r),i===zn&&s!==null&&s.outputColorSpace===yt&&(c.texture.colorSpace=yt),c.texture.name="EffectComposer.Buffer",c.texture.generateMipmaps=!1,c}setMainScene(e){for(const t of this.passes)t.mainScene=e}setMainCamera(e){for(const t of this.passes)t.mainCamera=e}addPass(e,t){const i=this.passes,r=this.renderer,s=r.getDrawingBufferSize(new _e),a=r.getContext().getContextAttributes().alpha,l=this.inputBuffer.texture.type;if(e.setRenderer(r),e.setSize(s.width,s.height),e.initialize(r,a,l),this.autoRenderToScreen&&(i.length>0&&(i[i.length-1].renderToScreen=!1),e.renderToScreen&&(this.autoRenderToScreen=!1)),t!==void 0?i.splice(t,0,e):i.push(e),this.autoRenderToScreen&&(i[i.length-1].renderToScreen=!0),e.needsDepthTexture||this.depthTexture!==null)if(this.depthTexture===null){const c=this.createDepthTexture();for(e of i)e.setDepthTexture(c)}else e.setDepthTexture(this.depthTexture)}removePass(e){const t=this.passes,i=t.indexOf(e);if(i!==-1&&t.splice(i,1).length>0){if(this.depthTexture!==null){const a=(c,f)=>c||f.needsDepthTexture;t.reduce(a,!1)||(e.getDepthTexture()===this.depthTexture&&e.setDepthTexture(null),this.deleteDepthTexture())}this.autoRenderToScreen&&i===t.length&&(e.renderToScreen=!1,t.length>0&&(t[t.length-1].renderToScreen=!0))}}removeAllPasses(){const e=this.passes;this.deleteDepthTexture(),e.length>0&&(this.autoRenderToScreen&&(e[e.length-1].renderToScreen=!1),this.passes=[])}render(e){const t=this.renderer,i=this.copyPass;let r=this.inputBuffer,s=this.outputBuffer,a=!1,l,c,f;e===void 0&&(this.timer.update(),e=this.timer.getDelta());for(const p of this.passes)p.enabled&&(p.render(t,r,s,e,a),p.needsSwap&&(a&&(i.renderToScreen=p.renderToScreen,l=t.getContext(),c=t.state.buffers.stencil,c.setFunc(l.NOTEQUAL,1,4294967295),i.render(t,r,s,e,a),c.setFunc(l.EQUAL,1,4294967295)),f=r,r=s,s=f),p instanceof _B?a=!0:p instanceof xB&&(a=!1))}setSize(e,t,i){const r=this.renderer,s=r.getSize(new _e);(e===void 0||t===void 0)&&(e=s.width,t=s.height),(s.width!==e||s.height!==t)&&r.setSize(e,t,i);const a=r.getDrawingBufferSize(new _e);this.inputBuffer.setSize(a.width,a.height),this.outputBuffer.setSize(a.width,a.height);for(const l of this.passes)l.setSize(a.width,a.height)}reset(){this.dispose(),this.autoRenderToScreen=!0}dispose(){for(const e of this.passes)e.dispose();this.passes=[],this.inputBuffer!==null&&this.inputBuffer.dispose(),this.outputBuffer!==null&&this.outputBuffer.dispose(),this.deleteDepthTexture(),this.copyPass.dispose(),this.timer.dispose(),Ai.fullscreenGeometry.dispose()}},ra={NONE:0,DEPTH:1,CONVOLUTION:2},bn={FRAGMENT_HEAD:"FRAGMENT_HEAD",FRAGMENT_MAIN_UV:"FRAGMENT_MAIN_UV",FRAGMENT_MAIN_IMAGE:"FRAGMENT_MAIN_IMAGE",VERTEX_HEAD:"VERTEX_HEAD",VERTEX_MAIN_SUPPORT:"VERTEX_MAIN_SUPPORT"},wB=class{constructor(){this.shaderParts=new Map([[bn.FRAGMENT_HEAD,null],[bn.FRAGMENT_MAIN_UV,null],[bn.FRAGMENT_MAIN_IMAGE,null],[bn.VERTEX_HEAD,null],[bn.VERTEX_MAIN_SUPPORT,null]]),this.defines=new Map,this.uniforms=new Map,this.blendModes=new Map,this.extensions=new Set,this.attributes=ra.NONE,this.varyings=new Set,this.uvTransformation=!1,this.readDepth=!1,this.colorSpace=Jr}},Ry=!1,dw=class{constructor(n=null){this.originalMaterials=new Map,this.material=null,this.materials=null,this.materialsBackSide=null,this.materialsDoubleSide=null,this.materialsFlatShaded=null,this.materialsFlatShadedBackSide=null,this.materialsFlatShadedDoubleSide=null,this.setMaterial(n),this.meshCount=0,this.replaceMaterial=e=>{if(e.isMesh){let t;if(e.material.flatShading)switch(e.material.side){case Qr:t=this.materialsFlatShadedDoubleSide;break;case Zi:t=this.materialsFlatShadedBackSide;break;default:t=this.materialsFlatShaded;break}else switch(e.material.side){case Qr:t=this.materialsDoubleSide;break;case Zi:t=this.materialsBackSide;break;default:t=this.materials;break}this.originalMaterials.set(e,e.material),e.isSkinnedMesh?e.material=t[2]:e.isInstancedMesh?e.material=t[1]:e.material=t[0],++this.meshCount}}}cloneMaterial(n){if(!(n instanceof tn))return n.clone();const e=n.uniforms,t=new Map;for(const r in e){const s=e[r].value;s.isRenderTargetTexture&&(e[r].value=null,t.set(r,s))}const i=n.clone();for(const r of t)e[r[0]].value=r[1],i.uniforms[r[0]].value=r[1];return i}setMaterial(n){if(this.disposeMaterials(),this.material=n,n!==null){const e=this.materials=[this.cloneMaterial(n),this.cloneMaterial(n),this.cloneMaterial(n)];for(const t of e)t.uniforms=Object.assign({},n.uniforms),t.side=go;e[2].skinning=!0,this.materialsBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Zi,i}),this.materialsDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.side=Qr,i}),this.materialsFlatShaded=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i}),this.materialsFlatShadedBackSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Zi,i}),this.materialsFlatShadedDoubleSide=e.map(t=>{const i=this.cloneMaterial(t);return i.uniforms=Object.assign({},n.uniforms),i.flatShading=!0,i.side=Qr,i})}}render(n,e,t){const i=n.shadowMap.enabled;if(n.shadowMap.enabled=!1,Ry){const r=this.originalMaterials;this.meshCount=0,e.traverse(this.replaceMaterial),n.render(e,t);for(const s of r)s[0].material=s[1];this.meshCount!==r.size&&r.clear()}else{const r=e.overrideMaterial;e.overrideMaterial=this.material,n.render(e,t),e.overrideMaterial=r}n.shadowMap.enabled=i}disposeMaterials(){if(this.material!==null){const n=this.materials.concat(this.materialsBackSide).concat(this.materialsDoubleSide).concat(this.materialsFlatShaded).concat(this.materialsFlatShadedBackSide).concat(this.materialsFlatShadedDoubleSide);for(const e of n)e.dispose()}}dispose(){this.originalMaterials.clear(),this.disposeMaterials()}static get workaroundEnabled(){return Ry}static set workaroundEnabled(n){Ry=n}},Zl=-1,Ln=class extends sa{constructor(n,e=Zl,t=Zl,i=1){super(),this.resizable=n,this.baseSize=new _e(1,1),this.preferredSize=new _e(e,t),this.target=this.preferredSize,this.s=i,this.effectiveSize=new _e,this.addEventListener("change",()=>this.updateEffectiveSize()),this.updateEffectiveSize()}updateEffectiveSize(){const n=this.baseSize,e=this.preferredSize,t=this.effectiveSize,i=this.scale;e.width!==Zl?t.width=e.width:e.height!==Zl?t.width=Math.round(e.height*(n.width/Math.max(n.height,1))):t.width=Math.round(n.width*i),e.height!==Zl?t.height=e.height:e.width!==Zl?t.height=Math.round(e.width/Math.max(n.width/Math.max(n.height,1),1)):t.height=Math.round(n.height*i)}get width(){return this.effectiveSize.width}set width(n){this.preferredWidth=n}get height(){return this.effectiveSize.height}set height(n){this.preferredHeight=n}getWidth(){return this.width}getHeight(){return this.height}get scale(){return this.s}set scale(n){this.s!==n&&(this.s=n,this.preferredSize.setScalar(Zl),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getScale(){return this.scale}setScale(n){this.scale=n}get baseWidth(){return this.baseSize.width}set baseWidth(n){this.baseSize.width!==n&&(this.baseSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseWidth(){return this.baseWidth}setBaseWidth(n){this.baseWidth=n}get baseHeight(){return this.baseSize.height}set baseHeight(n){this.baseSize.height!==n&&(this.baseSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getBaseHeight(){return this.baseHeight}setBaseHeight(n){this.baseHeight=n}setBaseSize(n,e){(this.baseSize.width!==n||this.baseSize.height!==e)&&(this.baseSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}get preferredWidth(){return this.preferredSize.width}set preferredWidth(n){this.preferredSize.width!==n&&(this.preferredSize.width=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredWidth(){return this.preferredWidth}setPreferredWidth(n){this.preferredWidth=n}get preferredHeight(){return this.preferredSize.height}set preferredHeight(n){this.preferredSize.height!==n&&(this.preferredSize.height=n,this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}getPreferredHeight(){return this.preferredHeight}setPreferredHeight(n){this.preferredHeight=n}setPreferredSize(n,e){(this.preferredSize.width!==n||this.preferredSize.height!==e)&&(this.preferredSize.set(n,e),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height))}copy(n){this.s=n.scale,this.baseSize.set(n.baseWidth,n.baseHeight),this.preferredSize.set(n.preferredWidth,n.preferredHeight),this.dispatchEvent({type:"change"}),this.resizable.setSize(this.baseSize.width,this.baseSize.height)}static get AUTO_SIZE(){return Zl}},TB=class{constructor(n=0){this.nextId=n}getNextId(){return this.nextId++}reset(n=0){return this.nextId=n,this}},Py=new TB(2),G1=class extends Set{constructor(n,e=Py.getNextId()){super(),this.exclusive=!1,this._layer=e,(this._layer<1||this._layer>31)&&(console.warn("Layer out of range, resetting to 2"),Py.reset(2),this._layer=Py.getNextId()),n!==void 0&&this.set(n)}get layer(){return this._layer}set layer(n){const e=this._layer;for(const t of this)t.layers.disable(e),t.layers.enable(n);this._layer=n}getLayer(){return this.layer}setLayer(n){this.layer=n}isExclusive(){return this.exclusive}setExclusive(n){this.exclusive=n}clear(){const n=this.layer;for(const e of this)e.layers.disable(n);return super.clear()}set(n){this.clear();for(const e of n)this.add(e);return this}indexOf(n){return this.has(n)?0:-1}add(n){return this.exclusive?n.layers.set(this.layer):n.layers.enable(this.layer),super.add(n)}delete(n){return this.has(n)&&n.layers.disable(this.layer),super.delete(n)}toggle(n){let e;return this.has(n)?(this.delete(n),e=!1):(this.add(n),e=!0),e}setVisible(n){for(const e of this)n?e.layers.enable(0):e.layers.disable(0);return this}},Zt={ADD:0,ALPHA:1,AVERAGE:2,COLOR:3,COLOR_BURN:4,COLOR_DODGE:5,DARKEN:6,DIFFERENCE:7,DIVIDE:8,DST:9,EXCLUSION:10,HARD_LIGHT:11,HARD_MIX:12,HUE:13,INVERT:14,INVERT_RGB:15,LIGHTEN:16,LINEAR_BURN:17,LINEAR_DODGE:18,LINEAR_LIGHT:19,LUMINOSITY:20,MULTIPLY:21,NEGATION:22,NORMAL:23,OVERLAY:24,PIN_LIGHT:25,REFLECT:26,SATURATION:27,SCREEN:28,SOFT_LIGHT:29,SRC:30,SUBTRACT:31,VIVID_LIGHT:32},EB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y,opacity);}",bB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,min(y.a,opacity));}",AB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y)*0.5,opacity);}",CB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.rg,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",RB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(step(0.0,y)*(1.0-min(vec4(1.0),(1.0-x)/y)),vec4(1.0),step(1.0,x));return mix(x,z,opacity);}",PB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=step(0.0,x)*mix(min(vec4(1.0),x/max(1.0-y,1e-9)),vec4(1.0),step(1.0,y));return mix(x,z,opacity);}",DB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x,y),opacity);}",LB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,abs(x-y),opacity);}",IB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x/max(y,1e-12),opacity);}",UB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,(x+y-2.0*x*y),opacity);}",NB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 a=min(x,1.0),b=min(y,1.0);vec4 z=mix(2.0*a*b,1.0-2.0*(1.0-a)*(1.0-b),step(0.5,y));return mix(x,z,opacity);}",FB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,step(1.0,x+y),opacity);}",kB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(yHSL.r,xHSL.gb));return vec4(mix(x.rgb,z,opacity),y.a);}",OB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-y,opacity);}",BB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y*(1.0-x),opacity);}",zB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x,y),opacity);}",HB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(y+x-1.0,0.0,1.0),opacity);}",GB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,min(x+y,1.0),opacity);}",VB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,clamp(2.0*y+x-1.0,0.0,1.0),opacity);}",WB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.rg,yHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",jB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x*y,opacity);}",XB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,1.0-abs(1.0-x-y),opacity);}",YB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,y,opacity);}",qB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(2.0*y*x,1.0-2.0*(1.0-y)*(1.0-x),step(0.5,x));return mix(x,z,opacity);}",ZB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 z=mix(mix(y2,x,step(0.5*x,y)),max(vec4(0.0),y2-1.0),step(x,(y2-1.0)));return mix(x,z,opacity);}",KB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(min(x*x/max(1.0-y,1e-12),1.0),y,step(1.0,y));return mix(x,z,opacity);}",QB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec3 xHSL=RGBToHSL(x.rgb);vec3 yHSL=RGBToHSL(y.rgb);vec3 z=HSLToRGB(vec3(xHSL.r,yHSL.g,xHSL.b));return vec4(mix(x.rgb,z,opacity),y.a);}",JB="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,x+y-min(x*y,1.0),opacity);}",$B="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 y2=2.0*y;vec4 w=step(0.5,y);vec4 z=mix(x-(1.0-y2)*x*(1.0-x),mix(x+(y2-1.0)*(sqrt(x)-x),x+(y2-1.0)*x*((16.0*x-12.0)*x+3.0),w*(1.0-step(0.25,x))),w);return mix(x,z,opacity);}",e4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return y;}",t4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){return mix(x,max(x+y-1.0,0.0),opacity);}",n4="vec4 blend(const in vec4 x,const in vec4 y,const in float opacity){vec4 z=mix(max(1.0-min((1.0-x)/(2.0*y),1.0),0.0),min(x/(2.0*(1.0-y)),1.0),step(0.5,y));return mix(x,z,opacity);}",i4=new Map([[Zt.ADD,EB],[Zt.ALPHA,bB],[Zt.AVERAGE,AB],[Zt.COLOR,CB],[Zt.COLOR_BURN,RB],[Zt.COLOR_DODGE,PB],[Zt.DARKEN,DB],[Zt.DIFFERENCE,LB],[Zt.DIVIDE,IB],[Zt.DST,null],[Zt.EXCLUSION,UB],[Zt.HARD_LIGHT,NB],[Zt.HARD_MIX,FB],[Zt.HUE,kB],[Zt.INVERT,OB],[Zt.INVERT_RGB,BB],[Zt.LIGHTEN,zB],[Zt.LINEAR_BURN,HB],[Zt.LINEAR_DODGE,GB],[Zt.LINEAR_LIGHT,VB],[Zt.LUMINOSITY,WB],[Zt.MULTIPLY,jB],[Zt.NEGATION,XB],[Zt.NORMAL,YB],[Zt.OVERLAY,qB],[Zt.PIN_LIGHT,ZB],[Zt.REFLECT,KB],[Zt.SATURATION,QB],[Zt.SCREEN,JB],[Zt.SOFT_LIGHT,$B],[Zt.SRC,e4],[Zt.SUBTRACT,t4],[Zt.VIVID_LIGHT,n4]]),r4=class extends sa{constructor(n,e=1){super(),this._blendFunction=n,this.opacity=new Ee(e)}getOpacity(){return this.opacity.value}setOpacity(n){this.opacity.value=n}get blendFunction(){return this._blendFunction}set blendFunction(n){this._blendFunction=n,this.dispatchEvent({type:"change"})}getBlendFunction(){return this.blendFunction}setBlendFunction(n){this.blendFunction=n}getShaderCode(){return i4.get(this.blendFunction)}},es=class extends sa{constructor(n,e,{attributes:t=ra.NONE,blendFunction:i=Zt.NORMAL,defines:r=new Map,uniforms:s=new Map,extensions:a=null,vertexShader:l=null}={}){super(),this.name=n,this.renderer=null,this.attributes=t,this.fragmentShader=e,this.vertexShader=l,this.defines=r,this.uniforms=s,this.extensions=a,this.blendMode=new r4(i),this.blendMode.addEventListener("change",c=>this.setChanged()),this._inputColorSpace=Jr,this._outputColorSpace=Ha}get inputColorSpace(){return this._inputColorSpace}set inputColorSpace(n){this._inputColorSpace=n,this.setChanged()}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(n){this._outputColorSpace=n,this.setChanged()}set mainScene(n){}set mainCamera(n){}getName(){return this.name}setRenderer(n){this.renderer=n}getDefines(){return this.defines}getUniforms(){return this.uniforms}getExtensions(){return this.extensions}getBlendMode(){return this.blendMode}getAttributes(){return this.attributes}setAttributes(n){this.attributes=n,this.setChanged()}getFragmentShader(){return this.fragmentShader}setFragmentShader(n){this.fragmentShader=n,this.setChanged()}getVertexShader(){return this.vertexShader}setVertexShader(n){this.vertexShader=n,this.setChanged()}setChanged(){this.dispatchEvent({type:"change"})}setDepthTexture(n,e=Ji){}update(n,e,t){}setSize(n,e){}initialize(n,e,t){}dispose(){for(const n of Object.keys(this)){const e=this[n];(e instanceof an||e instanceof hr||e instanceof Qn||e instanceof Ai)&&this[n].dispose()}}},Sh={VERY_SMALL:0,SMALL:1,MEDIUM:2,LARGE:3},s4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec4 sum=texture2D(inputBuffer,vUv0);sum+=texture2D(inputBuffer,vUv1);sum+=texture2D(inputBuffer,vUv2);sum+=texture2D(inputBuffer,vUv3);gl_FragColor=sum*0.25;
#include <colorspace_fragment>
}`,a4="uniform vec4 texelSize;uniform float kernel;uniform float scale;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vec2 dUv=(texelSize.xy*vec2(kernel)+texelSize.zw)*scale;vUv0=vec2(uv.x-dUv.x,uv.y+dUv.y);vUv1=vec2(uv.x+dUv.x,uv.y+dUv.y);vUv2=vec2(uv.x+dUv.x,uv.y-dUv.y);vUv3=vec2(uv.x-dUv.x,uv.y-dUv.y);gl_Position=vec4(position.xy,1.0,1.0);}",o4=[new Float32Array([0,0]),new Float32Array([0,1,1]),new Float32Array([0,1,1,2]),new Float32Array([0,1,2,2,3]),new Float32Array([0,1,2,3,4,4,5]),new Float32Array([0,1,2,3,4,5,7,8,9,10])],l4=class extends tn{constructor(n=new hn){super({name:"KawaseBlurMaterial",uniforms:{inputBuffer:new Ee(null),texelSize:new Ee(new hn),scale:new Ee(1),kernel:new Ee(0)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:s4,vertexShader:a4}),this.setTexelSize(n.x,n.y),this.kernelSize=Sh.MEDIUM}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.inputBuffer=n}get kernelSequence(){return o4[this.kernelSize]}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(){return this.uniforms.scale.value}setScale(n){this.uniforms.scale.value=n}getKernel(){return null}get kernel(){return this.uniforms.kernel.value}set kernel(n){this.uniforms.kernel.value=n}setKernel(n){this.kernel=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e,n*.5,e*.5)}setSize(n,e){const t=1/n,i=1/e;this.uniforms.texelSize.value.set(t,i,t*.5,i*.5)}},Gv=class extends Ai{constructor({kernelSize:n=Sh.MEDIUM,resolutionScale:e=.5,width:t=Ln.AUTO_SIZE,height:i=Ln.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("KawaseBlurPass"),this.renderTargetA=new an(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="Blur.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="Blur.Target.B";const a=this.resolution=new Ln(this,r,s,e);a.addEventListener("change",l=>this.setSize(a.baseWidth,a.baseHeight)),this._blurMaterial=new l4,this._blurMaterial.kernelSize=n,this.copyMaterial=new db}getResolution(){return this.resolution}get blurMaterial(){return this._blurMaterial}set blurMaterial(n){this._blurMaterial=n}get dithering(){return this.copyMaterial.dithering}set dithering(n){this.copyMaterial.dithering=n}get kernelSize(){return this.blurMaterial.kernelSize}set kernelSize(n){this.blurMaterial.kernelSize=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get scale(){return this.blurMaterial.scale}set scale(n){this.blurMaterial.scale=n}getScale(){return this.blurMaterial.scale}setScale(n){this.blurMaterial.scale=n}getKernelSize(){return this.kernelSize}setKernelSize(n){this.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.scene,a=this.camera,l=this.renderTargetA,c=this.renderTargetB,f=this.blurMaterial,p=f.kernelSequence;let g=e;this.fullscreenMaterial=f;for(let v=0,y=p.length;v<y;++v){const S=v&1?c:l;f.kernel=p[v],f.inputBuffer=g.texture,n.setRenderTarget(S),n.render(s,a),g=S}this.fullscreenMaterial=this.copyMaterial,this.copyMaterial.inputBuffer=g.texture,n.setRenderTarget(this.renderToScreen?null:t),n.render(s,a)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.blurMaterial.setSize(n,e)}initialize(n,e,t){t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,t!==zn?(this.blurMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.copyMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1"):n!==null&&n.outputColorSpace===yt&&(this.renderTargetA.texture.colorSpace=yt,this.renderTargetB.texture.colorSpace=yt))}static get AUTO_SIZE(){return Ln.AUTO_SIZE}},u4=`#include <common>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef RANGE
uniform vec2 range;
#elif defined(THRESHOLD)
uniform float threshold;uniform float smoothing;
#endif
varying vec2 vUv;void main(){vec4 texel=texture2D(inputBuffer,vUv);float l=luminance(texel.rgb);
#ifdef RANGE
float low=step(range.x,l);float high=step(l,range.y);l*=low*high;
#elif defined(THRESHOLD)
l=smoothstep(threshold,threshold+smoothing,l)*l;
#endif
#ifdef COLOR
gl_FragColor=vec4(texel.rgb*clamp(l,0.0,1.0),l);
#else
gl_FragColor=vec4(l);
#endif
}`,c4=class extends tn{constructor(n=!1,e=null){super({name:"LuminanceMaterial",defines:{THREE_REVISION:yo.replace(/\D+/g,"")},uniforms:{inputBuffer:new Ee(null),threshold:new Ee(0),smoothing:new Ee(1),range:new Ee(null)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:u4,vertexShader:Ec}),this.colorOutput=n,this.luminanceRange=e}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get threshold(){return this.uniforms.threshold.value}set threshold(n){this.smoothing>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.threshold.value=n}getThreshold(){return this.threshold}setThreshold(n){this.threshold=n}get smoothing(){return this.uniforms.smoothing.value}set smoothing(n){this.threshold>0||n>0?this.defines.THRESHOLD="1":delete this.defines.THRESHOLD,this.uniforms.smoothing.value=n}getSmoothingFactor(){return this.smoothing}setSmoothingFactor(n){this.smoothing=n}get useThreshold(){return this.threshold>0||this.smoothing>0}set useThreshold(n){}get colorOutput(){return this.defines.COLOR!==void 0}set colorOutput(n){n?this.defines.COLOR="1":delete this.defines.COLOR,this.needsUpdate=!0}isColorOutputEnabled(n){return this.colorOutput}setColorOutputEnabled(n){this.colorOutput=n}get useRange(){return this.luminanceRange!==null}set useRange(n){this.luminanceRange=null}get luminanceRange(){return this.uniforms.range.value}set luminanceRange(n){n!==null?this.defines.RANGE="1":delete this.defines.RANGE,this.uniforms.range.value=n,this.needsUpdate=!0}getLuminanceRange(){return this.luminanceRange}setLuminanceRange(n){this.luminanceRange=n}},f4=class extends Ai{constructor({renderTarget:n,luminanceRange:e,colorOutput:t,resolutionScale:i=1,width:r=Ln.AUTO_SIZE,height:s=Ln.AUTO_SIZE,resolutionX:a=r,resolutionY:l=s}={}){super("LuminancePass"),this.fullscreenMaterial=new c4(t,e),this.needsSwap=!1,this.renderTarget=n,this.renderTarget===void 0&&(this.renderTarget=new an(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="LuminancePass.Target");const c=this.resolution=new Ln(this,a,l,i);c.addEventListener("change",f=>this.setSize(c.baseWidth,c.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}render(n,e,t,i,r){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}initialize(n,e,t){t!==void 0&&t!==zn&&(this.renderTarget.texture.type=t,this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},h4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#define WEIGHT_INNER 0.125
#define WEIGHT_OUTER 0.0555555
varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;float clampToBorder(const in vec2 uv){return float(uv.s>=0.0&&uv.s<=1.0&&uv.t>=0.0&&uv.t<=1.0);}void main(){vec4 c=vec4(0.0);vec4 w=WEIGHT_INNER*vec4(clampToBorder(vUv00),clampToBorder(vUv01),clampToBorder(vUv02),clampToBorder(vUv03));c+=w.x*texture2D(inputBuffer,vUv00);c+=w.y*texture2D(inputBuffer,vUv01);c+=w.z*texture2D(inputBuffer,vUv02);c+=w.w*texture2D(inputBuffer,vUv03);w=WEIGHT_OUTER*vec4(clampToBorder(vUv04),clampToBorder(vUv05),clampToBorder(vUv06),clampToBorder(vUv07));c+=w.x*texture2D(inputBuffer,vUv04);c+=w.y*texture2D(inputBuffer,vUv05);c+=w.z*texture2D(inputBuffer,vUv06);c+=w.w*texture2D(inputBuffer,vUv07);w=WEIGHT_OUTER*vec4(clampToBorder(vUv08),clampToBorder(vUv09),clampToBorder(vUv10),clampToBorder(vUv11));c+=w.x*texture2D(inputBuffer,vUv08);c+=w.y*texture2D(inputBuffer,vUv09);c+=w.z*texture2D(inputBuffer,vUv10);c+=w.w*texture2D(inputBuffer,vUv11);c+=WEIGHT_OUTER*texture2D(inputBuffer,vUv);gl_FragColor=c;
#include <colorspace_fragment>
}`,d4="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv00;varying vec2 vUv01;varying vec2 vUv02;varying vec2 vUv03;varying vec2 vUv04;varying vec2 vUv05;varying vec2 vUv06;varying vec2 vUv07;varying vec2 vUv08;varying vec2 vUv09;varying vec2 vUv10;varying vec2 vUv11;void main(){vUv=position.xy*0.5+0.5;vUv00=vUv+texelSize*vec2(-1.0,1.0);vUv01=vUv+texelSize*vec2(1.0,1.0);vUv02=vUv+texelSize*vec2(-1.0,-1.0);vUv03=vUv+texelSize*vec2(1.0,-1.0);vUv04=vUv+texelSize*vec2(-2.0,2.0);vUv05=vUv+texelSize*vec2(0.0,2.0);vUv06=vUv+texelSize*vec2(2.0,2.0);vUv07=vUv+texelSize*vec2(-2.0,0.0);vUv08=vUv+texelSize*vec2(2.0,0.0);vUv09=vUv+texelSize*vec2(-2.0,-2.0);vUv10=vUv+texelSize*vec2(0.0,-2.0);vUv11=vUv+texelSize*vec2(2.0,-2.0);gl_Position=vec4(position.xy,1.0,1.0);}",p4=class extends tn{constructor(){super({name:"DownsamplingMaterial",uniforms:{inputBuffer:new Ee(null),texelSize:new Ee(new _e)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:h4,vertexShader:d4})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},m4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;uniform mediump sampler2D supportBuffer;
#else
uniform lowp sampler2D inputBuffer;uniform lowp sampler2D supportBuffer;
#endif
uniform float radius;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vec4 c=vec4(0.0);c+=texture2D(inputBuffer,vUv0)*0.0625;c+=texture2D(inputBuffer,vUv1)*0.125;c+=texture2D(inputBuffer,vUv2)*0.0625;c+=texture2D(inputBuffer,vUv3)*0.125;c+=texture2D(inputBuffer,vUv)*0.25;c+=texture2D(inputBuffer,vUv4)*0.125;c+=texture2D(inputBuffer,vUv5)*0.0625;c+=texture2D(inputBuffer,vUv6)*0.125;c+=texture2D(inputBuffer,vUv7)*0.0625;vec4 baseColor=texture2D(supportBuffer,vUv);gl_FragColor=mix(baseColor,c,radius);
#include <colorspace_fragment>
}`,g4="uniform vec2 texelSize;varying vec2 vUv;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;varying vec2 vUv4;varying vec2 vUv5;varying vec2 vUv6;varying vec2 vUv7;void main(){vUv=position.xy*0.5+0.5;vUv0=vUv+texelSize*vec2(-1.0,1.0);vUv1=vUv+texelSize*vec2(0.0,1.0);vUv2=vUv+texelSize*vec2(1.0,1.0);vUv3=vUv+texelSize*vec2(-1.0,0.0);vUv4=vUv+texelSize*vec2(1.0,0.0);vUv5=vUv+texelSize*vec2(-1.0,-1.0);vUv6=vUv+texelSize*vec2(0.0,-1.0);vUv7=vUv+texelSize*vec2(1.0,-1.0);gl_Position=vec4(position.xy,1.0,1.0);}",v4=class extends tn{constructor(){super({name:"UpsamplingMaterial",uniforms:{inputBuffer:new Ee(null),supportBuffer:new Ee(null),texelSize:new Ee(new _e),radius:new Ee(.85)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:m4,vertexShader:g4})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}set supportBuffer(n){this.uniforms.supportBuffer.value=n}get radius(){return this.uniforms.radius.value}set radius(n){this.uniforms.radius.value=n}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},y4=class extends Ai{constructor(){super("MipmapBlurPass"),this.needsSwap=!1,this.renderTarget=new an(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Upsampling.Mipmap0",this.downsamplingMipmaps=[],this.upsamplingMipmaps=[],this.downsamplingMaterial=new p4,this.upsamplingMaterial=new v4,this.resolution=new _e}get texture(){return this.renderTarget.texture}get levels(){return this.downsamplingMipmaps.length}set levels(n){if(this.levels!==n){const e=this.renderTarget;this.dispose(),this.downsamplingMipmaps=[],this.upsamplingMipmaps=[];for(let t=0;t<n;++t){const i=e.clone();i.texture.name="Downsampling.Mipmap"+t,this.downsamplingMipmaps.push(i)}this.upsamplingMipmaps.push(e);for(let t=1,i=n-1;t<i;++t){const r=e.clone();r.texture.name="Upsampling.Mipmap"+t,this.upsamplingMipmaps.push(r)}this.setSize(this.resolution.x,this.resolution.y)}}get radius(){return this.upsamplingMaterial.radius}set radius(n){this.upsamplingMaterial.radius=n}render(n,e,t,i,r){const{scene:s,camera:a}=this,{downsamplingMaterial:l,upsamplingMaterial:c}=this,{downsamplingMipmaps:f,upsamplingMipmaps:p}=this;let g=e;this.fullscreenMaterial=l;for(let v=0,y=f.length;v<y;++v){const S=f[v];l.setSize(g.width,g.height),l.inputBuffer=g.texture,n.setRenderTarget(S),n.render(s,a),g=S}this.fullscreenMaterial=c;for(let v=p.length-1;v>=0;--v){const y=p[v];c.setSize(g.width,g.height),c.inputBuffer=g.texture,c.supportBuffer=f[v].texture,n.setRenderTarget(y),n.render(s,a),g=y}}setSize(n,e){const t=this.resolution;t.set(n,e);let i=t.width,r=t.height;for(let s=0,a=this.downsamplingMipmaps.length;s<a;++s)i=Math.round(i*.5),r=Math.round(r*.5),this.downsamplingMipmaps[s].setSize(i,r),s<this.upsamplingMipmaps.length&&this.upsamplingMipmaps[s].setSize(i,r)}initialize(n,e,t){if(t!==void 0){const i=this.downsamplingMipmaps.concat(this.upsamplingMipmaps);for(const r of i)r.texture.type=t;if(t!==zn)this.downsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1",this.upsamplingMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1";else if(n!==null&&n.outputColorSpace===yt)for(const r of i)r.texture.colorSpace=yt}}dispose(){super.dispose();for(const n of this.downsamplingMipmaps.concat(this.upsamplingMipmaps))n.dispose()}},x4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
uniform float intensity;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 texel=texture2D(map,uv);outputColor=vec4(texel.rgb*intensity,texel.a);}`,mb=class extends es{constructor({blendFunction:n=Zt.SCREEN,luminanceThreshold:e=.9,luminanceSmoothing:t=.025,mipmapBlur:i=!1,intensity:r=1,radius:s=.85,levels:a=8,kernelSize:l=Sh.LARGE,resolutionScale:c=.5,width:f=Ln.AUTO_SIZE,height:p=Ln.AUTO_SIZE,resolutionX:g=f,resolutionY:v=p}={}){super("BloomEffect",x4,{blendFunction:n,uniforms:new Map([["map",new Ee(null)],["intensity",new Ee(r)]])}),this.renderTarget=new an(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="Bloom.Target",this.blurPass=new Gv({kernelSize:l}),this.luminancePass=new f4({colorOutput:!0}),this.luminanceMaterial.threshold=e,this.luminanceMaterial.smoothing=t,this.mipmapBlurPass=new y4,this.mipmapBlurPass.enabled=i,this.mipmapBlurPass.radius=s,this.mipmapBlurPass.levels=a,this.uniforms.get("map").value=i?this.mipmapBlurPass.texture:this.renderTarget.texture;const y=this.resolution=new Ln(this,g,v,c);y.addEventListener("change",S=>this.setSize(y.baseWidth,y.baseHeight))}get texture(){return this.mipmapBlurPass.enabled?this.mipmapBlurPass.texture:this.renderTarget.texture}getTexture(){return this.texture}getResolution(){return this.resolution}getBlurPass(){return this.blurPass}getLuminancePass(){return this.luminancePass}get luminanceMaterial(){return this.luminancePass.fullscreenMaterial}getLuminanceMaterial(){return this.luminancePass.fullscreenMaterial}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get distinction(){return console.warn(this.name,"distinction was removed"),1}set distinction(n){console.warn(this.name,"distinction was removed")}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getIntensity(){return this.intensity}setIntensity(n){this.intensity=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}update(n,e,t){const i=this.renderTarget,r=this.luminancePass;r.enabled?(r.render(n,e),this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,r.renderTarget):this.blurPass.render(n,r.renderTarget,i)):this.mipmapBlurPass.enabled?this.mipmapBlurPass.render(n,e):this.blurPass.render(n,e,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.blurPass.resolution.copy(t),this.luminancePass.setSize(n,e),this.mipmapBlurPass.setSize(n,e)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.luminancePass.initialize(n,e,t),this.mipmapBlurPass.initialize(n,e,t),t!==void 0&&(this.renderTarget.texture.type=t,n!==null&&n.outputColorSpace===yt&&(this.renderTarget.texture.colorSpace=yt))}},S4="void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=vec4(vec3(average(inputColor.rgb)),inputColor.a);}",_4=class extends es{constructor(n){super("ColorAverageEffect",S4,{blendFunction:n})}},M4=`#ifdef RADIAL_MODULATION
uniform float modulationOffset;
#endif
varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 ra=inputColor.ra;vec2 ba=inputColor.ba;
#ifdef RADIAL_MODULATION
const vec2 center=vec2(0.5);float d=distance(uv,center)*2.0;d=max(d-modulationOffset,0.0);if(vActive>0.0&&d>0.0){ra=texture2D(inputBuffer,mix(uv,vUvR,d)).ra;ba=texture2D(inputBuffer,mix(uv,vUvB,d)).ba;}
#else
if(vActive>0.0){ra=texture2D(inputBuffer,vUvR).ra;ba=texture2D(inputBuffer,vUvB).ba;}
#endif
outputColor=vec4(ra.x,inputColor.g,ba.x,max(max(ra.y,ba.y),inputColor.a));}`,w4="uniform vec2 offset;varying float vActive;varying vec2 vUvR;varying vec2 vUvB;void mainSupport(const in vec2 uv){vec2 shift=offset*vec2(1.0,aspect);vActive=(shift.x!=0.0||shift.y!=0.0)?1.0:0.0;vUvR=uv+shift;vUvB=uv-shift;}",T4=class extends es{constructor({offset:n=new _e(.001,5e-4),radialModulation:e=!1,modulationOffset:t=.15}={}){super("ChromaticAberrationEffect",M4,{vertexShader:w4,attributes:ra.CONVOLUTION,uniforms:new Map([["offset",new Ee(n)],["modulationOffset",new Ee(t)]])}),this.radialModulation=e}get offset(){return this.uniforms.get("offset").value}set offset(n){this.uniforms.get("offset").value=n}get radialModulation(){return this.defines.has("RADIAL_MODULATION")}set radialModulation(n){n?this.defines.set("RADIAL_MODULATION","1"):this.defines.delete("RADIAL_MODULATION"),this.setChanged()}get modulationOffset(){return this.uniforms.get("modulationOffset").value}set modulationOffset(n){this.uniforms.get("modulationOffset").value=n}getOffset(){return this.offset}setOffset(n){this.offset=n}},$f={RED:0,GREEN:1,BLUE:2,ALPHA:3},V1={DISCARD:0,MULTIPLY_RGB_SET_ALPHA:2,MULTIPLY_RGB:3},E4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if PASS == 1
uniform vec4 kernel64[32];
#else
uniform vec4 kernel16[8];
#endif
uniform lowp sampler2D cocBuffer;uniform vec2 texelSize;uniform float scale;varying vec2 vUv;void main(){
#ifdef FOREGROUND
vec2 cocNearFar=texture2D(cocBuffer,vUv).rg*scale;float coc=cocNearFar.x;
#else
float coc=texture2D(cocBuffer,vUv).g*scale;
#endif
if(coc==0.0){gl_FragColor=texture2D(inputBuffer,vUv);}else{
#ifdef FOREGROUND
vec2 step=texelSize*max(cocNearFar.x,cocNearFar.y);
#else
vec2 step=texelSize*coc;
#endif
#if PASS == 1
vec4 acc=vec4(0.0);for(int i=0;i<32;++i){vec4 kernel=kernel64[i];vec2 uv=step*kernel.xy+vUv;acc+=texture2D(inputBuffer,uv);uv=step*kernel.zw+vUv;acc+=texture2D(inputBuffer,uv);}gl_FragColor=acc/64.0;
#else
vec4 maxValue=texture2D(inputBuffer,vUv);for(int i=0;i<8;++i){vec4 kernel=kernel16[i];vec2 uv=step*kernel.xy+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);uv=step*kernel.zw+vUv;maxValue=max(texture2D(inputBuffer,uv),maxValue);}gl_FragColor=maxValue;
#endif
}}`,Rg=class extends tn{constructor(n=!1,e=!1){super({name:"BokehMaterial",defines:{PASS:n?"2":"1"},uniforms:{inputBuffer:new Ee(null),cocBuffer:new Ee(null),texelSize:new Ee(new _e),kernel64:new Ee(null),kernel16:new Ee(null),scale:new Ee(1)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:E4,vertexShader:Ec}),e&&(this.defines.FOREGROUND="1"),this.generateKernel()}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set cocBuffer(n){this.uniforms.cocBuffer.value=n}setCoCBuffer(n){this.uniforms.cocBuffer.value=n}get scale(){return this.uniforms.scale.value}set scale(n){this.uniforms.scale.value=n}getScale(n){return this.scale}setScale(n){this.scale=n}generateKernel(){const n=2.39996323,e=new Float64Array(128),t=new Float64Array(32);let i=0,r=0;for(let s=0,a=Math.sqrt(80);s<80;++s){const l=s*n,c=Math.sqrt(s)/a,f=c*Math.cos(l),p=c*Math.sin(l);s%5===0?(t[r++]=f,t[r++]=p):(e[i++]=f,e[i++]=p)}this.uniforms.kernel64.value=e,this.uniforms.kernel16.value=t}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}};function eh(n,e,t){return n*(e-t)-e}function uc(n,e,t){return Math.min(Math.max((n+e)/(e-t),0),1)}var b4=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float focusDistance;uniform float focusRange;uniform float cameraNear;uniform float cameraFar;varying vec2 vUv;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
float depth=unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
float depth=texture2D(depthBuffer,uv).r;
#endif
#ifdef LOG_DEPTH
float d=pow(2.0,depth*log2(cameraFar+1.0))-1.0;float a=cameraFar/(cameraFar-cameraNear);float b=cameraFar*cameraNear/(cameraNear-cameraFar);depth=a+b/d;
#endif
return depth;}void main(){float depth=readDepth(vUv);
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(depth,cameraNear,cameraFar);float linearDepth=viewZToOrthographicDepth(viewZ,cameraNear,cameraFar);
#else
float linearDepth=depth;
#endif
float signedDistance=linearDepth-focusDistance;float magnitude=smoothstep(0.0,focusRange,abs(signedDistance));gl_FragColor.rg=magnitude*vec2(step(signedDistance,0.0),step(0.0,signedDistance));}`,A4=class extends tn{constructor(n){super({name:"CircleOfConfusionMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ee(null),focusDistance:new Ee(0),focusRange:new Ee(0),cameraNear:new Ee(.3),cameraFar:new Ee(1e3)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:b4,vertexShader:Ec}),this.uniforms.focalLength=this.uniforms.focusRange,this.copyCameraSettings(n)}get near(){return this.uniforms.cameraNear.value}get far(){return this.uniforms.cameraFar.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ji){this.depthBuffer=n,this.depthPacking=e}get focusDistance(){return this.uniforms.focusDistance.value}set focusDistance(n){this.uniforms.focusDistance.value=n}get worldFocusDistance(){return-eh(this.focusDistance,this.near,this.far)}set worldFocusDistance(n){this.focusDistance=uc(-n,this.near,this.far)}getFocusDistance(n){this.uniforms.focusDistance.value=n}setFocusDistance(n){this.uniforms.focusDistance.value=n}get focalLength(){return this.focusRange}set focalLength(n){this.focusRange=n}get focusRange(){return this.uniforms.focusRange.value}set focusRange(n){this.uniforms.focusRange.value=n}get worldFocusRange(){return-eh(this.focusRange,this.near,this.far)}set worldFocusRange(n){this.focusRange=uc(-n,this.near,this.far)}getFocalLength(n){return this.focusRange}setFocalLength(n){this.focusRange=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof ui?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},C4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#ifdef MASK_PRECISION_HIGH
uniform mediump sampler2D maskTexture;
#else
uniform lowp sampler2D maskTexture;
#endif
#if MASK_FUNCTION != 0
uniform float strength;
#endif
varying vec2 vUv;void main(){
#if COLOR_CHANNEL == 0
float mask=texture2D(maskTexture,vUv).r;
#elif COLOR_CHANNEL == 1
float mask=texture2D(maskTexture,vUv).g;
#elif COLOR_CHANNEL == 2
float mask=texture2D(maskTexture,vUv).b;
#else
float mask=texture2D(maskTexture,vUv).a;
#endif
#if MASK_FUNCTION == 0
#ifdef INVERTED
mask=step(mask,0.0);
#else
mask=1.0-step(mask,0.0);
#endif
#else
mask=clamp(mask*strength,0.0,1.0);
#ifdef INVERTED
mask=1.0-mask;
#endif
#endif
#if MASK_FUNCTION == 3
vec4 texel=texture2D(inputBuffer,vUv);gl_FragColor=vec4(mask*texel.rgb,texel.a);
#elif MASK_FUNCTION == 2
gl_FragColor=vec4(mask*texture2D(inputBuffer,vUv).rgb,mask);
#else
gl_FragColor=mask*texture2D(inputBuffer,vUv);
#endif
}`,R4=class extends tn{constructor(n=null){super({name:"MaskMaterial",uniforms:{maskTexture:new Ee(n),inputBuffer:new Ee(null),strength:new Ee(1)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:C4,vertexShader:Ec}),this.colorChannel=$f.RED,this.maskFunction=V1.DISCARD}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}set maskTexture(n){this.uniforms.maskTexture.value=n,delete this.defines.MASK_PRECISION_HIGH,n.type!==zn&&(this.defines.MASK_PRECISION_HIGH="1"),this.needsUpdate=!0}setMaskTexture(n){this.maskTexture=n}set colorChannel(n){this.defines.COLOR_CHANNEL=n.toFixed(0),this.needsUpdate=!0}setColorChannel(n){this.colorChannel=n}set maskFunction(n){this.defines.MASK_FUNCTION=n.toFixed(0),this.needsUpdate=!0}setMaskFunction(n){this.maskFunction=n}get inverted(){return this.defines.INVERTED!==void 0}set inverted(n){this.inverted&&!n?delete this.defines.INVERTED:n&&(this.defines.INVERTED="1"),this.needsUpdate=!0}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get strength(){return this.uniforms.strength.value}set strength(n){this.uniforms.strength.value=n}getStrength(){return this.strength}setStrength(n){this.strength=n}},Ba=class extends Ai{constructor(n,e="inputBuffer"){super("ShaderPass"),this.fullscreenMaterial=n,this.input=e}setInput(n){this.input=n}render(n,e,t,i,r){const s=this.fullscreenMaterial.uniforms;e!==null&&s!==void 0&&s[this.input]!==void 0&&(s[this.input].value=e.texture),n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}initialize(n,e,t){t!==void 0&&t!==zn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}},P4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D nearColorBuffer;uniform mediump sampler2D farColorBuffer;
#else
uniform lowp sampler2D nearColorBuffer;uniform lowp sampler2D farColorBuffer;
#endif
uniform lowp sampler2D nearCoCBuffer;uniform lowp sampler2D farCoCBuffer;uniform float scale;void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){vec4 colorNear=texture2D(nearColorBuffer,uv);vec4 colorFar=texture2D(farColorBuffer,uv);
#if MASK_FUNCTION == 1
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,colorFar.a);cocNearFar.x=min(cocNearFar.x*scale,1.0);
#else
vec2 cocNearFar=vec2(texture2D(nearCoCBuffer,uv).r,texture2D(farCoCBuffer,uv).g);cocNearFar=min(cocNearFar*scale,1.0);
#endif
vec4 result=inputColor*(1.0-cocNearFar.y)+colorFar;result=mix(result,colorNear,cocNearFar.x);outputColor=result;}`,D4=class extends es{constructor(n,{blendFunction:e,worldFocusDistance:t,worldFocusRange:i,focusDistance:r=0,focalLength:s=.1,focusRange:a=s,bokehScale:l=1,resolutionScale:c=1,width:f=Ln.AUTO_SIZE,height:p=Ln.AUTO_SIZE,resolutionX:g=f,resolutionY:v=p}={}){super("DepthOfFieldEffect",P4,{blendFunction:e,attributes:ra.DEPTH,uniforms:new Map([["nearColorBuffer",new Ee(null)],["farColorBuffer",new Ee(null)],["nearCoCBuffer",new Ee(null)],["farCoCBuffer",new Ee(null)],["scale",new Ee(1)]])}),this.camera=n,this.renderTarget=new an(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="DoF.Intermediate",this.renderTargetMasked=this.renderTarget.clone(),this.renderTargetMasked.texture.name="DoF.Masked.Far",this.renderTargetNear=this.renderTarget.clone(),this.renderTargetNear.texture.name="DoF.Bokeh.Near",this.uniforms.get("nearColorBuffer").value=this.renderTargetNear.texture,this.renderTargetFar=this.renderTarget.clone(),this.renderTargetFar.texture.name="DoF.Bokeh.Far",this.uniforms.get("farColorBuffer").value=this.renderTargetFar.texture,this.renderTargetCoC=this.renderTarget.clone(),this.renderTargetCoC.texture.name="DoF.CoC",this.uniforms.get("farCoCBuffer").value=this.renderTargetCoC.texture,this.renderTargetCoCBlurred=this.renderTargetCoC.clone(),this.renderTargetCoCBlurred.texture.name="DoF.CoC.Blurred",this.uniforms.get("nearCoCBuffer").value=this.renderTargetCoCBlurred.texture,this.cocPass=new Ba(new A4(n));const y=this.cocMaterial;y.focusDistance=r,y.focusRange=a,t!==void 0&&(y.worldFocusDistance=t),i!==void 0&&(y.worldFocusRange=i),this.blurPass=new Gv({resolutionScale:c,resolutionX:g,resolutionY:v,kernelSize:Sh.MEDIUM}),this.maskPass=new Ba(new R4(this.renderTargetCoC.texture));const S=this.maskPass.fullscreenMaterial;S.colorChannel=$f.GREEN,this.maskFunction=V1.MULTIPLY_RGB,this.bokehNearBasePass=new Ba(new Rg(!1,!0)),this.bokehNearBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehNearFillPass=new Ba(new Rg(!0,!0)),this.bokehNearFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoCBlurred.texture,this.bokehFarBasePass=new Ba(new Rg(!1,!1)),this.bokehFarBasePass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.bokehFarFillPass=new Ba(new Rg(!0,!1)),this.bokehFarFillPass.fullscreenMaterial.cocBuffer=this.renderTargetCoC.texture,this.target=null;const T=this.resolution=new Ln(this,g,v,c);T.addEventListener("change",w=>this.setSize(T.baseWidth,T.baseHeight)),this.bokehScale=l}set mainCamera(n){this.camera=n,this.cocMaterial.copyCameraSettings(n)}get cocTexture(){return this.renderTargetCoC.texture}get maskFunction(){return this.maskPass.fullscreenMaterial.maskFunction}set maskFunction(n){this.maskFunction!==n&&(this.defines.set("MASK_FUNCTION",n.toFixed(0)),this.maskPass.fullscreenMaterial.maskFunction=n,this.setChanged())}get cocMaterial(){return this.cocPass.fullscreenMaterial}get circleOfConfusionMaterial(){return this.cocMaterial}getCircleOfConfusionMaterial(){return this.cocMaterial}getBlurPass(){return this.blurPass}getResolution(){return this.resolution}get bokehScale(){return this.uniforms.get("scale").value}set bokehScale(n){this.bokehNearBasePass.fullscreenMaterial.scale=n,this.bokehNearFillPass.fullscreenMaterial.scale=n,this.bokehFarBasePass.fullscreenMaterial.scale=n,this.bokehFarFillPass.fullscreenMaterial.scale=n,this.maskPass.fullscreenMaterial.strength=n,this.uniforms.get("scale").value=n}getBokehScale(){return this.bokehScale}setBokehScale(n){this.bokehScale=n}getTarget(){return this.target}setTarget(n){this.target=n}calculateFocusDistance(n){const e=this.camera,t=e.position.distanceTo(n);return uc(-t,e.near,e.far)}setDepthTexture(n,e=Ji){this.cocMaterial.depthBuffer=n,this.cocMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget,r=this.renderTargetCoC,s=this.renderTargetCoCBlurred,a=this.renderTargetMasked;if(this.target!==null){const l=this.calculateFocusDistance(this.target);this.cocMaterial.focusDistance=l}this.cocPass.render(n,null,r),this.blurPass.render(n,r,s),this.maskPass.render(n,e,a),this.bokehFarBasePass.render(n,a,i),this.bokehFarFillPass.render(n,i,this.renderTargetFar),this.bokehNearBasePass.render(n,e,i),this.bokehNearFillPass.render(n,i,this.renderTargetNear)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.cocPass.setSize(n,e),this.blurPass.setSize(n,e),this.maskPass.setSize(n,e),this.renderTargetFar.setSize(n,e),this.renderTargetCoC.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.renderTarget.setSize(i,r),this.renderTargetNear.setSize(i,r),this.renderTargetCoCBlurred.setSize(i,r),this.bokehNearBasePass.fullscreenMaterial.setSize(n,e),this.bokehNearFillPass.fullscreenMaterial.setSize(n,e),this.bokehFarBasePass.fullscreenMaterial.setSize(n,e),this.bokehFarFillPass.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){this.cocPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.bokehNearBasePass.initialize(n,e,t),this.bokehNearFillPass.initialize(n,e,t),this.bokehFarBasePass.initialize(n,e,t),this.bokehFarFillPass.initialize(n,e,t),this.blurPass.initialize(n,e,zn),n.capabilities.logarithmicDepthBuffer&&(this.cocPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTarget.texture.type=t,this.renderTargetNear.texture.type=t,this.renderTargetFar.texture.type=t,this.renderTargetMasked.texture.type=t,n!==null&&n.outputColorSpace===yt&&(this.renderTarget.texture.colorSpace=yt,this.renderTargetNear.texture.colorSpace=yt,this.renderTargetFar.texture.colorSpace=yt,this.renderTargetMasked.texture.colorSpace=yt))}},ic={DISABLED:0,SPORADIC:1,CONSTANT_MILD:2,CONSTANT_WILD:3};function L4(n,e,t){const i=new Map([[hv,1],[dv,1],[Jx,2],[Dn,4]]);let r;if(i.has(e)||console.error("Invalid noise texture format"),t===zn){r=new Uint8Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()*255+.5}else{r=new Float32Array(n*i.get(e));for(let s=0,a=r.length;s<a;++s)r[s]=Math.random()}return r}var Ax=class extends ho{constructor(n,e,t=hv,i=zn){super(L4(n*e,t,i),n,e,t,i),this.needsUpdate=!0}},I4="uniform lowp sampler2D perturbationMap;uniform bool active;uniform float columns;uniform float random;uniform vec2 seeds;uniform vec2 distortion;void mainUv(inout vec2 uv){if(active){if(uv.y<distortion.x+columns&&uv.y>distortion.x-columns*random){float sx=clamp(ceil(seeds.x),0.0,1.0);uv.y=sx*(1.0-(uv.y+distortion.y))+(1.0-sx)*distortion.y;}if(uv.x<distortion.y+columns&&uv.x>distortion.y-columns*random){float sy=clamp(ceil(seeds.y),0.0,1.0);uv.x=sy*distortion.x+(1.0-sy)*(1.0-(uv.x+distortion.x));}vec2 normal=texture2D(perturbationMap,uv*random*random).rg;uv+=normal*seeds*(random*0.2);}}",Pg="Glitch.Generated";function ms(n,e){return n+Math.random()*(e-n)}var U4=class extends es{constructor({chromaticAberrationOffset:n=null,delay:e=new _e(1.5,3.5),duration:t=new _e(.6,1),strength:i=new _e(.3,1),columns:r=.05,ratio:s=.85,perturbationMap:a=null,dtSize:l=64}={}){if(super("GlitchEffect",I4,{uniforms:new Map([["perturbationMap",new Ee(null)],["columns",new Ee(r)],["active",new Ee(!1)],["random",new Ee(1)],["seeds",new Ee(new _e)],["distortion",new Ee(new _e)]])}),a===null){const c=new Ax(l,l,Dn);c.name=Pg,this.perturbationMap=c}else this.perturbationMap=a;this.time=0,this.distortion=this.uniforms.get("distortion").value,this.delay=e,this.duration=t,this.breakPoint=new _e(ms(this.delay.x,this.delay.y),ms(this.duration.x,this.duration.y)),this.strength=i,this.mode=ic.SPORADIC,this.ratio=s,this.chromaticAberrationOffset=n}get seeds(){return this.uniforms.get("seeds").value}get active(){return this.uniforms.get("active").value}isActive(){return this.active}get minDelay(){return this.delay.x}set minDelay(n){this.delay.x=n}getMinDelay(){return this.delay.x}setMinDelay(n){this.delay.x=n}get maxDelay(){return this.delay.y}set maxDelay(n){this.delay.y=n}getMaxDelay(){return this.delay.y}setMaxDelay(n){this.delay.y=n}get minDuration(){return this.duration.x}set minDuration(n){this.duration.x=n}getMinDuration(){return this.duration.x}setMinDuration(n){this.duration.x=n}get maxDuration(){return this.duration.y}set maxDuration(n){this.duration.y=n}getMaxDuration(){return this.duration.y}setMaxDuration(n){this.duration.y=n}get minStrength(){return this.strength.x}set minStrength(n){this.strength.x=n}getMinStrength(){return this.strength.x}setMinStrength(n){this.strength.x=n}get maxStrength(){return this.strength.y}set maxStrength(n){this.strength.y=n}getMaxStrength(){return this.strength.y}setMaxStrength(n){this.strength.y=n}getMode(){return this.mode}setMode(n){this.mode=n}getGlitchRatio(){return 1-this.ratio}setGlitchRatio(n){this.ratio=Math.min(Math.max(1-n,0),1)}get columns(){return this.uniforms.get("columns").value}set columns(n){this.uniforms.get("columns").value=n}getGlitchColumns(){return this.columns}setGlitchColumns(n){this.columns=n}getChromaticAberrationOffset(){return this.chromaticAberrationOffset}setChromaticAberrationOffset(n){this.chromaticAberrationOffset=n}get perturbationMap(){return this.uniforms.get("perturbationMap").value}set perturbationMap(n){const e=this.perturbationMap;e!==null&&e.name===Pg&&e.dispose(),n.minFilter=n.magFilter=$t,n.wrapS=n.wrapT=Ga,n.generateMipmaps=!1,this.uniforms.get("perturbationMap").value=n}getPerturbationMap(){return this.perturbationMap}setPerturbationMap(n){this.perturbationMap=n}generatePerturbationMap(n=64){const e=new Ax(n,n,Dn);return e.name=Pg,e}update(n,e,t){const i=this.mode,r=this.breakPoint,s=this.chromaticAberrationOffset,a=this.strength;let l=this.time,c=!1,f=0,p=0,g;i!==ic.DISABLED&&(i===ic.SPORADIC&&(l+=t,g=l>r.x,l>=r.x+r.y&&(r.set(ms(this.delay.x,this.delay.y),ms(this.duration.x,this.duration.y)),l=0)),f=Math.random(),this.uniforms.get("random").value=f,g&&f>this.ratio||i===ic.CONSTANT_WILD?(c=!0,f*=a.y*.03,p=ms(-Math.PI,Math.PI),this.seeds.set(ms(-a.y,a.y),ms(-a.y,a.y)),this.distortion.set(ms(0,1),ms(0,1))):(g||i===ic.CONSTANT_MILD)&&(c=!0,f*=a.x*.03,p=ms(-Math.PI,Math.PI),this.seeds.set(ms(-a.x,a.x),ms(-a.x,a.x)),this.distortion.set(ms(0,1),ms(0,1))),this.time=l),s!==null&&(c?s.set(Math.cos(p),Math.sin(p)).multiplyScalar(f):s.set(0,0)),this.uniforms.get("active").value=c}dispose(){const n=this.perturbationMap;n!==null&&n.name===Pg&&n.dispose()}},$d={KEEP_MAX_DEPTH:1,DISCARD_MAX_DEPTH:2},N4=`#include <common>
#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer0;uniform highp sampler2D depthBuffer1;
#else
uniform mediump sampler2D depthBuffer0;uniform mediump sampler2D depthBuffer1;
#endif
uniform sampler2D inputBuffer;uniform vec2 cameraNearFar;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}varying vec2 vUv;void main(){vec2 depth;
#if DEPTH_PACKING_0 == 3201
depth.x=unpackRGBAToDepth(texture2D(depthBuffer0,vUv));
#else
depth.x=texture2D(depthBuffer0,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.x*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.x=a+b/d;
#endif
#endif
#if DEPTH_PACKING_1 == 3201
depth.y=unpackRGBAToDepth(texture2D(depthBuffer1,vUv));
#else
depth.y=texture2D(depthBuffer1,vUv).r;
#ifdef LOG_DEPTH
float d=pow(2.0,depth.y*log2(cameraNearFar.y+1.0))-1.0;float a=cameraNearFar.y/(cameraNearFar.y-cameraNearFar.x);float b=cameraNearFar.y*cameraNearFar.x/(cameraNearFar.x-cameraNearFar.y);depth.y=a+b/d;
#endif
#endif
bool isMaxDepth=(depth.x==1.0);
#ifdef PERSPECTIVE_CAMERA
depth.x=viewZToOrthographicDepth(getViewZ(depth.x),cameraNearFar.x,cameraNearFar.y);depth.y=viewZToOrthographicDepth(getViewZ(depth.y),cameraNearFar.x,cameraNearFar.y);
#endif
#if DEPTH_TEST_STRATEGY == 0
bool keep=depthTest(depth.x,depth.y);
#elif DEPTH_TEST_STRATEGY == 1
bool keep=isMaxDepth||depthTest(depth.x,depth.y);
#else
bool keep=!isMaxDepth&&depthTest(depth.x,depth.y);
#endif
if(keep){gl_FragColor=texture2D(inputBuffer,vUv);}else{discard;}}`,gb=class extends tn{constructor(){super({name:"DepthMaskMaterial",defines:{DEPTH_EPSILON:"0.0001",DEPTH_PACKING_0:"0",DEPTH_PACKING_1:"0",DEPTH_TEST_STRATEGY:$d.KEEP_MAX_DEPTH},uniforms:{inputBuffer:new Ee(null),depthBuffer0:new Ee(null),depthBuffer1:new Ee(null),cameraNearFar:new Ee(new _e(1,1))},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:N4,vertexShader:Ec}),this.depthMode=Qg}set depthBuffer0(n){this.uniforms.depthBuffer0.value=n}set depthPacking0(n){this.defines.DEPTH_PACKING_0=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer0(n,e=Ji){this.depthBuffer0=n,this.depthPacking0=e}set depthBuffer1(n){this.uniforms.depthBuffer1.value=n}set depthPacking1(n){this.defines.DEPTH_PACKING_1=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer1(n,e=Ji){this.depthBuffer1=n,this.depthPacking1=e}get maxDepthStrategy(){return Number(this.defines.DEPTH_TEST_STRATEGY)}set maxDepthStrategy(n){this.defines.DEPTH_TEST_STRATEGY=n.toFixed(0),this.needsUpdate=!0}get keepFar(){return this.maxDepthStrategy}set keepFar(n){this.maxDepthStrategy=n?$d.KEEP_MAX_DEPTH:$d.DISCARD_MAX_DEPTH}getMaxDepthStrategy(){return this.maxDepthStrategy}setMaxDepthStrategy(n){this.maxDepthStrategy=n}get epsilon(){return Number(this.defines.DEPTH_EPSILON)}set epsilon(n){this.defines.DEPTH_EPSILON=n.toFixed(16),this.needsUpdate=!0}getEpsilon(){return this.epsilon}setEpsilon(n){this.epsilon=n}get depthMode(){return Number(this.defines.DEPTH_MODE)}set depthMode(n){let e;switch(n){case Gx:e="false";break;case Vx:e="true";break;case sp:e="abs(d1 - d0) <= DEPTH_EPSILON";break;case uv:e="abs(d1 - d0) > DEPTH_EPSILON";break;case Qg:e="d0 > d1";break;case rp:e="d0 >= d1";break;case Wx:e="d0 <= d1";break;case jx:default:e="d0 < d1";break}this.defines.DEPTH_MODE=n.toFixed(0),this.defines["depthTest(d0, d1)"]=e,this.needsUpdate=!0}getDepthMode(){return this.depthMode}setDepthMode(n){this.depthMode=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),n instanceof ui?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},F4=`#include <common>
#include <dithering_pars_fragment>
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
uniform vec2 lightPosition;uniform float exposure;uniform float decay;uniform float density;uniform float weight;uniform float clampMax;varying vec2 vUv;void main(){vec2 coord=vUv;vec2 delta=lightPosition-coord;delta*=1.0/SAMPLES_FLOAT*density;float illuminationDecay=1.0;vec4 color=vec4(0.0);for(int i=0;i<SAMPLES_INT;++i){coord+=delta;vec4 texel=texture2D(inputBuffer,coord);texel*=illuminationDecay*weight;color+=texel;illuminationDecay*=decay;}gl_FragColor=clamp(color*exposure,0.0,clampMax);
#include <dithering_fragment>
}`,k4=class extends tn{constructor(n){super({name:"GodRaysMaterial",defines:{SAMPLES_INT:"60",SAMPLES_FLOAT:"60.0"},uniforms:{inputBuffer:new Ee(null),lightPosition:new Ee(n),density:new Ee(1),decay:new Ee(1),weight:new Ee(1),exposure:new Ee(1),clampMax:new Ee(1)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:F4,vertexShader:Ec})}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get lightPosition(){return this.uniforms.lightPosition.value}getLightPosition(){return this.uniforms.lightPosition.value}setLightPosition(n){this.uniforms.lightPosition.value=n}get density(){return this.uniforms.density.value}set density(n){this.uniforms.density.value=n}getDensity(){return this.uniforms.density.value}setDensity(n){this.uniforms.density.value=n}get decay(){return this.uniforms.decay.value}set decay(n){this.uniforms.decay.value=n}getDecay(){return this.uniforms.decay.value}setDecay(n){this.uniforms.decay.value=n}get weight(){return this.uniforms.weight.value}set weight(n){this.uniforms.weight.value=n}getWeight(){return this.uniforms.weight.value}setWeight(n){this.uniforms.weight.value=n}get exposure(){return this.uniforms.exposure.value}set exposure(n){this.uniforms.exposure.value=n}getExposure(){return this.uniforms.exposure.value}setExposure(n){this.uniforms.exposure.value=n}get maxIntensity(){return this.uniforms.clampMax.value}set maxIntensity(n){this.uniforms.clampMax.value=n}getMaxIntensity(){return this.uniforms.clampMax.value}setMaxIntensity(n){this.uniforms.clampMax.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){const e=Math.floor(n);this.defines.SAMPLES_INT=e.toFixed(0),this.defines.SAMPLES_FLOAT=e.toFixed(1),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}},_h=class extends Ai{constructor(n,e,t=null){super("RenderPass",n,e),this.needsSwap=!1,this.clearPass=new Op,this.overrideMaterialManager=t===null?null:new dw(t),this.ignoreBackground=!1,this.skipShadowMapUpdate=!1,this.selection=null}set mainScene(n){this.scene=n}set mainCamera(n){this.camera=n}get renderToScreen(){return super.renderToScreen}set renderToScreen(n){super.renderToScreen=n,this.clearPass.renderToScreen=n}get overrideMaterial(){const n=this.overrideMaterialManager;return n!==null?n.material:null}set overrideMaterial(n){const e=this.overrideMaterialManager;n!==null?e!==null?e.setMaterial(n):this.overrideMaterialManager=new dw(n):e!==null&&(e.dispose(),this.overrideMaterialManager=null)}getOverrideMaterial(){return this.overrideMaterial}setOverrideMaterial(n){this.overrideMaterial=n}get clear(){return this.clearPass.enabled}set clear(n){this.clearPass.enabled=n}getSelection(){return this.selection}setSelection(n){this.selection=n}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}isShadowMapDisabled(){return this.skipShadowMapUpdate}setShadowMapDisabled(n){this.skipShadowMapUpdate=n}getClearPass(){return this.clearPass}render(n,e,t,i,r){const s=this.scene,a=this.camera,l=this.selection,c=a.layers.mask,f=s.background,p=n.shadowMap.autoUpdate,g=this.renderToScreen?null:e;l!==null&&a.layers.set(l.getLayer()),this.skipShadowMapUpdate&&(n.shadowMap.autoUpdate=!1),(this.ignoreBackground||this.clearPass.overrideClearColor!==null)&&(s.background=null),this.clearPass.enabled&&this.clearPass.render(n,e),n.setRenderTarget(g),this.overrideMaterialManager!==null?this.overrideMaterialManager.render(n,s,a):n.render(s,a),a.layers.mask=c,s.background=f,n.shadowMap.autoUpdate=p}},O4=`#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){outputColor=texture2D(map,uv);}`,Dy=new Q,pw=new vt,B4=class extends es{constructor(n,e,{blendFunction:t=Zt.SCREEN,samples:i=60,density:r=.96,decay:s=.9,weight:a=.4,exposure:l=.6,clampMax:c=1,blur:f=!0,kernelSize:p=Sh.SMALL,resolutionScale:g=.5,width:v=Ln.AUTO_SIZE,height:y=Ln.AUTO_SIZE,resolutionX:S=v,resolutionY:T=y}={}){super("GodRaysEffect",O4,{blendFunction:t,attributes:ra.DEPTH,uniforms:new Map([["map",new Ee(null)]])}),this.camera=n,this._lightSource=e,this.lightSource=e,this.lightScene=new sh,this.screenPosition=new _e,this.renderTargetA=new an(1,1,{depthBuffer:!1}),this.renderTargetA.texture.name="GodRays.Target.A",this.renderTargetB=this.renderTargetA.clone(),this.renderTargetB.texture.name="GodRays.Target.B",this.uniforms.get("map").value=this.renderTargetB.texture,this.renderTargetLight=new an(1,1),this.renderTargetLight.texture.name="GodRays.Light",this.renderTargetLight.depthTexture=new Lp,this.renderPassLight=new _h(this.lightScene,n),this.renderPassLight.clearPass.overrideClearColor=new Je(0),this.clearPass=new Op(!0,!1,!1),this.clearPass.overrideClearColor=new Je(0),this.blurPass=new Gv({kernelSize:p}),this.blurPass.enabled=f,this.depthMaskPass=new Ba(new gb);const w=this.depthMaskMaterial;w.depthBuffer1=this.renderTargetLight.depthTexture,w.copyCameraSettings(n),this.godRaysPass=new Ba(new k4(this.screenPosition));const M=this.godRaysMaterial;M.density=r,M.decay=s,M.weight=a,M.exposure=l,M.maxIntensity=c,M.samples=i;const A=this.resolution=new Ln(this,S,T,g);A.addEventListener("change",b=>this.setSize(A.baseWidth,A.baseHeight))}set mainCamera(n){this.camera=n,this.renderPassLight.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}get lightSource(){return this._lightSource}set lightSource(n){this._lightSource=n,n!==null&&(n.material.depthWrite=!1,n.material.transparent=!0)}getBlurPass(){return this.blurPass}get texture(){return this.renderTargetB.texture}getTexture(){return this.texture}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get godRaysMaterial(){return this.godRaysPass.fullscreenMaterial}getGodRaysMaterial(){return this.godRaysMaterial}getResolution(){return this.resolution}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get dithering(){return this.godRaysMaterial.dithering}set dithering(n){const e=this.godRaysMaterial;e.dithering=n,e.needsUpdate=!0}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}get samples(){return this.godRaysMaterial.samples}set samples(n){this.godRaysMaterial.samples=n}setDepthTexture(n,e=Ji){this.depthMaskPass.fullscreenMaterial.depthBuffer0=n,this.depthMaskPass.fullscreenMaterial.depthPacking0=e}update(n,e,t){const i=this.lightSource,r=i.parent,s=i.matrixAutoUpdate,a=this.renderTargetA,l=this.renderTargetLight;i.material.depthWrite=!0,i.matrixAutoUpdate=!1,i.updateWorldMatrix(!0,!1),r!==null&&(s||pw.copy(i.matrix),i.matrix.copy(i.matrixWorld)),this.lightScene.add(i),this.renderPassLight.render(n,l),this.clearPass.render(n,a),this.depthMaskPass.render(n,l,a),i.material.depthWrite=!1,i.matrixAutoUpdate=s,r!==null&&(s||i.matrix.copy(pw),r.add(i)),Dy.setFromMatrixPosition(i.matrixWorld).project(this.camera),this.screenPosition.set(Math.min(Math.max((Dy.x+1)*.5,-1),2),Math.min(Math.max((Dy.y+1)*.5,-1),2)),this.blurPass.enabled&&this.blurPass.render(n,a,a),this.godRaysPass.render(n,a,this.renderTargetB)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.renderTargetA.setSize(i,r),this.renderTargetB.setSize(i,r),this.renderTargetLight.setSize(i,r),this.blurPass.resolution.copy(t)}initialize(n,e,t){this.blurPass.initialize(n,e,t),this.renderPassLight.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),this.godRaysPass.initialize(n,e,t),t!==void 0&&(this.renderTargetA.texture.type=t,this.renderTargetB.texture.type=t,this.renderTargetLight.texture.type=t,n!==null&&n.outputColorSpace===yt&&(this.renderTargetA.texture.colorSpace=yt,this.renderTargetB.texture.colorSpace=yt,this.renderTargetLight.texture.colorSpace=yt))}},z4="uniform vec2 scale;uniform float lineWidth;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){float grid=0.5-max(abs(mod(uv.x*scale.x,1.0)-0.5),abs(mod(uv.y*scale.y,1.0)-0.5));outputColor=vec4(vec3(smoothstep(0.0,lineWidth,grid)),inputColor.a);}",H4=class extends es{constructor({blendFunction:n=Zt.OVERLAY,scale:e=1,lineWidth:t=0}={}){super("GridEffect",z4,{blendFunction:n,uniforms:new Map([["scale",new Ee(new _e)],["lineWidth",new Ee(t)]])}),this.resolution=new _e,this.s=0,this.scale=e,this.l=0,this.lineWidth=t}get scale(){return this.s}set scale(n){this.s=Math.max(n,1e-6),this.setSize(this.resolution.width,this.resolution.height)}getScale(){return this.scale}setScale(n){this.scale=n}get lineWidth(){return this.l}set lineWidth(n){this.l=n,this.setSize(this.resolution.width,this.resolution.height)}getLineWidth(){return this.lineWidth}setLineWidth(n){this.lineWidth=n}setSize(n,e){this.resolution.set(n,e);const t=n/e,i=this.scale*(e*.125);this.uniforms.get("scale").value.set(t*i,i),this.uniforms.get("lineWidth").value=i/e+this.lineWidth}},G4={SCALE_UP:"lut.scaleup"};function mw(n,e,t){const i=document.createElement("canvas"),r=i.getContext("2d");if(i.width=n,i.height=e,t instanceof Image)r.drawImage(t,0,0);else{const s=r.createImageData(n,e);s.data.set(t),r.putImageData(s,0,0)}return i}var V4=class vb{constructor(e=0,t=0,i=null){this.width=e,this.height=t,this.data=i}toCanvas(){return typeof document>"u"?null:mw(this.width,this.height,this.data)}static from(e){const{width:t,height:i}=e;let r;if(e instanceof Image){const s=mw(t,i,e);s!==null&&(r=s.getContext("2d").getImageData(0,0,t,i).data)}else r=e.data;return new vb(t,i,r)}},W4=`"use strict";(()=>{var O={SCALE_UP:"lut.scaleup"};var _=[new Float32Array(3),new Float32Array(3)],n=[new Float32Array(3),new Float32Array(3),new Float32Array(3),new Float32Array(3)],Z=[[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([1,0,0]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([1,0,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([1,1,0]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,1,0]),new Float32Array([0,1,1]),new Float32Array([1,1,1])],[new Float32Array([0,0,0]),new Float32Array([0,0,1]),new Float32Array([0,1,1]),new Float32Array([1,1,1])]];function d(a,t,r,m){let i=r[0]-t[0],e=r[1]-t[1],y=r[2]-t[2],h=a[0]-t[0],A=a[1]-t[1],w=a[2]-t[2],c=e*w-y*A,l=y*h-i*w,x=i*A-e*h,u=Math.sqrt(c*c+l*l+x*x),b=u*.5,s=c/u,F=l/u,f=x/u,p=-(a[0]*s+a[1]*F+a[2]*f),M=m[0]*s+m[1]*F+m[2]*f;return Math.abs(M+p)*b/3}function V(a,t,r,m,i,e){let y=(r+m*t+i*t*t)*4;e[0]=a[y+0],e[1]=a[y+1],e[2]=a[y+2]}function k(a,t,r,m,i,e){let y=r*(t-1),h=m*(t-1),A=i*(t-1),w=Math.floor(y),c=Math.floor(h),l=Math.floor(A),x=Math.ceil(y),u=Math.ceil(h),b=Math.ceil(A),s=y-w,F=h-c,f=A-l;if(w===y&&c===h&&l===A)V(a,t,y,h,A,e);else{let p;s>=F&&F>=f?p=Z[0]:s>=f&&f>=F?p=Z[1]:f>=s&&s>=F?p=Z[2]:F>=s&&s>=f?p=Z[3]:F>=f&&f>=s?p=Z[4]:f>=F&&F>=s&&(p=Z[5]);let[M,g,X,Y]=p,P=_[0];P[0]=s,P[1]=F,P[2]=f;let o=_[1],L=x-w,S=u-c,U=b-l;o[0]=L*M[0]+w,o[1]=S*M[1]+c,o[2]=U*M[2]+l,V(a,t,o[0],o[1],o[2],n[0]),o[0]=L*g[0]+w,o[1]=S*g[1]+c,o[2]=U*g[2]+l,V(a,t,o[0],o[1],o[2],n[1]),o[0]=L*X[0]+w,o[1]=S*X[1]+c,o[2]=U*X[2]+l,V(a,t,o[0],o[1],o[2],n[2]),o[0]=L*Y[0]+w,o[1]=S*Y[1]+c,o[2]=U*Y[2]+l,V(a,t,o[0],o[1],o[2],n[3]);let T=d(g,X,Y,P)*6,q=d(M,X,Y,P)*6,C=d(M,g,Y,P)*6,E=d(M,g,X,P)*6;n[0][0]*=T,n[0][1]*=T,n[0][2]*=T,n[1][0]*=q,n[1][1]*=q,n[1][2]*=q,n[2][0]*=C,n[2][1]*=C,n[2][2]*=C,n[3][0]*=E,n[3][1]*=E,n[3][2]*=E,e[0]=n[0][0]+n[1][0]+n[2][0]+n[3][0],e[1]=n[0][1]+n[1][1]+n[2][1]+n[3][1],e[2]=n[0][2]+n[1][2]+n[2][2]+n[3][2]}}var v=class{static expand(t,r){let m=Math.cbrt(t.length/4),i=new Float32Array(3),e=new t.constructor(r**3*4),y=t instanceof Uint8Array?255:1,h=r**2,A=1/(r-1);for(let w=0;w<r;++w)for(let c=0;c<r;++c)for(let l=0;l<r;++l){let x=l*A,u=c*A,b=w*A,s=Math.round(l+c*r+w*h)*4;k(t,m,x,u,b,i),e[s+0]=i[0],e[s+1]=i[1],e[s+2]=i[2],e[s+3]=y}return e}};self.addEventListener("message",a=>{let t=a.data,r=t.data;switch(t.operation){case O.SCALE_UP:r=v.expand(r,t.size);break}postMessage(r,[r.buffer]),close()});})();
`,gw=new Je,j4=class Xg extends dc{constructor(e,t){super(e,t,t,t),this.type=li,this.format=Dn,this.minFilter=Et,this.magFilter=Et,this.wrapS=qi,this.wrapT=qi,this.wrapR=qi,this.unpackAlignment=1,this.needsUpdate=!0,this.colorSpace=Jr,this.domainMin=new Q(0,0,0),this.domainMax=new Q(1,1,1)}get isLookupTexture3D(){return!0}scaleUp(e,t=!0){const i=this.image;let r;return e<=i.width?r=Promise.reject(new Error("The target size must be greater than the current size")):r=new Promise((s,a)=>{const l=URL.createObjectURL(new Blob([W4],{type:"text/javascript"})),c=new Worker(l);c.addEventListener("error",p=>a(p.error)),c.addEventListener("message",p=>{const g=new Xg(p.data,e);this.colorSpace=g.colorSpace,g.type=this.type,g.name=this.name,URL.revokeObjectURL(l),s(g)});const f=t?[i.data.buffer]:[];c.postMessage({operation:G4.SCALE_UP,data:i.data,size:e},f)}),r}applyLUT(e){const t=this.image,i=e.image,r=Math.min(t.width,t.height,t.depth),s=Math.min(i.width,i.height,i.depth);if(r!==s)console.error("Size mismatch");else if(e.type!==li||this.type!==li)console.error("Both LUTs must be FloatType textures");else if(e.format!==Dn||this.format!==Dn)console.error("Both LUTs must be RGBA textures");else{const a=t.data,l=i.data,c=r,f=c**2,p=c-1;for(let g=0,v=c**3;g<v;++g){const y=g*4,S=a[y+0]*p,T=a[y+1]*p,w=a[y+2]*p,M=Math.round(S+T*c+w*f)*4;a[y+0]=l[M+0],a[y+1]=l[M+1],a[y+2]=l[M+2]}this.needsUpdate=!0}return this}convertToUint8(){if(this.type===li){const e=this.image.data,t=new Uint8Array(e.length);for(let i=0,r=e.length;i<r;++i)t[i]=e[i]*255+.5;this.image.data=t,this.type=zn,this.needsUpdate=!0}return this}convertToFloat(){if(this.type===zn){const e=this.image.data,t=new Float32Array(e.length);for(let i=0,r=e.length;i<r;++i)t[i]=e[i]/255;this.image.data=t,this.type=li,this.needsUpdate=!0}return this}convertToRGBA(){return console.warn("LookupTexture","convertToRGBA() is deprecated, LUTs are now RGBA by default"),this}convertLinearToSRGB(){const e=this.image.data;if(this.type===li){for(let t=0,i=e.length;t<i;t+=4)gw.fromArray(e,t).convertLinearToSRGB().toArray(e,t);this.colorSpace=yt,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}convertSRGBToLinear(){const e=this.image.data;if(this.type===li){for(let t=0,i=e.length;t<i;t+=4)gw.fromArray(e,t).convertSRGBToLinear().toArray(e,t);this.colorSpace=Jr,this.needsUpdate=!0}else console.error("Color space conversion requires FloatType data");return this}toDataTexture(){const e=this.image.width,t=this.image.height*this.image.depth,i=new ho(this.image.data,e,t);return i.name=this.name,i.type=this.type,i.format=this.format,i.minFilter=Et,i.magFilter=Et,i.wrapS=this.wrapS,i.wrapT=this.wrapT,i.generateMipmaps=!1,i.needsUpdate=!0,this.colorSpace=i.colorSpace,i}static from(e){const t=e.image,{width:i,height:r}=t,s=Math.min(i,r);let a;if(t instanceof Image){const f=V4.from(t).data;if(i>r){a=new Uint8Array(f.length);for(let p=0;p<s;++p)for(let g=0;g<s;++g)for(let v=0;v<s;++v){const y=(v+p*s+g*s*s)*4,S=(v+g*s+p*s*s)*4;a[S+0]=f[y+0],a[S+1]=f[y+1],a[S+2]=f[y+2],a[S+3]=f[y+3]}}else a=new Uint8Array(f.buffer)}else a=t.data.slice();const l=new Xg(a,s);return l.type=e.type,l.name=e.name,e.colorSpace=l.colorSpace,l}static createNeutral(e){const t=new Float32Array(e**3*4),i=e**2,r=1/(e-1);for(let a=0;a<e;++a)for(let l=0;l<e;++l)for(let c=0;c<e;++c){const f=(a+l*e+c*i)*4;t[f+0]=a*r,t[f+1]=l*r,t[f+2]=c*r,t[f+3]=1}const s=new Xg(t,e);return s.name="neutral",s}},X4=`uniform vec3 scale;uniform vec3 offset;
#ifdef CUSTOM_INPUT_DOMAIN
uniform vec3 domainMin;uniform vec3 domainMax;
#endif
#ifdef LUT_3D
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler3D lut;
#else
uniform mediump sampler3D lut;
#endif
#else
uniform lowp sampler3D lut;
#endif
vec4 applyLUT(const in vec3 rgb){
#ifdef TETRAHEDRAL_INTERPOLATION
vec3 p=floor(rgb);vec3 f=rgb-p;vec3 v1=(p+0.5)*LUT_TEXEL_WIDTH;vec3 v4=(p+1.5)*LUT_TEXEL_WIDTH;vec3 v2,v3;vec3 frac;if(f.r>=f.g){if(f.g>f.b){frac=f.rgb;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else if(f.r>=f.b){frac=f.rbg;v2=vec3(v4.x,v1.y,v1.z);v3=vec3(v4.x,v1.y,v4.z);}else{frac=f.brg;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v4.x,v1.y,v4.z);}}else{if(f.b>f.g){frac=f.bgr;v2=vec3(v1.x,v1.y,v4.z);v3=vec3(v1.x,v4.y,v4.z);}else if(f.r>=f.b){frac=f.grb;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v4.x,v4.y,v1.z);}else{frac=f.gbr;v2=vec3(v1.x,v4.y,v1.z);v3=vec3(v1.x,v4.y,v4.z);}}vec4 n1=texture(lut,v1);vec4 n2=texture(lut,v2);vec4 n3=texture(lut,v3);vec4 n4=texture(lut,v4);vec4 weights=vec4(1.0-frac.x,frac.x-frac.y,frac.y-frac.z,frac.z);vec4 result=weights*mat4(vec4(n1.r,n2.r,n3.r,n4.r),vec4(n1.g,n2.g,n3.g,n4.g),vec4(n1.b,n2.b,n3.b,n4.b),vec4(1.0));return vec4(result.rgb,1.0);
#else
return texture(lut,rgb);
#endif
}
#else
#ifdef LUT_PRECISION_HIGH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D lut;
#else
uniform mediump sampler2D lut;
#endif
#else
uniform lowp sampler2D lut;
#endif
vec4 applyLUT(const in vec3 rgb){float slice=rgb.b*LUT_SIZE;float slice0=floor(slice);float interp=slice-slice0;float centeredInterp=interp-0.5;float slice1=slice0+sign(centeredInterp);
#ifdef LUT_STRIP_HORIZONTAL
float xOffset=clamp(rgb.r*LUT_TEXEL_HEIGHT,LUT_TEXEL_WIDTH*0.5,LUT_TEXEL_HEIGHT-LUT_TEXEL_WIDTH*0.5);vec2 uv0=vec2(slice0*LUT_TEXEL_HEIGHT+xOffset,rgb.g);vec2 uv1=vec2(slice1*LUT_TEXEL_HEIGHT+xOffset,rgb.g);
#else
float yOffset=clamp(rgb.g*LUT_TEXEL_WIDTH,LUT_TEXEL_HEIGHT*0.5,LUT_TEXEL_WIDTH-LUT_TEXEL_HEIGHT*0.5);vec2 uv0=vec2(rgb.r,slice0*LUT_TEXEL_WIDTH+yOffset);vec2 uv1=vec2(rgb.r,slice1*LUT_TEXEL_WIDTH+yOffset);
#endif
vec4 sample0=texture2D(lut,uv0);vec4 sample1=texture2D(lut,uv1);return mix(sample0,sample1,abs(centeredInterp));}
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec3 c=inputColor.rgb;
#ifdef CUSTOM_INPUT_DOMAIN
if(c.r>=domainMin.r&&c.g>=domainMin.g&&c.b>=domainMin.b&&c.r<=domainMax.r&&c.g<=domainMax.g&&c.b<=domainMax.b){c=applyLUT(scale*c+offset).rgb;}else{c=inputColor.rgb;}
#else
#if !defined(LUT_3D) || defined(TETRAHEDRAL_INTERPOLATION)
c=clamp(c,0.0,1.0);
#endif
c=applyLUT(scale*c+offset).rgb;
#endif
outputColor=vec4(c,inputColor.a);}`,Y4=class extends es{constructor(n,{blendFunction:e=Zt.SRC,tetrahedralInterpolation:t=!1,inputColorSpace:i=yt}={}){super("LUT3DEffect",X4,{blendFunction:e,uniforms:new Map([["lut",new Ee(null)],["scale",new Ee(new Q)],["offset",new Ee(new Q)],["domainMin",new Ee(null)],["domainMax",new Ee(null)]])}),this.tetrahedralInterpolation=t,this.inputColorSpace=i,this.lut=n}get lut(){return this.uniforms.get("lut").value}set lut(n){const e=this.defines,t=this.uniforms;if(this.lut!==n&&(t.get("lut").value=n,n!==null)){const i=n.image,r=this.tetrahedralInterpolation;if(e.clear(),e.set("LUT_SIZE",Math.min(i.width,i.height).toFixed(16)),e.set("LUT_TEXEL_WIDTH",(1/i.width).toFixed(16)),e.set("LUT_TEXEL_HEIGHT",(1/i.height).toFixed(16)),t.get("domainMin").value=null,t.get("domainMax").value=null,(n.type===li||n.type===Tr)&&e.set("LUT_PRECISION_HIGH","1"),i.width>i.height?e.set("LUT_STRIP_HORIZONTAL","1"):n instanceof dc&&e.set("LUT_3D","1"),n instanceof j4){const s=n.domainMin,a=n.domainMax;(s.x!==0||s.y!==0||s.z!==0||a.x!==1||a.y!==1||a.z!==1)&&(e.set("CUSTOM_INPUT_DOMAIN","1"),t.get("domainMin").value=s.clone(),t.get("domainMax").value=a.clone())}this.tetrahedralInterpolation=r}}getLUT(){return this.lut}setLUT(n){this.lut=n}updateScaleOffset(){const n=this.lut;if(n!==null){const e=Math.min(n.image.width,n.image.height),t=this.uniforms.get("scale").value,i=this.uniforms.get("offset").value;if(this.tetrahedralInterpolation&&n instanceof dc)if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t)}else t.setScalar(e-1),i.setScalar(0);else if(this.defines.has("CUSTOM_INPUT_DOMAIN")){const r=n.domainMax.clone().sub(n.domainMin).multiplyScalar(e);t.setScalar(e-1).divide(r),i.copy(n.domainMin).negate().multiply(t).addScalar(1/(2*e))}else t.setScalar((e-1)/e),i.setScalar(1/(2*e))}}configureTetrahedralInterpolation(){const n=this.lut;n!==null&&(n.minFilter=Et,n.magFilter=Et,this.tetrahedralInterpolation&&(n instanceof dc?(n.minFilter=$t,n.magFilter=$t):console.warn("Tetrahedral interpolation requires a 3D texture")),n.needsUpdate=!0)}get tetrahedralInterpolation(){return this.defines.has("TETRAHEDRAL_INTERPOLATION")}set tetrahedralInterpolation(n){n?this.defines.set("TETRAHEDRAL_INTERPOLATION","1"):this.defines.delete("TETRAHEDRAL_INTERPOLATION"),this.configureTetrahedralInterpolation(),this.updateScaleOffset(),this.setChanged()}setTetrahedralInterpolationEnabled(n){this.tetrahedralInterpolation=n}},Wd={FULL:0,SINGLE:1},q4=`#include <packing>
#include <clipping_planes_pars_fragment>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform float cameraNear;uniform float cameraFar;centroid varying float vViewZ;centroid varying vec4 vProjTexCoord;void main(){
#include <clipping_planes_fragment>
vec2 projTexCoord=(vProjTexCoord.xy/vProjTexCoord.w)*0.5+0.5;projTexCoord=clamp(projTexCoord,0.002,0.998);
#if DEPTH_PACKING == 3201
float fragCoordZ=unpackRGBAToDepth(texture2D(depthBuffer,projTexCoord));
#else
float fragCoordZ=texture2D(depthBuffer,projTexCoord).r;
#endif
#ifdef PERSPECTIVE_CAMERA
float viewZ=perspectiveDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#else
float viewZ=orthographicDepthToViewZ(fragCoordZ,cameraNear,cameraFar);
#endif
float depthTest=(-vViewZ>-viewZ)?1.0:0.0;gl_FragColor.rg=vec2(0.0,depthTest);}`,Z4=`#include <common>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
varying float vViewZ;varying vec4 vProjTexCoord;void main(){
#include <skinbase_vertex>
#include <begin_vertex>
#include <morphtarget_vertex>
#include <skinning_vertex>
#include <project_vertex>
vViewZ=mvPosition.z;vProjTexCoord=gl_Position;
#include <clipping_planes_vertex>
}`,K4=class extends tn{constructor(n=null,e){super({name:"DepthComparisonMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ee(null),cameraNear:new Ee(.3),cameraFar:new Ee(1e3)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:q4,vertexShader:Z4}),this.depthBuffer=n,this.depthPacking=ia,this.copyCameraSettings(e)}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=ia){this.depthBuffer=n,this.depthPacking=e}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof ui?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}},Q4="uniform lowp sampler2D inputBuffer;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 c0=texture2D(inputBuffer,vUv0).rg;vec2 c1=texture2D(inputBuffer,vUv1).rg;vec2 c2=texture2D(inputBuffer,vUv2).rg;vec2 c3=texture2D(inputBuffer,vUv3).rg;float d0=(c0.x-c1.x)*0.5;float d1=(c2.x-c3.x)*0.5;float d=length(vec2(d0,d1));float a0=min(c0.y,c1.y);float a1=min(c2.y,c3.y);float visibilityFactor=min(a0,a1);gl_FragColor.rg=(1.0-visibilityFactor>0.001)?vec2(d,0.0):vec2(0.0,d);}",J4="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=vec2(uv.x+texelSize.x,uv.y);vUv1=vec2(uv.x-texelSize.x,uv.y);vUv2=vec2(uv.x,uv.y+texelSize.y);vUv3=vec2(uv.x,uv.y-texelSize.y);gl_Position=vec4(position.xy,1.0,1.0);}",$4=class extends tn{constructor(n=new _e){super({name:"OutlineMaterial",uniforms:{inputBuffer:new Ee(null),texelSize:new Ee(new _e)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:Q4,vertexShader:J4}),this.uniforms.texelSize.value.set(n.x,n.y),this.uniforms.maskTexture=this.uniforms.inputBuffer}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},W1=class extends Ai{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=Ln.AUTO_SIZE,height:s=Ln.AUTO_SIZE,resolutionX:a=r,resolutionY:l=s}={}){super("DepthPass"),this.needsSwap=!1,this.renderPass=new _h(n,e,new Dp({depthPacking:ia}));const c=this.renderPass;c.skipShadowMapUpdate=!0,c.ignoreBackground=!0;const f=c.clearPass;f.overrideClearColor=new Je(16777215),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new an(1,1,{minFilter:$t,magFilter:$t}),this.renderTarget.texture.name="DepthPass.Target");const p=this.resolution=new Ln(this,a,l,i);p.addEventListener("change",g=>this.setSize(p.baseWidth,p.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}},ez=`uniform lowp sampler2D edgeTexture;uniform lowp sampler2D maskTexture;uniform vec3 visibleEdgeColor;uniform vec3 hiddenEdgeColor;uniform float pulse;uniform float edgeStrength;
#ifdef USE_PATTERN
uniform lowp sampler2D patternTexture;varying vec2 vUvPattern;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec2 edge=texture2D(edgeTexture,uv).rg;vec2 mask=texture2D(maskTexture,uv).rg;
#ifndef X_RAY
edge.y=0.0;
#endif
edge*=(edgeStrength*mask.x*pulse);vec3 color=edge.x*visibleEdgeColor+edge.y*hiddenEdgeColor;float visibilityFactor=0.0;
#ifdef USE_PATTERN
vec4 patternColor=texture2D(patternTexture,vUvPattern);
#ifdef X_RAY
float hiddenFactor=0.5;
#else
float hiddenFactor=0.0;
#endif
visibilityFactor=(1.0-mask.y>0.0)?1.0:hiddenFactor;visibilityFactor*=(1.0-mask.x)*patternColor.a;color+=visibilityFactor*patternColor.rgb;
#endif
float alpha=max(max(edge.x,edge.y),visibilityFactor);
#ifdef ALPHA
outputColor=vec4(color,alpha);
#else
outputColor=vec4(color,max(alpha,inputColor.a));
#endif
}`,tz="uniform float patternScale;varying vec2 vUvPattern;void mainSupport(const in vec2 uv){vUvPattern=uv*vec2(aspect,1.0)*patternScale;}",nz=class extends es{constructor(n,e,{blendFunction:t=Zt.SCREEN,patternTexture:i=null,patternScale:r=1,edgeStrength:s=1,pulseSpeed:a=0,visibleEdgeColor:l=16777215,hiddenEdgeColor:c=2230538,kernelSize:f=Sh.VERY_SMALL,blur:p=!1,xRay:g=!0,multisampling:v=0,resolutionScale:y=.5,width:S=Ln.AUTO_SIZE,height:T=Ln.AUTO_SIZE,resolutionX:w=S,resolutionY:M=T}={}){super("OutlineEffect",ez,{uniforms:new Map([["maskTexture",new Ee(null)],["edgeTexture",new Ee(null)],["edgeStrength",new Ee(s)],["visibleEdgeColor",new Ee(new Je(l))],["hiddenEdgeColor",new Ee(new Je(c))],["pulse",new Ee(1)],["patternScale",new Ee(r)],["patternTexture",new Ee(null)]])}),this.blendMode.addEventListener("change",I=>{this.blendMode.blendFunction===Zt.ALPHA?this.defines.set("ALPHA","1"):this.defines.delete("ALPHA"),this.setChanged()}),this.blendMode.blendFunction=t,this.patternTexture=i,this.xRay=g,this.scene=n,this.camera=e,this.renderTargetMask=new an(1,1),this.renderTargetMask.samples=v,this.renderTargetMask.texture.name="Outline.Mask",this.uniforms.get("maskTexture").value=this.renderTargetMask.texture,this.renderTargetOutline=new an(1,1,{depthBuffer:!1}),this.renderTargetOutline.texture.name="Outline.Edges",this.uniforms.get("edgeTexture").value=this.renderTargetOutline.texture,this.clearPass=new Op,this.clearPass.overrideClearColor=new Je(0),this.clearPass.overrideClearAlpha=1,this.depthPass=new W1(n,e),this.maskPass=new _h(n,e,new K4(this.depthPass.texture,e));const A=this.maskPass.clearPass;A.overrideClearColor=new Je(16777215),A.overrideClearAlpha=1,this.blurPass=new Gv({resolutionScale:y,resolutionX:w,resolutionY:M,kernelSize:f}),this.blurPass.enabled=p;const b=this.blurPass.resolution;b.addEventListener("change",I=>this.setSize(b.baseWidth,b.baseHeight)),this.outlinePass=new Ba(new $4);const R=this.outlinePass.fullscreenMaterial;R.inputBuffer=this.renderTargetMask.texture,this.time=0,this.forceUpdate=!0,this.selection=new G1,this.pulseSpeed=a}set mainScene(n){this.scene=n,this.depthPass.mainScene=n,this.maskPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.maskPass.mainCamera=n,this.maskPass.overrideMaterial.copyCameraSettings(n)}get resolution(){return this.blurPass.resolution}getResolution(){return this.blurPass.getResolution()}get multisampling(){return this.renderTargetMask.samples}set multisampling(n){this.renderTargetMask.samples=n,this.renderTargetMask.dispose()}get patternScale(){return this.uniforms.get("patternScale").value}set patternScale(n){this.uniforms.get("patternScale").value=n}get edgeStrength(){return this.uniforms.get("edgeStrength").value}set edgeStrength(n){this.uniforms.get("edgeStrength").value=n}get visibleEdgeColor(){return this.uniforms.get("visibleEdgeColor").value}set visibleEdgeColor(n){this.uniforms.get("visibleEdgeColor").value=n}get hiddenEdgeColor(){return this.uniforms.get("hiddenEdgeColor").value}set hiddenEdgeColor(n){this.uniforms.get("hiddenEdgeColor").value=n}getBlurPass(){return this.blurPass}getSelection(){return this.selection}getPulseSpeed(){return this.pulseSpeed}setPulseSpeed(n){this.pulseSpeed=n}get width(){return this.resolution.width}set width(n){this.resolution.preferredWidth=n}get height(){return this.resolution.height}set height(n){this.resolution.preferredHeight=n}get selectionLayer(){return this.selection.layer}set selectionLayer(n){this.selection.layer=n}get dithering(){return this.blurPass.dithering}set dithering(n){this.blurPass.dithering=n}get kernelSize(){return this.blurPass.kernelSize}set kernelSize(n){this.blurPass.kernelSize=n}get blur(){return this.blurPass.enabled}set blur(n){this.blurPass.enabled=n}get xRay(){return this.defines.has("X_RAY")}set xRay(n){this.xRay!==n&&(n?this.defines.set("X_RAY","1"):this.defines.delete("X_RAY"),this.setChanged())}isXRayEnabled(){return this.xRay}setXRayEnabled(n){this.xRay=n}get patternTexture(){return this.uniforms.get("patternTexture").value}set patternTexture(n){n!==null?(n.wrapS=n.wrapT=Ga,this.defines.set("USE_PATTERN","1"),this.setVertexShader(tz)):(this.defines.delete("USE_PATTERN"),this.setVertexShader(null)),this.uniforms.get("patternTexture").value=n,this.setChanged()}setPatternTexture(n){this.patternTexture=n}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}setSelection(n){return this.selection.set(n),this}clearSelection(){return this.selection.clear(),this}selectObject(n){return this.selection.add(n),this}deselectObject(n){return this.selection.delete(n),this}update(n,e,t){const i=this.scene,r=this.camera,s=this.selection,l=this.uniforms.get("pulse"),c=i.background,f=r.layers.mask;(this.forceUpdate||s.size>0)&&(i.background=null,l.value=1,this.pulseSpeed>0&&(l.value=Math.cos(this.time*this.pulseSpeed*10)*.375+.625),this.time+=t,s.setVisible(!1),this.depthPass.render(n),s.setVisible(!0),r.layers.set(s.layer),this.maskPass.render(n,this.renderTargetMask),r.layers.mask=f,i.background=c,this.outlinePass.render(n,null,this.renderTargetOutline),this.blurPass.enabled&&this.blurPass.render(n,this.renderTargetOutline,this.renderTargetOutline)),this.forceUpdate=s.size>0}setSize(n,e){this.blurPass.setSize(n,e),this.renderTargetMask.setSize(n,e);const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.depthPass.setSize(i,r),this.renderTargetOutline.setSize(i,r),this.outlinePass.fullscreenMaterial.setSize(i,r)}initialize(n,e,t){this.blurPass.initialize(n,e,zn),t!==void 0&&(this.depthPass.initialize(n,e,t),this.maskPass.initialize(n,e,t),this.outlinePass.initialize(n,e,t))}},iz="uniform bool active;uniform vec4 d;void mainUv(inout vec2 uv){if(active){uv=d.xy*(floor(uv*d.zw)+0.5);}}",rz=class extends es{constructor(n=30){super("PixelationEffect",iz,{uniforms:new Map([["active",new Ee(!1)],["d",new Ee(new hn)]])}),this.resolution=new _e,this._granularity=0,this.granularity=n}get granularity(){return this._granularity}set granularity(n){let e=Math.floor(n);e%2>0&&(e+=1),this._granularity=e,this.uniforms.get("active").value=e>0,this.setSize(this.resolution.width,this.resolution.height)}getGranularity(){return this.granularity}setGranularity(n){this.granularity=n}setSize(n,e){const t=this.resolution;t.set(n,e);const i=this.granularity,r=i/t.x,s=i/t.y;this.uniforms.get("d").value.set(r,s,1/r,1/s)}},sz=class extends mb{constructor(n,e,t){super(t),this.setAttributes(this.getAttributes()|ra.DEPTH),this.camera=e,this.depthPass=new W1(n,e),this.clearPass=new Op(!0,!1,!1),this.clearPass.overrideClearColor=new Je(0),this.depthMaskPass=new Ba(new gb);const i=this.depthMaskMaterial;i.copyCameraSettings(e),i.depthBuffer1=this.depthPass.texture,i.depthPacking1=ia,i.depthMode=sp,this.renderTargetMasked=new an(1,1,{depthBuffer:!1}),this.renderTargetMasked.texture.name="Bloom.Masked",this.selection=new G1,this._inverted=!1,this._ignoreBackground=!1}set mainScene(n){this.depthPass.mainScene=n}set mainCamera(n){this.camera=n,this.depthPass.mainCamera=n,this.depthMaskMaterial.copyCameraSettings(n)}getSelection(){return this.selection}get depthMaskMaterial(){return this.depthMaskPass.fullscreenMaterial}get inverted(){return this._inverted}set inverted(n){this._inverted=n,this.depthMaskMaterial.depthMode=n?uv:sp}isInverted(){return this.inverted}setInverted(n){this.inverted=n}get ignoreBackground(){return this._ignoreBackground}set ignoreBackground(n){this._ignoreBackground=n,this.depthMaskMaterial.maxDepthStrategy=n?$d.DISCARD_MAX_DEPTH:$d.KEEP_MAX_DEPTH}isBackgroundDisabled(){return this.ignoreBackground}setBackgroundDisabled(n){this.ignoreBackground=n}setDepthTexture(n,e=Ji){this.depthMaskMaterial.depthBuffer0=n,this.depthMaskMaterial.depthPacking0=e}update(n,e,t){const i=this.camera,r=this.selection,s=this.inverted;let a=e;if(this.ignoreBackground||!s||r.size>0){const l=i.layers.mask;i.layers.set(r.layer),this.depthPass.render(n),i.layers.mask=l,a=this.renderTargetMasked,this.clearPass.render(n,a),this.depthMaskPass.render(n,e,a)}super.update(n,a,t)}setSize(n,e){super.setSize(n,e),this.renderTargetMasked.setSize(n,e),this.depthPass.setSize(n,e)}initialize(n,e,t){super.initialize(n,e,t),this.clearPass.initialize(n,e,t),this.depthPass.initialize(n,e,t),this.depthMaskPass.initialize(n,e,t),n!==null&&n.capabilities.logarithmicDepthBuffer&&(this.depthMaskPass.fullscreenMaterial.defines.LOG_DEPTH="1"),t!==void 0&&(this.renderTargetMasked.texture.type=t,n!==null&&n.outputColorSpace===yt&&(this.renderTargetMasked.texture.colorSpace=yt))}},az=`#include <common>
#include <packing>
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
uniform lowp sampler2D normalBuffer;
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
uniform lowp sampler2D noiseTexture;uniform mat4 inverseProjectionMatrix;uniform mat4 projectionMatrix;uniform vec2 texelSize;uniform vec2 cameraNearFar;uniform float intensity;uniform float minRadiusScale;uniform float fade;uniform float bias;uniform vec2 distanceCutoff;uniform vec2 proximityCutoff;varying vec2 vUv;varying vec2 vUv2;float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#else
return orthographicDepthToViewZ(depth,cameraNearFar.x,cameraNearFar.y);
#endif
}vec3 getViewPosition(const in vec2 screenPosition,const in float depth,const in float viewZ){vec4 clipPosition=vec4(vec3(screenPosition,depth)*2.0-1.0,1.0);float clipW=projectionMatrix[2][3]*viewZ+projectionMatrix[3][3];clipPosition*=clipW;return(inverseProjectionMatrix*clipPosition).xyz;}float getAmbientOcclusion(const in vec3 p,const in vec3 n,const in float depth,const in vec2 uv){float radiusScale=1.0-smoothstep(0.0,distanceCutoff.y,depth);radiusScale=radiusScale*(1.0-minRadiusScale)+minRadiusScale;float radius=RADIUS*radiusScale;float noise=texture2D(noiseTexture,vUv2).r;float baseAngle=noise*PI2;float rings=SPIRAL_TURNS*PI2;float occlusion=0.0;int taps=0;for(int i=0;i<SAMPLES_INT;++i){float alpha=(float(i)+0.5)*INV_SAMPLES_FLOAT;float angle=alpha*rings+baseAngle;vec2 rotation=vec2(cos(angle),sin(angle));vec2 coords=alpha*radius*rotation*texelSize+uv;if(coords.s<0.0||coords.s>1.0||coords.t<0.0||coords.t>1.0){continue;}float sampleDepth=readDepth(coords);float viewZ=getViewZ(sampleDepth);
#ifdef PERSPECTIVE_CAMERA
float linearSampleDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearSampleDepth=sampleDepth;
#endif
float proximity=abs(depth-linearSampleDepth);if(proximity<proximityCutoff.y){float falloff=1.0-smoothstep(proximityCutoff.x,proximityCutoff.y,proximity);vec3 Q=getViewPosition(coords,sampleDepth,viewZ);vec3 v=Q-p;float vv=dot(v,v);float vn=dot(v,n)-bias;float f=max(RADIUS_SQ-vv,0.0)/RADIUS_SQ;occlusion+=(f*f*f*max(vn/(fade+vv),0.0))*falloff;}++taps;}return occlusion/(4.0*max(float(taps),1.0));}void main(){
#ifdef NORMAL_DEPTH
vec4 normalDepth=texture2D(normalDepthBuffer,vUv);
#else
vec4 normalDepth=vec4(texture2D(normalBuffer,vUv).xyz,readDepth(vUv));
#endif
float ao=0.0;float depth=normalDepth.a;float viewZ=getViewZ(depth);
#ifdef PERSPECTIVE_CAMERA
float linearDepth=viewZToOrthographicDepth(viewZ,cameraNearFar.x,cameraNearFar.y);
#else
float linearDepth=depth;
#endif
if(linearDepth<distanceCutoff.y){vec3 viewPosition=getViewPosition(vUv,depth,viewZ);vec3 viewNormal=unpackRGBToNormal(normalDepth.rgb);ao+=getAmbientOcclusion(viewPosition,viewNormal,linearDepth,vUv);float d=smoothstep(distanceCutoff.x,distanceCutoff.y,linearDepth);ao=mix(ao,0.0,d);
#ifdef LEGACY_INTENSITY
ao=clamp(1.0-pow(1.0-ao,abs(intensity)),0.0,1.0);
#endif
}gl_FragColor.r=ao;}`,oz="uniform vec2 noiseScale;varying vec2 vUv;varying vec2 vUv2;void main(){vUv=position.xy*0.5+0.5;vUv2=vUv*noiseScale;gl_Position=vec4(position.xy,1.0,1.0);}",lz=class extends tn{constructor(n){super({name:"SSAOMaterial",defines:{SAMPLES_INT:"0",INV_SAMPLES_FLOAT:"0.0",SPIRAL_TURNS:"0.0",RADIUS:"1.0",RADIUS_SQ:"1.0",DISTANCE_SCALING:"1",DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ee(null),normalBuffer:new Ee(null),normalDepthBuffer:new Ee(null),noiseTexture:new Ee(null),inverseProjectionMatrix:new Ee(new vt),projectionMatrix:new Ee(new vt),texelSize:new Ee(new _e),cameraNearFar:new Ee(new _e),distanceCutoff:new Ee(new _e),proximityCutoff:new Ee(new _e),noiseScale:new Ee(new _e),minRadiusScale:new Ee(.33),intensity:new Ee(1),fade:new Ee(.01),bias:new Ee(0)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:az,vertexShader:oz}),this.copyCameraSettings(n),this.resolution=new _e,this.r=1}get near(){return this.uniforms.cameraNearFar.value.x}get far(){return this.uniforms.cameraNearFar.value.y}set normalDepthBuffer(n){this.uniforms.normalDepthBuffer.value=n,n!==null?this.defines.NORMAL_DEPTH="1":delete this.defines.NORMAL_DEPTH,this.needsUpdate=!0}setNormalDepthBuffer(n){this.normalDepthBuffer=n}set normalBuffer(n){this.uniforms.normalBuffer.value=n}setNormalBuffer(n){this.uniforms.normalBuffer.value=n}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ji){this.depthBuffer=n,this.depthPacking=e}set noiseTexture(n){this.uniforms.noiseTexture.value=n}setNoiseTexture(n){this.uniforms.noiseTexture.value=n}get samples(){return Number(this.defines.SAMPLES_INT)}set samples(n){this.defines.SAMPLES_INT=n.toFixed(0),this.defines.INV_SAMPLES_FLOAT=(1/n).toFixed(9),this.needsUpdate=!0}getSamples(){return this.samples}setSamples(n){this.samples=n}get rings(){return Number(this.defines.SPIRAL_TURNS)}set rings(n){this.defines.SPIRAL_TURNS=n.toFixed(1),this.needsUpdate=!0}getRings(){return this.rings}setRings(n){this.rings=n}get intensity(){return this.uniforms.intensity.value}set intensity(n){this.uniforms.intensity.value=n,this.defines.LEGACY_INTENSITY===void 0&&(this.defines.LEGACY_INTENSITY="1",this.needsUpdate=!0)}getIntensity(){return this.uniforms.intensity.value}setIntensity(n){this.uniforms.intensity.value=n}get fade(){return this.uniforms.fade.value}set fade(n){this.uniforms.fade.value=n}getFade(){return this.uniforms.fade.value}setFade(n){this.uniforms.fade.value=n}get bias(){return this.uniforms.bias.value}set bias(n){this.uniforms.bias.value=n}getBias(){return this.uniforms.bias.value}setBias(n){this.uniforms.bias.value=n}get minRadiusScale(){return this.uniforms.minRadiusScale.value}set minRadiusScale(n){this.uniforms.minRadiusScale.value=n}getMinRadiusScale(){return this.uniforms.minRadiusScale.value}setMinRadiusScale(n){this.uniforms.minRadiusScale.value=n}updateRadius(){const n=this.r*this.resolution.height;this.defines.RADIUS=n.toFixed(11),this.defines.RADIUS_SQ=(n*n).toFixed(11),this.needsUpdate=!0}get radius(){return this.r}set radius(n){this.r=Math.min(Math.max(n,1e-6),1),this.updateRadius()}getRadius(){return this.radius}setRadius(n){this.radius=n}get distanceScaling(){return!0}set distanceScaling(n){}isDistanceScalingEnabled(){return this.distanceScaling}setDistanceScalingEnabled(n){this.distanceScaling=n}get distanceThreshold(){return this.uniforms.distanceCutoff.value.x}set distanceThreshold(n){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.distanceFalloff,0),1))}get worldDistanceThreshold(){return-eh(this.distanceThreshold,this.near,this.far)}set worldDistanceThreshold(n){this.distanceThreshold=uc(-n,this.near,this.far)}get distanceFalloff(){return this.uniforms.distanceCutoff.value.y-this.distanceThreshold}set distanceFalloff(n){this.uniforms.distanceCutoff.value.y=Math.min(Math.max(this.distanceThreshold+n,0),1)}get worldDistanceFalloff(){return-eh(this.distanceFalloff,this.near,this.far)}set worldDistanceFalloff(n){this.distanceFalloff=uc(-n,this.near,this.far)}setDistanceCutoff(n,e){this.uniforms.distanceCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}get proximityThreshold(){return this.uniforms.proximityCutoff.value.x}set proximityThreshold(n){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+this.proximityFalloff,0),1))}get worldProximityThreshold(){return-eh(this.proximityThreshold,this.near,this.far)}set worldProximityThreshold(n){this.proximityThreshold=uc(-n,this.near,this.far)}get proximityFalloff(){return this.uniforms.proximityCutoff.value.y-this.proximityThreshold}set proximityFalloff(n){this.uniforms.proximityCutoff.value.y=Math.min(Math.max(this.proximityThreshold+n,0),1)}get worldProximityFalloff(){return-eh(this.proximityFalloff,this.near,this.far)}set worldProximityFalloff(n){this.proximityFalloff=uc(-n,this.near,this.far)}setProximityCutoff(n,e){this.uniforms.proximityCutoff.value.set(Math.min(Math.max(n,0),1),Math.min(Math.max(n+e,0),1))}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNearFar.value.set(n.near,n.far),this.uniforms.projectionMatrix.value.copy(n.projectionMatrix),this.uniforms.inverseProjectionMatrix.value.copy(n.projectionMatrix).invert(),n instanceof ui?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms,i=t.noiseTexture.value;i!==null&&t.noiseScale.value.set(n/i.image.width,e/i.image.height),t.texelSize.value.set(1/n,1/e),this.resolution.set(n,e),this.updateRadius()}},uz=`#include <packing>
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
#ifdef DOWNSAMPLE_NORMALS
uniform lowp sampler2D normalBuffer;
#endif
varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}int findBestDepth(const in float samples[4]){float c=(samples[0]+samples[1]+samples[2]+samples[3])*0.25;float distances[4];distances[0]=abs(c-samples[0]);distances[1]=abs(c-samples[1]);distances[2]=abs(c-samples[2]);distances[3]=abs(c-samples[3]);float maxDistance=max(max(distances[0],distances[1]),max(distances[2],distances[3]));int remaining[3];int rejected[3];int i,j,k;for(i=0,j=0,k=0;i<4;++i){if(distances[i]<maxDistance){remaining[j++]=i;}else{rejected[k++]=i;}}for(;j<3;++j){remaining[j]=rejected[--k];}vec3 s=vec3(samples[remaining[0]],samples[remaining[1]],samples[remaining[2]]);c=(s.x+s.y+s.z)/3.0;distances[0]=abs(c-s.x);distances[1]=abs(c-s.y);distances[2]=abs(c-s.z);float minDistance=min(distances[0],min(distances[1],distances[2]));for(i=0;i<3;++i){if(distances[i]==minDistance){break;}}return remaining[i];}void main(){float d[4];d[0]=readDepth(vUv0);d[1]=readDepth(vUv1);d[2]=readDepth(vUv2);d[3]=readDepth(vUv3);int index=findBestDepth(d);
#ifdef DOWNSAMPLE_NORMALS
vec3 n[4];n[0]=texture2D(normalBuffer,vUv0).rgb;n[1]=texture2D(normalBuffer,vUv1).rgb;n[2]=texture2D(normalBuffer,vUv2).rgb;n[3]=texture2D(normalBuffer,vUv3).rgb;
#else
vec3 n[4];n[0]=vec3(0.0);n[1]=vec3(0.0);n[2]=vec3(0.0);n[3]=vec3(0.0);
#endif
gl_FragColor=vec4(n[index],d[index]);}`,cz="uniform vec2 texelSize;varying vec2 vUv0;varying vec2 vUv1;varying vec2 vUv2;varying vec2 vUv3;void main(){vec2 uv=position.xy*0.5+0.5;vUv0=uv;vUv1=vec2(uv.x,uv.y+texelSize.y);vUv2=vec2(uv.x+texelSize.x,uv.y);vUv3=uv+texelSize;gl_Position=vec4(position.xy,1.0,1.0);}",fz=class extends tn{constructor(){super({name:"DepthDownsamplingMaterial",defines:{DEPTH_PACKING:"0"},uniforms:{depthBuffer:new Ee(null),normalBuffer:new Ee(null),texelSize:new Ee(new _e)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:uz,vertexShader:cz})}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ji){this.depthBuffer=n,this.depthPacking=e}set normalBuffer(n){this.uniforms.normalBuffer.value=n,n!==null?this.defines.DOWNSAMPLE_NORMALS="1":delete this.defines.DOWNSAMPLE_NORMALS,this.needsUpdate=!0}setNormalBuffer(n){this.normalBuffer=n}setTexelSize(n,e){this.uniforms.texelSize.value.set(n,e)}setSize(n,e){this.uniforms.texelSize.value.set(1/n,1/e)}},yb=class extends Ai{constructor({normalBuffer:n=null,resolutionScale:e=.5,width:t=Ln.AUTO_SIZE,height:i=Ln.AUTO_SIZE,resolutionX:r=t,resolutionY:s=i}={}){super("DepthDownsamplingPass");const a=new fz;a.normalBuffer=n,this.fullscreenMaterial=a,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new an(1,1,{minFilter:$t,magFilter:$t,depthBuffer:!1,type:li}),this.renderTarget.texture.name="DepthDownsamplingPass.Target",this.renderTarget.texture.generateMipmaps=!1;const l=this.resolution=new Ln(this,r,s,e);l.addEventListener("change",c=>this.setSize(l.baseWidth,l.baseHeight))}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}setDepthTexture(n,e=Ji){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height),this.fullscreenMaterial.setSize(n,e)}initialize(n,e,t){const i=n.getContext();if(!(i.getExtension("EXT_color_buffer_float")||i.getExtension("EXT_color_buffer_half_float")))throw new Error("Rendering to float texture is not supported.")}},hz=`uniform lowp sampler2D aoBuffer;uniform float luminanceInfluence;uniform float intensity;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH)
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
#endif
#ifdef COLORIZE
uniform vec3 color;
#endif
void mainImage(const in vec4 inputColor,const in vec2 uv,const in float depth,out vec4 outputColor){float aoLinear=texture2D(aoBuffer,uv).r;
#if defined(DEPTH_AWARE_UPSAMPLING) && defined(NORMAL_DEPTH) && __VERSION__ == 300
vec4 normalDepth[4];normalDepth[0]=textureOffset(normalDepthBuffer,uv,ivec2(0,0));normalDepth[1]=textureOffset(normalDepthBuffer,uv,ivec2(0,1));normalDepth[2]=textureOffset(normalDepthBuffer,uv,ivec2(1,0));normalDepth[3]=textureOffset(normalDepthBuffer,uv,ivec2(1,1));float dot01=dot(normalDepth[0].rgb,normalDepth[1].rgb);float dot02=dot(normalDepth[0].rgb,normalDepth[2].rgb);float dot03=dot(normalDepth[0].rgb,normalDepth[3].rgb);float minDot=min(dot01,min(dot02,dot03));float s=step(THRESHOLD,minDot);float smallestDistance=1.0;int index;for(int i=0;i<4;++i){float distance=abs(depth-normalDepth[i].a);if(distance<smallestDistance){smallestDistance=distance;index=i;}}ivec2 offsets[4];offsets[0]=ivec2(0,0);offsets[1]=ivec2(0,1);offsets[2]=ivec2(1,0);offsets[3]=ivec2(1,1);ivec2 coord=ivec2(uv*vec2(textureSize(aoBuffer,0)))+offsets[index];float aoNearest=texelFetch(aoBuffer,coord,0).r;float ao=mix(aoNearest,aoLinear,s);
#else
float ao=aoLinear;
#endif
float l=luminance(inputColor.rgb);ao=mix(ao,0.0,l*luminanceInfluence);ao=clamp(ao*intensity,0.0,1.0);
#ifdef COLORIZE
outputColor=vec4(1.0-ao*(1.0-color),inputColor.a);
#else
outputColor=vec4(vec3(1.0-ao),inputColor.a);
#endif
}`,vw=64,dz=class extends es{constructor(n,e,{blendFunction:t=Zt.MULTIPLY,samples:i=9,rings:r=7,normalDepthBuffer:s=null,depthAwareUpsampling:a=!0,worldDistanceThreshold:l,worldDistanceFalloff:c,worldProximityThreshold:f,worldProximityFalloff:p,distanceThreshold:g=.97,distanceFalloff:v=.03,rangeThreshold:y=5e-4,rangeFalloff:S=.001,minRadiusScale:T=.1,luminanceInfluence:w=.7,radius:M=.1825,intensity:A=1,bias:b=.025,fade:R=.01,color:I=null,resolutionScale:k=1,width:F=Ln.AUTO_SIZE,height:z=Ln.AUTO_SIZE,resolutionX:U=F,resolutionY:O=z}={}){super("SSAOEffect",hz,{blendFunction:t,attributes:ra.DEPTH,defines:new Map([["THRESHOLD","0.997"]]),uniforms:new Map([["aoBuffer",new Ee(null)],["normalDepthBuffer",new Ee(s)],["luminanceInfluence",new Ee(w)],["color",new Ee(null)],["intensity",new Ee(A)],["scale",new Ee(0)]])}),this.renderTarget=new an(1,1,{depthBuffer:!1}),this.renderTarget.texture.name="AO.Target",this.uniforms.get("aoBuffer").value=this.renderTarget.texture;const $=this.resolution=new Ln(this,U,O,k);$.addEventListener("change",J=>this.setSize($.baseWidth,$.baseHeight)),this.camera=n,this.depthDownsamplingPass=new yb({normalBuffer:e,resolutionScale:k}),this.depthDownsamplingPass.enabled=s===null,this.ssaoPass=new Ba(new lz(n));const Y=new Ax(vw,vw,Dn);Y.wrapS=Y.wrapT=Ga;const q=this.ssaoMaterial;q.normalBuffer=e,q.noiseTexture=Y,q.minRadiusScale=T,q.samples=i,q.radius=M,q.rings=r,q.fade=R,q.bias=b,q.distanceThreshold=g,q.distanceFalloff=v,q.proximityThreshold=y,q.proximityFalloff=S,l!==void 0&&(q.worldDistanceThreshold=l),c!==void 0&&(q.worldDistanceFalloff=c),f!==void 0&&(q.worldProximityThreshold=f),p!==void 0&&(q.worldProximityFalloff=p),s!==null&&(this.ssaoMaterial.normalDepthBuffer=s,this.defines.set("NORMAL_DEPTH","1")),this.depthAwareUpsampling=a,this.color=I}set mainCamera(n){this.camera=n,this.ssaoMaterial.copyCameraSettings(n)}get normalBuffer(){return this.ssaoMaterial.normalBuffer}set normalBuffer(n){this.ssaoMaterial.normalBuffer=n,this.depthDownsamplingPass.fullscreenMaterial.normalBuffer=n}getResolution(){return this.resolution}get ssaoMaterial(){return this.ssaoPass.fullscreenMaterial}getSSAOMaterial(){return this.ssaoMaterial}get samples(){return this.ssaoMaterial.samples}set samples(n){this.ssaoMaterial.samples=n}get rings(){return this.ssaoMaterial.rings}set rings(n){this.ssaoMaterial.rings=n}get radius(){return this.ssaoMaterial.radius}set radius(n){this.ssaoMaterial.radius=n}get depthAwareUpsampling(){return this.defines.has("DEPTH_AWARE_UPSAMPLING")}set depthAwareUpsampling(n){this.depthAwareUpsampling!==n&&(n?this.defines.set("DEPTH_AWARE_UPSAMPLING","1"):this.defines.delete("DEPTH_AWARE_UPSAMPLING"),this.setChanged())}isDepthAwareUpsamplingEnabled(){return this.depthAwareUpsampling}setDepthAwareUpsamplingEnabled(n){this.depthAwareUpsampling=n}get distanceScaling(){return!0}set distanceScaling(n){}get color(){return this.uniforms.get("color").value}set color(n){const e=this.uniforms,t=this.defines;n!==null?t.has("COLORIZE")?e.get("color").value.set(n):(t.set("COLORIZE","1"),e.get("color").value=new Je(n),this.setChanged()):t.has("COLORIZE")&&(t.delete("COLORIZE"),e.get("color").value=null,this.setChanged())}get luminanceInfluence(){return this.uniforms.get("luminanceInfluence").value}set luminanceInfluence(n){this.uniforms.get("luminanceInfluence").value=n}get intensity(){return this.uniforms.get("intensity").value}set intensity(n){this.uniforms.get("intensity").value=n}getColor(){return this.color}setColor(n){this.color=n}setDistanceCutoff(n,e){this.ssaoMaterial.distanceThreshold=n,this.ssaoMaterial.distanceFalloff=e}setProximityCutoff(n,e){this.ssaoMaterial.proximityThreshold=n,this.ssaoMaterial.proximityFalloff=e}setDepthTexture(n,e=Ji){this.depthDownsamplingPass.setDepthTexture(n,e),this.ssaoMaterial.depthBuffer=n,this.ssaoMaterial.depthPacking=e}update(n,e,t){const i=this.renderTarget;this.depthDownsamplingPass.enabled&&this.depthDownsamplingPass.render(n),this.ssaoPass.render(n,null,i)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e);const i=t.width,r=t.height;this.ssaoMaterial.copyCameraSettings(this.camera),this.ssaoMaterial.setSize(i,r),this.renderTarget.setSize(i,r),this.depthDownsamplingPass.resolution.scale=t.scale,this.depthDownsamplingPass.setSize(n,e)}initialize(n,e,t){try{let i=this.uniforms.get("normalDepthBuffer").value;i===null&&(this.depthDownsamplingPass.initialize(n,e,t),i=this.depthDownsamplingPass.texture,this.uniforms.get("normalDepthBuffer").value=i,this.ssaoMaterial.normalDepthBuffer=i,this.defines.set("NORMAL_DEPTH","1"))}catch{this.depthDownsamplingPass.enabled=!1}}},pz=`#ifdef TEXTURE_PRECISION_HIGH
uniform mediump sampler2D map;
#else
uniform lowp sampler2D map;
#endif
varying vec2 vUv2;void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){
#ifdef UV_TRANSFORM
vec4 texel=texture2D(map,vUv2);
#else
vec4 texel=texture2D(map,uv);
#endif
outputColor=TEXEL;}`,mz=`#ifdef ASPECT_CORRECTION
uniform float scale;
#else
uniform mat3 uvTransform;
#endif
varying vec2 vUv2;void mainSupport(const in vec2 uv){
#ifdef ASPECT_CORRECTION
vUv2=uv*vec2(aspect,1.0)*scale;
#else
vUv2=(uvTransform*vec3(uv,1.0)).xy;
#endif
}`,gz=class extends es{constructor({blendFunction:n,texture:e=null,aspectCorrection:t=!1}={}){super("TextureEffect",pz,{blendFunction:n,defines:new Map([["TEXEL","texel"]]),uniforms:new Map([["map",new Ee(null)],["scale",new Ee(1)],["uvTransform",new Ee(null)]])}),this.texture=e,this.aspectCorrection=t}get texture(){return this.uniforms.get("map").value}set texture(n){const e=this.texture,t=this.uniforms,i=this.defines;e!==n&&(t.get("map").value=n,t.get("uvTransform").value=n.matrix,i.delete("TEXTURE_PRECISION_HIGH"),n!==null&&(n.matrixAutoUpdate?(i.set("UV_TRANSFORM","1"),this.setVertexShader(mz)):(i.delete("UV_TRANSFORM"),this.setVertexShader(null)),n.type!==zn&&i.set("TEXTURE_PRECISION_HIGH","1"),(e===null||e.type!==n.type||e.encoding!==n.encoding)&&this.setChanged()))}getTexture(){return this.texture}setTexture(n){this.texture=n}get aspectCorrection(){return this.defines.has("ASPECT_CORRECTION")}set aspectCorrection(n){this.aspectCorrection!==n&&(n?this.defines.set("ASPECT_CORRECTION","1"):this.defines.delete("ASPECT_CORRECTION"),this.setChanged())}get uvTransform(){const n=this.texture;return n!==null&&n.matrixAutoUpdate}set uvTransform(n){const e=this.texture;e!==null&&(e.matrixAutoUpdate=n)}setTextureSwizzleRGBA(n,e=n,t=n,i=n){const r="rgba";let s="";(n!==$f.RED||e!==$f.GREEN||t!==$f.BLUE||i!==$f.ALPHA)&&(s=[".",r[n],r[e],r[t],r[i]].join("")),this.defines.set("TEXEL","texel"+s),this.setChanged()}update(n,e,t){this.texture.matrixAutoUpdate&&this.texture.updateMatrix()}},vz=`#include <packing>
varying vec2 vUv;
#ifdef NORMAL_DEPTH
#ifdef GL_FRAGMENT_PRECISION_HIGH
uniform highp sampler2D normalDepthBuffer;
#else
uniform mediump sampler2D normalDepthBuffer;
#endif
float readDepth(const in vec2 uv){return texture2D(normalDepthBuffer,uv).a;}
#else
#if INPUT_DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
float readDepth(const in vec2 uv){
#if INPUT_DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}
#endif
void main(){
#if INPUT_DEPTH_PACKING == OUTPUT_DEPTH_PACKING
gl_FragColor=texture2D(depthBuffer,vUv);
#else
float depth=readDepth(vUv);
#if OUTPUT_DEPTH_PACKING == 3201
gl_FragColor=(depth==1.0)?vec4(1.0):packDepthToRGBA(depth);
#else
gl_FragColor=vec4(vec3(depth),1.0);
#endif
#endif
}`,yz=`varying vec2 vUv;
#if DEPTH_COPY_MODE == 1
uniform vec2 texelPosition;
#endif
void main(){
#if DEPTH_COPY_MODE == 1
vUv=texelPosition;
#else
vUv=position.xy*0.5+0.5;
#endif
gl_Position=vec4(position.xy,1.0,1.0);}`,xz=class extends tn{constructor(){super({name:"DepthCopyMaterial",defines:{INPUT_DEPTH_PACKING:"0",OUTPUT_DEPTH_PACKING:"0",DEPTH_COPY_MODE:"0"},uniforms:{depthBuffer:new Ee(null),texelPosition:new Ee(new _e)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,fragmentShader:vz,vertexShader:yz}),this.depthCopyMode=Wd.FULL}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}set inputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get outputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}set outputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ji){this.depthBuffer=n,this.inputDepthPacking=e}getInputDepthPacking(){return Number(this.defines.INPUT_DEPTH_PACKING)}setInputDepthPacking(n){this.defines.INPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}getOutputDepthPacking(){return Number(this.defines.OUTPUT_DEPTH_PACKING)}setOutputDepthPacking(n){this.defines.OUTPUT_DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}get texelPosition(){return this.uniforms.texelPosition.value}getTexelPosition(){return this.uniforms.texelPosition.value}setTexelPosition(n){this.uniforms.texelPosition.value=n}get mode(){return this.depthCopyMode}set mode(n){this.depthCopyMode=n,this.defines.DEPTH_COPY_MODE=n.toFixed(0),this.needsUpdate=!0}getMode(){return this.mode}setMode(n){this.mode=n}},Sz=`#include <common>
#include <packing>
#include <dithering_pars_fragment>
#define packFloatToRGBA(v) packDepthToRGBA(v)
#define unpackRGBAToFloat(v) unpackRGBAToDepth(v)
#ifdef FRAMEBUFFER_PRECISION_HIGH
uniform mediump sampler2D inputBuffer;
#else
uniform lowp sampler2D inputBuffer;
#endif
#if DEPTH_PACKING == 3201
uniform lowp sampler2D depthBuffer;
#elif defined(GL_FRAGMENT_PRECISION_HIGH)
uniform highp sampler2D depthBuffer;
#else
uniform mediump sampler2D depthBuffer;
#endif
uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;vec4 sRGBToLinear(const in vec4 value){return vec4(mix(pow(value.rgb*0.9478672986+vec3(0.0521327014),vec3(2.4)),value.rgb*0.0773993808,vec3(lessThanEqual(value.rgb,vec3(0.04045)))),value.a);}float readDepth(const in vec2 uv){
#if DEPTH_PACKING == 3201
return unpackRGBAToDepth(texture2D(depthBuffer,uv));
#else
return texture2D(depthBuffer,uv).r;
#endif
}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 RGBToHCV(const in vec3 RGB){vec4 P=mix(vec4(RGB.bg,-1.0,2.0/3.0),vec4(RGB.gb,0.0,-1.0/3.0),step(RGB.b,RGB.g));vec4 Q=mix(vec4(P.xyw,RGB.r),vec4(RGB.r,P.yzx),step(P.x,RGB.r));float C=Q.x-min(Q.w,Q.y);float H=abs((Q.w-Q.y)/(6.0*C+EPSILON)+Q.z);return vec3(H,C,Q.x);}vec3 RGBToHSL(const in vec3 RGB){vec3 HCV=RGBToHCV(RGB);float L=HCV.z-HCV.y*0.5;float S=HCV.y/(1.0-abs(L*2.0-1.0)+EPSILON);return vec3(HCV.x,S,L);}vec3 HueToRGB(const in float H){float R=abs(H*6.0-3.0)-1.0;float G=2.0-abs(H*6.0-2.0);float B=2.0-abs(H*6.0-4.0);return clamp(vec3(R,G,B),0.0,1.0);}vec3 HSLToRGB(const in vec3 HSL){vec3 RGB=HueToRGB(HSL.x);float C=(1.0-abs(2.0*HSL.z-1.0))*HSL.y;return(RGB-0.5)*C+HSL.z;}FRAGMENT_HEAD void main(){FRAGMENT_MAIN_UV vec4 color0=texture2D(inputBuffer,UV);vec4 color1=vec4(0.0);FRAGMENT_MAIN_IMAGE color0.a=clamp(color0.a,0.0,1.0);gl_FragColor=color0;
#ifdef ENCODE_OUTPUT
#include <colorspace_fragment>
#endif
#include <dithering_fragment>
}`,_z="uniform vec2 resolution;uniform vec2 texelSize;uniform float cameraNear;uniform float cameraFar;uniform float aspect;uniform float time;varying vec2 vUv;VERTEX_HEAD void main(){vUv=position.xy*0.5+0.5;VERTEX_MAIN_SUPPORT gl_Position=vec4(position.xy,1.0,1.0);}",Mz=class extends tn{constructor(n,e,t,i,r=!1){super({name:"EffectMaterial",defines:{THREE_REVISION:yo.replace(/\D+/g,""),DEPTH_PACKING:"0",ENCODE_OUTPUT:"1"},uniforms:{inputBuffer:new Ee(null),depthBuffer:new Ee(null),resolution:new Ee(new _e),texelSize:new Ee(new _e),cameraNear:new Ee(.3),cameraFar:new Ee(1e3),aspect:new Ee(1),time:new Ee(0)},blending:Kn,toneMapped:!1,depthWrite:!1,depthTest:!1,dithering:r}),n&&this.setShaderParts(n),e&&this.setDefines(e),t&&this.setUniforms(t),this.copyCameraSettings(i)}set inputBuffer(n){this.uniforms.inputBuffer.value=n}setInputBuffer(n){this.uniforms.inputBuffer.value=n}get depthBuffer(){return this.uniforms.depthBuffer.value}set depthBuffer(n){this.uniforms.depthBuffer.value=n}get depthPacking(){return Number(this.defines.DEPTH_PACKING)}set depthPacking(n){this.defines.DEPTH_PACKING=n.toFixed(0),this.needsUpdate=!0}setDepthBuffer(n,e=Ji){this.depthBuffer=n,this.depthPacking=e}setShaderData(n){this.setShaderParts(n.shaderParts),this.setDefines(n.defines),this.setUniforms(n.uniforms),this.setExtensions(n.extensions)}setShaderParts(n){return this.fragmentShader=Sz.replace(bn.FRAGMENT_HEAD,n.get(bn.FRAGMENT_HEAD)||"").replace(bn.FRAGMENT_MAIN_UV,n.get(bn.FRAGMENT_MAIN_UV)||"").replace(bn.FRAGMENT_MAIN_IMAGE,n.get(bn.FRAGMENT_MAIN_IMAGE)||""),this.vertexShader=_z.replace(bn.VERTEX_HEAD,n.get(bn.VERTEX_HEAD)||"").replace(bn.VERTEX_MAIN_SUPPORT,n.get(bn.VERTEX_MAIN_SUPPORT)||""),this.needsUpdate=!0,this}setDefines(n){for(const e of n.entries())this.defines[e[0]]=e[1];return this.needsUpdate=!0,this}setUniforms(n){for(const e of n.entries())this.uniforms[e[0]]=e[1];return this}setExtensions(n){this.extensions={};for(const e of n)this.extensions[e]=!0;return this}get encodeOutput(){return this.defines.ENCODE_OUTPUT!==void 0}set encodeOutput(n){this.encodeOutput!==n&&(n?this.defines.ENCODE_OUTPUT="1":delete this.defines.ENCODE_OUTPUT,this.needsUpdate=!0)}isOutputEncodingEnabled(n){return this.encodeOutput}setOutputEncodingEnabled(n){this.encodeOutput=n}get time(){return this.uniforms.time.value}set time(n){this.uniforms.time.value=n}setDeltaTime(n){this.uniforms.time.value+=n}adoptCameraSettings(n){this.copyCameraSettings(n)}copyCameraSettings(n){n&&(this.uniforms.cameraNear.value=n.near,this.uniforms.cameraFar.value=n.far,n instanceof ui?this.defines.PERSPECTIVE_CAMERA="1":delete this.defines.PERSPECTIVE_CAMERA,this.needsUpdate=!0)}setSize(n,e){const t=this.uniforms;t.resolution.value.set(n,e),t.texelSize.value.set(1/n,1/e),t.aspect.value=n/e}static get Section(){return bn}},wz=class extends Ai{constructor({depthPacking:n=ia}={}){super("DepthCopyPass");const e=new xz;e.outputDepthPacking=n,this.fullscreenMaterial=e,this.needsDepthTexture=!0,this.needsSwap=!1,this.renderTarget=new an(1,1,{type:n===ia?zn:li,minFilter:$t,magFilter:$t,depthBuffer:!1}),this.renderTarget.texture.name="DepthCopyPass.Target"}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}get depthPacking(){return this.fullscreenMaterial.outputDepthPacking}getDepthPacking(){return this.fullscreenMaterial.outputDepthPacking}setDepthTexture(n,e=Ji){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.inputDepthPacking=e}render(n,e,t,i,r){n.setRenderTarget(this.renderToScreen?null:this.renderTarget),n.render(this.scene,this.camera)}setSize(n,e){this.renderTarget.setSize(n,e)}},Tz=Number(yo.replace(/\D+/g,"")),cc=255/256,Ez=new Float32Array([cc/256**3,cc/256**2,cc/256,cc]),bz=new Float32Array([cc,cc/256,cc/256**2,1/256**3]);function Az(n){const e=Tz>=167?bz:Ez;return(n[0]*e[0]+n[1]*e[1]+n[2]*e[2]+n[3]*e[3])/255}var Cz=class extends wz{constructor({depthPacking:n=ia,mode:e=Wd.SINGLE}={}){if(n!==ia&&n!==Ji)throw new Error(`Unsupported depth packing: ${n}`);super({depthPacking:n}),this.name="DepthPickingPass",this.fullscreenMaterial.mode=e,this.pixelBuffer=n===ia?new Uint8Array(4):new Float32Array(4),this.callback=null}readDepth(n){return this.fullscreenMaterial.texelPosition.set(n.x*.5+.5,n.y*.5+.5),new Promise(e=>{this.callback=e})}render(n,e,t,i,r){const s=this.fullscreenMaterial,a=s.mode;if(a===Wd.FULL&&super.render(n),this.callback!==null){const l=this.renderTarget,c=this.pixelBuffer,f=l.texture.type!==li;let p=0,g=0;if(a===Wd.SINGLE)super.render(n);else{const v=s.texelPosition;p=Math.round(v.x*l.width),g=Math.round(v.y*l.height)}n.readRenderTargetPixels(l,p,g,1,1,c),this.callback(f?Az(c):c[0]),this.callback=null}}setSize(n,e){this.fullscreenMaterial.mode===Wd.FULL&&super.setSize(n,e)}};function yw(n,e,t){for(const i of e){const r="$1"+n+i.charAt(0).toUpperCase()+i.slice(1),s=new RegExp("([^\\.])(\\b"+i+"\\b)","g");for(const a of t.entries())a[1]!==null&&t.set(a[0],a[1].replace(s,r))}}function Rz(n,e,t){let i=e.getFragmentShader(),r=e.getVertexShader();const s=i!==void 0&&/mainImage/.test(i),a=i!==void 0&&/mainUv/.test(i);if(t.attributes|=e.getAttributes(),i===void 0)throw new Error(`Missing fragment shader (${e.name})`);if(a&&t.attributes&ra.CONVOLUTION)throw new Error(`Effects that transform UVs are incompatible with convolution effects (${e.name})`);if(!s&&!a)throw new Error(`Could not find mainImage or mainUv function (${e.name})`);{const l=/\w+\s+(\w+)\([\w\s,]*\)\s*{/g,c=t.shaderParts;let f=c.get(bn.FRAGMENT_HEAD)||"",p=c.get(bn.FRAGMENT_MAIN_UV)||"",g=c.get(bn.FRAGMENT_MAIN_IMAGE)||"",v=c.get(bn.VERTEX_HEAD)||"",y=c.get(bn.VERTEX_MAIN_SUPPORT)||"";const S=new Set,T=new Set;if(a&&(p+=`	${n}MainUv(UV);
`,t.uvTransformation=!0),r!==null&&/mainSupport/.test(r)){const A=/mainSupport *\([\w\s]*?uv\s*?\)/.test(r);y+=`	${n}MainSupport(`,y+=A?`vUv);
`:`);
`;for(const b of r.matchAll(/(?:varying\s+\w+\s+([\S\s]*?);)/g))for(const R of b[1].split(/\s*,\s*/))t.varyings.add(R),S.add(R),T.add(R);for(const b of r.matchAll(l))T.add(b[1])}for(const A of i.matchAll(l))T.add(A[1]);for(const A of e.defines.keys())T.add(A.replace(/\([\w\s,]*\)/g,""));for(const A of e.uniforms.keys())T.add(A);T.delete("while"),T.delete("for"),T.delete("if"),e.uniforms.forEach((A,b)=>t.uniforms.set(n+b.charAt(0).toUpperCase()+b.slice(1),A)),e.defines.forEach((A,b)=>t.defines.set(n+b.charAt(0).toUpperCase()+b.slice(1),A));const w=new Map([["fragment",i],["vertex",r]]);yw(n,T,t.defines),yw(n,T,w),i=w.get("fragment"),r=w.get("vertex");const M=e.blendMode;if(t.blendModes.set(M.blendFunction,M),s){e.inputColorSpace!==null&&e.inputColorSpace!==t.colorSpace&&(g+=e.inputColorSpace===yt?`color0 = sRGBTransferOETF(color0);
	`:`color0 = sRGBToLinear(color0);
	`),e.outputColorSpace!==Ha?t.colorSpace=e.outputColorSpace:e.inputColorSpace!==null&&(t.colorSpace=e.inputColorSpace);const A=/MainImage *\([\w\s,]*?depth[\w\s,]*?\)/;g+=`${n}MainImage(color0, UV, `,t.attributes&ra.DEPTH&&A.test(i)&&(g+="depth, ",t.readDepth=!0),g+=`color1);
	`;const b=n+"BlendOpacity";t.uniforms.set(b,M.opacity),g+=`color0 = blend${M.blendFunction}(color0, color1, ${b});

	`,f+=`uniform float ${b};

`}if(f+=i+`
`,r!==null&&(v+=r+`
`),c.set(bn.FRAGMENT_HEAD,f),c.set(bn.FRAGMENT_MAIN_UV,p),c.set(bn.FRAGMENT_MAIN_IMAGE,g),c.set(bn.VERTEX_HEAD,v),c.set(bn.VERTEX_MAIN_SUPPORT,y),e.extensions!==null)for(const A of e.extensions)t.extensions.add(A)}}var Pz=class extends Ai{constructor(n,...e){super("EffectPass"),this.fullscreenMaterial=new Mz(null,null,null,n),this.listener=t=>this.handleEvent(t),this.effects=[],this.setEffects(e),this.skipRendering=!1,this.minTime=1,this.maxTime=Number.POSITIVE_INFINITY,this.timeScale=1}set mainScene(n){for(const e of this.effects)e.mainScene=n}set mainCamera(n){this.fullscreenMaterial.copyCameraSettings(n);for(const e of this.effects)e.mainCamera=n}get encodeOutput(){return this.fullscreenMaterial.encodeOutput}set encodeOutput(n){this.fullscreenMaterial.encodeOutput=n}get dithering(){return this.fullscreenMaterial.dithering}set dithering(n){const e=this.fullscreenMaterial;e.dithering=n,e.needsUpdate=!0}setEffects(n){for(const e of this.effects)e.removeEventListener("change",this.listener);this.effects=n.sort((e,t)=>t.attributes-e.attributes);for(const e of this.effects)e.addEventListener("change",this.listener)}updateMaterial(){const n=new wB;let e=0;for(const a of this.effects)if(a.blendMode.blendFunction===Zt.DST)n.attributes|=a.getAttributes()&ra.DEPTH;else{if(n.attributes&a.getAttributes()&ra.CONVOLUTION)throw new Error(`Convolution effects cannot be merged (${a.name})`);Rz("e"+e++,a,n)}let t=n.shaderParts.get(bn.FRAGMENT_HEAD),i=n.shaderParts.get(bn.FRAGMENT_MAIN_IMAGE),r=n.shaderParts.get(bn.FRAGMENT_MAIN_UV);const s=/\bblend\b/g;for(const a of n.blendModes.values())t+=a.getShaderCode().replace(s,`blend${a.blendFunction}`)+`
`;n.attributes&ra.DEPTH?(n.readDepth&&(i=`float depth = readDepth(UV);

	`+i),this.needsDepthTexture=this.getDepthTexture()===null):this.needsDepthTexture=!1,n.colorSpace===yt&&(i+=`color0 = sRGBToLinear(color0);
	`),n.uvTransformation?(r=`vec2 transformedUv = vUv;
`+r,n.defines.set("UV","transformedUv")):n.defines.set("UV","vUv"),n.shaderParts.set(bn.FRAGMENT_HEAD,t),n.shaderParts.set(bn.FRAGMENT_MAIN_IMAGE,i),n.shaderParts.set(bn.FRAGMENT_MAIN_UV,r);for(const[a,l]of n.shaderParts)l!==null&&n.shaderParts.set(a,l.trim().replace(/^#/,`
#`));this.skipRendering=e===0,this.needsSwap=!this.skipRendering,this.fullscreenMaterial.setShaderData(n)}recompile(){this.updateMaterial()}getDepthTexture(){return this.fullscreenMaterial.depthBuffer}setDepthTexture(n,e=Ji){this.fullscreenMaterial.depthBuffer=n,this.fullscreenMaterial.depthPacking=e;for(const t of this.effects)t.setDepthTexture(n,e)}render(n,e,t,i,r){for(const s of this.effects)s.update(n,e,i);if(!this.skipRendering||this.renderToScreen){const s=this.fullscreenMaterial;s.inputBuffer=e.texture,s.time+=i*this.timeScale,n.setRenderTarget(this.renderToScreen?null:t),n.render(this.scene,this.camera)}}setSize(n,e){this.fullscreenMaterial.setSize(n,e);for(const t of this.effects)t.setSize(n,e)}initialize(n,e,t){this.renderer=n;for(const i of this.effects)i.initialize(n,e,t);this.updateMaterial(),t!==void 0&&t!==zn&&(this.fullscreenMaterial.defines.FRAMEBUFFER_PRECISION_HIGH="1")}dispose(){super.dispose();for(const n of this.effects)n.removeEventListener("change",this.listener),n.dispose()}handleEvent(n){switch(n.type){case"change":this.recompile();break}}},Dz=class extends Ai{constructor(n,e,{renderTarget:t,resolutionScale:i=1,width:r=Ln.AUTO_SIZE,height:s=Ln.AUTO_SIZE,resolutionX:a=r,resolutionY:l=s}={}){super("NormalPass"),this.needsSwap=!1,this.renderPass=new _h(n,e,new M1);const c=this.renderPass;c.ignoreBackground=!0,c.skipShadowMapUpdate=!0;const f=c.getClearPass();f.overrideClearColor=new Je(7829503),f.overrideClearAlpha=1,this.renderTarget=t,this.renderTarget===void 0&&(this.renderTarget=new an(1,1,{minFilter:$t,magFilter:$t}),this.renderTarget.texture.name="NormalPass.Target");const p=this.resolution=new Ln(this,a,l,i);p.addEventListener("change",g=>this.setSize(p.baseWidth,p.baseHeight))}set mainScene(n){this.renderPass.mainScene=n}set mainCamera(n){this.renderPass.mainCamera=n}get texture(){return this.renderTarget.texture}getTexture(){return this.renderTarget.texture}getResolution(){return this.resolution}getResolutionScale(){return this.resolution.scale}setResolutionScale(n){this.resolution.scale=n}render(n,e,t,i,r){const s=this.renderToScreen?null:this.renderTarget;this.renderPass.render(n,s,s)}setSize(n,e){const t=this.resolution;t.setBaseSize(n,e),this.renderTarget.setSize(t.width,t.height)}};function ep(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Cx(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}function Lz(n,e){if(n){if(typeof n=="string")return Cx(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);if(t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set")return Array.from(n);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return Cx(n,e)}}function Iz(n){if(Array.isArray(n))return Cx(n)}function Uz(n){if(typeof Symbol<"u"&&n[Symbol.iterator]!=null||n["@@iterator"]!=null)return Array.from(n)}function Nz(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fz(n){return Iz(n)||Uz(n)||Lz(n)||Nz()}new _e;new _e;function kz(n,e,t){return Math.max(e,Math.min(t,n))}function Oz(n,e){return kz(n-Math.floor(n/e)*e,0,e)}function Bz(n,e){var t=Oz(e-n,Math.PI*2);return t>Math.PI&&(t-=Math.PI*2),t}function xb(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var ea=function n(e,t,i){var r=this;xb(this,n),ep(this,"dot2",function(s,a){return r.x*s+r.y*a}),ep(this,"dot3",function(s,a,l){return r.x*s+r.y*a+r.z*l}),this.x=e,this.y=t,this.z=i},zz=[new ea(1,1,0),new ea(-1,1,0),new ea(1,-1,0),new ea(-1,-1,0),new ea(1,0,1),new ea(-1,0,1),new ea(1,0,-1),new ea(-1,0,-1),new ea(0,1,1),new ea(0,-1,1),new ea(0,1,-1),new ea(0,-1,-1)],xw=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],Sw=new Array(512),_w=new Array(512),Hz=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=xw[t]^e&255:i=xw[t]^e>>8&255,Sw[t]=Sw[t+256]=i,_w[t]=_w[t+256]=zz[i%12]}};Hz(0);function Gz(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function Mw(n){var e=Gz(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Vz=function n(e){var t=this;xb(this,n),ep(this,"seed",0),ep(this,"init",function(i){t.seed=i,t.value=Mw(i)}),ep(this,"value",Mw(this.seed)),this.init(e)};new Vz(Math.random());var Wz=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.01,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:1/(2*Math.PI);return i/Math.atan(1/t)*Math.atan(Math.sin(2*Math.PI*e*r)/t)},Sb=function(e){return 1/(1+e+.48*e*e+.235*e*e*e)};function Ki(n,e,t){var i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:.25,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:.01,s=arguments.length>5&&arguments[5]!==void 0?arguments[5]:1/0,a=arguments.length>6&&arguments[6]!==void 0?arguments[6]:Sb,l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:.001,c="velocity_"+e;if(n.__damp===void 0&&(n.__damp={}),n.__damp[c]===void 0&&(n.__damp[c]=0),Math.abs(n[e]-t)<=l)return n[e]=t,!1;i=Math.max(1e-4,i);var f=2/i,p=a(f*r),g=n[e]-t,v=t,y=s*i;g=Math.min(Math.max(g,-y),y),t=n[e]-g;var S=(n.__damp[c]+f*g)*r;n.__damp[c]=(n.__damp[c]-f*S)*p;var T=t+(g+S)*p;return v-n[e]>0==T>v&&(T=v,n.__damp[c]=(T-v)/r),n[e]=T,!0}function nh(n,e,t,i,r,s,a,l){return Ki(n,e,n[e]+Bz(n[e],t),i,r,s,a,l)}var Fd=new _e,ww,Tw;function jz(n,e,t,i,r,s,a){return typeof e=="number"?Fd.setScalar(e):Array.isArray(e)?Fd.set(e[0],e[1]):Fd.copy(e),ww=Ki(n,"x",Fd.x,t,i,r,s,a),Tw=Ki(n,"y",Fd.y,t,i,r,s,a),ww||Tw}var Wf=new Q,Ew,bw,Aw;function Rx(n,e,t,i,r,s,a){return typeof e=="number"?Wf.setScalar(e):Array.isArray(e)?Wf.set(e[0],e[1],e[2]):Wf.copy(e),Ew=Ki(n,"x",Wf.x,t,i,r,s,a),bw=Ki(n,"y",Wf.y,t,i,r,s,a),Aw=Ki(n,"z",Wf.z,t,i,r,s,a),Ew||bw||Aw}var Ju=new hn,Cw,Rw,Pw,Dw;function Xz(n,e,t,i,r,s,a){return typeof e=="number"?Ju.setScalar(e):Array.isArray(e)?Ju.set(e[0],e[1],e[2],e[3]):Ju.copy(e),Cw=Ki(n,"x",Ju.x,t,i,r,s,a),Rw=Ki(n,"y",Ju.y,t,i,r,s,a),Pw=Ki(n,"z",Ju.z,t,i,r,s,a),Dw=Ki(n,"w",Ju.w,t,i,r,s,a),Cw||Rw||Pw||Dw}var kd=new hh,Lw,Iw,Uw;function Yz(n,e,t,i,r,s,a){return Array.isArray(e)?kd.set(e[0],e[1],e[2],e[3]):kd.copy(e),Lw=nh(n,"x",kd.x,t,i,r,s,a),Iw=nh(n,"y",kd.y,t,i,r,s,a),Uw=nh(n,"z",kd.z,t,i,r,s,a),Lw||Iw||Uw}var jf=new Je,Nw,Fw,kw;function qz(n,e,t,i,r,s,a){return e instanceof Je?jf.copy(e):Array.isArray(e)?jf.setRGB(e[0],e[1],e[2]):jf.set(e),Nw=Ki(n,"r",jf.r,t,i,r,s,a),Fw=Ki(n,"g",jf.g,t,i,r,s,a),kw=Ki(n,"b",jf.b,t,i,r,s,a),Nw||Fw||kw}var Fa=new Qi,nl=new hn,Ow=new hn,Od=new hn,Bw,zw,Hw,Gw;function _b(n,e,t,i,r,s,a){var l=n;Array.isArray(e)?Fa.set(e[0],e[1],e[2],e[3]):Fa.copy(e);var c=n.dot(Fa)>0?1:-1;return Fa.x*=c,Fa.y*=c,Fa.z*=c,Fa.w*=c,Bw=Ki(n,"x",Fa.x,t,i,r,s,a),zw=Ki(n,"y",Fa.y,t,i,r,s,a),Hw=Ki(n,"z",Fa.z,t,i,r,s,a),Gw=Ki(n,"w",Fa.w,t,i,r,s,a),nl.set(n.x,n.y,n.z,n.w).normalize(),Ow.set(l.__damp.velocity_x,l.__damp.velocity_y,l.__damp.velocity_z,l.__damp.velocity_w),Od.copy(nl).multiplyScalar(Ow.dot(nl)/nl.dot(nl)),l.__damp.velocity_x-=Od.x,l.__damp.velocity_y-=Od.y,l.__damp.velocity_z-=Od.z,l.__damp.velocity_w-=Od.w,n.set(nl.x,nl.y,nl.z,nl.w),Bw||zw||Hw||Gw}var Bd=new N1,Vw,Ww,jw;function Zz(n,e,t,i,r,s,a){return Array.isArray(e)?Bd.set(e[0],e[1],e[2]):Bd.copy(e),Vw=Ki(n,"radius",Bd.radius,t,i,r,s,a),Ww=nh(n,"phi",Bd.phi,t,i,r,s,a),jw=nh(n,"theta",Bd.theta,t,i,r,s,a),Vw||Ww||jw}var Dg=new vt,Xw=new Q,Yw=new Qi,qw=new Q,Zw,Kw,Qw;function Kz(n,e,t,i,r,s,a){var l=n;return l.__damp===void 0&&(l.__damp={position:new Q,rotation:new Qi,scale:new Q},n.decompose(l.__damp.position,l.__damp.rotation,l.__damp.scale)),Array.isArray(e)?Dg.set.apply(Dg,Fz(e)):Dg.copy(e),Dg.decompose(Xw,Yw,qw),Zw=Rx(l.__damp.position,Xw,t,i,r,s,a),Kw=_b(l.__damp.rotation,Yw,t,i,r,s,a),Qw=Rx(l.__damp.scale,qw,t,i,r,s,a),n.compose(l.__damp.position,l.__damp.rotation,l.__damp.scale),Zw||Kw||Qw}var Qz=Object.freeze({__proto__:null,rsqw:Wz,exp:Sb,damp:Ki,dampAngle:nh,damp2:jz,damp3:Rx,damp4:Xz,dampE:Yz,dampC:qz,dampQ:_b,dampS:Zz,dampM:Kz});const Bp=new nn;Bp.setAttribute("position",new cn(new Float32Array([-1,-1,3,-1,-1,3]),2));Bp.setAttribute("uv",new cn(new Float32Array([0,0,2,0,0,2]),2));Bp.boundingSphere=new Os;Bp.computeBoundingSphere=function(){};const Jz=new ph;class $u{constructor(e){this._mesh=new xi(Bp,e),this._mesh.frustumCulled=!1}render(e){e.render(this._mesh,Jz)}get material(){return this._mesh.material}set material(e){this._mesh.material=e}dispose(){this._mesh.material.dispose(),this._mesh.geometry.dispose()}}const $z={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},sceneNormal:{value:null},projMat:{value:new vt},viewMat:{value:new vt},projViewMat:{value:new vt},projectionMatrixInv:{value:new vt},viewMatrixInv:{value:new vt},cameraPos:{value:new Q},resolution:{value:new _e},biasAdjustment:{value:new _e},time:{value:0},samples:{value:[]},bluenoise:{value:null},distanceFalloff:{value:1},radius:{value:5},near:{value:.1},far:{value:1e3},logDepth:{value:!1},ortho:{value:!1},screenSpaceRadius:{value:!1},frame:{value:0}},depthWrite:!1,depthTest:!1,vertexShader:`
varying vec2 vUv;
void main() {
  vUv = uv;
  gl_Position = vec4(position, 1);
}`,fragmentShader:`
    #define SAMPLES 16
    #define FSAMPLES 16.0
uniform sampler2D sceneDiffuse;
uniform highp sampler2D sceneNormal;
uniform highp sampler2D sceneDepth;
uniform mat4 projectionMatrixInv;
uniform mat4 viewMatrixInv;
uniform mat4 projMat;
uniform mat4 viewMat;
uniform mat4 projViewMat;
uniform vec3 cameraPos;
uniform vec2 resolution;
uniform vec2 biasAdjustment;
uniform float time;
uniform vec3[SAMPLES] samples;
uniform float radius;
uniform float distanceFalloff;
uniform float near;
uniform float far;
uniform float frame;
uniform bool logDepth;
uniform bool ortho;
uniform bool screenSpaceRadius;
uniform sampler2D bluenoise;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      /*return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);*/
       #ifdef ORTHO

       return linearize_depth_ortho(d, nearZ, farZ);

        #else
        return linearize_depth(linDepth, nearZ, farZ);
        #endif
    }

    vec3 getWorldPosLog(vec3 posS) {
      vec2 uv = posS.xy;
      float z = posS.z;
      float nearZ =near;
      float farZ = far;
      float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
      vec4 wpos = projectionMatrixInv * clipVec;
      return wpos.xyz / wpos.w;
    }
    vec3 getWorldPos(float depth, vec2 coord) {
      #ifdef LOGDEPTH
        #ifndef ORTHO
          return getWorldPosLog(vec3(coord, depth));
        #endif
      #endif
      float z = depth * 2.0 - 1.0;
      vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
      vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
      // Perspective division
     vec4 worldSpacePosition = viewSpacePosition;
     worldSpacePosition.xyz /= worldSpacePosition.w;
      return worldSpacePosition.xyz;
  }

  vec3 computeNormal(vec3 worldPos, vec2 vUv) {
    ivec2 p = ivec2(vUv * resolution);
    float c0 = texelFetch(sceneDepth, p, 0).x;
    float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
    float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
    float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
    float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
    float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
    float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
    float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
    float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;

    float dl = abs((2.0 * l1 - l2) - c0);
    float dr = abs((2.0 * r1 - r2) - c0);
    float db = abs((2.0 * b1 - b2) - c0);
    float dt = abs((2.0 * t1 - t2) - c0);

    vec3 ce = getWorldPos(c0, vUv).xyz;

    vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                          : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
    vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                          : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;

    return normalize(cross(dpdx, dpdy));
}

mat3 makeRotationZ(float theta) {
	float c = cos(theta);
	float s = sin(theta);
	return mat3(c, - s, 0,
			s,  c, 0,
			0,  0, 1);
  }

void main() {
      vec4 diffuse = texture2D(sceneDiffuse, vUv);
      float depth = texture2D(sceneDepth, vUv).x;
      if (depth == 1.0) {
        gl_FragColor = vec4(vec3(1.0), 1.0);
        return;
      }
      vec3 worldPos = getWorldPos(depth, vUv);
      #ifdef HALFRES
        vec3 normal = texture2D(sceneNormal, vUv).rgb;
      #else
        vec3 normal = computeNormal(worldPos, vUv);
      #endif
      vec4 noise = texture2D(bluenoise, gl_FragCoord.xy / 128.0);
      vec2 harmoniousNumbers = vec2(
        1.618033988749895,
        1.324717957244746
      );
      noise.rg += harmoniousNumbers * frame;
      noise.rg = fract(noise.rg);
        vec3 helperVec = vec3(0.0, 1.0, 0.0);
        if (dot(helperVec, normal) > 0.99) {
          helperVec = vec3(1.0, 0.0, 0.0);
        }
        vec3 tangent = normalize(cross(helperVec, normal));
        vec3 bitangent = cross(normal, tangent);
        mediump mat3 tbn = mat3(tangent, bitangent, normal) *  makeRotationZ( noise.r * 3.1415962 * 2.0) ;

      mediump float occluded = 0.0;
      mediump float totalWeight = 0.0;
      float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : radiusToUse * distanceFalloff * 0.2;
      float bias = (min(
        0.1,
        distanceFalloffToUse * 0.1
      ) / near) * fwidth(distance(worldPos, cameraPos)) / radiusToUse;
      bias = biasAdjustment.x + biasAdjustment.y * bias;
      mediump float offsetMove = noise.g;
      mediump float offsetMoveInv = 1.0 / FSAMPLES;
      float farTimesNear = far * near;
      float farMinusNear = far - near;
      
      for(int i = 0; i < SAMPLES; i++) {
        mediump vec3 sampleDirection = tbn * samples[i];

        float moveAmt = fract(offsetMove);
        offsetMove += offsetMoveInv;
        vec3 samplePos = worldPos + radiusToUse * moveAmt * sampleDirection;
        vec4 offset = projMat * vec4(samplePos, 1.0);
        offset.xyz /= offset.w;
        offset.xyz = offset.xyz * 0.5 + 0.5;
        
        if (all(greaterThan(offset.xyz * (1.0 - offset.xyz), vec3(0.0)))) {
          float sampleDepth = textureLod(sceneDepth, offset.xy, 0.0).x;

          /*#ifdef LOGDEPTH
          float distSample = linearize_depth_log(sampleDepth, near, far);
      #else
          #ifdef ORTHO
              float distSample = near + farMinusNear * sampleDepth;
          #else
              float distSample = (farTimesNear) / (far - sampleDepth * farMinusNear);
          #endif
      #endif*/
      #ifdef ORTHO
          float distSample = near + sampleDepth * farMinusNear;
      #else
          #ifdef LOGDEPTH
              float distSample = linearize_depth_log(sampleDepth, near, far);
          #else
              float distSample = (farTimesNear) / (far - sampleDepth * farMinusNear);
          #endif
      #endif
      
      #ifdef ORTHO
          float distWorld = near + offset.z * farMinusNear;
      #else
          float distWorld = (farTimesNear) / (far - offset.z * farMinusNear);
      #endif
          
          mediump float rangeCheck = smoothstep(0.0, 1.0, distanceFalloffToUse / (abs(distSample - distWorld)));
          vec2 diff = gl_FragCoord.xy - floor(offset.xy * resolution);
          occluded += rangeCheck * float(distSample != distWorld) * float(sampleDepth != depth) * step(distSample + bias, distWorld) * step(
            1.0,
            dot(diff, diff)
          );
          
          totalWeight ++;
        }
      }
      float occ = clamp(1.0 - occluded / (totalWeight == 0.0 ? 1.0 : totalWeight), 0.0, 1.0);
      gl_FragColor = vec4(occ, 0.5 + 0.5 * normal);
}`},e5={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},transparencyDWFalse:{value:null},transparencyDWTrue:{value:null},transparencyDWTrueDepth:{value:null},transparencyAware:{value:!1},projMat:{value:new vt},viewMat:{value:new vt},projectionMatrixInv:{value:new vt},viewMatrixInv:{value:new vt},cameraPos:{value:new Q},resolution:{value:new _e},color:{value:new Q(0,0,0)},blueNoise:{value:null},downsampledDepth:{value:null},time:{value:0},intensity:{value:10},renderMode:{value:0},gammaCorrection:{value:!1},logDepth:{value:!1},ortho:{value:!1},near:{value:.1},far:{value:1e3},screenSpaceRadius:{value:!1},radius:{value:0},distanceFalloff:{value:1},fog:{value:!1},fogExp:{value:!1},fogDensity:{value:0},fogNear:{value:1/0},fogFar:{value:1/0},colorMultiply:{value:!0},aoTones:{value:0}},depthWrite:!1,depthTest:!1,vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform highp sampler2D downsampledDepth;
    uniform highp sampler2D transparencyDWFalse;
    uniform highp sampler2D transparencyDWTrue;
    uniform highp sampler2D transparencyDWTrueDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform vec2 resolution;
    uniform vec3 color;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform float intensity;
    uniform float renderMode;
    uniform float near;
    uniform float far;
    uniform float aoTones;
    uniform bool gammaCorrection;
    uniform bool logDepth;
    uniform bool ortho;
    uniform bool screenSpaceRadius;
    uniform bool fog;
    uniform bool fogExp;
    uniform bool colorMultiply;
    uniform bool transparencyAware;
    uniform float fogDensity;
    uniform float fogNear;
    uniform float fogFar;
    uniform float radius;
    uniform float distanceFalloff;
    uniform vec3 cameraPos;
    varying vec2 vUv;
    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        return (zFar * zNear) / (zFar - d * (zFar - zNear));
    }
    highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
      return nearZ + (farZ - nearZ) * d;
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
      float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
      float a = farZ / (farZ - nearZ);
      float b = farZ * nearZ / (nearZ - farZ);
      float linDepth = a + b / depth;
      return ortho ? linearize_depth_ortho(
        linDepth,
        nearZ,
        farZ
      ) :linearize_depth(linDepth, nearZ, farZ);
    }
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
       // if (logDepth) {
        #ifdef LOGDEPTH
          #ifndef ORTHO
            return getWorldPosLog(vec3(coord, depth));
          #endif
        #endif
      //  }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }

    #include <common>
    #include <dithering_pars_fragment>
    void main() {
        //vec4 texel = texture2D(tDiffuse, vUv);//vec3(0.0);
        vec4 sceneTexel = texture2D(sceneDiffuse, vUv);
        float depth = texture2D(
            sceneDepth,
            vUv
        ).x;
        #ifdef HALFRES 
        vec4 texel;
        if (depth == 1.0) {
            texel = vec4(0.0, 0.0, 0.0, 1.0);
        } else {
        vec3 worldPos = getWorldPos(depth, vUv);
        vec3 normal = computeNormal(getWorldPos(depth, vUv), vUv);
       // vec4 texel = texture2D(tDiffuse, vUv);
       // Find closest depth;
       float totalWeight = 0.0;
       float radiusToUse = screenSpaceRadius ? distance(
        worldPos,
        getWorldPos(depth, vUv +
          vec2(radius, 0.0) / resolution)
      ) : radius;
      float distanceFalloffToUse =screenSpaceRadius ?
          radiusToUse * distanceFalloff
      : distanceFalloff;
        for(float x = -1.0; x <= 1.0; x++) {
            for(float y = -1.0; y <= 1.0; y++) {
                vec2 offset = vec2(x, y);
                ivec2 p = ivec2(
                    (vUv * resolution * 0.5) + offset
                );
                vec2 pUv = vec2(p) / (resolution * 0.5);
                float sampleDepth = texelFetch(downsampledDepth,p, 0).x;
                vec4 sampleInfo = texelFetch(tDiffuse, p, 0);
                vec3 normalSample = sampleInfo.gba * 2.0 - 1.0;
                vec3 worldPosSample = getWorldPos(sampleDepth, pUv);
                float tangentPlaneDist = abs(dot(worldPosSample - worldPos, normal));
                float rangeCheck = exp(-1.0 * tangentPlaneDist * (1.0 / distanceFalloffToUse)) * max(dot(normal, normalSample), 0.0);
                float weight = rangeCheck;
                totalWeight += weight;
                texel += sampleInfo * weight;
            }
        }
        if (totalWeight == 0.0) {
            texel = texture2D(tDiffuse, vUv);
        } else {
            texel /= totalWeight;
        }
    }
        #else
        vec4 texel = texture2D(tDiffuse, vUv);
        #endif

        #ifdef LOGDEPTH
        texel.r = clamp(texel.r, 0.0, 1.0);
        if (texel.r == 0.0) {
          texel.r = 1.0;
        }
        #endif
     
        float finalAo = pow(texel.r, intensity);
        if (aoTones > 0.0) {
            finalAo = ceil(finalAo * aoTones) / aoTones;
        }
        float fogFactor;
        float fogDepth = distance(
            cameraPos,
            getWorldPos(depth, vUv)
        );
        if (fog) {
            if (fogExp) {
                fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );
            } else {
                fogFactor = smoothstep( fogNear, fogFar, fogDepth );
            }
        }
        if (transparencyAware) {
            float transparencyDWOff = texture2D(transparencyDWFalse, vUv).a;
            float transparencyDWOn = texture2D(transparencyDWTrue, vUv).a;
            float adjustmentFactorOff = transparencyDWOff;
            float adjustmentFactorOn = (1.0 - transparencyDWOn) * (
                texture2D(transparencyDWTrueDepth, vUv).r == texture2D(sceneDepth, vUv).r ? 1.0 : 0.0
            );
            float adjustmentFactor = max(adjustmentFactorOff, adjustmentFactorOn);
            finalAo = mix(finalAo, 1.0, adjustmentFactor);
        }
        finalAo = mix(finalAo, 1.0, fogFactor);
        vec3 aoApplied = color * mix(vec3(1.0), sceneTexel.rgb, float(colorMultiply));
        if (renderMode == 0.0) {
            gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 1.0) {
            gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
        } else if (renderMode == 2.0) {
            gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
        } else if (renderMode == 3.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(sceneTexel.rgb, aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        } else if (renderMode == 4.0) {
            if (vUv.x < 0.5) {
                gl_FragColor = vec4( sceneTexel.rgb, sceneTexel.a);
            } else if (abs(vUv.x - 0.5) < 1.0 / resolution.x) {
                gl_FragColor = vec4(1.0);
            } else {
                gl_FragColor = vec4( mix(vec3(1.0), aoApplied, 1.0 - finalAo), sceneTexel.a);
            }
        }
        #include <dithering_fragment>
        if (gammaCorrection) {
            gl_FragColor = sRGBTransferOETF(gl_FragColor);
        }
    }
    `},t5={uniforms:{sceneDiffuse:{value:null},sceneDepth:{value:null},tDiffuse:{value:null},projMat:{value:new vt},viewMat:{value:new vt},projectionMatrixInv:{value:new vt},viewMatrixInv:{value:new vt},cameraPos:{value:new Q},resolution:{value:new _e},time:{value:0},r:{value:5},blueNoise:{value:null},radius:{value:12},worldRadius:{value:5},index:{value:0},poissonDisk:{value:[]},distanceFalloff:{value:1},near:{value:.1},far:{value:1e3},logDepth:{value:!1},screenSpaceRadius:{value:!1}},depthWrite:!1,depthTest:!1,vertexShader:`
		varying vec2 vUv;
		void main() {
			vUv = uv;
			gl_Position = vec4(position, 1.0);
		}`,fragmentShader:`
		uniform sampler2D sceneDiffuse;
    uniform highp sampler2D sceneDepth;
    uniform sampler2D tDiffuse;
    uniform sampler2D blueNoise;
    uniform mat4 projectionMatrixInv;
    uniform mat4 viewMatrixInv;
    uniform vec2 resolution;
    uniform float r;
    uniform float radius;
     uniform float worldRadius;
    uniform float index;
     uniform float near;
     uniform float far;
     uniform float distanceFalloff;
     uniform bool logDepth;
     uniform bool screenSpaceRadius;
    varying vec2 vUv;

    highp float linearize_depth(highp float d, highp float zNear,highp float zFar)
    {
        highp float z_n = 2.0 * d - 1.0;
        return 2.0 * zNear * zFar / (zFar + zNear - z_n * (zFar - zNear));
    }
    highp float linearize_depth_log(highp float d, highp float nearZ,highp float farZ) {
     float depth = pow(2.0, d * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     return linearize_depth(linDepth, nearZ, farZ);
   }
   highp float linearize_depth_ortho(highp float d, highp float nearZ, highp float farZ) {
     return nearZ + (farZ - nearZ) * d;
   }
   vec3 getWorldPosLog(vec3 posS) {
     vec2 uv = posS.xy;
     float z = posS.z;
     float nearZ =near;
     float farZ = far;
     float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
     float a = farZ / (farZ - nearZ);
     float b = farZ * nearZ / (nearZ - farZ);
     float linDepth = a + b / depth;
     vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
     vec4 wpos = projectionMatrixInv * clipVec;
     return wpos.xyz / wpos.w;
   }
    vec3 getWorldPos(float depth, vec2 coord) {
     #ifdef LOGDEPTH
      #ifndef ORTHO
          return getWorldPosLog(vec3(coord, depth));
      #endif
     #endif
        
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
    #include <common>
    #define NUM_SAMPLES 16
    uniform vec2 poissonDisk[NUM_SAMPLES];
    void main() {
        const float pi = 3.14159;
        vec2 texelSize = vec2(1.0 / resolution.x, 1.0 / resolution.y);
        vec2 uv = vUv;
        vec4 data = texture2D(tDiffuse, vUv);
        float occlusion = data.r;
        float baseOcc = data.r;
        vec3 normal = data.gba * 2.0 - 1.0;
        float count = 1.0;
        float d = texture2D(sceneDepth, vUv).x;
        if (d == 1.0) {
          gl_FragColor = data;
          return;
        }
        vec3 worldPos = getWorldPos(d, vUv);
        float size = radius;
        float angle;
        if (index == 0.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).w * PI2;
        } else if (index == 1.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).z * PI2;
        } else if (index == 2.0) {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).y * PI2;
        } else {
             angle = texture2D(blueNoise, gl_FragCoord.xy / 128.0).x * PI2;
        }

        mat2 rotationMatrix = mat2(cos(angle), -sin(angle), sin(angle), cos(angle));
        float radiusToUse = screenSpaceRadius ? distance(
          worldPos,
          getWorldPos(d, vUv +
            vec2(worldRadius, 0.0) / resolution)
        ) : worldRadius;
        float distanceFalloffToUse =screenSpaceRadius ?
        radiusToUse * distanceFalloff
    : radiusToUse * distanceFalloff * 0.2;

        float invDistance = (1.0 / distanceFalloffToUse);
        for(int i = 0; i < NUM_SAMPLES; i++) {
            vec2 offset = (rotationMatrix * poissonDisk[i]) * texelSize * size;
            vec4 dataSample = texture2D(tDiffuse, uv + offset);
            float occSample = dataSample.r;
            vec3 normalSample = dataSample.gba * 2.0 - 1.0;
            float dSample = texture2D(sceneDepth, uv + offset).x;
            vec3 worldPosSample = getWorldPos(dSample, uv + offset);
            float tangentPlaneDist = abs(dot(worldPosSample - worldPos, normal));
            float rangeCheck = float(dSample != 1.0) * exp(-1.0 * tangentPlaneDist * invDistance ) * max(dot(normal, normalSample), 0.0);
            occlusion += occSample * rangeCheck;
            count += rangeCheck;
        }
        if (count > 0.0) {
          occlusion /= count;
        }
        #ifdef LOGDEPTH
          occlusion = clamp(occlusion, 0.0, 1.0);
          if (occlusion == 0.0) {
            occlusion = 1.0;
          }
        #endif
        gl_FragColor = vec4(occlusion, 0.5 + 0.5 * normal);
    }
    `},n5={uniforms:{sceneDepth:{value:null},resolution:{value:new _e},near:{value:.1},far:{value:1e3},viewMatrixInv:{value:new vt},projectionMatrixInv:{value:new vt},logDepth:{value:!1},ortho:{value:!1}},depthWrite:!1,depthTest:!1,vertexShader:`
    varying vec2 vUv;
    void main() {
        vUv = uv;
        gl_Position = vec4(position, 1);
    }`,fragmentShader:`
    uniform highp sampler2D sceneDepth;
    uniform vec2 resolution;
    uniform float near;
    uniform float far;
    uniform bool logDepth;
    uniform bool ortho;
    uniform mat4 viewMatrixInv;
    uniform mat4 projectionMatrixInv;
    varying vec2 vUv;
    layout(location = 1) out vec4 gNormal;
    vec3 getWorldPosLog(vec3 posS) {
        vec2 uv = posS.xy;
        float z = posS.z;
        float nearZ =near;
        float farZ = far;
        float depth = pow(2.0, z * log2(farZ + 1.0)) - 1.0;
        float a = farZ / (farZ - nearZ);
        float b = farZ * nearZ / (nearZ - farZ);
        float linDepth = a + b / depth;
        vec4 clipVec = vec4(uv, linDepth, 1.0) * 2.0 - 1.0;
        vec4 wpos = projectionMatrixInv * clipVec;
        return wpos.xyz / wpos.w;
      }
      vec3 getWorldPos(float depth, vec2 coord) {
        if (logDepth && !ortho) {
          return getWorldPosLog(vec3(coord, depth));
        }
        float z = depth * 2.0 - 1.0;
        vec4 clipSpacePosition = vec4(coord * 2.0 - 1.0, z, 1.0);
        vec4 viewSpacePosition = projectionMatrixInv * clipSpacePosition;
        // Perspective division
       vec4 worldSpacePosition = viewSpacePosition;
       worldSpacePosition.xyz /= worldSpacePosition.w;
        return worldSpacePosition.xyz;
    }
  
    vec3 computeNormal(vec3 worldPos, vec2 vUv) {
      ivec2 p = ivec2(vUv * resolution);
      float c0 = texelFetch(sceneDepth, p, 0).x;
      float l2 = texelFetch(sceneDepth, p - ivec2(2, 0), 0).x;
      float l1 = texelFetch(sceneDepth, p - ivec2(1, 0), 0).x;
      float r1 = texelFetch(sceneDepth, p + ivec2(1, 0), 0).x;
      float r2 = texelFetch(sceneDepth, p + ivec2(2, 0), 0).x;
      float b2 = texelFetch(sceneDepth, p - ivec2(0, 2), 0).x;
      float b1 = texelFetch(sceneDepth, p - ivec2(0, 1), 0).x;
      float t1 = texelFetch(sceneDepth, p + ivec2(0, 1), 0).x;
      float t2 = texelFetch(sceneDepth, p + ivec2(0, 2), 0).x;
  
      float dl = abs((2.0 * l1 - l2) - c0);
      float dr = abs((2.0 * r1 - r2) - c0);
      float db = abs((2.0 * b1 - b2) - c0);
      float dt = abs((2.0 * t1 - t2) - c0);
  
      vec3 ce = getWorldPos(c0, vUv).xyz;
  
      vec3 dpdx = (dl < dr) ? ce - getWorldPos(l1, (vUv - vec2(1.0 / resolution.x, 0.0))).xyz
                            : -ce + getWorldPos(r1, (vUv + vec2(1.0 / resolution.x, 0.0))).xyz;
      vec3 dpdy = (db < dt) ? ce - getWorldPos(b1, (vUv - vec2(0.0, 1.0 / resolution.y))).xyz
                            : -ce + getWorldPos(t1, (vUv + vec2(0.0, 1.0 / resolution.y))).xyz;
  
      return normalize(cross(dpdx, dpdy));
  }
    void main() {
        vec2 uv = vUv - vec2(0.5) / resolution;
        vec2 pixelSize = vec2(1.0) / resolution;
        highp vec2[4] uvSamples;
        uvSamples[0] = uv;
        uvSamples[1] = uv + vec2(pixelSize.x, 0.0);
        uvSamples[2] = uv + vec2(0.0, pixelSize.y);
        uvSamples[3] = uv + pixelSize;
        float depth00 = texture2D(sceneDepth, uvSamples[0]).r;
        float depth10 = texture2D(sceneDepth, uvSamples[1]).r;
        float depth01 = texture2D(sceneDepth, uvSamples[2]).r;
        float depth11 = texture2D(sceneDepth, uvSamples[3]).r;
        float minDepth = min(min(depth00, depth10), min(depth01, depth11));
        float maxDepth = max(max(depth00, depth10), max(depth01, depth11));
        float targetDepth = minDepth;
        // Checkerboard pattern to avoid artifacts
        if (mod(gl_FragCoord.x + gl_FragCoord.y, 2.0) > 0.5) { 
            targetDepth = maxDepth;
        }
        int chosenIndex = 0;
        float[4] samples;
        samples[0] = depth00;
        samples[1] = depth10;
        samples[2] = depth01;
        samples[3] = depth11;
        for(int i = 0; i < 4; ++i) {
            if (samples[i] == targetDepth) {
                chosenIndex = i;
                break;
            }
        }
        gl_FragColor = vec4(samples[chosenIndex], 0.0, 0.0, 1.0);
        gNormal = vec4(computeNormal(
            getWorldPos(samples[chosenIndex], uvSamples[chosenIndex]), uvSamples[chosenIndex]
        ), 0.0);
    }`};var Mb="5L7pP4UXrOIr/VZ1G3f6p89FIWU7lqc7J3DPxKjJUXODJoHQzf/aNVM+ABlvhXeBGN7iC0WkmTjEaAqOItBfBdaK5KSGV1ET5SOKl3x9JOX5w2sAl6+6KjDhVUHgbqq7DZ5EeYzbdSNxtrQLW/KkPJoOTG4u5CBUZkCKHniY9l7DUgjuz708zG1HIC8qfohi1vPjPH9Lq47ksjRrjwXD4MlVCjdAqYFGodQ8tRmHkOfq4wVRIAHvoavPHvN1lpk3X4Y1yzAPGe8S9KBs3crc4GwlU1dEOXiWol/mgQqxkNqB1xd04+0Bmpwj0GcCc4NUi+c731FUxjvaexCkCJ0qhrJJ++htWqetNC4NewClu8aFRSwrqiJEGe+qtTg4CYCHaF1wJI0sy/ZBQAI0qAMyBvVjWZlv2pdkCaro9eWDLK5I4mbb8E4d7hZr9dDJiTJm6Bmb5S+2F7yal/JPdeLUfwq7jmVLaQfhv4tWMJAt7V4sG9LuAv2oPJgSj1nnlBvPibfHM2TrlWHwGCLGxW/5Jm2TotaDL+pHDM5pn1r0UuTZ24N8S5k68bLHW9tfD+2k4zGev23ExJb4YTRKWrj82N5LjJ26lj1BkGZ0CsXLGGELoPaYQomjTqPxYqhfwOwDliNGVqux9ffuybqOKgsbB51B1GbZfG8vHDBE2JQGib1mnCmWOWAMJcHN0cKeDHYTflbDTVXajtr68mwfRje6WueQ/6yWqmZMLWNH7P27zGFhMFqaqfg11Q88g/9UA/FROe9yfq0yOO0pnNAxvepFy2BpEbcgG+mCyjCC01JWlOZlIPdf1TtlyOt7L94ToYGCukoFt4OqwOrofamjECpSgKLLmrRM+sNRAw12eaqk8KtdFk7pn2IcDQiPXCh16t1a+psi+w9towHTKPyQM0StKr61b2BnN1HU+aezFNBLfHTiXwhGTbdxLLmrsAGIVSiNAeCGE8GlB0iOv2v78kP0CTmAPUEqnHYRSDlP+L6m/rYjEK6Q85GRDJi2W20/7NLPpSOaMR++IFvpkcwRuc59j8hh9tYlc1xjdt2jmp9KJczB7U9P43inuxLOv11P5/HYH5d6gLB0CsbGC8APjh+EcCP0zFWqlaACZweLhVfv3yiyd8R3bdVg8sRKsxPvhDaPpiFp9+MN+0Ua0bsPr+lhxfZhMhlevkLbR4ZvcSRP6ApQLy3+eMh9ehCB3z5DVAaN3P6J8pi5Qa88ZQsOuCTWyH6q8yMfBw8y8nm6jaOxJhPH6Hf0I4jmALUBsWKH4gWBnyijHh7z3/1HhQzFLRDRrIQwUtu11yk7U0gDw/FatOIZOJaBx3UqbUxSZ6dboFPm5pAyyXC2wYdSWlpZx/D2C6hDO2sJM4HT9IKWWmDkZIO2si/6BKHruXIEDpfAtz3xDlIdKnnlqnkfCyy6vNOPyuoWsSWBeiN0mcfIrnOtp2j7bxjOkr25skfS/lwOC692cEp7TKSlymbsyzoWg/0AN66SvQYo6BqpNwPpTaUu25zMWlwVUdfu1EEdc0O06TI0JmHk4f6GZQbfOs//OdgtGPO6uLoadJycR8Z80rkd88QoNmimZd8vcpQKScCFkxH1RMTkPlN3K7CL/NSMOiXEvxrn9VyUPFee63uRflgaPMSsafvqMgzTt3T1RaHNLLFatQbD0Vha4YXZ/6Ake7onM65nC9cyLkteYkDfHoJtef7wCrWXTK0+vH38VUBcFJP0+uUXpkiK0gDXNA39HL/qdVcaOA16kd2gzq8aHpNSaKtgMLJC6fdLLS/I/4lUWV2+djY9Rc3QuJOUrlHFQERtXN4xJaAHZERCUQZ9ND2pEtZg8dsnilcnqmqYn3c1sRyK0ziKpHNytEyi2gmzxEFchvT1uBWxZUikkAlWuyqvvhteSG9kFhTLNM97s3X1iS2UbE6cvApgbmeJ/KqtP0NNT3bZiG9TURInCZtVsNZzYus6On0wcdMlVfqo8XLhT5ojaOk4DtCyeoQkBt1mf5luFNaLFjI/1cnPefyCQwcq5ia/4pN4NB+xE/3SEPsliJypS964SI6o5fDVa0IERR8DoeQ+1iyRLU1qGYexB61ph4pkG1rf3c2YD6By1pFCmww9B0r2VjFeaubkIdgWx4RKLQRPLENdGo8ezI5mkNtdCws19aP1uHhenD+HKa8GDeLulb2fiMRhU2xJzzz9e4yOMPvEnGEfbCiQ17nUDpcFDWthr68mhZ4WiHUkRpaVWJNExuULcGkuyVLsQj59pf6OHFR7tofhy9FMrWPCEvX1d5sCVJt8yBFiB6NoOuwMy4wlso9I2G4E5/5B2c6vIZUUY9fFujT3hpkdTuVhbhBwLCtnlIjBpN4cq+waZ0wXSrmebcl+dcrb7sPh9jKxFINkScDTBgjSUfLkC3huJJs/M4M8AOFxbbSIVpBUarYFmLpGsv+V6TJnWNTwI41tubwo7QSI1VOdRKT/Pp8U3oK2ciDbeuWnAGAANvQjGfcewdAdo6H83XzqlK/4yudtFHJSv9Y+qJskwnVToH1I0+tJ3vsLBXtlvMzLIxUj/8LcqZnrNHfVRgabFNXW0qpUvDgxnP3f54KooR3NI+2Q/VHAYFigMkQE5dLH6C6fGs/TKeE6E2jOhZQcP9/rrJjJKcLYdn5cw6XLCUe9F7quk5Yhac+nYL5HOXvp6Q/5qbiQHkuebanX77YSNx34YaWYpcEHuY1u/lEVTCQ7taPaw3oNcn/qJhMzGPZUs3XAq48wj/hCIO2d5aFdfXnS0yg57/jxzDJBwkdOgeVnyyh19Iz1UqiysT4J1eeKwUuWEYln23ydtP7g3R1BnvnxqFPAnOMgOIop2dkXPfUh/9ZKV3ZQbZNactPD4ql5Qg9CxSBnIwzlj/tseQKWRstwNbf17neGwDFFWdm/8f+nDWt/WlKV3MUiAm3ci6xXMDSL5ubPXBg/gKEE7TsZVGUcrIbdXILcMngvGs7unvlPJh6oadeBDqiAviIZ/iyiUMdQZAuf/YBAY0VP1hcgInuWoKbx31AOjyTN2OOHrlthB3ny9JKHOAc8BMvqopikPldcwIQoFxTccKKIeI815GcwaKDLsMbCsxegrzXl8E0bpic/xffU9y1DCgeKZoF2PIY77RIn6kSRdBiGd8NtNwT74dyeFBMkYraPkudN26x9NPuBt4iCOAnBFaNSKVgKiZQruw22kM1fgBKG7cPYAxdHJ8M4V/jzBn2jEJg+jk/jjV4oMmMNOpKB5oVpVh7tK529Z+5vKZ0NSY2A4YdcT0x4BdkoNEDrpsTmekSTjvx9ZBiTHrm9M/n/hGmgpjz4WEjttRfAEy5DYH5vCK/9GuVPa4hoApFaNlrFD/n2PpKOw24iKujKhVIz41p1E0HwsCd/c17OA0H0RjZi1V/rjJLexUzpmXTMIMuzaOBbU4dxvQMgyvxJvR6DyF3BaHkaqT4P3FRYlm+zh8EEGgmkNqD1WRUubDW62VqLoH8UEelIpL7C8CguWWGGCAIDPma9bnh+7IJSt0Cn6ACER2mYk8dLsrN70RUVLiE0ig+08yPY9IOtuqHf/KYsT84BwhMcVq7t8q1WVjpJGNyXdtIPIjhAzabtrX03Itn29QO3TCixE9WpkHIOdAoGvqCrw1D3x9g9Px8u0yZZuulZuGy0veSY34KDSlhsO1zx2ZMrpDBzCHPB4niwApk6NevIvmBxU3+4yaewDvgEQDJ6Of5iRxjAIpp9UO8EzNY4blj4qh8SCSZTqbe/lShE6tNU9Y5IoWHeJxPcHF9KwYQD7lFcIpcscHrcfkHJfL2lL1zczKywEF7BwkjXEirgBcvNWayatqdTVT5oLbzTmED3EOYBSXFyb2VIYk3t0dOZWJdG1nP+W7Qfyeb8MSIyUGKEA57ptPxrPHKYGZPHsuBqQuVSrn0i8KJX+rlzAqo8AawchsJ26FckxTf5+joTcw+2y8c8bushpRYEbgrdr64ltEYPV2AbVgKXV3XACoD1gbs01CExbJALkuItjfYN3+6I8kbiTYmdzBLaNC+xu9z/eXcRQV1Lo8cJoSsKyWJPuTncu5vcmfMUAWmuwhjymK1rhYR8pQMXNQg9X+5ha5fEnap+LhUL1d5SURZz9rGdOWLhrMcMKSaU3LhOQ/6a6qSCwgzQxCW2gFs53fpvfWxhH+xDHdKRV6w29nQ6rNqd9by+zm1OpzYyJwvFyOkrVXQUwt4HaapnweCa7Tj2Mp/tT4YcY3Q/tk1czgkzlV5mpDrdp1spOYB8ionAwxujjdhj5y9qEHu0uc36PAKAYsKLaEoiwPnob0pdluPWdv4sNSlG8GWViI+x/Z4DkW/kSs2iE3ADFjg4TCvgCbX3v0Hz0KZkerrpzEIukAusidDs2g/w0zgmLnZXvVr5kkpwQTLZ0L6uaTHl0LVikIuNIVPmL3fOQJqIdfzymUN0zucIrDintBn6ICl/inj5zteISv5hEMGMqtHc2ghcFJvmH3ZhIZi34vqqTFCb9pltTYz582Y3dwYaHb9khdfve1YryzEwEKbI8qm62qv+NyllC+WxLLAJjz0ZaEF2aTn35qeFmkbP6LDYcbwqWxA0WKsteB7vy8bRHE4r8LhubWDc0pbe90XckSDDAkRej0TQlmWsWwaz18Tx2phykVvwuIRzf4kt9srT8N7gsMjMs0NLAAldabFf2tiMoaaxHcZSX51WPc1BrwApMxih227qTZkcgtkdK1h314XvZKUKh/XysWYnk1ST4kiBI1B9OlfTjB3WHzTAReFLofsGtikwpIXzQBc/gOjz2Thlj36WN0sxyf4RmAFtrYt64fwm+ThjbhlmUTZzebLl4yAkAqzJSfjPBZS2H/IvkkTUdVh0qdB6EuiHEjEil5lk9BTPzxmoW4Jx543hiyy4ASdYA2DNoprsR9iwGFwFG3F2vIROy4L5CZrl230+k733JwboSNBKngsaFPtqo+q3mFFSjC1k0kIAFmKihaYSwaSF7konmYHZWmchuaq15TpneA2ADSRvA07I7US0lTOOfKrgxhzRl0uJihcEZhhYWxObjvNTJ/5sR4Aa5wOQhGClGLb746cJhQ2E6Jie1hbGgWxUH7YSKETptrTeR/xfcMNk2WM12S0XElC9klR8O7jLYekEOZdscP0ypSdoCVZAoK+2ju2PHE869Q9rxCs9DVQco4BriiPbCjN/8tBjsah4IuboR5QbmbyDpcdXVxGMxvWKIjocBuKbjb+B4HvkunbG0wX0IFCjQKoNMFIKcJSJXtkP3EO+J16uh4img0LQlBAOYwBLupu5r1NALMo0g3xkd9b4f7KoCBWHeyk24FmYUCy/PGLv0xErOTyORp8TJ5nnc2k1dOVBTJok7iHye9dwxwRVP3c7eAS8pMmJYHGpzIHz6ii2WJm8HMTPAZdA4q+ugj3PNCL/N45kyglqvQV4f/+ryDDG5RPy5HVoV9FVuJcq2dxF9Y0heVoipV6q1LyfAeuMzbsUV+rsSBmCSV+1CdKlxy0T0Y6Om0X6701URm2Ml6DIQgJ/3KO6kwcMYRrmKsY7TfxWhSXZll+1PfyRXe9HS0t1IKTQMZL7ZqQ8D/o+en57Y9XAQ9C+kZYykNr0xOMxEwu2+Cppm69mQyTm3H7QX6kHvXF201r+KVAf354qypJC5OHSeBU47bM1bTaVmdVEWQ+9CcvvHdu8Ue5UndHM+EeukmR82voQpetZ7WJjyXs+tPS60nk09gymuORoHNtbm0VuvyigiEvOsyHiRBW7V6FyTCppLPEHvesan91SlEh1/QEunq+qgREFXByDwNKcAH5s8/RFg8hP4wcPmFqX0xXGSKY087bqRLsBZe52jThx0XLkhKQUWPvI18WQQS3g2Ra1pzQ1oNFKdfJJjyaH5tJH6w0/upJobwB8KZ5cIs9LnVGxfBaHXBfvLkNpab7dpU6TdcbBIc+A4bqXE/Xt8/xsGQOdoXra4Us5nDAM6v2BNBQaGMmgMfQQV+ikTteSHvyl8wUxULiYRIEKaiDxpBJnyf9OoqQdZVJ8ahqOvuwqq5mnDUAUzUr/Lvs1wLu2F+r4eZMfJPL4gV5mKLkITmozRnTvA7VABaxZmFRtkhvU5iH9RQ1z26ku7aABokvptx7RKZBVL6dveLKOzg0NC7HAxcg5kE1wuyJiEQLOpO0ma3AtWD2Q2Wmn2oPZeDYAwVyEpxuwDy7ivmdUDSL95ol3h2JByTMovOCgxZ1q4E5nwwa7+4WtDAse6bDdr27XgAi5Px3IWbyZ/vRiECKwOMeJSuIl8A4Ds0emI3SgKVVWVO5uyiEUET+ucEq0casA+DQyhzRc8j+Plo0pxKynB/t0uXod1FVV4fX1sC4kDfwFaUDGQ4p9HYgaMqIWX3OF/S8+vcR0JS0bDapWKJwAIIQiRUzvh5YwtzkjccbbrT9Ky/qt5X7MAGA0lzh43mDF9EB6lCGuO/aFCMhdOqNryvd73KdJNy3mxtT8AqgmG4xq7eE1jKu6rV0g8UGyMatzyIMjiOCf4lIJFzAfwDbIfC72TJ/TK+cGsLR8blpjlEILjD8Mxr7IffhbFhgo12CzXRQ2O8JqBJ70+t12385tSmFC8Or+U8svOaoGoojT1/EmjRMT7x2iTUZ7Ny02VGeMZTtGy029tGN1/9k7x3mFu63lYnaWjfJT1m1zpWO3HSXpGkFqVd/m3kDMv4X9rmLOpwEeu8r6TI6C2zUG+MT6v90OU3y5hKqLhpyFLGtkZhDmUg/W1JGSmA8N1TapR4Kny+P6+DuMadZ9+xBbv06nfOjMwkoTsjG0zFmNbvlxEjw+Pl5QYK+V8Qyb+nknZ0Nb/Ofi9+V0eoNtTrtD1/0wzUGGG5u2D/J1ouO/PjXFJVx6LurVnPOyFVbZx7s3ZSjSq+7YN3wzTbFbUvP8GBh7cKieJt56SIowQ2I577+UEXrxUKMFO+XaLLCALuiJWB2vUdpsT+kQ+adoeTfwOulXhd/KZ7ygjj6PhvGT1xzfT7hTwd6dzSB4xV70CesHC0dsg2VyujlMGBKjg5snbrHHX/LNj3SsoLGSX+bZNTDDCNTXh+dCVPlj4K8+hJ/kVddrbtZw26Hx5qYiv3oNNg5blHRSPtmojhZmBQAz8sLC9nAuWNSz1dIofFtlryEKklbdkhBCcx5dhj7pinXDNlCeatCeTCEjYCpZ3HRf5QzUcRR1Tdb3gwtYtpPdgMxmWfJGoZSu1EsCJbIhS16Ed97+8br4Ar1mB1GcnZVx/HPtJl4CgbHXrrDPwlE4od8deRQYLt9IlsvCqgesMmLAVxB+igH7WGTcY/e3lLHJ4rkBgh2p1QpUBRb/cSQsJCbosFDkalbJigimldVK7TIHKSq2w8mezku9hgw8fXJxGdXoL1ggma52kXzjP78l0d0zMwtTVlt0FqnRyGLPGEjmICzgSp7XPFlUr7AeMclQ4opqwBFInziM5F8oJJ8qeuckGOnAcZZOLl1+ZhGF17pfIuujipwFJL7ChIIB2vlo0IQZGTJPNa2YjNcGUw+a/gWYLkCp+bOGIYhWr08UIE709ZEHlUoEbumzgpJv1D0+hWYNEpj+laoZIK5weO2DFwLL6UBYNrXTm9YvvxeN9U9oKsB3zKBwzFFwDgid5ESMhy68xBnVa55sCZd+l5AnzT8etYjIwF/BGwEx1jjzFv32bk6EeJulESARh8RZ48o7rKw67UZpudPa15SDnL8AL8xMV2SC0D1P53p190zhCFkMmEiir2olwxcJppl/kLm6/0QSUQLNaxi1AC3Pg1CTosX2YQr73PjEIxIlg4mJ62vP7ZyoHE55B0SX9YrrrCPtNsrJEwtn6KOSt7nLT3n3DLJTPbLulcqQ1kETP6Huts29oP+JLEqRGWgnrqMD+mhCl1XCZifjgQ39AeudE8pyu2DqnYU3PyPbJhStq1HbP+VxgseWL+hQ+4w1okADlA9WqoaRuoS7IY77Cm40cJiE6FLomUMltT+xO3Upcv5dzSh9F57hodSBnMHukcH1kd9tqlpprBQ/Ij9E+wMQXrZG5PlzwYJ6jmRdnQtRj64wC/7vsDaaMFteBOUDR4ebRrNZJHhwlNEK9Bz3k7jqOV5KJpL74p2sQnd7vLE374Jz+G7H3RUbX17SobYOe9wKkL/Ja/zeiKExOBmPo0X29bURQMxJkN4ddbrHnOkn6+M1zTZHo0efsB23WSSsByfmye2ZuTEZ12J3Y8ffT6Fcv8XVfA/k+p+xJGreKHJRVUIBqfEIlRt987/QXkssXuvLkECSpVEBs+gE1meB6Xn1RWISG6sV3+KOVjiE9wGdRHS8rmTERRnk0mDNU/+kOQYN/6jdeq0IHeh9c6xlSNICo9OcX1MmAiEuvGay43xCZgxHeZqD7etZMigoJI5V2q7xDcXcPort7AEjLwWlEf4ouzy2iPa3lxpcJWdIcHjhLZf1zg/Kv3/yN1voOmCLrI1Fe0MuFbB0TFSUt+t4Wqe2Mj1o2KS0TFQPGRlFm26IvVP9OXKIQkjfueRtMPoqLfVgDhplKvWWJA673+52FgEEgm+HwEgzOjaTuBz639XtCTwaQL/DrCeRdXun0VU3HDmNmTkc6YrNR6tTVWnbqHwykSBswchFLnvouR0KRhDhZiTYYYNWdvXzY+61Jz5IBcTJavGXr9BcHdk/3tqaLbwCbfpwjxCFSUs1xfFcRzRfMAl+QYuCpsYGz9H01poc1LyzhXwmODmUSg/xFq/RosgYikz4Om/ni9QCcr28ZPISaKrY7O+CspM/s+sHtnA9o9WgFWhcBX2LDN2/AL5uB6UxL/RaBp7EI+JHGz6MeLfvSNJnBgI9THFdUwmg1AXb9pvd7ccLqRdmcHLRT1I2VuEAghBduBm7pHNrZIjb2UVrijpZPlGL68hr+SDlC31mdis0BjP4aZFEOcw+uB17y5u7WOnho60Vcy7gRr7BZ9z5zY1uIwo+tW1YKpuQpdR0Vi7AxKmaIa4jXTjUh7MRlNM0W/Ut/CSD7atFd4soMsX7QbcrUZZaWuN0KOVCL9E09UcJlX+esWK56mre/s6UO9ks0owQ+foaVopkuKG+HZYbE1L1e0VwY2J53aCpwC77HqtpyNtoIlBVzOPtFvzBpDV9TjiP3CcTTGqLKh+m7urHvtHSB/+cGuRk4SsTma9sPCVJ19UPvaAv5WB8u57lNeUewwKpXmmKm5XZV91+FqCCT6nVrrrOgXfYmGFlVjqsSn3/yufkGIdtmdD0yVBcYFR3hDx43e3E4iuiEtP3Me9gcsBqveQdKojKR//qD2nEDY0IktMgFvH+SqVWi9mAorym92NEGbY8MeDjp553MiTXCRSASPt+Ga5q7pB9vwFQCTpaoevx0yEfrq9rMs3eU6wclBMJ9Ve8m6QuLYZ58J41YG3jW/khW92h6M/vbFIUPuopZ6VVtpciesU74Ef7ic8iSymDohGeUn4ubT0vRsXmbsjaJaYhL8f+8I5EiD5l680MJbxX/4GYrOg4iPQqpKp0qddSu/HKtznHeVyxgTwhfEORMCwnaqetVSzvidaWN9P+fXtGXfEP9cTdwx2gKVfDdICq7hecgRhIs0qlCt6+5pGlCc6kWoplHa/KjP+FJdXBU/IDoKMxRjFhSYkggIkhvRKiN/b2ud8URPF+lB87AGAwyMjr/Wju2Uj5IrppXZWjI3d14BdKE2fhALyQPmHqqA+AXd2LwvRHcBq4mhOQ4oNRWH7wpzc6Pggfcbv9kqhLxrJKEaJqA6Rxi+TDNOJstd5DoRVCDjmVspCVyHJsFEWPg9+NA8l1e4X2PDvOd5MPZAGw6LRhWqeZoSQcPf9/dGJYAyzCmttlRnx0BfrKQ/G9i5DVJft9fuJwMi3OD/0Dv1bRoxcXAyZ0wMJ6rwk9RjRTF4ZK8JviCCNuVt/BqQYiphOzWCpnbwOZt6qXuiAabQWrS4mNXQ7cEErXR/yJcbdFp5nWE1bPBjD0fmG3ovMxmOq5blpcOs0DtNQpci1t+9DKERWAO53IVV/S4yhMklvIp0j0FIQgwjdUptqmoMYGVWSI5YkTKLHZdXRDv9zs+HdFZt1QVcdlGOgATro3fg6ticCrDQKUJC7bYX50wdvetilEwVenHhlr85HMLRLTD6nDXWId4ORLwwe5IXiOhpuZTVTv+xdkTxJofqeCRM/jcZqQlU0gFVTlYlfwMi6HKR2YG4fQ8TOtgR+yV+BMZb6L5OwDc/28/xdfD7GXFaVA2ZSObiIxBwT2Zev637EuvpM6rxcogdM4FJFa0ZhF7nrqtNsqWg5M7hZMORpjd4szf/wS+Ahs1shY54Ct5J1dOBO4sdEtSnRc0P9PhgyOCt6aQW98R22DpAcNTDe72AHK40vutKTPfpokghRPuGvz0dulBPKfC3O4KVDCyWrJGO7Ikdu06A0keKlVfi0tGcpO0NhzXEh75NHyMysAMV19fq7//sPC0For1k2uFEvq8lwrMAfmP7afR69U2RqaILHe7glpc8HmVf87Qb2ohsw+Di9U+ePdHLecS66MhB/0OwdcXR5WBcWTZLGq/kiAaT+bzkjR8GIpWdv6pfIgQ+Q0xdiKvo+gNB7/Nf9knNJGxnh7LeZEFtMn517tNc74PPS0M4K3I6HHZqNPA+VZcBc/g5a2ARyqKrJ4Z3krsuA+VOJJz2KJpBMgCCWFln3u7k6/q3DETAubKG/pt3ObaNT0NI0Qug90L2ip5dHnZJUjPTvK5E96aX/4mRU2u8n8kh6MKbY7ANBro3huF06U+JvfyELQP25oIaj+n0ITQ4KT9rXZD4EtBIOj95fYNldDN3io/VMIvWNj9P/b95WEMq8UAVfG2XG0N6fSYdnBEC7sUEbatbDICH9qA8TTuW9kEt9DlFOZFP7bdfYLa/khSY8W5K/AkIIAPXtMvyVKyESjKx9nfragssxC0jFMVY94d8lOAwRocdS/l/P43cBGa3IqDa0ihGPcmwS8O8Vj16Uy55rOrnN0shhRJZdW8I7F0Q0KeHc35GFo4aJOFc25gNafBu1V/VO0qS4Qkb6wjRrnlepUWjtYyaDABZceValuOMtoDdeIITWKOJiwGPpB12lQgwkmXh9M86podb0D117mNQ8ElluFvbaS8RTKQ6lyj88dUwoJU/ofOeubhoXWBF8eNumkVJu+As3ED/AvLlrV91UowIWI2m8HBG+a3k247ZKAGYsOcWe7fTWqL8eqwM5ZFuoXbeugPKuMOAtOsN+4dSwkhrSAlfGNTzFwEmCNWtzpa9CgPbYNcmoHtO8pj8qMvlGET6nrkJoQ2lp5MEUV1E2A4ZH70JUlCLXvqTIpZlzyxdr5p/GZiD1/BuFOGbyfFzhuxaC/l3lC2jjt6GNRBa06AqqPlYtdA7kiidYa5Qi0/XpXiMDyMXNOj3kmJEaXufW0GO8+DF8OoMULX1vvjCePKNis4AmxQKLCF+cjf/wyilCJvuiyLVPSdsuRTPZ0AhpdDF/1uFmDwG7iP3qYwNsKzqd3sYdnMolCOuQOIHWy1eQpWhuV+jmSeAC5zCc0/KsOIXkZPdiw8vtB33jEBpezpGDBP4JLY2wH1J7Fzp8y8RICqVd25mDT2tDb/L1mh4fv9TOfDH5dTeATqu+diOZi+/sIt18hiTovPsVQVaqXLPRx/4R/uH/86tBMcF+WBkThKLfblcVCIECc8DgNRVX97KdrsCeIK+CvJZMfwrftcDZDZyp7G8HeKl7bPYnTKX88dXAwAyz66O2chkPDHy/2K2XcT/61XnlAKgPwtI8yP9Vu45yh55KHhJu93mL4nfo8szp/IyDjmFHtSMqqoWsj8WaVhbjXgzZxcqZcyOe7pUK6aXF/Y32LnBOt0WN28UmHRiOpL525C63I2JQPX8vvOU0fz2ij74OeJ1Apgu3JRObfdo9xGDpp7cv3TdULEfNS6Gu3EJu7drBsBsogUqUc6wAUW3ux0/1hLVI/JEKJrAGm8g72C2aJSsGAsKFW4CBvBXVlNIKa5r7HvT1BeGYBfxTR1vhNlFFNN8WQYwr39yT/13XzRGiF2IsfE8HcN0+lN1zN/OnzekVBKkFY11GgrK5CLxrE/2HCEMwQb9yOuP2rTXiZzTEETp/ismFGcTWmbM9G1Sn2D/x3G74uWYZY4rgKB2Zo2bTKS6QnM5x1Yee66Y1L7K44AyiY5K2MH5wrTwxMFh+S8LzNQ25z6sunWZyiRwFIIvSnioltUXNiOr+XMZ6O9h9HcHxZJkfF0tUm6QkU7iJ2ozXARitiL86aqVsMOpmvdIBROhUoanPtCjgft8up3hAaKpw9Qs9MzYtBA2ijHXotzarkV3zKEK0dFFQUwT74NgCmGGuSCEDmFCezXPC9BhyGhmzNa6rQeQQz+r9CmGUZjIQEPsHwe86oCOQhWaHERsv5ia9rZvJ//7UXO7B329YUkLLAiqpLRsVV5XpcfdawlJqi/BVcCqO6dr9YJTFFRMVGhfUbB9YWNvYPY6RyaydAFYq1YIBQxuNAGfYWLMAHtt2XRHoOKCLz+qf5HCVBDOPOktQ3SdJBfxUkaiD585bmTzMwU3oeXUHZ55EC99Kz9kk4ZXMIENwVVpqW2JmGIcUiutIMj2KkpjE2QD+dIZUCxcX57kH7hiuUPnKCTdaw4KN95XPeFRvMcvo5L8LexWqvaJPECzwXCs/4XPAlSMpWUzBBjK3pEnkbueMkMJQrYcnXf7PjbAoJra1VLX4YuscQLpaeYWbT+h24hCFrfcHjxxx6WTSe4AGY/KHRZCQKqTuFWt0D8RmGWmvXSdg1ptIefYPshuIVZT7CV4Ny67fvjJugy0TNYHqoCO45CB88kxrvIsih19DqjD0UqiJsTFPcGW3P/ULOG3nb8CjpgVTIoa5nO9ZYEX4uEHu8hLXrJPjV1lTQ5xTdZVagg+Wj8V0EE4yPsTc345KM6lVXqLiHtm+G6edC4GVEiPgd98g+twSYm18gCsPnjqlLcFm9e72CLJbYD+ocIZOxuVjrX6IKh9fh7WqdIZ66x9PWkDGOVVGkx7jM76Ywe16DX9ng205kg5eq+R2q2MguTJxYv/wWHliD9mOYpzZKNXYC3Wr4iBGkm54hBwkPzFhiX/VBHdVH/KJ1ZIMOHxIN6arKdxrm6EBsgwDt0mPe0MX1HRUMq8ctcmysU6xX0bzM1J07kAvq33jw1q0Pq2cyMWme8F7aVkfhzZEFdyi8fVBQav0YZqvAjZ83WKH726rBx5Bn7GHFthR6H4lFsltu+jWmsAibJ3kpWMG/QbncU7n9skIBL0MuXXtj9sJg+4Dl0XhKJ1LcrMydaIgyrgZgScP4k8YQvcsBmD26X1iYXKLzMYfZn2IfRjznsrJ1e5cnl/3a5xiNoI6n1x1U36FWckJbyx+hiSZg0QqAqeeSvzFYMlZ2REnO/a6yoQhu7PdHMYEPFIvfyGeyCU8e7rpju4DrlOhszj9rOIpNsvCkuD+TLyf5J7D/wsPkBpscFVI1q7oUSU9bN30vH5AqnO7bsf+9rGhtVjOJQ32H9hHSAzR2ape4L0Cz4WxaySm4jvuGXwkFp5NMMLrgZ8LdA+5uLuyxO5SMOmJNDBcbbLefv7z6LyxBwltnfQLd7qqpG1MmNcoLUcx73BkNF/xpdS0cKd6G646ntChXSeTZJJTFYGw39T7fqXDPKoG2cF7/ZcTvME42gXLVjTqzAER1Rt5m7GYsh0X0+XgOeW9MJqE5j/rpGzY6vUu6ACcCTzDMdZHiWELpDnvgE1hmztLcSYz0MtNyUBLqvylUJJnJu79Sku9NMHCTkgqozTnhMFfduV2NLCSYvAI5HUvQp1h/M02vKFD6eosIkGTg6mujUo1W8hy5Knf/erkBQC9LzNqPAYCgR+hczgevta88NNqSlBZryq9QNeUK7RpbvHjoNhUKAAeNYH55LeTW36KyFaXdAkBvyNP9xmRuBokPi2OhqDby6IZ61mwfzG+GmACkS+G80A4WGON5izgJWeeDK91jzusfOi0RmEsVJXwbVUr8u/J2LCQaMnHhi+wJTEPN9tS2b6W4GRGCNmtjAMgPsP357nOeD3H2tcDAPu5xQBKMHf/j4ZhXlkvvy3YmBJsjsd4pSOlfPZCnw5JvzxEXM5JIc+E2mU4CgB0mdJnH4NEsCHYNeVRDXFNuyZUE4nuvaJf1h+11AWLdAZ72D9XNRcxfb2+XHZN/SN48U7yl+sNZhg5gn/PD8wkBtnRj1zBUPIWnoMP6yGUEEzuT+VaX3x2jEIZAZsr3rs9wCfY1Ss0EdIFFzBbyruUup4EPanbSYew5tf16/ZWVup5iykttuqL4xoC/jdZWsAZeSfDSd3fP9kbyAFYXkf0Q2lmxaTkKRZrCo9XCoiUG4yP1URJ5G7+HSOhhJp0Anz0N07QZtyFUye6rcgiOFbtyoO1lkuV0iQ602MTyFK9xLqNHtNy4cJaTO6hjtiwNynVc34ZA6H7k8ai6S6eF6jIG0xJx+JfP97lzuCZr8vU5SIzImaNpiQhyvDbz23//PJcOk7hD4iIvJzfIgOGIR6ZPEJpWHZQoacbF+omeHw8aWHaNOfaIyGeG4lEryMfhtNmWh4RAIpn8dLs7ZE2eTVDwK++xDoSUgh47WDmKlZ/k6OosEUoQjk7Q+Kp7OxwgMFShAv6z4pTW8loVj2+qXLQ0T3hmIue8qHy1o/HXjm089m71t6mrrUyDftqMYtmfvQXKDlZ+K1HR/FkqPSqcjGlcPPIwbMw3wIFKBdVMJ4pFLt+oOIkWZMw8pkoYZ3byw4LmAF+7BdicGXFcb5PWtDw5XNNVc6eB9dv0rAEpgr5J+bLr010bpfGw+IkRoxDbkDFmQdEQUSElP5bViLo1ur/23KN0jEwl+rGC6AUMKxHcv+T9F1Ktpn8jSSrKxJnVkK8UD/tH5DN6nXB8mjUdFU539e9ywLtLYCwmHYVEVqnFmdubduaSd1ivIo4pTsX+mJcOAkrR1D60RIoocCBIdwJhCBM1rOE2XSlPo0U+khALvw+zfxYzwzd4roWlLJkZheFRR8QB8v4USwmAcDswUZ2P/7v7Xa51Fs7orYebYyww4YW5869Y/c6Kq2eTR9HLSjYuChTkXaDygoo8nz/yJ0KzfX8oowaNAwz8HvQdlLU9V9hjqYMURyYvPzZ60G0itmUdZwB+sY6rUkMAZZtWStbDFmnk/dQorhwr3121XQWffrK3as0g29ASwxbsZ3dZAq/96b7/XWckbjmo8+jwdE680DzoEUUivnBgowMuBQxHXoGyp+w/cSGY88rWtmwoyNNIvChs/QsZRnbdV7y8x7t2RkliJV/j8e6qfctrTsMV22zoqgQuTSNFh7U7p/Q49L0kygXNnEYXCBDgi5BeNWxu7VjULcUHI+lGj+OTCEATzWrDmaynq3wT9IAejtvh3esCu6sEu9JOsXxMDpqxm4Tzl+pt2Wa5Bq3TM5TKH4N7KLir8FGIPA569+uJ1VEL3fW8Jyigz/nEUjAVYrdCWq2MnS4hQVgcvXq9aF7Xke/k++rAtIQqckPNwjKrV2t7HCOrA1ps88Y5Rw1Zp+9itnB71j8tNiQc7mV1kUCQXkoi5fOsq1uC6hUPUL7Z69NAM6lg0c/aeiifHoi35v+pVBh7CDM1XfvYpiK5JIbIQFHafmnhHfRTnMagKcjdE7zzgtxkTPKVrObTySTT51g9bB5ro/dzn/sB24fNM2LGJuRQsmC49PLi1jTRfZaLpo8Txxxczij5Pl2vur+S1wQW3W5qyVcIUySZHtFDQHv+EYDoZG1T1J7D91vEIV8dHzUBzW1UyuxRbP+M/CM/vsas6RzmS5traXnQ0Jzv9hYXxKHcs15TQCP744XsLjzFjILYURXFnhM+nnV0iO6nwls9TR4tlz1J9/NvE8FGg5mgpZA4htS05AK0NnU2gxuqf2vjCyWlm3ypKvaX4vxh8Um1MHGB2NTeAFhbDyGm+5w2zqJAWxVlj6dVePb5yR+aMhuz05YubCQJ0BOtoYQ6PoDoW5fCwCtXj5SHvCgL/3B5z2mcXWaRTf8/GsFAfX/ntdWZWFc2xg8MJeenwZ4dZUToce43If4zVb1ex3BMAWGhgkPwR5EgktZhW3Yi+nsnZTUr9FYI160YhAraB0zMV+ouHz6hYm25/ETDM0MTmcypoGgZISSkfwYAQaHGY45yZ91K4A4Mm4fnbMk8GTc4orypT3NLBqAxYdcY/qCH82PpIkmVOEHi1NoYaUymuImLLcib5pmd2MHTB3JR+4rLdRc3gtQ9zeFdciciRiWviu3HkqaLSxJeI2rgc7OKQslItumACQow89elXmi4P3gTZeCauvMH5nF4VrBcLjjwGD+KlKqe/RWIEgT2wGqAgSuL6b+RTTPnQZzxZ5y5HQJkEEKJp5NfoB8hJBM8qn6xbOFtyzBjVBrwSS1zCJR3lEc9ODQ5Wu/xct9/2Q6qLHnmNx6XwZus/i8rEd6UsVxGtoDrm+Br0L5oUojlwdcqyVV4PIMsR60JhZwJtgX7izQWj+GOeF9DA8Wexdmv6DWjgR8LEBp9YuPAM8tJDu3uCumNqHnF2ATYX/tuVO55OgQuiUhmDmJbF9jJyifBRtxOVI9DCNLUY71IXZYTuiYcnILQ/XHuVJ8aHDStL0N+3eYNvXwHi2vEiTPnBqzsC4TsPnFVnYY042j5i7C11AVdBZ1pGSa52jM9dIL119rry0mgGxFzI8xPs+7bmMfYKh37A4HtA081olG1m9S4Zch2hoNCGVvVhd6UL7C2d5hKIBHoB+Uxarq/4aQXhh7IWjSj+ca7Vhqb4+ZwY3nHXh2S9JH4XZxQojbe/eINxYlozTYtT2rpU/xbj+W2hXjFQ+z+dQ8wh9751MP0UpjutQdxz3/FJYAEG5BF400JXWCBs7KrCRf/l+F+d9EuwVk6thOPDB+HNS9iWlLmDgXvY6K0vgiyoeA3An+jWufdAG1suUMBuJT+/w0FNJZbObUT8c5q5WtQxASQF6E+/u8UwVBs1eo8jTamCrcdhZJlADJbqn3crcDHQlBQNGq7btcGKiJXW6q0cn3F0xzf+k1JJS2testB3rx15ZPTDXm8QV5XE2qxBOdM2n6t5YbxyNOmEdsHx+hMp+y9pWkcgw1NikeXuafJvzcjaNwE1Ad6gG79S68aO7jWpKgBETYLmV4ONHhBk7Be8tjf2WVvWMDQvQdOnk448yeMv1tQKU1xev0L171e/qxkMZbmkfKnd29XRCK2hgNNJhwt1qiYWZGKz7Di6K3fGDT7DO2YQ7WU33svE/WKGbWQEvzUV2w+VNYDocI4yxQ6i3i4zU2TjmjCwu5Pk+Ja9HSwLpEoUswq3tFJ1jimthgMXd7KjSl6Qd0K+vxWT8G4/+xITHsWDGSfQTSdFQth5uVVfa8wrkDZHTGVgpJys2ik+3I0dSf6TNo6A/sVptyY/kx1hdAWKPI6t/xj6s+fPMU3hg1vkEB0RRHq/tCy3KUUhzU/d0JKxTyjvUms5iy1GbOFco0NA4t83SK9sBmtLWm4kOLLflyxqgQYP08iyXwYXzKnlQ6VTipuaspSJ9g5H5Lu3eLMnPKbhcwuEg0VZ80ppJWjUnhS3rL35erzysp+fJhxsUs86m28/UwW+IgrS5Y0zWaxlFJ8xML5wk8sg1ragF+eNajyI0Y4mwStxt1RZH2BjaAhvu+SnNNIK88thEgZEsoHv+ii+OMmXJL7dnAiINVDz3tCnqDgpQX9OguNGgZj3axcjq1UgxDw785yNIpqNiLgv57399jVmJ0/RStNswaFIs6FtnkilFZldxj6m562jL4p5g3Y9XCiXRJX6nq2PGJFifFR7EyPG4jDMnBM4t+O8ZpEp3th7TCxEw+ZG4afHl4sNFaqxyLh6+979tt0Aq9BrqI+CS2U7HJoKiGmyVU1lFa3/0O5mNC1bzRgNMy+GXyifLwJP7FwUSUmxmVRpn+gnXWoIuswPutsiciurvN6lsMG7yqEc2Y5ZI3jrPgPq0xEKPZpF7teJa0TQn8BQL4Th+hjv2ByfwKookyXEmj0d1KMcsmfKaeKK3cZZubiYqmSCrnGpYTwgPk5itKucVtjViuswQsDR6TuyGSIHYvlz7wkLg1Rr0K9kV1o8RgABlhbLrN74cVWJW6TnfXN0q12JFMpUbEa8t1+j440FA+17o8qa8PQ9igkctVROVIfB3jU5vtGm5pYYHYSDvU2TEc15pIz19ka1q6c/7WXfF8+POkApdOw7nn7Kqz6V4tru7NXgnA/u0g6+fPRT3hp/QrDQwMsjwNCZxdWrR6pgCBDJNc7/KAlwC0UZ4yWQs0KsuwbbOgcTxQPK54wiXr7s+221hzZ8RVxfoRUKM3e4lpxHC83JllxlrV760tl06f7/65qhE1jhMfivAUXIXfRMe3uY/G2TpWYzDrw5Cm5cS062Bx9lhHq9gtJp8xZwAtSdSuW/Kd7+orEAiswA76N8ezmVGYgNaYlQ/xk930LAWAtKVBC4U6R08L45IohB1kFia7XJs0TcaT2zBZoLFuOGu4iJaoAnfjL3uS6gnRH7G7A+aT6ETlmkYUfgrBuaSLLDJfhPJe01PfN0oqBTeQURasl3N8BZiQSgdr0aDv3hPTiog4NSyfAUyy98WP7dnTDWQTY+Qwzgk1uxwRqHl5MpC/84Cuw1TXfRlgJrwPop10kCHjmffnFdxCe2J3R3J5j+3H/sZn3IUu3Suy+I+dAOMWvzwExNR3RRPVelZAhtarKlXPWNjPRIVP4JsAFSRXs3o/fSYAPaV/zP8q6DltH47/rYhCLdy/LrpOsbaLf09eACcClJosNefetNElkSFSuCgeY7oTAAl+8Y2zOXJb/bgEDpoDXfQqc6lnlBr/WsmVznkBS1M7ufiqpxvKXjwvR4WxLbh5NbMNy8LsnX4UiuAi8XonbSUcVZKQOWBYUecSOMj6jMG8gHu7WNreBHY90lV7FocDprSrSbexkAtMW9KlXcnrOyLnZdodGYdxz8aw71HztIqLhRdCOB6NyzHPoS2hDy6wLk0I5Jr2t+U0A+A7EsgSn/Ih03A5CspHnVF4MOic+Lck3m61Um+GHDEe4DrHBhmgtDlRQl1XJ/V/VumCHtUDDcZCkgjVMBOmVOGYW0Rcdi1ahdjhBcFlfjA+5cRjBop1aNDvdrf7CxkLVgxiCxhRctW8wczM8+kVmIrGtkaHGlr8y2D098HXE23r7fnJFUU68zyeyM265igNOGPzFG0dIgUDWN6S3ZcfMERJdWVvpGhVEHXNLeWqHiTcF3wOt0FbJY4XHEpmkoG9MQPJJ4ueQ01+MB+SR0rCSGzlE8zod19q75LlLWgzogpnJoD4gPxUYcX+Gpc5Ly4nk+Zm8LDXcNR7SNVxLh6NAcx8ekjb/AC7ADlRnfuHaHJaBodZr7RBX9FLTvocY6kY8bavdAkQicE9bbwGLkZu6whTCJ56lOvM39ijehpTOFqR3V53nQx4hfOvwRPU2y2w7UU8yiRbcyaX6jGJ9CRvl9ybV1tebTp5MMuMnwLcx/lven0w9T0atJuiUE2WtYGiVMaP3EchABl5AsyaCpu/BKAWDFvU2vaCL2/fJBKCKLjxG6xzT4Mh4wHhH3/EqsGSoQAHu2wbHmXHj2LvoW19GXDa2oyeKRwGG1PU+S7mE/S+UmjHiDF1oqJ0R5QsdjAZYN1MzpNX5YDqWYfhfdjAXyFQaVyGKkp1oEGTR8MK6jaGfRDFd41u2Ex8ac8jKPYu3pXsk8gu+m9tr1RVzTTuDsACW4S1h32yFHX7qpXSmA0QVEcR8W9j2Juu0pcYqTmdis88VgT3gq7iYue5Hx/3K6hFQa9rZrNSDcjaSQlNn4LSqs20bypnKqpzvnnxjMdz5StbzvoAJKgVZa4DLCVoJW765/KyTF4s4YztmAT1c0pTmKJHTpa106FegDo8p2zD6uOnwpYi0vJlRMDe9wPT6964UfAf6lq3qWypUOx9q6BbKEYt7K3gWMXDNN6wAm1fNnSOnZ4JkbPq7jLQrl0wL1V7QwO/sXneKGfTgUL28I5iPVG9dA2gS7Ki005JUR7Vmw4gX4TJvy1WS74cIXD08LCF5obqcZwamuoZ+FPMJEck0TLHjyH1baPr55/Cy0ptDfRJ7d89pbP48tLMHG5dO11Z8xSSpPGQSgXDWmpsNsmm+MvxJjMCi7OFDHxxpmTtjgnOCq+c7Fi1DybfhAntviKccz+sj+OPKPYOKeYYPLvq6MpUx/chSvBccg9dfbeqetQNCs3eiCFZTU1mrDido/mib64STMgsa+IKLk9PyxGGbVSQB9GsHto6f5prAFIbRDSItDedz3t5+Nn69FFS0nEfmkF7hKBmNVce5xv65USKGBoHYxJyutSGnRIq7vMDsAMvirOEJOzNi5Kt7fypuSU2c2Npo6UH5jMOkePH0TwgpammO3Fb2FX6f11309z/mqRmQ949HHRj/wMzKNx95M9pwKf+UQkMEwisL3YVotvHhCv4y00Ui0Ql8dR7tGqFcSdYtmoAOuAodkBNs4PZSjAAF7S/szwLddFMdCyB/dWPgFUiUE+WmUUCjYrKfJLQfNNpQ4NKaF57w7Kp/isZVwQPUJyjJavN3fQNKU+F74jVBJYQEcEdw0Niinyea0l9PJ1/AcTm/LI91RZjDvLI81pnat7RKU2P4/TnIAa3hIEfeg4iGQ+wTDlURK6YjNpN5s5VkQW9w7sDYKU4XmjyZsCQLxztqd4SDQvLyuPDhURAJXKfR1c7tq3mRu4usFHPqz7HgS0X7kNxiWWR3fb3uVwbgKpmgLYkwKrXKt09COw4MjhxeZlDXKy7nNLHXAIKPtferWQnZLboonQXK81x+BB3oUidBehK1swSXxVbscj/LsfONu/xYEXYPM3aMqIYd+2hAnFvDHbdrJLhGEd3sG5PyxqhzejhQJo9wauFK3xmPYqxB99J8zYU9/yzrEZNzzbvPoR9vUlE3Ha4zspVDzHHffPZMJ1VLZkKqGCf8ZqupqMt6T+NRPfmPm2xeDgvzMrRJEL4/zzlu7Z35smvzbgeC25VP2CUrZkRxEi15A0769ojdO1d7C9OG+swj1ROMM3NgKdeBADoRMeJkRZcZ1FbQu6C0BS9NNSaoxtFzYT4lX7+PQ7BKa84yrN+ujVVef+SgnEie1G0N+eOtbZF/UU+wkeerWjloYqFiqo0vBnmxh+TwNMo9I/8lfU2XTCT0K4OoWE08ipyNHjxHvfhY6qa3x4HzdQ8+jkiO5+j91YkihS5memfpFREHP/2veN5XcRue2zCVuAub8V6vDlOvyP+PBm+owyRhMmng5wwGGIXsOkQekXrXpE/6dFjkHwwoFoj5bIFiqp+4wHpSWRbv2xGrRpd2c87FzMP6Hfj/3LWIBqFiNOAxBw+AAP1XqUBszdZhzOSQrQS4Ein4fyV7MaGsB0VsMF4bPb4lx/foTGQRJv45LpoxDd84xCawHaX7jpXUrOdkFxx2oUvY2xqpgIvcVufwd+zAnaaVTnEyDXD7S/o/xrrk4mgTjXhcjj5Rzrbr23NmuZQvpdNzny5MCR9bwvIRIqzOZZLsstZSCDYa56JTvzxgBs20dYTtTUbe21uljlWqGfSh2bYAzOpf6UguK30ZxNXgLHs6Y6urtxFA5iLYvlue5mDONW0MOtQjhqr8fRbCkYneiDkvzHkQVT4F9v9vxh2SIGPBH8bZb8ugo/BSgXojeSdNXbBAIDsB6DUNSXnwlu/bFLaCqSbvu4+YLplwO1JbtrMf9ZUfsxerAZjB7E/zl3qwgK27FswemUmSM4i37YAVhQSocuV8AcDI/CSeCDNPavESshDQ8A/lVIrAJAMdP/rHXouiNU8RL/TIvfQiuZEb6dkIKMGGOW5kT8vO8pivWnT4v7qmwuJo52AS1r/RyQ2g/7c9ZJgmMIzf0GvJJRfMNu1utRNuLWHOm9JIMcJK3qiDtVpGCDP45W1oTTMUnMC91kYhP0GHjhCW8V38xhjHgFFBfuWMsmSQ9MvNqKXiqtUhDAkIy0PW7YSKaKUv6zctAiIk+Jt17kG6LpNVOeMvJnlVBaJSkKe0HTJJUMvf8R2zna35/yh2wNlWLzIP3BJR5aRNxkV94ICOlycI1/JYRZtzvWMNoIpQrdNvyBuBydhSwhRwPo079Xk/XQZpbhzN/KK4NbdJQV0JIMP+Y5UBIM3TTYlFGYVjcvA5yVozkimco91Fx/eo+ydgAx1gMezTh+bYxCtXPYkMoPdtaElRusxlmdSV9zgF4Np+iylun3LVxCycAFxGCFsmARf6y4I6zXY0tx81aQyalr3/ih+ZjxGNWdhItgNLdEZ/BOIJpPoAveh2bKbEFxU/M0+4xqDo3Ox8MnNn8Lmv15NJigSvJV+y2W/ZogEXNiv0/nuFzZGr0pKujOShzcdkEVlMw8mNZXZCbtM9V+mfawtLxCTvo+enFWhJcFv8LVTFycDjPGBXRQKNN+z68HJtYdpH++g5WdhQpCO+DE7Qdu6TmZgtetrpU2ZlgpslOx+4hb3aXaqbdc92LCh51er8vm1GQ9uWD9+fAPRV50ixhgc5zi2Jsg1xQVxzlaELRWJ5biyF+eCwNV0oFnTbBHr3Glm9qlGVOpoOsQC8hlNG88fxeAekkCGnHFn6i5WzyO7ShDYbZ2KM4eqndyy01v+6TFhmkxgc0dndt7EzRCcEfBxSaWZwcev6MDZcuvSZQ9CNSd4Tx25TY6UAbrhikuP1vNFfPdZhCG1pe6vx4D6Ez3zIb0zDa42FPpxWvIpEeXb7YTcfZOahSpSYaWLH/vq0F3U1KO7ZxliZpoMBBYJs91IE0bOkrPNQ/USYY0qKCO3CU+AFbOYxzKWBkIglrX34377BZ18MKQCv1KWfIHEeguSpvrNH5RQOD4LeiH2gdx1MOAKphlL41F4RpxaU4dy8xERFgqoyICQq9XmQ8WJSokwqvhQM0fLtsvyCO2PAkJ3BZg5IqoR5q/GdTLgOWPFR53Nqw9Ma5vBzZcQ4+iZgetmKg5ZIn+/7Jbi+VlViXuD9CaAUtdEmnwWTS7wZWuskVvc/SDaaKV+Jz6HrZTHo3UrAu0IZDBkXWmL+mTTjdTb1A+MdhKkY/hvFNwXj1FzUngsN58u/kTdJ3Xi0hy7efR6faAOi4SKGaiOty8lxDFkiD9wq2GW1EZEsoWGw/WzxXhWDzYY8CC7WuLFHc+x19jhH+FiLXwDIARRtnkJPF2BUPZ9+grZ3tjqAWhhN3h74w5pooRQUNATy05A9HDLnILGSCtfESoSilqtqAIQ/TV2t3KhOc+teDf5t+DqZDdB8Ob9YXyklrSO73pR0QAxPvQj57c6FIR5dOciqeHZ2LRABMROo8Jk8V6JFewCL8TCd/A5MSbXLky1cW7mXobqgeEXdFDoEydKo5oCuyn+2JYI/7pIGFAzErlHZ5hOaiT17HC3zp2HpJwsIAb4/oIoZ8x8ak43Yp83Ermq55Dg8HxKGHXbXs47sh0PzQELTGFsf5eO3lYAuJjMneoYWk8W/3tW2WLntEKBZEW4hOFgo8K58Rj0vk5KLyezu1d8SO/JcuxpOJqFUM2sxBmbQ/9qqwb90R0WulpR/Ju84bQ5/fTh7po/pbBb7AQaYNdK3fatD3K4TLHAaa66MQzp/+ZGyCjzo5OXRzJ8UHyg/YpNHvvlOpwQIOjakpLHwGV4WsLDPjEIqG23ily3LL0dlkYQxj3Xx0ApCo35zYGoGOtIclYS83MnI5TwVdQ+Hg453WFQN694DaqhGaL/dm0KncXYqXLi5polgT4DOrzD4oSVhrkh8GW2PaXjOFDCLPcn4RQj8dRGIJuV81LxMPZ0UL6zpkaebhbFBxcRJe38UiTbUPDjFWk2jBqzrBvXcKmgdDcmRyJhIpuq+3DQY464AlY42z2EM0yIK0I6b+VgpanMfpdWo7OxKY8RM5tSJv340/qD8SxrYsybMuUkF8fHj7HcvxEPC5YYrH4LW1YKg6QaeFZLvPbrHZHvi4OXLKkN8cGQO8019OKqcv6QnBlj01e7qS5evoGm53rv+VmDxxCXDiOrDg+IaPeMPrn8TJ1oReXYI3yb+4HQbikxP5TQXHk4YXPUv95+KmkxGsRgTwP71YiMpqNXp0loHZeXRp9i3euKrVtxMM0e6XAoACwNtcc6sOuhZVb1htBLudzahrDFt5GkdlwHjZl5y0LbvSHwII+qYeDwRKTTzyXaInHIM+8rc5TrjUlPRVwB5LKFpQnV8e7vLv7T7V/iJTW9h9TnRtNCSGcofBWYm5P7wZcAq3AFamEW/GMbo27ldz0plt5HI53ddWkn9IuCZY+Iy0MATUh3YenRTbVgdLYtu893SuN6EL4e9V4NhlzUjI8nOS6B99ecyC1Ot8sDahQpWHbmt2YvWGyL3S9tEVLKYs+LnghBmmSl2uPWfqPobPwBHNLW21LUjfZb7jfLMTsMp3icGO1npK/rCsUgdBVKVg0Ys+/WKuTmVJoC8Oe5h3PK1TQhbpZ2ytP9nlutQPtLAEt+CVT90DfVkn7lHLOX8AfS6HLzfHeAhu1alnl19RHKV1LI0G7RPzYgVaSpX7th9f06uo2WpxjL86i/2uzK2qj/ClHbGDyQr3F9/axmq4kJ7zZFVXVVwfiFr5bhUGVZeQJHKFAcsnqPKsb8vHyB9SpFpT9U1U7D4aS9vYgqajxhC+hOkolJV2dKAxysCkWBo3SPiPUrSQYZxOWwWCoQzbV0oeaDEcgUtqI3nq9TSmpQ688/+wb26P2CHLY1H7q5lypXSrnwnnztq/jN1o9lyvLmLyGguV0VJnDCREkiUNrZqGG06MsyA+Phd9CuFoM5M1Pyk7S6TJaHdTw0ni3n5ysAup0kyxr65lFc81NcH8xSmpp+iOEtQZrH/y01k1rGMRJAGFhi+nDecpUlnrh+qBOCMZCcSCovOPJrxjZnZJDMLdpMVu+tBSVS1nKxsYjY9Dtq1/++riVfLUVhzofIcIgQQPOqHioELxU3EpCcZMoL9laa5YlOZAMEp5apx7CphrkL+fyKbBAf8ctwVd93FTo7F5Oc/alNsCgK6lHruPROtN2RybiLqx8P5LTUZXU+Aoyz08zYHasR3U8hPDKj+6arWXR9yWdJoMn45prCSURKKy3+JHgvs2Ot6v6GbEtdCumgCttv2VNoU3KOqUwqNIWHqYm4eMijTM9VWB7umEyp7UPOI8fduHJY0W9xSCZdvc2xMjo3Zdu2o/WZKDMOSh9UmLvo45IBppD2dG++HJu8kbfFdlwuIxk2KHhgHQeNKcHhFkYGRzL2VJVMOAb0Co64wvds5CaYl9ZmBm4zuGDeaO2eI1XM4+rD/HmZyRF62SabgAe8TF43VuMutigJJMfbW2UK0azGLFbOfujnHD+GGBYmSmOQbUCOY99HYvswBQA6r9hrc2jtsUUxLVjxnZ4JnIrTwIVdWCTPtpJpvlA7m01/4tbUMyz9mv1jdN1jkiHQCJXXKg8bJ+aqW6rbwbn5yDSHBTcFXIegrhHGAjJOZI1pyP83Z3vMYTAJoo8V9IwyS+U6OVg78+IhSYHDYjRs8FrF8smHQ9h4qAYxp49rRP2d5uxLAuP72GvZaYvfeLOkMrcg0PkPuq7NsXhMFmiZa6PKBH1l+oKHI5DBLdZCvCwTPdXqmnz8gLzVRb/ixLTSdit2nrzt0x+5rDeZT+ac31NKNskQs6noKlQccyD3UxzfVZFmcbpmrfPsZD0Ve34xpKWk/E9Khn4A5yVPVq+dwnv0EyYecPqXGU7R8suTW0A6NJWweLI3iSGDlQXzMYsSWkSMhFTfyA2vTDt/3wXk+mVU6bRNkZvNnyVHYiA4tmnNwdh/RVsk/EgSerfTIf5VBmuAc2IKSeL5Nbrg3acgFj80mI8SWsc3dNAGCBLLMP89gH5UnLTKq78d9SxQH/g7DVnBh/qnBdw5CDrw/uMzcdXSxWqGIFcnQZt/1aOHxUg88MN2w+FPx/V75gy2wzEVe6G51PQIR2tZsxbv62HhgjwtlzrVREw/yzlaAiuXC26cnpvQzWXp2mOgihyPCWqq38nEadX2T7f1Y5zGxEGBaT//IcL/BsquAJX5EDbX8X1p8nLWR2yyjFRvqC/jssoCJBCDJOsZvoBfXqQSEKhNARH1YfueeKBslAwLi24/wAO1BHptlf1kQFNsOPlDvlYednrEp3a4SAz/G7LIVEsZBu0EKWZu/euB/XKdkGonP6t6lgEcCOw8mceuzvEVzyoPnMyzrqoNQXJb9C8ZCXSiedKiCgNwfNkpVlHbUgE2Rb9WFScOeEad+T+jT8XlSc8rcvkIuhAv/gxRu2eb2GonLTyokjcGF1EBpCJbhy2H3lhL0rdZIw1okA5pBg2oRfQceXTPzhuNKorTEF7t1UIgDqIo7/loxyTgbtKu29o9K9KujvCqUGyPY7upcfiZLNBVKh5uXAAZjQjhlhBp0ukmO4Avxu4xAVhCtnsOIA/tAm94U3HEuSr3wq+ZLo8pyoC9EB/q3pOzQRyCTkozmJwo1Ln/2xEbtNnS2S0NUIS3yz3/mBIdxONHxqP9FW+uoGI1F415lI1nZwK0SoPA0+flaokBGEoXgZnO4GOExU7VOjdPns59ekmDxqNhEHeAF5i5N/3W2NC1XGFjTpqLrnCECiwVkOTrLtp2ehUIaejOG6+1336YQSKMSsL4zhUjw6SQKryVRz5Ldn3R5/r8AOi02RJkQXPdvPsl/FMg96E/cJmIFLmEDzr1Gkh9G3zisG4pqM/MV6XIz+CtDUh6hmJB97VzN8jaPSS90vgDjvnaNlKky2/zIhE9ObugwrftI+Oi2a4VVaB/Mwn3VmaWjsU9NOf2usbcN/GLQMjvfeU/YvyEERPKw1leXZWWk1HXzY3P9MUq6MZq1hkEgFzds51mv8mnp1i4pQprPwY0TId1szXwe5TG+R5mMD76nGPQr7/EhQWksjsgGs7Zy5QYvMcGV5tcXJR+6hlHFIAc/M6XjkKYtwm673Bi+K1tNO9i1YBePTur4I+gMsOK7f7980mcJXhgdWdhNzUN2JvFsvXq3zZRG2V30sJtJYxj0aUv1u4/ppVHi1iHnTY3gDHsrQS8YwMX5XwZ2gcFYYe2wd7ZO9swr0gb8zf/fXx8QWKPXcK1UdJk3760B/TMlpWLCbhkqVoSTsOqzgkmFmFteCCTGhNyvFhw1RrTIWzRxq8Tj5FirvKvtkp2GAVhnZ7vnr71pyI0rKwQbVxKZuqM7GAvn2mRBj5p8djlHUsh/r/eBECptpbbjP5nFyuN4mvQLZCaxeTkDUzd/kNGLIzBFv1CElQO+xmf7Dzt1f7GM1Bh+wLDCJZlhcVDXbtPuGssdEie3lZNiWcXMTjZtWAT5MCmpq6JCRuFSHZYGKcSFZ9kOYJfEqLIcWdzpTA+Hmu+ktgSUwXVSwkaa/aHdZXh7IOyrudCBalCZpgXGRNbhN2XpEY60DXXO1Ci5ayZSoxtG0WRCC50+XtgWz7qgX5MRA5S+jzXCYy7O7Nn0ljVxiBxQNCZKZMTqi6mPfy2LZx76uyRUXHjnpJJEimflHDUxyX7fFg7iJvSrsZMH6Uv2xbfQNx5eCbx3oKycUrBY22KPmgfg/w07CDVsw6tb5VxPg5/X38cQtXI47U7MAGGjO28II12T+PjaXHlstPtkUQNn0DKkCYis+kVAkA1wyAJgYKLGnKD3nlVCarYqCkNIZbiVwO2Ydjl7N6iOtvvbAfuq7VKZLo0jEdw1YdsRaHcuJQulgb51JyELzYBkP1hd03IDcZfPg5XmNvYQSOINsCSn3BuLtkCPZRalK7+S97zxvJHiJCZJM9XP785NZ8B8fqDe/Ot0BS3PH1ptErwxBtpgfOj4d/41nrSjJQf9bV1kfdBHJxYbHILxOsWkZvoP/Z4Sl0Yx3bDjTF96xf96+6uIoQ351Ce6DeTwTnkPr20YwATlnhskWIddUohklNITCq/07zkiEc3B58uiBG6d9YAc4h/7s44FN2RG1UuZWeojrOZIhElvDP4KqHcOYbqqS95o7ilQH5ONJfy+aYiB+sPpn35HfHG3duLpNvBjXc+Klf4IKrFHjeVty02xPTNnbdL4gtkqPqMLhSgR/fDXzxJbSScqewiF1wdVoJ/fGL/nGWZfVlDHOQKD+/i/mqwXqvNqxtZeRHwoe/bodk66B9soOnZp36gdzVMRRQsQiBFf+HXjRcrRf9FsGghw3+qoN0JeeMvDJrkSBPsESDai/uVOzn2Ohge+UVdi050fdWpsjP0D/QuTdYs6QyI9xnhU8WT2+KBKzoZ7Bq8fOdKPeLulUhJjT34/EOnUloqus8+pzqNh/UdUOhgTlrbkuTfsaIYDm87u/GNIl3N53uaU8bgaBjpz0jdu1f59K4KFDtwUUeEUoeYx6DEkWKHdi7dtHhQF44lbysk7PqERrsuAQu2D5tDMl7kFoGdI8r/s8rMytJzYBU40wqeFvTl0ZVLdOB6Ya9E/f8VPbGx5MdpYqYMLMyB0QxVdnoJ+tgAQVWfH+jtOHD3PsjuT8dOTSrupuvHWRHQoGI1Qj1Hc6k+Mg84FAZ/gzl3SEzuGWZKFwuo2D3EiG95D2Z1szTqAuFRmT1nEh20tkC4ysmXx6JtN0taK1iRR62s2uNW5rSAvMEJ8yotr3UhJe22brlQn8Gvcq1I0aODaHJucQKVe6SXyfcDWODMw8xf+2C7Zx5a4Qlh7pJs550DictL4OxcDXKvVmLgVWRwb3moxv4kcxzm89EERJXCl7X/BziBkGQWOHPGF+6K5NFJYOFVv4+NyFq+OPMaSWZKoydplufY+CYyL63T8MCMmwqLTmAE8h0prhi174wnx7DHZWYuRJSYZ63uz97AGOzyI3aebclnud77znbZetbWUripe+AadLQeZPtWsF+FNiaXCy/98km137lWewyc7Gamai1Hd3Ls+KMMVh0R3NKTQ08TIClDfMKwUGKy/7YZlJHU3uW60X0r74Afh02v5MJgVOYkjmors6GAaDU7yKHydfkXYd6nEjYc76xws1LDLWCNNKBtUHNyLseOyNDgmHiJ41lXvq638RzDGis8WIniOb/pbTs+HsQVGPi6mxG+CU+oflMR6/qx3pVP+GPgqa0U0lo8MVmI1cBgSnPGgrh+J+m9TVg8nivua0EQP7xai44ruC5gsAVOp9bLsDXfHQujo6IpBmpfbbU8PDavZpTuJtmflVQuOImnRQ5kKoQz2NBFjdiHH3cF9QLgDP5vz/W5trCy22Uk+TCjXjdbCCHB3rJhKYTwiyQUf8xu6yTKtIwrbw4tzFgXDODmWYEnnpDupk3b4AP3qz4AZ2En5wi6aZV287AgCF4vH8TlWLni1E5Hd93vLxSYLBWSuj3eXGFtWyWpBkIeKu+YsBh19VeakA8OePM0ILu6dYYl9DNIK3kU1ybH+A5xYhFI/EqSX3vtNs6V5eQgxYLvu0hYFjiG+n8JzqLQVROiVa8XNQDYJtDAetPFSuEtGI3B8rnbbrNo9TJn/z3lRYq0ecBIe7a03vLESwhKOm1bGTk2kPMv/Sh9wyCOmIore7JhSFT9HIjonBfi+gcdDLfFt7dpShJmW1gkcXmitWwm1cC480CraHm/or2MHphB9Q1bmt/SBXFqXJdcv5GTt3IS2fRgqThhInCjRkh7Dk1iS2vMBLSGtRPppb4FEu762JehUMQxxLQre365CKoJGvJwVde91XQ+bDp5ZsMu/QHmLgITmwGXSpQFQlQBajqquxlwIOe2cyfezaSHIoRNLcwjW+epnmAtmmWA9KU29v/cA2iuWbj9ZV7HR4anhHkjbxnzKPHnIZ7Mm5wAf2o/3xUhnfH++quS20TdhalHgNhusidPKWyKWV8ZjFLgb1fX2r7ifLyUtxuKHHIfCWXQJ/DKeU61vxmPT34MTi2Q9r7/sK1CYuHVqMBsgtfenn31bUzCoyPN89KiO5wHveqnk3uyHnJSUBVTQQ3NyRPmeRKTQvWEBZ4QWcSgMyZF0RQgvUXRcp6KflF056fwahSioP622TdcTVYi4cAwSZLWDvfjoKFLMowPQpzn6ogXHc93fFA5NZmnwslSuesOyNI1EE3RM8kzat6thkmpOiGmm69Yn8yNuxz1YuuPWekoybkee106T9WTPXo44ea9E5QH2Ig6FZn716DBa2FyXHG1B+YfnmhbEpANlOi61BoGO4+G3WMJDokJXj9GhNsFqdaLjA1pkhLP+/mGCZoYsxNI+A+sMvWyoj+PMWeR8koRz+r9pNVEWT70WhiAkNTrojdr0sBLwxIM7D4zT+cVy96ZE+ABi9CqkM9VK7iOfkJVp7AqCqQ9EZ9emn8rB8zfoQZUBrVd6YS2AqiTFt0nJ8HfPGmnBWf3Xi5CgyWoLAmHJp/AfTdHB0+Ns5DlhL6UJ+O/6xys+CWVKtL9S8fVHkpwZZMJn6jVtiUTtXjywmiVXw9a6f/G7Qd4tZtcoS3aytxXYA9aGGmEeBobjiammhUaMDicH3nlOkDvvz19NqWOvHC2SMv7OQHtDIykYerPuoLz6SQNOBtw6oX2Sj3ZLITBDcWNx9CuZYYVaE+vleXnATrwn+PnuQ34jL52tp85aIOk684SUlQ8uyO2t+eIOHndZ3oxD+BcMAba/JVxRYUAUZoEw3D80WWOz0/ul+fYbhFnffx3PgOy2LLiu82D5FMSpi+Pd4EkIFTgfv7p/0vnX1wp0VpNzyXs/5S/4z0RFS21vIF67k1ERTfFuhLM/8fdbKognohMqTNF/+oqvXXLuJB7IHeDdn1X2eParLBEpz8y9CAN2g5VdE7EimekAOhkw+tTzqeEsgyQL4iVDnWrP/RcBd6CDm16/5t+I1SAxCn9wo8knzmpg8DYP8V/vHw8Stu7cliAt+G/VR4XPNZXWF2rZBeQO75os2jFJrbtkfhN9BzHT4HGgXTjyTy8NGsiQdeOw12GjYKCyxP+34kRHZqYsn0pFvVubB0+/emKRgiGXNRWQwMSvAB1xvTprD0Zyt08BjP/4W9HGNfNBcA0Qb9qF5hdQ4dDqpKAFLoIW2gFEVKOganw3M9/4WP9ckP0/g6kaJDRurtxNgT+PjvWYEWlFa80wKYCkd/0ZChV94njjGyg0t98Pz3AL2AFAhvRRiJwdfRcQqqhWkv/o6X45d5w1YLJOye3v7rgta7Ya0jAl/an42ng5Wz4S5we7n2+1W94JnpoGyV8WW2HYjKLkKmp4hBKlNtb5y4W1MrsG/wfq2N5Xrz2kqhdPQL/YoxgCQd6Y2KNkADVu7TxugQRWVuNL0BUj3JRFyWNeCmB74Wsz54OPnbq0GFFxzSkoiJ3Rtq8yEJMKvOMMalFKH7YFHKjb2nwrKVfuUUuRtTfJDiBuaEHHoX+MUrM2bBaAsSdnY5PjqcMBn/wwojQxzt2MoOCC3OEArr09ghhsj2M0mue5ntQcmcC1R/sK3zfShGJuazS+mJUeKxk5u36CYj8+SJCq8ZEv7bNf1+BywGeDQoTDGq6Yh1xW3Suwo2O/ykazTPK/TdVOICyiwK8MuQpK+FX3mqSPzxfLwFJ/iYDjs0WgW2kqXYgm+gkNToB5+jYH83Xlt0cbtEmkkBaVGlHz61rVuWzrK1yjn5nYHKvKCrBPPRth3AKDQQB83fdrbgIeIfB3iHya5NPpEyxbzmtN5Dnk7GqrQ4uu4h3QSoHU+74zs31cWqIx4SZ2bwWLvIxUtR6gufZhNZoMcmSB5z1O9TKvHMORD+VmuiqzsyJKA1OaApB+b9x6u9FTvUkalgl0r7raV+wRqimc2D7B1z/OiSagdd5UME2igLGUcgPlMSX1VsKQp/9yDiYei87KTBA2NPCUmgaLwVdvQFFFxWp2vGCY/KCUvxt3FOu6xIgwS4Vybvbj6feUCkrQPpO/wPHJPhAobSj/aa5YrUvjHMcQkDZwfc9mvghrk/PIPvcJa5InhVBfjh3Xr9vIvA4ac+m+pywS/EqkSX55xgiyj0TB1EE0NT3W2CPFdVD88P72SpdFzHS/6XsmbGtM8JE/m8eojzd4PM1bNADliZ+XG/9hbcKg6PftVKyKKt/8Bz4lGsHyT0VKj2vDGp/qDGBajSHrqzmpEjW5LXsb5kTV6HgbMcnPW2dzQju9N1sI/gPVlgGmk0bHKOX2Ws1q4aPizhcM/XiJ5EZNUK6bZNUeFaUJVTvGxglRUY7vdnoVOe0Raho3huh1XDeTlHpk/2gBjjhUQXe8FN5A4zcRqkNtKpSVq0xyw9j3yQlQxq/Lnqklpz8lXmzHkz8sX9HJjHwyn8UAjblvN0ZFIk4liejx0lVACoKvpsT9+pQoLY4weMHRzcuVC60DUFkaqLfclS4UJti5WK4FE3dYcc0OilX50uscLJomlR6pXriD6ELNNBWOSMt50CJjPkyt3Zn/xj1dlPVP1t6XExK+b3jMoULLPOrEGvjELfAMM1qcuBb0AijkIuFca8f8xapUlkvLjmmJW7RK94r8HaPzvmHHSqX9MXdivNI4A+JHy0VCe79UZZJvzMGzpnsj+Q6k3EItDBiA12fTMlSbEOMAWCdQq9TtyUiAaAqJozMzryEg0k+yVHqCc/DyJcCE2V4WXIhEnsOc5c8f4ChWfUaONhPPWogpDs/lyVCvp3m0NSfrAJKNiVy5aNC9gZ6c9BqwYgj/cDO3kdam6gCjhR+akALFYmt4ixHkWxKhDTGs5K+CwRiKJnvxP9dbxRPCBHbiVa8gsd2GuiNHZD98MNwXMdMC0MubVodd7dnyk3UQFfCIIL1osPxY0ZJ6DvZXwtZ2I0th6aqlTMULVo+lhSIU/5qO63lTSa3MgPRJEOi0AJ8/UlZuvgqLw9dyEDQoHTKWOsq+6fzoAyvIpv14fLaY+braPd6NkSaq0RClMenK1QLH87NZriUaeuCo6SZ7/CfUt2K6VOt0AjIK2jR0vorf6R8+TVzxZb+QdLimH9pU5tQc73xW93QRPMGy/gCK+R+YzmV4fHK52GWBEBL05EEoTY6OYG1WWji66dWnVTg0uPNw839p/yjLxkCfdTaH+v6hVUCd6HlROj6W8Mil6AYGC7NI2+qkZvJh/dAw/iQspXQNwwWHr6slLIp0hBHYTDh/J7Ba7ZR6cp3iU4bSXdmzhTahYDev4yKiIHyN64EANhI5OHYv1G4KXfIOvQizYWchPhzQg5eVGNMxsqrvWVxjtIbkKuHzE+IcA2NZ83GKz0D8z5zmgRnoJGKigseP9TmMS7BgAqtqyixA/SLc1KEUWrhXOQ6kA5ZQRazp3wwSa404cppBnfsS8EsEpbr/gXyW36cZ9pt1RhzyxGxDUmnZeBz/Uf1AP+gyLIg9x04u1fThm2w/H1ZXGvVqsO1VqutV5gUhFkdkwoCjzz3F3FUr1v0njGYT2mSZYvoF/fSd1W11c5VIhkEO06US5wYRmHVPYXmZnbK5YHQ8pkIDJ0yqssqFK34CuHE8RWb+Dr4omk779QOOcYomAMYQ9ILt2KUk2uNlahW/IjGtenuGLxb/t3aFoVz4oNwMZ7iyp4td8mdzgJAfnCcYtklubGAUB9k6bGC5DSkf5VFarnGEBWz600VGR8QywZ+jIYFZbtKT2QdDOYP6k7D8qVgEZByGmRedZRWaQDTggLyNgDD6pQwEeSs82+hTxWypqwU3zuAWqfwil+mytzVnKztyvMFJyJwPFaPr4Z3mTjyxCR2Jv674JVGGMUSWb0l+GtcYtd+NBGChwr8mB2hlyccget9liJhQEb0XgXfgVRlHlbO+jlZ9CcAew0Nw+tRcWgNnz/GL9Kur7RohRhaYZBBmQA6JhvzkazHRcdZDn0zDkfBmYP1PfQjP3d6qqx6gE7vrb3lBKEfK3Y/nCe4COdpr23oZCoIpssGXmqE8CGpO2bEwkSN6uqeqR4UtWR+xsgOzNeR49PTLJpFEAkXha5YaecJ8t/KR+eG7/HKV23zPZAMvHDC1rdxQ0l+6wlIgZbUybjBe6yusL7isRuuYYwg4+8+4lia2ox8RCdvmXlt00ZshBnAIfLkSwIqUzCcsD/d1ZG6Az728L4FCIqBKpbA6bzkJ87lYQpbaHpwPpqu3S0UqNDCwgg3q9MEn02X16E4xibz/rLx7NMDtHcwMOt9r1dVU6Hws9TvJVH7THrnSFESgN5eBy53Nq2Fdb8mySTxz5CitvVE+ZjHaYS3hq9Bax+uS7TxMIT4qJE7HGdsHM1/9uPNBylhP04Lck39JMe8v2dPOSJzyQoy8m/8Fc6h+X+5/mBVA9jAsG4vmx/KdUW+NXxgRt//SS2Ib7aGILsjOz+ZZQu/NMeuAsP1pFRTN90rqIVULbJ20ZJlrjoZD1VxHEoDFFGVWCVOT3jGK+vFD06gc3yDUSnZ7ZHjGmw4ZiAglY2nm78aUpXxI4BfUHqL6YQKFDCazUIryLi53RczlaTh0ry7WN4WpWK9sPJ0J49fu6RGUMYZd3+NrRvEdOrS5n+EJOTkr4lNzo8vawcYnR/n1Dq0rCHu5o2BGBEHABJbsFLi/mlWFO1MjpvUu6UPJjXlXse6MtBROT/mQfyegWGmFRQ7Q/O+rJp471+tQF10+bvkExfBoTQrewd5UwhAUODpyeW+aK6vx2AroUo2bGBZ/ZjcsJFfMYEMsm47LdQSq7T7peI2Ex+4/9oIAJGfhidbXA9UYPNhxigFTg83CETNYfYVkoambj3vv4MZNtE/wrIfTguBNqkQk9ebLPTmY2U4UCzbYqPKO5vjaZXeVksobDAJzhVjoU7p9TdFmNMyLyCQJryBSOcm0hFk/pcwcV15KZ/+IIqeQGPkTbiY1haWSnuQYBeyW5uSPHGtYw28cQS/v3rToNAUGVBSQ6zpBt4CHvaOfEJhuDJYZCcxvPeOStdCzaoSQn9nDe8wDc1MXrJ0+9N9TAKcS6u8ANLCLY4UfHLGf884/LFIn4OLOlRcNl7FS1IJgu1/vLm4INkgHt5ISp2vC3MFJHz1zJnopnKS1AgJtCmhJRZDaW6wis8CJ0KAJW0Yy0+kWI3lJ9N8yqJht68FMNVgkgaAGi5LuKmkZWm+ztKvf9gT8hJrXZkM/QdHI6wy9BqVeWa7g7ZM1YLbUv37YSnLmGsCrl/UVi/tG+fZbzY4bGye0zH08VQpGmyd/v++fS9EtasmbkQEIYnmLZLxO+tNHp3myIGwYBZVXjlWvrCiQcsP/Fu9l0HWmLBu3gvuJ4phtJsXXllJdM8iZIQR8Z6zEMs+cqVL7+TYhxDd0c0l4sbyIEw6N+V0v3ZbUlidyekdcz/aIomGdZtmdI+1QUrrHw7eDXT+G3zbTZMXxpEgJc4zY5bH5az8eHzwoo8QUleUKpVRrsErGmSF6GPJ2OltKYL6/C4zx4rHdcfsrQTcWBmrBWMMiFiU4NGtpYeACqYafRyu8j8x7ltp3nxVbsPO0MSoaR8tv61/q+YCqHX3h4vy4HzjCYEl+4ZDtj2+mawuj4J0rBpcDw+spzuCQ2khFbks09lPGxK8HYJl0Y/lNLUxGLZ+2h6+EFSaD22bYzF7dk/EhCWh6u/v1HUVKC/r/Wl6JHtd1V68J9zdOTgbvJuQug4r4vUV3JJolQQ5tecHKqcNoYjOIs6BZTlfB+yHGfGdxTKsGxbU/4taKuH8Qpd/M7fIG5zebrpiDHV97T4jiUNt7K64/u1e/+erXV34aOjfddcKNO76EzIf1pfD+KivBsRlzlsjj17aDPq/lnKHQCLsD+3TK021HNzhZyuwpLRKS3KE0XH/0TqUOr3VqLMcsSZM6349QJDznPG+sUqeS6wwMWp28TAoDKdmjzW6f+2au71HsOzLIeWencRa5JapKkVTYpvwMIC8u2L+/hYGJmk0588rq6Nnqe041NMzU6lj1K5KmSj0ZRiVpzu2FSTl4PBYHAuhe5dtwnRQwvvNqIELVxKMFWedxxB7UO4zpYRe2x0zH4X6pI2m4g6YdCs08vR9B7omy/goQUYbUZA+wJamq7/c0FhkNm74Mp05NSCK1Dcy1+9qp82p8XVkUB4+SsVRJ/Tqtn8v2esmemr7zjCfjLicMb05JqNoL6zzz0KaYkXeStBrF9+T7EbZTo2Fa/wS5NhJvRoZc8QUfS46HX8HIZ8A6LK8zKtROnakAnEEFoonVlvYR71xYuBAXbjtxfu/bteN8WkArB3//qp+3btpi2SIMyK6rX03iCLnzOd2OrPnD6xqgVT35e6NUMpN7EJSz0DRRzyze1J+Dx3cfx0M577W84qifD51mZG8VNbBf+5PxmGGrGOmkO+Q41YnCkx51D+X3CXsNAjaz/XfcPJUXJ00vaQyfYDtmFq4kU1ZHdnep48T4IskzPsYT9or3rd/ubiYLqeBqjnGbuNWb9ZdPDxkeBmJwYTjsTU+VugQmtz5+C3QBX0piVh3d7BK+Hk4mO3q8qJVQXeIqs4hKuRvBfIwwUyKg9W1x8dv+EwESuk2Bgs1+Zc3wzx4eGasynWs3V360wH3fKXZFTckeHZdgtzTqcQPC2hCHhSXyFMyljvrneLE+c+b/YQ0XcDBam1oAPzvKmmcgER6AqnyC32Ic4HMP4FQN2rh4Y2ntrawByV+9oq/Z8hdwQEPYRYiELBCnuGGXDQbl3ZLuUo0vfKU/AuMwYfNXmNM2vkn/GRrpc5WDP+MEL80tbJDZfDNBRfpfcvVpf75u0LrkIIjnU4adaolZWzB2yjIVwNrF7zF//n4N5xHeaGc7Vh1EYRdc0h2l23qFvLBNQ5kHbmX8Yta2Vj4DU6eBN3XyJBvJf9iL4x+hw1hx/7Ej5U8EZr/Qhgoni5r9PxBfU3fdvXICGW9DzST7GV141bvyMDXblFG5PizNjJUVAWNSxIAStz6+eDAbkYeAKTj6DIR6ysFvZAloBLCgSdMFd3ol/WXDQh3BbBtLqO9hp08BfumZjLpTJGRAIHzDizXZfhbgqejNSS27BIXQLV0muwzgXGqYt9McSvtLWo1Fos3k6Nu2qGyFftqQyDz0/bmgvtZyiFce/SLYnjt2Q9BnlmUVBWOtbDPvUgOSizvJDhdiSkbLLP96MJ7dKO3eUK2nZnpb4s4b2XGF4T6gC4qo9TDv9z2SY4Rffb/RjPs76P0YiWADpPB/nQjC2tDRlxt4sdNCIjmMsLgU+cr8cpyaMSYI9maP4HHww2jTPkGKvF6H6+DFAF+jAZKT9oi23gpZ2zavE0xXPkF7a2FTNJ3bwxvsJV+o0fXZAkmouYq6B2+6ccHhnUIeL10QtZaPoZPJB7/Xry/2Nv+JJFmQ/p2NSiO5bYGA8ej1vh5QlWhaX3JMs5gMBnyyIfXIMf4im0WEUnCPAJzq9q04Tmxzy7nGKKEf31kAp6IFk95aj0AogL7iljLVJlOXNvV7BwZn4dKfuZweSEZBqy+Mvual0TVDHiwHuIuXbvaw+OkU7aeAfck0Hc6H0jgt9g6Rxb6dAuaiKEN1cUYtD88y0b9Arq1q6ML9B20/FunTnZNF+IHgsg641FfllDFpQ+dqrIPKQ8IkLx/2ppx0ivQSrehNaf5dwtBjnPHroRGzG/RWOdiW0COPzepxIqcsWjhfmBXSUD7YCvPm/qTGcSnhcriFKew6a5s0AgK03I1gEifX6y90cJBY9REbQ7yW/XB+zAXN1XZQVEs7r+0ajtx8KvVBKJksKj5YFGdhEennMbwgCJJIMdt/pJD6FIcNVegt2LiQS70DAJeiNNG86dQVNYNZmYEfo8oa002xKLh1+rHlBX40iY8Wlv7FqswQFktpyLn5oSdo1jBRz8V3aRIOmhSnrs2wxGwGBEVEXvRm8RZVvSQ0xlKMVWs9Y7nnmJ9jEVuDL08D2ES3plzvCNP3FpKQeSknFeVBXv5T1Yk0/X5vdj1J1LYa6Ffxxrv90ObLHARkCI+tz6+0i5cZTinvgIYLMVnV/OL+m4RCsTy/+9VQPsYv6X2qSSlVdQ3KM1SOntMNUBpb4C0MsDh10xHQ0cbJK0gsR6X93ru63BDYbRZmPISt1casVwVVE7+u3l55XJGJ0Ev6S+2zpNqOAH66RuzpVskXE6X8x6wHOfp5PAI/7YG3Zozh1U27IXGEEKIm13Rt/nTE3pKWA7i1NFdVQKQ0CNdqEsBkjiuM41dd5rIbR4DMnoDva07v1esxYBGU4JWJUJQyejYbI9p7pqjrpHZUNlz2exX1lTAks+WxY6CExoPlSlNNv6AIsE0VdPmHOj4m0a8bigDelTpIL1WoePLhblmhRlkPDKiZvkzz6eG8vLeJjCGJL1+VFa4QREBVyuhcpZm1ygJm9kuQ+8v4yEMw0VO+TKee6sMFRVc/kS4IirJupnw48LoR2aRk+GuDBZ25xnKFxdSYqZqvWlEcemsbzl7wvQg5z2xKxEUsquyGziyzd/X+XFl/ct9KRLzyyb6ComIL8Wam9x6LPNZXvhO0QQZmQ8T2MFjmRJ42WyRzfyLGkJKft94uO0Yy6Fflo3AoIEon3XBygpi3Je932ToU5EKoikvqkeLFACpsBN5dseemiMdHxOJKrVJDdTS0qCcTzPCyz506oyENFdelskwdghmUnWyXK2WeJX2CBXudNUBON/i8kMdtJm52REvmGqVmxe5aricuTCGLbgZtYvigT++E7xltEh/ZgUoMP+d8vaPU/HdhZaUjsgQ8OoqZeezvNR2JFm2on+IliVyYQ/58LmZ2stgKoBbs4SllwiTpNRw7ecL2WR8bbg05aTN00C8aGWtReWSsYsirJ0K0I97flI2gJRRN717wESryWahXUAFZAdyD08j9SIZQm+wq5GkoUkK5cQ3wk1x01x4fKLPgPIj6D6lZiylqvWGtl6KxCfoSQXlNZIHeDsrIRqhINxdrCinM0iMMkveNxhqrEzhnBn8F6nXVY5zUDLzOXpp338I2HycFa2pueObEof3HQgFEMnHS3/CDKwJAyYl3HyA4X5vXUE8MMa79gYELseTf0IEUJRsfSa873vl6n29lFq+GCqF1I+mB5PSyLFvgHv6hG5Hd14PAHTKhY+xzCgOwwRZxygPwNET0UiO9ynH0p3j7GAFEs+VSjl4ArhHJbySohRLfm6B7FxxYJLJxJlQr5UdD+5Vs0nM6CehSZZNYw4FzcpYoL6nS+wGGSNKLVLXgbgvzAbT4B1J4GMS16IKMlo5S/dzM/NM4NI+a1Fuk4qwaewoHqGp78vgp+SkuhLyAVhI2Or50Id4LlHwRon9o7JT3D2pibchFvFi2VTEx6cLX/qorW2YGSSmnu9+M8teW9DIRH1TfabuDIuLk16NFz3kNr5QLPGAd0JzN2IYFA140yqfi9LfBcZI3aUK/Gt2bfMMk8eqttN8c92OmUYKUaHbB9C9cpEwaOYs49MztuGtI0VMqDDHN8HiRP55BpRIJtIWbSyi0/LOC94XhzqGVyuzaVaBfg0f++sV8wy7ytxlQYA9w1ejE0XaCkpM9zbOrymf4OrEaIyQX84Z9e6wQ1czIvOihnSaq/fcFdkxJcMzE2kWcARwWT1U80dW6B+v6HdclWMyMWLYr49iKWrhm7o1yumJKxVGiv1Rx3Tw61jrh+vuNjikpFRxa0F9G7ZWs57nuhaIeT8ZRjYzuyq4WZBEXs4CyfvmZxGcS4/G2aWon2O/UkjqrfdbBUF0yavSPdNJacaaZxFQNejGDPK7SCF82XxiahbNpwFs/t07gbCJkDUvvKjqaYv1SNJBa21RKsOuGJNKO/F6HTjc1Q5t8lqLL4e83gWTT4aubYGtE+D4e9zdPPo2R3dvG7bDrCQosp62YhTaV3B/kEQGqtzvu59fbgA6lFyGe7urhYr3TWCBFYBmrEpB78fWnXUEd1z0LSzMcWL6vuh4CJYR0tg1jX4H0wkw9mkbM07MXopLJ2Rt7/aL3Hl3MjO8h/1lqNlK74QTbgkurmgd23XflEcMhjO52Y/Wsz+CqwkBCDN8SUcd0hvJ6srikURdDKw75ZZMyms8NdzvzfsXreeCzpVaPKbkgWo0BlD+qWqaXziVa7YTSezNkCD1UBphMwE3IFwG3+Oja0AILbwR+VMjirrIkRPt+DMtp+OKLpkiE15AVv3jn19brZGZkhhAsuT2sTiWSjLvxJkMICAGdQY6CcJ1bmQsycrXCCxoxrME8B5k7aYQkl31h4kmnvmUA1Uo5bGEJkzebQNuMeVIRwKr7shM3Y3iowzuO8Jm833ALhjeDbR9i+ajGdiv5nuQcBDW0PZ0CB/GHvnmE702e3iEmWKin/StmkbfvsVh9mXnjLzZCRfht3g5Fu6OpDSsq1DSVUie4hNThGTSTWkOhTKbARv54Bxp1m/BqW0CfvfUJMQYci+HzQBrAw7lHJI8klNzq1wbwtxf0zzTFIpYQcsU3ddDWDMuciKmN+BHJ47B6FkgX4uR5QSWzLqgN2wQK1aLp2hgMJGqMII4rLK56VcDk89QQhw6cy8PCM19olNpuDwdrQFvP+77wiyyKx8Z4MVJNxV5vJWOwvF+aDouZMW5HNno5d960qcPPO89qYm6Zh6UO7MyFx272aWYtu/0+UZ6eThOP3s/uMGRarrYNGVN2bkl0VbM7ZArP2AnCQLuPoIbkry4nTS/RsIdFmPg98zeYI4R0RY41FQsBym1OXnJcHtmKPjfEXuujVQGfCPrCZsaT+vFbMFWIvUy7OxquIvdi2DVp3+q3E3NGG06d/cz77wgHGWrfcy5LJIzCMZHkk6m2QnZCXYVXwMsVhJI9nJcgG/CrU5lgDb/DlVEsXG06BHIuqVfnTyLdAQZYmJlEEk43pdgF69V12XC+sB9W5Tfm3jPwiHn/VmGszkYx+Er49CLbyk3hDBSKuzDj+nzCo77ZO40EIP4ZROdSwWlf5S8wfYcAzjNdj/aZ8uknw3tur126RfCzMA+cUo5mPaZL9cVp33X0mRTUIS2vgtwDRgsSSX5xcJUWR8gZbdeqyqQEEAeDu3+BMlrgYP2SH/le2u1yfVFn5JX9VQ04X9mmABR/KOd3rAYqR+OQwLWao9MXVS1y+0OKo0FlXuirKuPaY1BQbY3Vo05Gf/+N+u4rDcFBQqiCrYhgRAEjvVW9eNCaOsukcJWEaDuo/pWCYGJLadm4ssTCPvVVEJNBfVXAcTIxH4EFtWFMJUy5of50QNXNZBl+oRuFIkdbt04DeU6j2A3vzzP+IkMahLD6zBVJv+xRBIc5fODvnJMmJRMI8kcyMFqxpeWZAHxC68tGFNyl6yyGN95SwNYXwDSIQCPlL9bzjZaWNWvs5puiP2lbEBlDw5vCHtVmb/sD8QBgOhRassChwM5o5g4lhlD4u86wmdmVmhmEXnCyLeQJ0rRtqYIWRhg72ieDnqmPvOkDTWtKR38TeJwrK/7IRYfbNspygrU6yV9YtJyw3I3uEkDgbPrpcNUpISYvzv3beFg3ZN+swedqf3IVKkcdiAezu/KpHGHPyvX9oT6qzTS342/DenW9ctM197UfFl4rk21KxSma1KnLIWlGGasMF4+G3dxTnqBscul4CqNda6Qy8ita7HCzKlYa86yljm+HQA2B5ArJoZy4LNxeT9izFuQhEoEhUTNJQj2pCc/O44h8GpQX6XgpaAvAQJLVNq0yXGFbzb3O54XQ6sm557+lT3A+VWPyCJn1MLbsssHIdFhJcMtBFQYi0bS+exQ4Rq74xNE2CIRSzi3nj5TNy2AoO0gdyBC0/2iH67UB581jmM92OHqgD4EzAzyxDauPnlIdZu0nWwB4dtxWN+meq/faIuQpK2hoRP/ULwIJ9r3xyxtXxfFwJ3YquXldSEnxoPiYD85u0OAHvKOG6+3eBraUiOgvdfp1EjiroeSLLFutuPPV9XqhAReYPaRy87OAkV5tzSqvyfufCvOMTtkpxApWsJ9n+cNM2uBWu4lj1oDjGasCfCt6cfgCzh6UbZanbL/qCgf/iHjKYaavIiRLJrU2BuzdsP97XHkXLYbbfsHVTlXSohKOXOJ+3LiR6ix9UFLo9qieejYk+P4e5wC64jGQLSxJzYt3cErx1Rtc2+xlJaEBynLN4hLl/qOrgBM7a+yswC0Mh2OieA4SR6MfM9WK/FOWbVyoUBIUAKOhhIZp2LOgukk0/DInn7sF7dRP6Nw77MaAcYg6k0gdjQN9/1wtGVSBm+6LwkI+xfcK9l+JiWepXul+/EEdV7XXp/9lUsW4RQmIkda9H38FJj3EYJTrG4hEU9YWtNd2lKI1683cXFVzSMkh+2nuu9K0JUBoAnrYkKVZpAKF9G7y5n/KMZrP2xPuUFSOaruqriffSEX9Euj/k5dgewEyQCFTif83LhkIjt5qJ1LyI4ynIznWl1SoAdecEp+I5WmKBB2fr5yw33NX94q6HIP0jW3Np2E0r1f7fUjqdxV+iCRULU+yAwPXFvTL7HqfFLj+wCfIbOg+nsW03rGTf1haLvAZA/nC52pSDnC4f0qOiA6WtK20BldZUaA6GO3m5ZOCGyemGK4a12hM3BXnbladA/yTRV+pH7IiT/9WOijGGNXzV+K4wmdmRjU3It+QwUCRat2mGkEHhOcQY06pWeQqBGjHkWcceX8/drkk+tYysHMXVk8hLhLGjUVgivK1Ra4K+RtUcZO5fkVkWQ4W8fyo2tafhGEDSsflUH7yj8wsATBE9YpskR+r7Ac8xqdxtEAfRioGXSprjbLI2DAZZz9HAYR7rUHzvh/UPpFvrLbd/hFf7sF3RimWNpiGsQRZ11RqfZkck9IJu/FPU2DYr/HWUdskJHuLufXCvDbKn0F9sM31Hn3zIuAMTUc+tQsO9ll6jnNnW9Ulo7d32jEQMqJIrWQL5+Se0a8lKRp+XhYp4IfyUaTRC58vFEjKupeFEpU4EOp1AjeALc7vZV0ovza8QSl3ru6xFpY0/ckElMOChkhLWSDHLCKaFK/qC/SIfT50GJZnkCr5SgXZRddXq8Gc6XNjIzSdCF+9YlUFKMiri/sn1Gp/dEMhARah97GidLqitLNBlF+H8XoQmdrM3GXBSCN6izNn2ON0OzpCxOuM917OZCw2ZC0DSvNuTOFCGGYf1TYgUbgK2KKc4zm/25dz3GhVpFqs6x4yhZBbiy/6FD1vXW/aIcDiSUoIhwrUtxuGGZijb47Jz8JfUTblzx4eNPbXeYpygkQo1xXonjeouTuJvAH/zH+FK50zOLAtbN9AO6xjfX09CsjKitMVlHWmmQybLoBHBPkC5IbAZxvs3cH1VAcy2X90WL6y/0SXNsGeLBdr1OWVuYg+/wUNiR7QnP2ec7jNrZZOosT6Olwn02Dh6zSwKoDnMFLfk7lBO0p9mWjex7gEFXNfxFO19qmaoISUZEgdTuy7sHgrD/36o3XeFdzLFoFnOJa4yaENBXdTSmVZacz+5IGdVkEgjQt/TxuhNGHGtQuzNDfM4iNZ28Ly9S9WkUGMNAfDRLr4ipZkJxUA6HnlOi4Yb04/Ze8rB+HEXpDGC5Jpr4fN62LQh8o6kxknE1P5/rNmz43jehFlRUvCyNi3Y5St7lC7a2ogCt3Za6M7AshQdbVV2+R2DuuiLEJz0MLhnn/1/F2Z2U3h560PrnhR0Gc/5GW5DwO/DGrR/4PvL046BKjUp1lfrtKfE4osRTS9/oB0GrNW3cYgvhU8ld61sHhKOf4P94t4n7h9zdRXDaFv4ORPHokkY+NA9QA49RmsGMfJLu1/RXuluq0J4fsUUBoa9dL9T0yDJXvGtuoln8aYrNzoapa7E8cR73/wX6KwBPpwCUUlxsBtOj0rnca7zu5FqJC5W0U8Yt529SAI0S6nmWnS8zguQLRzf/gRLaqSQ6E9T6Q84u1cs56dzBMv2eBG+zAKw2V0x1NJX1gC8M2MYZpScdXEKPG1442UFWTEUlkM9OjbR4FurtJNV4IqEu1htlgltESO0SeZMHZ1JM7bNtYegevwPSCmW+S8uEGj7FTSSV0HbDg1rOnt4Ws8DxqN2T/HOXNd5NGboZ8VTSD6g6rLWcoWOwsyeG08GPG6KHPiLRunEdTPNmY74ObRGT1VCHP7nmBYmjnH+kqK6rDyrEoNjdqc8uG8yZrHWBXU9weqD5rpQ6S/annq7P/GiYepA2ZDdJA/GbdxpHYatPgkXt5sop564gVHZamW6cq/cdADaLCXWt1WgK7y11WaQR90YOen8BECQ56pmJbLvzzfWBhUUJP+dAEEK4o4wZv2+IBAFEdNkNF3mKntsLE5PDLA/IEiV0rziyORzLJsoxRMCQV/HlpCkXsaizcHT/vxU9iadf2hOkKehGum3973fFs7uRlqxz/oDerFL0617PqG+VYIxjeRb2IRLZJGH8vp8ITzF7U7HUg8Crs3WpVY5r8wxn8tzGvUUwY5csVu15Vmm1xcs0UL/lUCkrOXdLtlaa4pHLeQgpd/vu1ZzjMOcgzfQaIwiZK+fMZjRLAHUf83TSCOkovb3xPkD0jElmb4TBqFrwn8G4KWr+RM58qhCnlVimQ390m8YLz+fNHbBRDs7GJgHSK+v5Z9cwZq4glnR2eTjnqTy8Wo7BEg24CL/RT1AKzOIE7muo8oegzn8R6qab08LzTcbb0ippsScfjQoJhsr4jKG2pMVczpCYqptZcGD5rxTHFbL3+NDnEUptRMyARhF2FMiM7pgaB/IpAna1AHa5EPt7oBdzMGg7kOdSOpxrPXbdP3l/+QCfCLMpCsxFd3VAxA/IPVvK8JaenCYCadhyZ6rJeGxTUh11+OOAjrXIJxb/EbIy8rv6h7hywPp9ZhPCcgt9BN808JhGIaKwtL85jO5nipQyAF690xJ9A2DMuCx55TSG88fN6rqBMYDI+I+DtFmoAqJB27B/xxN9xMLnQwLcLCHOx4GIFCq3/6i7gwJePjoG/HKNb0XjhuEQmYFzTgtt/uIo1bBX4C+y1jrb+R0mRj+RyaDkRus8W4WW73qbcjpjIh2tGUY6KJyhEaKiK+LHG5euQeYZO4zXoKbZOWiJTvJNNVrWugpXkIIIE4zK/g4JKATQjtaC1qbJ6khaJHxOTS2goU5zGyjmaPKvVPrBh27E7E2iZ/6omwpBARV/9EKeU1m4Msz8Q7y3MzEF0C8VIIqAxB+Fk8qG970lhV/ZIX6CsxiHqybemqil3Qv/cWKm96fPoMJWSA1dcF03dSwSyNMdvKKBCYVYLuqr2pISKPaNRJJw2R43RNE6avh/TNA1tGJ/ilW/e4LbOvIh7cS2OsbjyXcD6WS0DYaDa+og0lSxehZQiDSt2fVdtF+DO7/cEUAM3uju47Fl17rUPkRPaheA+6/jpSYK5Nh6rSwO8Pbi1y4/L0L5SStva0NcscpH0pw/3Y9+Eqw1SDVvRn2r2d8vRC6YhQywdhKWraKGBMILqjiU2l5d3jb1tnQIwi95QiTJW7MAjJD4Plr9FGRGlM4NQyAiG8wSAKUbRCpmxE+zk9YhXjiC/Rbt983pV0VzovJW+90dH65IOb2VS+Wk+MpsRgZ86uEuxeGPyB++07HlAwqFjq0sm5Lvom/rcHSaLduJrDdabujYJRWbbY2QZptvGwTHAiaqsAafE9NQa2oq6hV8+E2YRbdEcrirxyx9JVWpti7CsFfA/egMevH0MR40/X1jQzMYbw6mr01MI833RiE3EuU79cpspC8tuN6QxFB7ExHF8yrFQ4vRniEkTgKc8kT2tC2HgNJJ+l/FwYXky6qbHj1cMtBGVOw3SFMHn5l5odYVrLqhL6R4DujKq/CEsEj742QjUogvrSb9DOh1Mm5Z7n6MI+YHii3bWp2abi25FJIiX3GM/137MQVr4wwQ5IQETnYx0CoXX1nLeqLjQ2VlOulhy58iVxN5d0Q2TEV6MPr+wA6lluGEC5890db42elDUvTbbMcjHGrT7WA4eEhNLqVT35NhLruSPkwg1UCAUz94Dj23i6dqS1MPh40Oyi0W+wfoWYXIw+siweU3qKdQM/IWLUwDjgMQuiK+CTyRgR/Cg+XmfazCLiF1JChK7C2x+ROCl4t2WjYngGRxBWRQqqrNqx1EesLx8Z8GOimBJK3Ip3O0TWp1z6fhibUBvCtBpCBH7Wz0MrsYEtW/6gd/rLbB2IcMxOrxgW5u+/ZBOjd+9Zg9SRf7ln5tqXgM7wZE2rj4u7BOezWvuyca2TpJkQOR8U/bR+LRjmN6RAS7MCfYSPtJWSbZYnQL8vGmJb39SyiYiER2Via1nlShjJEe3JgCwTOTiIQJ5h+NQeEs7qWkpIDJiQHb7VwcR7T1gLGhKAqUT5DPO5zvGPny/DOh+Lo+Xhxf5wTkF5p5yY0vM1gw2UZQ2nhCedQ+PBxACaAeuBYTyBs9aNWvYATPBLUtXJ3H/+rMIUQ3Xz5MJKdV6OhLEEK73rb9hfjPlA0gKO4j120U6VHh4AJvL3WqjaY/KCbwpCzUCADZmnJdpD4p4U5ry6/YuhcWXcVV4dFm5J8qADBWw9jPITjUtkf0lhIJkzhXLTcXQBZaaunvCCxyWh6ifYzNTTCGJcUD6DyfGam2zj4qdBy7DwBaL2S2IxicF7F2ubPDvx0+DEQVydAIF4Utn+/niyxDQpGlaaG5eRQcfYEHaZeHBOfZ8x6KnSsZnB8YZbLVBcEF3Mv/87cj4r/BYDYAaUWrrm/rWPImSVpvPlB3xQvVG305B+bCj4kIW4ZWzFnX7/nApDibPZxncAV04laDsD872g54z55DZylkUKHXF7Y5iFwsc0HDovYpJ1P+XIAb4pKZnw/e2BrTZn6jCeAAvAt6Z8EdXqS/KoRwK37xhZL7w17n2PYpqnoCtRAvnU/CocUq+el+PFEwM2GkhLBAJXvVbqxBMfPWlA8XMNY1+dfsV9Uy0C+WgSzcXw/ylN23DlELK9DPZ1nzFCvyDWygh1ABv0LXhuVuDEraYOrX0J/NpbYoxjl/mfncXN1DorfumMjOo/dWEk/OvdZ8w/66CtISpGM2htGRpT929qEz+kRM+2XpAqcSS9GOrLWVVUVIm3Ez/yIqAWm019Td/ytbE6eeYJaY+mJpelcp0h+4Y1hmcF9J6cZQEJi7foY8n1psVTCzE0QYMX+ScYxKxb/bU9eproUaSNTxHeNhomtba4y/CfLAZYXndn5ndeIjFIsRWRpwX3HwrIsKxRgd52tRs/iun5uy44w8u2wZgayiPbOTWGXUn/BDqak5EZebXbdQHyE0yEhUO5HcDnE6xlAuZFDSKLDTTZz9bWcfe1wy8KhSOwh15cBRibt+faUQgl7/5na6Nl5d1o7iUWTjOhjQa4z2Pha1PNGSn0hZFeICMKGtHJ6EGQbB+HF6+M2e8YSQjJ2cnG2SVpdzXlnkzxYqwXv0s0WM8nggSh7Viq5joXNiF3RJ0A9637p1HFJd2I7GrQ4ZTOWRi8jcZaL/25Pox9feMT7VDPV6TT++0Ri3a1aLS8IABZh2dWfxnBmXDWPdvrxmBiF3eePVqd2ZM5bI9YAN23/3qVLElDeD61xvgRdjkXkl2tqif3zsX1gGp9mzEm6suh1kWL75XC2kXlrCreiNi2pfI+iWVFJDXPd3MBNp7VSAZRp1jpt3ug1pQEM470lZXwotpDljklvGxuNeKwTuKNJw0EK74nc0d851QXL9P4pxZdM7pkmbA7IU2S2Xa/AJRP2VOz3Kyp9oW6FgoQi4noNkoHeNnprbQod8n+dQSSbMzNRZIuL/riHaxoOHkaGYwROCZwqcbK1tUnU2Qt1J+3UTvklj6wOD/d8lrZG7ucjZiCyHxK5XVtzq9lDJ4N1FvARCTUfnLeOLc5bmrtGvb8mmsr0lDDyR5607k41wzglZH1fExfmsXrEjiNLSzSKGb7FVusl07/BgeCclDsQkds2G654GVeUpX7UHaqQBEmJsIyvfxvz85+WyRaoYuQfSH9WpJLeUoXpUt7+Crnl1Jqz+eARyCmzL59OUUBwBuoQAl5VddIrfG6xvDA/RZBOV5AfwjOrJ2xRo4N42rCSFCcnOY7xfewl6tVLetiM2tGLqRLc9k/owyHriX1A9BnluzfDc5xdEUKyuwzWPG+tZGNDV0WLl1JyHPflzcBpj92G0AR0lGaMSZuKui5/LUMn69X9wPKc6FVkNEHEjHjQKPQjuFCokjN+N/6DlMscpE48IhHIa0Ghrc36GwGEiPRymXWKD/di92yfjZjDM3fdHBdwSxJRSBVKHSwh6Ey1/zWZRZ4kk+KMS8HuroIw1UPa+PDVpsSIKvmqZnZisbfHFWNW/dl9n5+wM4VIzhmrETz3k9WU3s+z84SHh2f7dGT/G5WvoisBYAgwm+pqFS0A8xyhy4PiKfgS+6TgnQD5hDEerpzgFSaMcw3yvDZ0+xfL0yznf0uY8N6APiqHdoJZOWqTPnTIbeBLc5dvFdh+mvD+sDtl8BAWzYR7QkSgnx30Ru7TH5a/g4byacurCNvG0lTgpkj9w42uqBp1zMsKr2riOCQwfCRKkuSX9CGADOYGqCHh1JUsk6RwvI9OvM9fCJoL7Sap8NUQ7mAvdB2ougA01NdqxVo8NeGta0R9C7QybiN4uAtDxw2zLTG9+0we68JkqZrj9tJilUV/f4wOLc83GfstXOVF2bAJ6zf56YworQQEDj6QnC+lqyMkGAr0QuAikm0jqS7fy9bYSBz5hekPILc94b8aUau3Kt69QI1kFEmcb19aFQA4bSegA9/hFi61RDIVQ7iOBqViYdGaK8d3zH5qWIjed0hR9e6o4zELdXWhOVOcPCmZIYYXvgUsAyGUoCszsCiTdwOaPEL2kRnYh0mNSZGb6/kr8XfbyUdbEZ7mDBYy0yTDxhkrpIoJmVutN6FHk/E4cTEolaGnv7x+QxQIKZus8IEygpdtBDxj+lC5M6HaJ313pLDYbjpCA+oYl11ISRJ/fB2oIdDBHFLefQmF1uHk7vtSmIyI7Q9HG0qxu8QRWecP8ipKR1o4bGrAhR2KcGEDE6k8r2F7N9lNUZCswXi/EXaOlPb9fdsaw1Sspku1xrmyADIImEs//XiPqI3Jl8BlrsHf1mAVCBmlqE7usMbDEpilt45ia5CXzVqlIZ95Fesu48LEATS3dyXVEjwQAqVbFBttbLfXvX4LhaGKv6P3XBsKWvqEFfq1rPYdohHtQH03ehlVMpZ/BRCBFV6dffGCrIa7OngRAbORd6wsIcR/gQSxhfrfHFmb9Ws3Pk/SikwIvAIYljNbXbvIpKTROSiPcmBDp4hxLkrjR+MfBFZLV5I4usLY6WYmjhT2kzW9XAxxLYCELLIf6lg6p/GFgpoRTm+yQ6PYtmKVvdTHyBxv28y3vTiy+reYBZqmC7x0TDasiMCcA+TxdKgDY4s61MpZyI1+RUzeMfx1qh9MBXg1tI/HSKpcUj7+qTrwp35J3ezefo6UZiEWMPBtx0/tJyaej7NUmUHVRBJfB1q0bsw4yHfui2ZOPNh/6R2/I0j09t9QGeRxpuJzB6DNbaPTOmER6WTXYEGXq7DhzkvCP247uSz6r7MfaasDs419fVF4RAt4XoxkFRmk3sjrhpNSeuDoG5RpjE4pI3rH/ESPaF6RIIJBiAbVU/ct/nKrDmBQPBYlNob0WmW07GhOvvz0m/BXTsPB8qA8Iesm6PsDuOLEEm5+jbniDFyXfndwIXHgWBB1GCyGV52MU+5iXguncQS8T+WyxaPDqCCXMjwPJxGObdF8mBkG2+SpqaBQkeN+1IL8Cbb72d3ySQUR/uO+N9v36KAiKVEPx8EERU0vfKi53JWN50+LSYqgHmF0UrnnHCNpcwfX8ezokGL4sK/rgFZlXnIqg6a8EJh7DfMOwMgTwRjjZ+TrXsj7SA6EaMRroFgxXRIOGDPYZgkadllrCosfuVZqNQwAY1cDJzuD4ocR7PgZYXbCA3g9Jd1PRx7PyRTNad56qFMVIv/9AYYd32opL/KQOuEa2LIoyMUHWsHVeJEgDnTAizkdfigKSmZVUDrztoGXA+B+9B+MYT2q5BETXJUKRLiEw3upTpXnlh7hkEk8/0D3rV1lUxxSlnDzLfFArxdnXRhBNu085RxiTwTISjItGPuj0MQknBfLTi9AeLTT9QUKRG7bxHm7P2Kei6fVAeNBP31q/OVsTuBJZfKaxLodsCxObxFdyJNLV2tAt+2SCAO5/VWcDOd7Or0wzbVGwbXJr73+/PYn3VfNQ4CSxdqgXNPWDqh9ZFVRQbSeb+bFmOpdkO7C70y6dTSHVuHlIY33/KV1QHDJ226atG4ltS4fk0ZNDrmPZ2Lps6qyMYO+Wkmsyw/ECuxfXcZ0zM7vmLjkk/LsX/XG0vaL3KZb2C51I5TVf8fBJmMxHHzKvaXDwSTGiya0f8ZZ3olqbqcd2cjXM0jicXlX0cJsaB81POyuItwEiYZwsHn4gymrnlD0mfAro2YoSC7KxDdL1DQVO+0a7fN1fLkv8ElaXx46Z8EGJ/W6akIr6uEuiFIQB9fHujgNzIzAgaDEYVITJJO5XQkyimdgaTBvra1hUbw4jb8imqVpd7G9dSoQVNPatqBlbm7NLsdI/einfpw6HdFlo9bpLb/wBxf2BGK/YWhn6LhzEvBuRuBZJTDv7HV9WfnA2SyT3HV/F6f+23aOYC8rxO7QQ1FI4/0m/OAHdCwYedzx6F6TIlSh668B+Id3ZxNP3V+Z82Tt/AHYSzDsxyYC8mxyk+Za4Q6u8y70AKpUm1NPP2WMeSHfqCc5mUcG67RR+sJWZg7P5iG4FPnFmWKv1nwwk+fM0IIA5p7xmHnj1zbj89sN0hc81tzI6enBjIyPd6P5GXzsmp9IRHKS506SAEK7IxfjQLxkNK1x+M8YAYLrD1qWXqo03kTvXgYllmtbguZX1FQGpXYjbZzgqSLxcXTKqQ/GhYqBJzZtvPaYGODBTozt0Rw6/vP+hTUJGOAYcEWWr5Mqy4792lLWmElkf2k2HiF5268DSkEL2oQl+VXl2NXgbfa8xxQoI7lpuNkURcA/pNz/go3LD+w41q4eQy20ecjCwekr0XfODump0XPUm2vvNfk4P/tAVA2PLhl21zoFOrSKjd6D1AiMtz/f41uWlBWCDDY4tDRMhyGsls4GW7P8b0/dGx6VTgC6oCCWxMyJyOgl5RPaFDE/EzGGGL9XUm5X9L3crn0DvEELm/Vx6HwlGWtnfZK7dA8/zJkr9b7PBgLeFlmXyfUBxZHF8kxgW5tcxvkEz0roS70jNLvk3QNCTUIwCHnqk5NRDEaewDCzjTR5lKzNzx1RHHJNiZZJ0lXrAsSM03iKPyYNdJfMwUAvRlKP49yIx7XS9cvseBWVvGNAc2I0PmR6Xc9KjqauqjgG/Q8i16OIPtQ2Ll3qDkunTNq2O65AEFG5qycHaB2/159N4n67iMEpyNowNdkq/ZlDxsX4dRKNvBUJaYqhID70qa2Rgq8+AzqTaJhuYrqrDDO1n/0rWggrBcFsYwo7ujJZblKGamFf+3B5MTAXNUOKn5PW91Gx56gtqTqz1dYMML1dFR/KZUZom7Wky7v9EfKnYbBseAvDuBFBFFCuXnhvWc/JS4ipUIe59Ls/kL+W5lteo1xt5bkJYfug17vGw6cqrOjTG4nQXZ+RbEDCMTf5JZ4DBcuVv+tGPyucc3B6R9NMF/lc4ubulrqcBPhRUjGBILbQ+4uBJ9eUHMAj2ijfMskRMLcV5FdgqIWhiEvxNVlZSRrzTzySfBUjZHCJQtbgDZ8nRWLwk6rQKWD5aSHuJh0vBgvlNTP+a4P7p59l0FYBPtoNpiFl/dOo05KHesQCueTxj7IB6io9sqTWxTu2PK2C3ACiXWNyxs52441hxg3eco87pSRV1NUvQeac35o3tgUpXtmtl2yHh3QO1mQ55wSqIri3PtVxJ57l0nOuyav/0ixzLEq3QlLZmLb8Y2JVlrdQMjhpcC1j0DS+VHrYIB4JgyXacVu9PCRoC5Y2+p8qfeJA3OFreaabxWxz5omyn/l55+ufQkO5e9iODCdLWl2crwLrUpaMCi8EUcVXGb3Z8oBCUdwuuohn1sivwQp1O+DaRFYXIbHQibdPfq4dU8WeiYJ4WKMlNEuQr/BRIGwOrAIM3Ppjmzvh27Lyx6xK14sUHgNy2ggNG57CBbXznFP/0NVrUQef5mMdso3AJ33SJxInqYebzcZ2pEVYHYczXE/+mcptBHb4ANtGohwQabL1xmFHav/wFH/al8TKjzGnYiFLEifJHL7OJD0x/rtzWuCrDToEWPBNtRKXFZqz/kBH6gsxzy/TUzP6R+C/A456FbGm8soK/uYyafgNmX0re6fgXeehUvtDCXdAUJElJt7AMv+VMdIrrOK7TAaHo6E8Khx1rq48yOqMqtC08so9cQh/AV760CiEtSm6PBL7JKCZBV4m7t8Gbbc4TQRawpuwTFyS/vt1JBnAQUBDPdEddlJlVAfbGy+OKkohOw9BB/JY9rDZQK1o/kpfl82umHijUnj0gVqhJCsrzUxYl+ygkRPDEPZqUIo/+AtsGplmBSxL8bUE1iBc8lCtShF2iqMC1DdHIH1DcucbSNtxOF9LY4IMng4T9eTYzDr+gnOPVxWBYMambJUexTzxyvFOneFg3r4FBEHqG3QZRgnKISYUQKv9B23A8vhFRe8uNZpBtiMtXqOQlVEbO/HzkRbqVaGj4s2XRVlhO+ewkvEaTp4pNLXG1OVF6ncxf3Fq94KmGuG29LLsFI1fuX35J0TsRNGo+TCioyTrXLVEjPztNVQL1/q5tGSrMPhfJEaQxHcrnqhVVqN1gfF+JK9Pgcud/lGa+Ig7eKQpJuUN+PYhBYQ/b6ahi4nLNe5+d8rQlfK/gl3OQ3WDGWuUMOt1YlBKoX+99JWlZr6tTAVgDF0NSHs5fqbU0euO7cXKnvVB3taBFHP6/KKZCBfGqzNo6DgZgiAELh1EYOni64dmOWUuwAQCKu+L8tnTFLlL6uKkaNtO8YGlOBVU9mQFYx4aGPgGEI/HTycxYXBClfKbmSErtcsuhalOh73FnzRz/thPjvRJcRwPtZmCHs1nYjivLMWWGprl4fRUOlrCDiwNU+9TZuaVsuCxj/4DzKfcla139igH7Z+0uskWkEq/c0mrsRLlVpl8ln0G77hwK9rLKc+RLeI6KLKy3Um5C6Of3qiKNoY/7ad3EFvdP4VICsuTMTii/bee9efmKAiym0A+l3hS7SofuEJ46In7BEO+Kf597wnd6s5mL1d5zNRBdOEmfNKyPdUuCW3u/SfFQes7nYlfV/B1DOE9p/pmgK+bx+eZdZUMu44uBGlaPvej5wxU9aumiyt/uCCZ4PyO0OYfFAMMqTaYcI8GxYeHO/3tDJsJisLleLpS/gvPLbEksIm3R4OCJ21S4P//uyzQ4EJZyYmWZjtknKJbz0vFEi0zDWnZHl4kvpMSPlVI8cEAG5r0JoNN59joEsMhUcPZ1YtIDYX9cnR711x6SQEnBGgTz6d3b1iebIdotlgqE03w87xlD0+qEykcVizaOB3Z+ocaMGWybZTIdpR4niV9mDm65EzKK8VQq59iMlABk54A7zAlMdkYNmaRuWJN+bLJ7RqEZf8vrpM0+3cwD0NctuwJJA13JIJVFlPStNIXzAW4pp1OnTx3rMZQfF+o4p92WDkF2tx1MUdC14Er9l1RlYsEYnOubj2IotL4tkgKwnE219ZsjXb8PJFkzakaWhRBJAkgbR6myiYFsJgC/lellsN9g1ML0j4HX4rwIzHbq20FDkBdfqN9SUnIbJf0QQr+QxHx4f0kRekXaqKZYUXYMbRKa6OObLPOaKGft7xFAgT2pHuSw7kdfloER91zsJPWQJbkAzyDFkkgUg80kW7n7n+WBN3CMXA3lU6QR23Ipx/98577h2OGkpcp5YiTX/TikBkcza+iwBGNBi/j+GwW8tGbKxpiSNEQqUDdqfscbVMQ+OSYGoeQKSLwREfUGDjR/emc+ZAJsy3sraTZkpHFZAI69dwO1dvsOw/Q+O/2lgghmEsk6NKzmfI+OYuOG2UoagP9Le/y9UABk4VHk54+6fW891qe1yVDT2KUc5hNeePBaQwVb5BQYPt/+2xEpqsHC4GY37hXyRSGvfwYa7DGUDbMKd8vud28h67mpOl7fe4uFRe/HOKf3TFs+9RX+QpL0+C2b4R/8VfkUQOABt4tcaDV34nU/UFXBUDvPYMYe0F24AZPIWphY9bLwt+tWvmuWwhvAgPN1rxvo3hpXvQNSPsVKgFUKENrmSCjWPYCUoQfJFpepI6oqpsVwJt6IlBFGO4soABNOS2KtnF9P7E9sSLK1WWOdGvYNhxKO5/D5ACMSM3oLy6XvjzPe57hP26DKKsIbhLZqcz8tJOcm1zlVKV87cVqDh5iOgGkNIKp7JU8eBp4VRPvv6peu3DR+ROhro3GOnpo6Cdltkq395hUi+pDXzwcONA2YjC4BKvX3JGZi77wJboSzwwPelRCe5297Gau3hHdjkNfDMaoCdfo4BX1IthlFNEHUm2nTsuiPe/rOux7FSlxIwT09NqnvyBmWQYcleqlPEreuoCZRFvXL07v84AxlxNdJM/atDmCjpmzumIoYOf4uVqV/8ZnSwV78WW0S0R7AwI0EDq4B6IaI6AUBwPrNLY0eeSw24zQ6qVAgBGW5aK79Mg+Skj4XxdPl8axMl4x6nwmnAfEBIju1ssp4yr/gdi9kl+ScGW3r5NVqJ1fXRkW9O0A6JBottvWGypQioSH2C46bepNpt5dXRK28XY0hseEnW9fDBaUMHziavWy8Q7jttulrsjOd5WunqGz20rPiwX/3fdKuQgv0g4CDqGBMamo9htCyKqN0qTOxWP5MmZG0lur+eIMwtcrfYqJujT19J3dps8mrCySt1MRdmlNIykG8cIMszw/nMlRV1DmpxNn2zf3gflXm1sXSH00EqrICj29dnyNSbIteQOqjPLqBf2QDDVVCAgcCz7vER9m5X4XkTIeB4ppqaFa2UHE05QSkAhs7FkyPf40UFGlKG8GnrdKq0ZLUk9m5jleTBwhdDsYP8HCDKRE6LS48qLHD4pvSl3XFvmH8KBEmyeyNwwJzAJQd8MqhmKsdandB6Ec1bHOw8agmVGP/vvY2C60X8AnR2r2HhdkUbclW9+ozjmxmipA1AJIZnqxg4aa1Le0RHfU2vkpf68y/rFMYgCXue7eNqxoS0NkOw9a9/WcDFJOh0Grb8zYjPgaSDENIFMCM0H5OlIqq2r2FKGkaQSMzVm87r9L7fysa4xxVMD0h7CIExLBVbCe1/r/WavK3yPhHVe3XBjyVTDOqI4/90N/Cm5KnqxFrVYOHbwMIXa3GwNwVME+38OpXvNwD6l+jN8BDCRDEjGDFC+WObTdm+5/tfm0QeEfVUYFtA7gTobiCnl8rywroMyBHNClofz+W7OhssrGuos+fRhh8kBA+Ni0fYdhKK+qCZaY0LUDpn17UUKCX6dOZccCYzSsD2iSQP74pFnhlkOzACsapdT20zbjF6ZqLgELUPT8IglaX38zP6zfdyBF+NjNf247XNtmIz4QCO5iRy/GcS8jjaWMfTxI3EbUvzrprtgRQDOz/eMnyVQVbbFiTMZfhfQLeu+j6iY0Qs/QYGFdHefwzAYuVpPhVZK/tXsy6DAioLlmNDzAu1eQ5ihCnobO+MOZtSD0+uTpiOAvPwGWf52xDUHj4zbdFtZULPV4c1TmWflDGMkg/Ia6kPHprHErwFTGoBg+1D6oX8lSPdz5srAF0RbktUTmq44+USAYYowZQOVbM3BWMc603Oy9SQD3buNTgzJ7yaMBbo/pjkzVrpW5xYH0Ra11ykiz32vo4nBg9Zvm92KHWhJm7uQJV5DMPA1JHBWBMcjz/uZupwXqjoTffeHZ17N3waXUaR7cZDs94ewlhsbQrmI7/A4zJDUZj0qKiVQhn3f3AneEhDwl6GUdCBdKY14q9n6ay58twW2PRXXPJ6UE6TUs6oqH/0xgDpP3bx/mfcCUy5oo91agCPtpTfowGZ0tyw5mIOsUqvdURDhjuWLX/WIqaPlYx3zmJ3ahTcxtC5xQgKWrQskF57LaOvwYN0lzIwz/joNYkiZwLyB7Joi0CsWWRC6SapEN5TClIisNQtNPmfwKaKYb+Hguo76RtcQMXdRZWjEJNHq8KZKeg/uWWDOW6aygLP9JDrNNW7JfWDyHPR8GL+29zBAD5FY1WZXsmYfdKU1VTLLzAHERJJGTpwKZH5k0uZrDYM8zG9WX+RVDM8bsmN8cI2wKz0Td8GEq9T4DvY6FuhMsqPGHC1tkLdxuwBYP0Lu2RvjXaxodrZhKfkkIwGcfm+lFS4WMFPCz3FwWwuvNLNqv7c85xnk3aXWl49yCW0YTzTqwyKuKWSIFJum5G8BBjvxx2yDOZMh18M2WhRGX5VA0p3eAilBsGa54P+iEat2c0lLnTrXg7fzDLJrjO/213hRmT/92zHwHShntUiR+9KUWKWRcx9OrMWfefEo/p2FR7dbNWoP/P/se7JJUfBzJixcPvTzMvSTQrccDAmpwoLnh6pnsAF37U9Cakvwb0EZzywhYhfUyAZ4oAu4R1X55yrbJifKRbLIC6NaYqZxbpzV9ec4/SFSjJKEvmVGa9tHfUJayAvrPPbVHNaxlbdJOOn7f43GTTdGGufXu/daAhuYtol2y5rFVUxlDpyKCfYRz3fOyJZEjhxizetlF5kpK8kUuEpKNWnSG9VEdmcn7Tu0/U9Pho+IZiTincXepD9zQXGusmr6j19TKRCe4dmbGmRl1cDDNABYeOKT51fHc6+d1Q9T2n1UMmkd+aiSUgNIrogqtnInezaEs7HmtmpjKttWg7ulLhPvEEnGE5TqPY3iCItPzYojGET4V755b+cNmqdG6OBTlbYjDs4AAp+ho1Iq8R/eWa0/FOyB4K5JLQ/WqwpaNPuaoufHcJMEld4peiw/7uIRZ9U4otV2lACBY2PfSUUu7vJ/iZUtvPoJmd8K/BmbnNo2iumTtQxEeARnjsHdzf1JrE1L6NGFsI7t81c5GCgmWILKM5pWDA5HO53I6aju6916JkUl1YcYyk9Hwwf/waKzGbNaeXD2d1jBd+rriDyPgR5p32kxAb41vjMM5QjUrVztISMmbVDBnx2qArnLJ6ECRGZcfK4U6LCAMxRtE+Y32MobWIYqbeJLCsaF4pCXyZjPABVmN36NRAavX8RXO80JuF2m/Snmg2NL0dSW67EVH9I4fcFSjpL73r6ohLh/V+uK3786Tpz4u9p1byZEEFVjn4eK4wBNeQ7DGhdbFbRTt6/9b55EBMfJGakrqZ4U+Fgnh2uIpidUcG+iBjHE5HMRX2ZKkKLyYQElkw/Kbj2w8OvDaxd8rzWoSUnwkiP9DB4L1FBdrrf9anTqNfPehHTBlyG9cgcQLrR8tQEZN9zuxs8BV1Zf+cIk9kSStcCODphQCbZP7NYhgTuqPh967gyo6DhJVEeM/gq2arEo3NkVtX7D7mzM4zzsjwEazeZbygY6xwP5F5NLqPJ0Hxncni2XMn/GdHQmTbQF1zee4LOhZaDlBzMZLsKXcJ3sJsBmPODcSW/FKYiVgzz7wLdz0C3bFpTwedWpIZzG+H0kpS6hOFF5yNj/xUGHEQK75qxYUFuXq2vFITPVf7aaAWUF+eBV5VbBqFcUccHNaTmGaDdRTdXTurKJ8ATxX0DHWz2qNhGP4nrYJRCKI12hvvahdfR6RlR+zca42mjybVuHEEGrU2KvnHy9+mmlQDH4jYHZKC6knkne5Q28ldgrISAF0p2u8YVTy2bGLZqUkIV6zWDXi0DuZMiQhOJwUgZQNnrjzpboxif7CaCAFdxHukA5fPTubF6aLOTWCnS/EP8ZSOIyNGpkn86BVLEgxNoCo5XDdJHdnSB0Zy+5O4NQSsoKdZzikwg0eSvXAE6j6WW27irlXjNHHxiuOY/LaFsSgXv62JfK2/O09r1DMjpxv32Y457Wd8wFBf9V6i6CdLP2Z9qNFsxcP88S7N6b5FAkZAkO78T3f4mpUVnXed/QQC1AAudBr+gg118i202+jHf4m1tBvD2iwt/8PqoAWQSajReU2kDJ91lZ9cqfgKVbzge5mUlKDSh7aeClFOoVz9UEdTQyNyjj+u7JaX9DWyqtt6955fcvBJF1aKEjjPQjYV4+FQr9Fnd8NqWavBRL91OUcILzXVselzvLQtPmmvtdhkUNi8G+O+b/qcVyHvls9lJjRGbe0YWtuq9zXA02yIjtBjoQd1vY0EmEFvb3u3xiPt9Wix6NZ7ljWQVbw229SAPrh/hsIECHTLmxKxWD3/K6TUieQeqJIfpcIoOQcgmvHDyyRUevzKImeikRzg+ly1+qSicz7hh/DCm/39Fyk6M86XNkhcEgJKANNt1matUHBPuMmqkqR0Irsee0uIofjg8efSzC4Ml6OzAV1PuydANODV+SaVqKrg8qTvT2ROpiQHqoOAq3EdFRo1QW+1ak/AYmGEVA4cF99A82GRm5mLHhLHqOSqBVNF5d+tjFko2morW+bAtWqE3Mhi2uYPJEeL+puWOoJaLV9uHtQIj2GvjqEnPiF3gSNk2kq1rb+v31DDwcalu1nsmfE1n7J39uQgliDyyoBoudkZrUtnIUrDsC6iGs/DA1YU+EpC8VYQ4iw91D0O8kJIRK0Zo3YzUzYnm6vxq+9EDAP5SWf+Eyupwlhcyq7rgfu0UcsS/cyy18bZBvpooyg1q0GNkTJ+MwtXBtDoaChHEqMdF/a7GjUgboSb8jHDJrfqRhQ/bbI62r8nHoOa6UgOaJLxxg1EhXpXmkd3Rch7uNxgpPzxP/mBdrGsygnoth1z7Q/YLYJb7LwpuGREdhP+ef4imi3CBmJrq9pWR8/s43S4uxqNYHUv9ha9RBACBhuz+S4xTQTZaCKSoDHnxC8CxGhiHczvJUTlt4rrWQpu9+AvsrR2wMvwqpTTd2ETTsO/P3JJiLBUvcs0TXCPCRY2h9Nx8ZqMz8XSEqa9ByDLoNM8PxxK/62v/Wkztb9dlxfHsl4u4UjIZo5lD7knNDevOZvFRYHhwFE22lXrX+Sffrt3y9R1DKaG/GlAPLQQX/Hetzpmce0TT69U3cFZSUWj1hcJa25OoCXx3O5jXSizjPu68eF6JRu4ly0GPmihJAcdY54LAu+PeTtHdGWaRfb6RVp9zxwP+2PoTSQm+qFhD5LkhsYuT1IwWLIAUjU9P0z7IOUj2QP4sYABt2vX5hJCVUnjOBPVGQTmwyR8LSRc2WvhlmD4DMitovW8AmruHvsuxxMnY/ybXB0f6jgvY+7tMu0sJN5r4DBEBXa37SH5PepbiAlY5L6+09qF9dbg57qZdXr+Lkj+9ODwIdoY9Ogs9QXAMPBK9sNLNDM1mFaODMVpqeBBx3+/X8BkyPofOmxl+kYJsG1PP50FDBXj0A4uVUwSXOnyDvjHd5pupMiy5DyOMVDjPDi22YVTeKKPxtGz5/wLm/x/DzHO4PBKlriUyR2fdazZ8MZwZO2yzm40RwLqezNhsNT7aqhOqWBMfTbYcyVtVzrROKLQ/cw8h9MBYgLQZ5m7RtajLhjAmwWRubbOysVY9+MbTxulvSqQymjxTj0/yGmowXOk8LorLHbyciHZbi5Wipq5e028xOnXPq0SO1Ei/BmXFCr+iw4toQwld1d5KXZJaq1eDPduqLEuVRpKA9CzB7KJsTTpdrYpMaOsIFM7Wgr9Oh/caoRAohQN6A6HSrmbUuxffYlS4ymc4W40QYfauuqpQ/JTXe2l3gW1vBU3Q0CQWi+YnGMAlM7QCe806vIrrgQmejgYb3z21bFn0KNZj8qMbtk0fubcrDYYwmBhjZezZtAK7N3MQKKCODWwtmN/WYEGctudKJzRB3xrBGIXPbh2oyOsQ4psvw2packPl36ulG2AlW5rvS3xsDrZG0jPgcLNOBZVquBKudvtx5EyYnivmLREWPn30cbkfL4RsfTwuJVSFZZJFh6UkofGq/bkz/WqbPwyDk8xppCVNz7JQstijvxEWrb40THMQJebLnzyY2q2jx2SLecaR7/0b676f5ddR3aDQqQxzS6YlPvFcYbw+8vic5SAk75H9CSsEorQCVlJSk7DU5HBRkzDnV2QtTJe9fsfqy1sQNBXqUXzv+3HDVDSjlHNPKEmNGm5+zlEP/Pa0mLR8hxOG5PeuHfsO4YAaC+btxGwKVWC9Se7tv8fBJBx1n+Kox6GyPB1SVukkNQkjh9dl8s6dR8uwRo6Ep3zrpyoDHwNvpGU0zV5/27gpveUjCyrt2ZF4TOPsS/WygLkfE2dbNXsNDXjU0kggbh+REnbrOGVNbeYAoc4ZX0aRdyTYOFzlRKaGo4MoHLkMH9FMwYlY+jItBYVbIzsByLIUmu7xM7N3q4VtOAzdBtYpwYx/5yTIIJ9yh2VZWg/uPZimDRgASUeaIeF/TU+n3NBLOkQvsf4CKuJi9s4FqpE2p0HLaw6yIcFU8mcl8Jx6XPWv+eL9Uv+Eyr1QVYQfaJcVwJ6kjFn9GSZ3uvbIxaZMwi7x+nNLp60sgdzogotqc5oVT+LDsygUDk+S361me7L2BWYFkcDER/Rx+J0tgDZ6wwKRu7kFtxCpqtt19WgsF6LzpqmDlLORvOsY68JnuZgBdo7ozFmFR6uGXxbySNeCvPKl92vkVsYEYjZ70nSsNQz9WiIy0pcd4Cjnd16gHVj3X+IIr+ZH/gTnYy0JQvVtpoQKA3yqTH8ZK5WAWFLSXjNeHCwtYmaan6uJoOWW3ktmR0n9j0uxSEniCHfobcaa4adhh6U65iKCHer9DsvpoFJxkj5jhGLhPSjJ+hLddzatV/1Ocn1CE5uZoZAMtgkhUYN5zk9+VUjJxOTjDsX8kQFan+fCSw0rK8IhXNp3dynfHXSYCNq076Pn60lpsgbLC41pl75UNjAtdkXJ0OFBP9SOFxYd/qxoACmCf2c4BNjgll3P8P77ikGQPLbKe6Bprf5RR7SLTcoLj+WEriYD+XvlnCQ6gwN09MIkc6PH+xS8JfJD7iyBoSsLx/L/1AzaxG7e0eIP2dxroERhpC6jg8arrg7XQBksDHIJZIPRhy16WjWaucMUOLtxrgBU9rezETjoCtMnBYdaOAagkVHdueRkp+p0+SRoZ4ejQaCwhOiYRYYJC7NsV73oO8dwYLioC3qILoo9B/eMud5uERJdTB+L3gaZcXObntZ43fegezhpmSwHyw4dM10xfsXF1MY5XAR1XmGR9Qz8Yrc2BSBiUUf1wSye1tGQLKtmsheBI0zWEKzJu8/tdWQ84lcWgnXo9INPwDU5XiJi0OyBQbwRH1ahR14L10g9kAYWlDK/0N3VzcgYYursjTtw/2wSHmfTGJsx5NOXmMmVliBLLHGu6G0jFBLZtUkH7EzFzorhlKhKRrLqXXlXpO8crQ3CHEcZLu9XzwCc9SvkPe94gxwonijdizLHtGfLLKLF1cdtXMFa7Mf4P/JQHiBZIRXBzCKoqPaIuvh7X4/SQdEJnxbsIECUF90ZnrLUpBjTXiX4XAc3Mse7eTXKyZp8Q3Sf1S3esZyDQl+BBER4PmbGOeQ+K1112FbEeyqQZg56WiQ0jRCUmP+Kew9A1ZxSjutLVOfkpuBwoSkP4RGNoe7WrmyTXKI6nk1Tnz0oe2Vm3PjBDf8Gwhe+fwAYSAjlPra1TtCj1uu1GcdIAm6ViQn9Srqf1ym9fPIxInLxt48mCIl6DSTi4ZJ+XkJrz2dXWQqhpSF4nNWapdIjJH+p1Opedufkw0xHlr4vORb9BCJ3W8vAPdZSqI7VxbNaaOfqhI/8w7L9horVKv7MLnEr2l2XgUM6+i5Ix58xgRlYVxa+ltEdaupD5yktPEOlldMIatEHTM9j7h7hxVvQPEbtQP6BmDdVaPz2u/o7+Aiy4lsXGE+Km2ss6828uqY4y28croxcwQBaemP2+4hEA88WmmXnQTmIMFje/i5qVzP/dynhApy5GEB55hU7+jPdveexxyrULupZB1hjyqISvKscuKXOXZUnp8dPLlTkOIlOhMu9t4Vx5PLPIDK0SdUiZ95AlS0+/1macnq6hXYYejgXigt9NePxN2PY9CC0HftH0q8httvBeLZ48ootbmSIZgK7/Wm1zqq/lUDZBL6CYC5KDyLg/WfRKIQMNyN2X432uLr/f/9AoV132hvDNWvIbdgJKmzFwnqjd8+MjwrCINW480Y/0ve7EpvtXHg4WzJv5MuILg89gjdMk86QRO9Q/YKdmb+HV6eMqRTq/oudO/E6zvH3NzGgHNz/zI4Clc1kXUMDTrnDpBI2KbWe//7iI6d1A8nhX4F+4tGki7hfsA4VOK83fdLmcdAGqQRjtItVXa3J7vhE+x0h3K+fVJpM2FZDdY7gVF9ME1rtQmyQOE+F7b6vQAUregqMnIegpxtIKRhyTvfx+DFWZLf+VUZHUO+CicH8sE+9LpldACFUpG+WMfE56X+8xIB5l+Eu4ij2kBUNYythq4o1kyIEuD1kt9XQ97gS9+waaIHokWae6jm/Y8Govgmk31Z2M0SBZAIeudbA/y6RkBys3zsWVHoPxD73jIs92cougppJ3Uxf/pQcoOw/qt20epdVJgHhT5/Rg5mNf+bvQ4LJnwSxs7VE9Qc/myZF4IFBUAom49bMTIghVW6RJ2gfXkP6ovc0THTEpxZWx4zTkARVTfH75vftaIkZptS+h3ERciwL+zFBfxojqrdRqqdkYWAVmXpf+ueckOfXPrN5b9eEwl8OJWgoXwyPM73RDn5ix09+qYTUbhIRquBAIHnO03H3q5TFdSXzP+sPDF+FV61ALiJwLttts7/NF2qhFJI57p4sixeZfoEtm0Dg5wGwPCH6tc6aqO8oe5R+IkDR8TuyFEN2w2kBdTxxvejaSoap3bQlCW4svakUIjVrpe7zCbbcGL0xSe/T3hysCfb20Xj0oFitmmY1Q+1QAbHJj3MfeeZfxuvYYoF7mLnb9sF2SPQEFrRwt08qapY0ODw4ReEM3TamVg4j3BvgKWWLIeWrMXPSM+I3hBzjUn6TbqMNWIPDWj5FBYrWBwXYB71BOpmX+5iYomjHoQ7LUcQ867QRS3qZXYnBbLy/FO2tEGfzE/rGyNxED2nvMySIIs4Fx3fZIsIZn/tCkocG9krZ5TWha4eDI3zmyCQeBMYsXlRDNsMfjEEBFh6/Qhq12c9IUp606kEY5bwbG/QnU+IAyJhlftn2f8iRL5A7v4R9oAJGU2GYjNHqZUGg2z6az4YMtQyXcV9X9WBRlaYnfVIRsmuVGDhDBIoG6C8AkCK6LdXd0NgeShgVCNpx7iacd6L5r4rVi1Gco6rCBwBfwyIJs4Fhnq8IZrURn9zhkJ2FenUPijnbIom4cDNJT3zqMfvySGt4ko2KqwoGDH25QLfuWMbcuRhuQwYKgCX9VgClxETR6DM5DNjTv7F3ysG0kI8NKZ5AZDzjJnJD4VVPwVR/fNKHpzgM8QQGSapVEbQCuiSw0xjHphp0eDxZeames1Mp9WwQ2puhmhj5ql1Lv0eYJEpN8RFa01yfNY0KZkTpYzcO/Ckhbb36k9esVXSMPl1G/K7/sR9Mcqvz7tEmdFwGaO02c6azfLxlRg6byx5y5aqHXBgH+N8X+0pGSjHsaENs0tEcJU4XtLrRLBJGIFVEe3TvIYkvc3siaU1d3xi9t7TPq1L/+hMRqojqmp8jBLyo7KEuYZeOKHFM3mUkV+XkyhiFhmwxtLgSsGMbh8fE6hCR2rTOIinlmsF74yj7IpViQkLbyCbrvDt5/yX6I7Y1abrFs7QBI3D9QnlxlwbgZHvFTKeaFKcI3NvUQFQURMimQ5M+eF6vwSlYff+7/cWpYmvPrIh9BVONzVYOe2tQdAWWT5fJSYL5Upt0L6Dl/pZObBEdo+FPC4b2+iU09eJ6vb/kc2/uq9CvCUV9KB+C/CPAJdOu7vq8wf/Yxy8081PEnm7VGsIzzoFYnDvfYTUyPhdXV2yICWljxWqkyEe4e1n+SZCRACDyiLTdzj5Dq5ThMdA+CNJhV09iM2iW1Pgf2XiLDkIpNo8ugDtNdVTMEBsO+uHzrqEI+EwMOFr2gevD8TkmyjvrYH9Bw6rkARUFwc7DRpOCIaACn2Edjv7bmiS3MFeVgdj1y0Rv+v1DYqY6EwHst3CNlpq6XBW7Q/fu+F1R20aHUR5Z1LIZ7wvY0E/w99bKzAyUjG7671ZUYF6F5+Ynv4Cm0twLZ+GTrBp8VL/LMeq8XYgzYldrklMglyWJS7iWBhdA5GraO3m3rO2AorN4N62bHcpIhG8kbvIkybnRVTEWt5a5f7iIYJN61OO1gLp+lMKa9CuaUR/y9eoF3/jHgqh6iPSadglFYQ/GTsLkzIXMTFtBelXwJHtvmQtoXItuOsLGvL2IK/M295YD8SaNfSND8zTfgUXGYQRyrzsPYC1cxWOto+YkW9R3EinZBFUy/5HWXF6WeqLcPADGeJH3U642mjV9hMqA/GY+7DcN2bpls25VizlGv+FyH0qhDmmd0gUS8y90rDX+Xk6y6McJ6S7gM/DYcoTHv/2NeKg4rjMw8TqrlL9LBcLKWQxtuJxVX7ObKDCs6fNlfUj6iRrGPFdJD+ziFknCJKgixZ5RJQEQZi2MefRmUYi5crYu3Oh50a5Jf+upvNzFAo7KhxO8WRvoqnLO0wvvdcPsaVUOIcvfZoUierdTyFyoxwnJI91KCBroEodybtBGshuLseewOL8RJP+H2Oqsca/SYdeeRtivXY+FFQeTQ33eeX3DdtS0+wgHXVCCQk/CkG/az4aY+ExO9eyJRmpeKAXose57USPZEoRKo6m3uIY0rsGhjw0xAS7X1DuBTFVuo29v3dChgu70cPjpl5/xQmrPdA36PXNZRWOszr9FtTYYxG7dHUooremnYo1QnUGWsN/xygLq9TDGLLhVH/pc4pD+15uGiALFzU4PINmfD25G8LAsJea1dQlpC1s7rkYJUQqIwFNDY4Eh0dawLn8fCol/rhUCEbEHM1dJlCBpXxKfm7zt/ZpsbXgy68nEkEoLjs9rk0E9GFFZoYLZv/4qZR7nl7qBbeALu0FWvdWoNb4hCvlkME+i5nbMafn9uVxxXlpXBlOxHA7IKvKJLMXQanWkuK9A+2VI1JSDoY06+R0/g5TPJIHfO3roljfhM9ncx6Qrk66xY1H0+2UgF+oQgm28A27u9+T4rGo0sT6suA8Jdwthg1T9gojZro33dFb5pubkZ5ZHchLzsKkibaR3DHxf769V4iImNuKKrpgMMK8vcvF4YgFx9Asca63MVyNPtp5+zXPASns3bwdmsxnn1S54GTdkB4DwX4L7JXMnQGqIaS+mPgWxbIZbFcDNIrMilEIEGFczfvcACtmReTyzqnpITyfsh5QK4RKX9ZWtvUy4bWXjsLYbNV7MrrZsT82c9cmf4f8I0sSYqVIlcUYgI782imxBuEKs3OWcogWDmwlr9TGLtVSSTlyzHUW4PU9f7Wv06gLioBSoAf5esTj3FD9kKtTKQZfTKEIOcCYWcfIk4IkcfoFGKSLqsHhBpBOTfEJ6dxkBJXCSlknDrb8XJYO4/96XFd4ThAg4/Heg3u5p1kP3QG2yMuUrty2cFQaT3cWMABIB2diEu/1KfFFSKbfjTp8aUhb99C/ZA5m7h8JWsGwT5Ml9Uhw6CmNHyRA15TyVwIsOH0I1tFeVqQaoqT7wGjyqrJ9bI+WtpjMv5CAGQfj+k2aPOJZ/zLvxAtkd/Bzh9BZPEwVE0I0DI82uWK72P5+mHKig5zbXYrQE5bSNA9/gHvSND2qLV3hLPnoJp5q/NeZX7mhb2aWf7qkF8iM4HEHQ6YiYA+E+kPmfMGabHq62QBi8sSJ3yb68iTcA4YT6f+gJb6G3adGkY9eeu7XQZiQEi2fXRSKUOj/zLkyh4R3hOAX6xhT1yCvCHT2Jb9tAzSMxe0RFbM3g6b/VHgP8nyZkt45j1ZYBTwOpQIaFU7nU5focNbiclNOds9b6I+FOnBXwyAf1ViJPMKBBofmR8wg+77g5o3CiYUzQ+KdNxUo14XQc58/GKrIq3XSIefM9azql5sX7KlTsU8DGT1HlHIYnd10cJYsAEHoN0mLKcHTySHsjTFesKWsmK+siZFXhlavE6F44mweXOrX6FBoELRrvIrsst4OH+O47VaML4CK/cNrjlTodfRr3u2XZsHCcw9kXLGX/15sm10DYmP3G3387x7LDyVoplrs0pzIvfcy41eb2Ob/wM6tQNLxQKnfSbL0eyYL+RWR09qeHT/lWpCFvcISYlmdF/jMaIWDyxE/LA1tguYOSiQtSqHfgqHr1n/k5nFhnUBnU1J1eys/8qySmWwIplgfD3uNcFHlg6trf2B11Om/f7E9onO53sWHhas4nNuhBJsUn2OjOnOAFZi2dcAvexHytVxIdybjHcEdXUcp0jkab19hwZ0RddTUGjtyulBmpbfGD+4d+oynTEjmMlYS/pfoCyhEk9XbgbBf7wtFs5qleFrCmB0NrUYZLxmw+2wFqYEUy2hYP3ZxY8uhRZeFXZfhOD58zGBx7lo4yMjiBc0zvOGqVQm8d4tk1CRpyGJOGJWVU4EpHPxqgMP6hV7f0IxJugziIEJHavrZauRXe0/THYEOKpl/a4jm/fah+oAzHRBqwetjJBSjNp5LaZ3ZUNQElZJBDOF1e4muumSHF6da394Cvppq45QN1B2wYBfbx4Y9fnq5b+heTNTCmP9XhMQGniDhmdhGzfPUY5YPvTUhEcaaA2ucNDUO/xvaUVhXDIodrM/05R31bnFkjUjn34N7Aiuagl9VB9SjYsu83Ws9eoevaZVwZMC4uiZko2GtNzZCyMHRq6GKhvEGBiM1gLyvMZk3eR2dGcn19YX72JnDBY6RWncG7lGAg0YZR9lyoCyQ13gtnyBi05gPlO9yOeIYGqQrhgRpR+pAvx4czdaBMpVI7SgZMAhMSsdPUEQ9stTtwSabBmrln0uHsOMhDvi0bNRUWUmqnu3eiLgzk2XKGyTaHCe59vZZcmDkk8aOO6pTw5H+DWALBPMcCOmfIz4cF9E5zesXbQkQNDFk7vlnAcetbpid+Ce9MnTb3Clhv0lL7lyusJYCpLpalVXmQ67YNR+IIDh9vW7XeWnU3FFfdnO0yqCON1josSLVMTTaH/T3Q7Y+gOUofDwwXaGyGRB+4GRC2kk7zANlgd7PmE5kXda4IpmTbP2OqUJ/O9EXW4aslQR5PtYy3tNMamtk4Lwzb6WIFll7MVBneG5vPfEGslblvK4unzLLIvceI6WxhiZNc/nr10k9nn8ikKPz5jmA9oC+lWIE8QR4XYTcO6WZ7VMORykmWLBbTE1NQc8/TBpYSaYjlsyOK50EEwZC6/hyMiltFDU/OcVfSs/4s0Rk68qJkU5mIFxzQcySQSzLKmqQzkbb2ZlC8MLMP8Tt/ui2UK3r3IoyOWjDNfAV+2/iYAbaU/gcEuC9PqZbBCpHpobrsMSJpIpAbdk+lZArMaQfdQP2kY9Krk6TsjNb/ad7Ghc/HTlJyxRISEoijGyuLhUJB5Ch35PrR1oibmRE3vvhC5cWj/AFFMlliT5ELHoj9ieMLEG0BOkVRUXKuv2bfaF8AdXORnzTtMfXYqB8UVY5TvybX4Mkg9YXaiDDrp7KV8wVHpmx3MIlmRkznG4Q7DbYNTZBEi2yxQfQW37NrAOyCP8AXP/EHi/BLLFg/ip1tleZLojlnpdzKgSmJyi4IRDWNifCtFxTRjzh2z9DNa3KUZLZnixrksQWHwp2gRkmuu7HYPHYIQrdjih0WnNb7CL7hFDLjbfGaVLQh5Fu7SHtZTqDYzgY4QnM/x2PC8v6+qmCAMbOvWxZOIxjgpUF1ud2/e41K1bJAXPTZ0ctJLsigJDqNH6fNsXGGXNx7cwJPgP6INK3Qxc3ylfv0L1e9m37k+CqkJJTN6MvvQuae8WjO1l0JvBh6yHIrZgf/Bt/DNS1QULgHfUCLdwH6GVXxn8JChzrTEJL4dTZGD6nCwPWD+eeU/jxNc/wph/HYngIZcSTOnA7ZoHemc7pUYXx0Nr45Sbce9CyAvFnCzoIYbXxoDXYVwt/7sf509VEfvoLzjbFrRKr4vntb5dgeDiwRX6neO0yQZsOSoVjVvOOSAuP4PT+ezKgOTL5CMeBFh5fTyCTneXHNexLrs1pBpLHH3kmt/Gi6938ByjJyGR1wM7/rvRQQoS1drQjQ0vefqIJKlavxUAyi0PuILAyGGfaeCzz00DKjY1cowpRuwwf7rYPEZOByjttnqj6EUZ84F5gZp+4HJmTpMjNq0q/lyKFhwHKG0wkVp5h+gESx82VKGR+mbao8YOh23JnEy+eNJ45yos7d1gFc6GC67dt+OzE5TpAYicEpe2YtuuIHNt0hQpdLBdS8eqx9D9RSrya3h16jYIp9Ogfv58USTrQa6bOJgC6Fuw3VSohoUOQpQ/XY+PVKw2eV8Q1N6yxzymT6QIiLizm3kcA+jtFVJVj/IlTTGr7Tj6P8fQmh0ag3AJfRbLs8nmEQ1QHGUtaUv9djTgKNG5hVLyiujHLL77tNlHcYLwqquU6Z2V+WMoDwfBiMDqK39/tNhs7dXQhQTHYkold5VgNmV+WJr8ETyoKTHTS8g1RZL+KCbZw1LZoGTgR6eNleq+XGRggG9pbw1+WcW0jzJpvQle+pDWTA3yPaJogeuohg7EijR/48Se6kjwNpGStelAHWNOtzrfgmNxtH9r1eSRWLz79nRNF5th43Vy+rZ9FcwK7PlfJojQmk6yDIgDVpS2IJtFflHkl2pdrA/ZK4Grks9dfURGUNk54HimplKaYEZX5dE2M9W/60vxTLBE6XeIZ01h4YiHBHGMX+eAHZAHpSk2dFZUbQL/ylbq8VdzyOCnwzB532xAsz2XqmJFNJCZ6YuvEpyZtLa07GuhPki8MeZUI63KN4jC30SSX7/bWpsMyfpqrzmMI+cCYlmRUB0Mu4kG/untuIlFzWG2JnuSThOvNB87WuxDF4K9MPLtApA2nPV+2yMqZtQu/5eBgMzg8/6FBhddJz3kV0onK4Jbo71w6dhI4czF3ksh7/wVe0vAH8B/pVGb1v7xscPIhg6KL+hvTtq6g1+kCPpBURUhkj6yrfPgZ3/Xtc22MaQJp0ouI8smF0IW7P8ZfkCNRlxyoz5rOlXJ2YoBYf+hZJACLpIW6Ecg7s2fptIWtvuAgGvGV7dSNLkYv17ghjkJQx6tLucnApd6V56PAKNj/7Yyi6MOC9uwvXC4HnQSolMT49c6/5ZRIfWauOyw+arQBxET3gqjgZPldHDuhPDdYxffuJ1ityuwa75OUwVzCfQ3DhhKAfuieBFYqqN1i5usxjNFwKad4V39gjt2wLjcS1yX59qz0LCyVW9KbSYU9A28hy5DC7hdtdQxRU9PX4vfg8R4KZzpT7OhJe4Rwnuob88KsYJT3Xdb5uQj/iI2b9k+IAL2RazReg2nxwi3ia771jH8mWcStAs1NJu+cMgx6oarFqLe8b1HSRxQ7za0WtQhVKdhOSo+l5MyUbO7l4rtMf8vOidRDYSBoESyiDirZR/lirb7mNwOHR9B00U3KDHjR+/6/p0FjHCVpWNOzJcWfIRQkZ6XmbdXoGNbYi+/6K31kVQSpEiFHlf0XTAzQKDh03BJv6aoldSXInQfAEINY34mN7TGvaILI1iq1F8qQD9LdUyM1y1GkmIcoViAyaqPmTF6srtanuyTM4L1D0wyuj0tEVAfuycGdwEON4fnsCqlt5T6S1obgnUutprS4s5WpzQgzd4U9TRXJErli2+o2bS7A/uISBZhgh/679K/zLda6gWtuZwAvTGNdCbAN9uwZti3Hk9kKWrIq/zDHz00+fSYLcc5sgjgY5sWd/F9nGirgGojICMTxUzGmVVyjsC+0iZ7i++UKuLA2KCekIgylXj+DAZVKUFgBgXYW5+1bwyASMUltB5MhCcaMuivyyhZw3MJ7OjjmJyH+sH7zwWOwFaztw+KQpl6ETunGZ4wgXDkkep9RDpXHKdERy5R1KfOfi61l4kXklOVi+UvIPbGuKxTqSuKxjgg5aUU0X3V/EKdOugbYyeYKlYTyfe6Py6u2Z+A0k4k2giHiUVqkoC8MKxTXxmChSs68WryAMhUxyo84ORdwTONcLdmrVJbnyH+ugmyyx9iKEPADsMijuo2U3uJDa7Wnfr9gcycQq006VxIwrhk0FV/BDjqzquNOsEJXdrimGw0G+JVU4/5BNk+lE5kSCYz9cOOfNBtbtPUoVHnu1jfPwwGlaTc7GUxPcDFnEgwaHh5znVnSwPAAdXz5o6vI34Epz0NKfx11wmUjfW8nTAn60/CwPV4XjHM2yzXbq/EA9hUimpPyH+gMWQc8fiEpaTtk7l1iADxvDO8EMdlaQ0nXdXnhCuCrsoC+Uvlb9IaXpTbhDyzTzYYUPRsJ1khYU6+UMPk1YHn7mE5V3/F28Yia/wrwDdF+R6TmVzsqudzix7NyUGk46wXs0WaHIURcZDicGiV7SEhoVNTU0zgBoaSd49LNnCcmSgWRMUa0JKdpcVnfovdDcIyEcqOXD4VeP1baW1O5XKi8DuZzNuEL/drafxlkHz2RIla0Jp8ILNn7S3fdeg9UhAx9q0+SKtkZq2KsJrdjjyAjr3GfTjVIDAz98414NxYOtS7EWs2ZaFK7+4WBYoC5Hkeq4b/TVXen2W5sxGUXGVbea0PfIOieEzqtacY9iZH8JBwrLvaO9mQx8S8Xs1qoQA5mRuhLUFIcDGMj1wJK/K+vclB5Bl071Plrpq5+L4WJ77f/haemR3QBDVN+DYo/NMMFkqokI7b1nRwuzDmI5dEx4XMlGANd6UtZZVQ12+CHjwiLfAM9yPWaei6wRjGbxBRZUWxyt/lA3BanlqVbrdSdMBG5p3j4Pa9sSfYjUr77zB9h2qpnC6V8u1+XFmGBTP3y97KCCHykGfB6mbCNng2OYcDfFxSp12MaqtqOwry+xB9gUkHlnfW9DENAGqcYOxFOWwZHAJEeIuPuyLr3pc8euQGkJA6K1rmHJDoeAl370hmHY+Wk02WBNr6bOj8owlbEPXZobBQ/xU4JVN9l2GH0nnIedokXyCvBiq+jOf90wECFhhyXgaKiOos+J5t5i72+cySCooSeyr88ULT2mwUuMCLDw9Pty72PByiEtatpiqNeZF8Kladg4jD+8iY+w8ru/PveAVmrABMft/YevFyzmyB1LNidUz8yrnolKmitwK2bPJrQzSfyMg7RCZtnj801QmxB2Hh1RdODJ04NYCR84mkyeVmLrySQsPfWBiZawIPusj3W803YTrCIFZh55a7RhYSAh5uolGsv0TMC+pfZ8CJFMfhrjIkPX4iPlpoVij0m+1EDPaObMhssohxiQLjAb8un88eH/6Z8SnJxoDDY9JjIkM28xe9G9BMqE8CdRizNqXF+yzFoq+i0JXmGCunk6mGwVz7dw0Aht2yZLXL1jgrrUpP84ikBVljLiJmABWcOUt5aq4e2FLPP4IYwNw6/6kBGhUw92jqGvzzSz2IXFoSGkFThCZ6Hdi95k3hbTR+UyOtNXxKf3qOHtoG1+tO5u2H6XvCe4OZ0IsSdV2C22f4X0XRjnoLI9dkAJcmaPzyLbgrWgj/dizWHsrNz5PzGCCZ7zywhZMyk6RrEJ5ucZ5k4Fosm8+U94ZyJFHYaHthMhJSLgoHd9plpggxNFeaBMx2BdSg8d0qM1P9s3xHTr7n+uvFsfU5qJafAkyfAi/gC+OLxCw0uMl/XJ+id3bpdG4VxQwyKvZaxCWrPaRHIy9KcdR43jv9jfykGUTzB9KjyF1G0SkyMHMeY5wgAmcEp9B8ffD92GR4FQExXAD/Rm70xyf9mrg0HowJ+Y5o1trz3gJx6Em+pGPt0PvCVSXsmyA7BLMqIiL8iKyvmFzR0O7FJPoUD5dZJ1eKn4tDUJJ4Umb72XTHqR1qs8KsHPpu1Bas2jM6FoTMyoX5aScTz2RVJH0xso6SkxxuMBg3uUblz4fj83SnK1GADX8ZJtrY6l5lrbF1/ZuSi1BShVAdFnfBB3Sh1SW4KQz2mL+Y4svWwspzeGp4W6pTFKdMDjOxHzkJHkAfLjLjqf+T1Axa9og+Cl7gRTi70bSWjsQM9F19HqH1IdJOoerLMQTLpuVpFU//G6/hsxG6sFsnzMJ7n73SbIizBrcriqJQot6sKe+uP1gONUVuBIPlDJA49atkvafSdkS4NR+zciAFrwoHjdIsVSJKqDxAVrM15uFJb4cUI1Z5j3Wgo4gLqLZDMdNtYKJ1P7oBTGSBKZGTqguAYXj9FtcQ4sSbuwAvEKj0iSHfGzNYpAzMhIVEl+O5tVLe4s/3uEd9Gsrl6bogS5HKQwX3XK8Vnj7lf+5qIQiTSzRnfkEpdxxgU0LAZG7OSxjiHkVD2gFaZ1GjKhIedce7dFUwac8qA8Ut250wwH7O4rKHFECWEhhPfyyNNFFWeFrcIjCB9QkpXuz0U80DXFirexggv6bCvxlzrpYL2A02HykHogeIIum14ATyzZnKSfKNZqYUHkFr6qN2/mPO1WK01C9CpwXcl3fLEficn+qMiFNH5a/JFJBAF2ZZWJ5EP8mGzPCF9CDlr0z0YHruP+6bAUG47CNw5yDdR0WDTjq/DqDE8W+/fc6iTB4r9945YbHjR76ZqoOFAkp3KnRniRLdWK5iKvLCCH/Jf9vzHnX4LfdHlAiEucOADd6aaTJnMDTB0DnLoW9pvA/TvJPoH2GYOwUyBgDkGv7VLqRPzjz9nIWylnnWqIlm7L9YRAuucHIleKaTQCeUrXP0Wnyp2nmBxzeDiVOPsap6l6MYLHO4xg8HBAK3J1dgvBpIjcYDKZexJV5mf8c0hpw5ODKTwdkKCeeTezcPXh/9nI/FlRcIYy8sH3nKCQ0EEucVi+uinLNXGTmZXSuB5jYC2k1R6X8FYDLSs7G3qg+Wa30/SZZVsN+vbIWPDRqs9HMz/V2eXRrxClGwzMRZTnpwuqrD1GTjLUluOf9uPygJGxe+/EB6Ak5UCCsCWe2GLD5iZX8ywqGyaP9CGKOOsQ504tSVjAMPPpKo7Ex8LT3xYdh4QReijfasLvMKd8/bu689y+WY+S8IO9LXV7KYzmOOycnb7imsjeiBPCZgNd2Hd2fLIQOaLorPkKjFZcGRaNO6lp+pBPTMvw9QIbYuQZBlhu48VmV3i/3Y0m71BChUWR3cdNSS4D96YC5J0Y7ZFqMHBW6G9p9pf1EMvsoq2dzX2wSvNYXqdP47zyePLrk+nreb97cBNao7U34lHDXeFQ+HqT8XvcE26g42SyQZmHFRlH2UZ0kohpcgm7Li2wAo0IHMre/0XfRV0HtarB6og11KC3Z7/RUcqKzEPA7ZEJQgZNgBZE02MFT702HN67p516Nvqkm0Gjx83wQdQMeqxlml8LDK0V5SdTdnatEK7C+bhiQ3CLRBupVuTeGYhJY/BbrqiE1SY1vdXZ2SFuvNbcrI6ErGJV8/qH1acDEtu58Cm9IYXlR4R//8FS+sjKjiIPcuzVQ+9bV25MODrRYTzxFJYbLhp2Um/HKOncgLdKHj7tOrMZfxR6CrV1qRAGh+vD5dMMDkqvh3RtFI8M/B+95gOm4879zLjARkfVycAOqjJdoBfgWjWNsJnafTkmc7B3nIQv/Doeol9zaGW/DlpeEHHLSCVAFpPcoRFbXqIB0NIfCnsKcK8GmaNVe1S1WmDjR9kV2WjYdDpu3d+gX3edjZ363f9jQEbUhFXtuRXOQv+gmYCubqBrqUoagUdP7xj0HIFEZg93/KZ2CrZfN9t0A6WcpUJBI5WLyoLnqf11jJxzi7XP7icTGifXh8HPdPwOvmb7A1BFcfY2H1yrgpQ9LL1WPc8f4dqfuE91BNq8DtcEql3/06rGk4gsNyWI77GnH9IKwUsAFlrpUmA3zzUPojorig8/2Cbd3TjsCKM9wxliCLyKPngKsM1KFkqM6bMFtyxYYrU2eewcxYM6RkLIzuCbt2tjjkrWkSVoIS5lGaeH9ACsgsCD8uBJTg2FG+jOXwTTSCvGIWOiSPmrIKKcqEISVvUcMWhHEeUKjXTMdtBmPl8s4WipwTYa2j7rmaa0RNf7IXAOT77NGep/q0h0KdWRo5UPERTufgAqHgtum1dZEPq6OH8ILA+nokd8MXPhCko+zgkNqNlrLQew5ugiVBI+TSaF0+Nh/0lIpsCoBQWlDacVD+Vx3x3aSXTbkp6URafBo7r4W0YMJYL0MnwFM5mzSBvH459mHAZ0yzT09dEXgjVW9/ggg2LxRO6yGo5FTpGQS5EwMSjG3crtd3U4X4CO+KX5W46TC5B/X/DpEipFhWLaE6rpYO0r44KwsS9Ge9H2dfFY3QNvXA1sWHN6WR25HgQ091u/FmxcmTXpvXerH0b5xRi1MwmGmrK4ZAT1TapoD8+smzXuW4xfFWkVDOL7zk9xNtB53A3+dJrIzc5OTB601UXSFtQkX3hWaSnhB0fIWaxp9w7vGQDYtDAeTTDigrLMhVNfLUpJcIxhrMjO0Amicb+Ubauev6gApJbByzVQRTWq047GGRSYgxukHnlk5+xWTYTi31cQQCJ9ILZRJ3tV05M1AIgNeeDW2H8IBJqkzSl9nnKSajGYOD7eMyjHHWbG4SEV8CvAH8Iew6SodPSlX4spOyb4O8XdYQ2bne98jMMolgBIbc8j1VfPhmdPcqVcmf5qMjZcC2VzGSMF9s4863hYPVGq86Huy5cmg6zBz+qDU3yje9vmEr3yJ6kZhF5z8UdlkJdjq/581O9VuCR2B3lyEAfQoUZot9HdVILawreyRxAy11JlpE3UoO/fi5/5omkUs0A7Gvb5+bsteFVIW+9l+qR2dINow47smAidv0bLLEr/yqKcUanjvixyzAQCM5CVzq0r7rDR9M7wjLxBq9eBWRVmyK9TfSJqXHjL8T3l8phqzWGZrkRC5oiPO6C5Wf59fFDP+ituUaiEqytebX0Feyu7U5Leql5gBMTdDPsmK7KUOyA5TuWxjGc7dN7kJKEYpro0VWRhjMArMIGbutu6vN2OSHb6nvd508S4Q34uCRKu96bSAD7YHASNVhzXv8N8jroYf5Y7E9s4wTpkvo3BZkkWqpF0M1vka3jjUC/JuZvw9V8avX+D9bciICl12vr/bQJxDe+TN9MQwDJwOe5HRWZKtCtH/1/2brHVDE381FF3JIILjZf20UTFL4MLwmZtFv3M88Bv1x6hEyoaAlZ5p5QEWzlw8bJBt8orARhiododtduYtJBSF7octT9JzbeKdozaif0LBWL/u9RjbeVNLZ8UV44Ye6Sz56Vn8QlwftWL01WoPryii3ZZ930Zx6Ins/HGvGQmHAD+2qvuKQAs8Y6ublb+Dvhp3Y2NNMjsuzOvb6m4YtkPzbhlctKadex8tBQuo0zhmSxfDIZm5VnEDdG2vZ6kcykYFxgAz3wrkVyXQnwxyQIeYMIHQYT+257jBWD0yJIiC3PqmohMzTC/65XVgSsowG2kgnlR7pYY18nBQ8aVfJ64D79rH2pymM4xMU1Zk/OS14XiDcldhO0c0RhQxiPSY72XYxpiaKVYmzOcEvI1PzQa7+LVZ6pBIwn8ffWvhqa38b3IskTs4RBkYs9i+i9/AqdAQg2IOeWv2fuo5tEcFyefI9nATJXQchbBEQO2Cj3kaBe2X+81o97B22kYSwjOkgZybf53qZFQ6p/N0dL/VnuL1cYTGi8k6rMpkKGx4j+Mc/fcHUVNXTKhyO10FkvHiN+qSbJGepJ/aLXoLZ8RET0Bshv/4hAQgzeS7yl0n74cedqdnmAeHmQ2CyXvMM0MWpEvA2ezZIKU+WvUSaGpTt1kvMloerqnqxHLfT01Yh2n3iD29EWnrQsyjedi1I5SUgvQKBM9G+oAai15cO1con2QFz3UK7w7ZgzM+vPmbk2QqR87fzlbdTSAhrLXzqVfLnWBA/4+5aC+0BRMZ6iX9lH3QXtKU9D01K3HprdilL456y5lsl38VQaMbz9hk0LgquziMY01Znz2WE4ClHG9cF/e7stVmn89oNFUE9NZ1RAc97KzDEWHLoKwlCG6L20/2Gj7/M6PDhsvhY+FMzYRg+v/0jo2gPT0UTCfaLBDRVvKQgUSYPMG1dr6ox7ohepBUS0msHq/V7A6Y9WfKDgSLatqTzwhOXnuXAoFc1LsdlV/Nv7XHqg5TAohZGa1mOn44SyY1fyPMCxL1QmxvhBC7mxDyj9DUnBpbjdAzrBW0mUzZ51brDVW3f0A8oKL6FYBf0mwK6YxDMJogq94OPgpZyKHKBYvJXMfs6u0pYnEn/jPeTVQMK6uY9Egww5setjqwdQmwi1ea0/uoNw7QKPorCWZohFt4VB+HUy/ObjCDdxryIg/y0wXGMwFyftSyf0v/ESOVaUNOHg1aA0SQ0KOwx/oqBneMvSoxZc7SqvQaHcx3ZLg7I0FQgQ9799KuVGTfGNgWvzIMnHqMNnCyCLJMNoNQK9XA4Wkq+6tVuCUREehKj+szE6KlaSwgAPfb6JeGqIyBrjJK/wNw2yPaYB9wHia3A56M5r4OplAvdVjO1vrsc4I8LAy1zqqpo0yM1hfixHeLNDG6ufXaX/4mWxYpqL3hBHpPbnox49P3jj/wGgdZFaJe1JTer036xd0Xak5qCI6SV86xqAdAChv6sj7ESw0SU7w0leCi/08lfYfucRQHdzjO3JkA7lvHw0ouMCSCweP+ms5HlStT1HLlgQ/pkLQ0HiDkuoPtTY6fDW0UPlH3ebKJKJsiIlEwAnWQ1ExfQhfs1IRdbEO6sgyC7u2YqSye9WFoH3s0+d4P2X78UPcUsRitbiSflMds3+5ixk47wEAbwHOouv3l0AUb9zZIP32hh+8n3fJx3LXT4wqErJXRmufydvyJuKW5IkA+rD7B5y3hJGUFrf+je8x2WEZ93MMZZjKF3R4hY4E82J7y0z9znWEXqtnGce0dejOBkrf6CbP1VCh4ixhRvmOXO9yA0A2XQqeWYNfk1eUkRWlybRDBiE5SOOtjudxOpqC6Hv0XRqdL58/dsrEItVoppvb13l9MrZRKzOe/vtw9JP9aAkOa7ra6MbT/3YE4LlEJ5ticKWKe+rOGibg+N20Vx6Vg7J3byZG9+hIpULnZWH4Tq3LmlMA+oUfgAbbzPl3twbDuQozSElI95KSsXaBWevUxIWPQdY+4eolMlTtLwn+51SP6BWFEiioYy+r2Rza4OqKJPMbx7t0CZCtpMKxYQ5JCowbAH7J4Y3Eh3C04j1H/2a7qH3cVo01mg0KjVVR59qENmLLCnQ4LNMS3i2XshEK7QAIvi4D+egZPpMUywog3s+tqRiaGXIEMFp3rd3TuvLXVT9tpJGxjgQLGMKXmGL1MVjoN97by2NaOn0JoIbOQqeBIHTVbBYNON5DD3XP+rStPIfVbuHd+90TJpGh8BlfV0dLneK2wDMnndVGVvQLhvaQxu6sL3XsvtxmQzeFWUSHLeAlmTc9yNQKkXtOJWS9faewS8yotiXdJQ6EI1vpVOHgh46gljSllVDRx9qlH7i2QFU/dKpaQEbpAFUBI/eSUGbpgT2ORGcUGXXDWjQJQo+nCkQVnIMRUCP367os5Iw4Rb3LDvOi+/mwcBozzUa4WkjVcSIURKO3RTFCiY9j3O6C5MBS6Y0WbBooC0nOzhKxL8xMIIaM/tnyEzIdlABrz3f9XlCiQ0hh+C7/bNp14eUvnjcHWjBOSw8E7BjzeXkRQkpIuZSOriwZ8PiOLZxCkXFOQ4hbXa4Tu69lccJ9Hd0F1lxkg5QnAhhfx5WdcTkBH3SibBUMCLPb/cYypz6s4GGDMV5smYibldp//j9gbCEhqanpxLsoexOMik4SOt879z21iz+8V3wgG8CicQsmxcsqCc5QUqOZhnpO4qAFgzHF+noxN835P4xf5EsOcPvYWwtzK3WEYVGy5tuvxE5WZB246SGIDgeC4sMge0B4p70Tse4b6NjlPHW+90GmqnySqY83r0ilaew46qmwi4RzmOcPehbn4YPCoISjQ44RURV++dfU53vcKhkSj6cWuh75tdSSUNMysFwoP+lN2gGTwxOfrha9wWxDPpimhEBVrt6dcBIvdoUbCLTDQDZuUOVVhZP4sATqq8z7Ai0STnGxzKmAHG+3I+/tvrDN/OOTHwR6W5aWSRj+M5wmS5hfdvimlus2z4pE6RV+l6scSEX3XjFUVgbSuuufln4qZfmgBxNvIZmkPtMh4WHAtuqRVdgDOLksqdhjqc9jrNVpRsYL4L5fXaKhNXYNJfTorxbaoSpoqj6ZEp05xsc4y4Qryx7BRs3iYvuHRbCUsiCPmmGdUPXDn6H7woEjiz1YeriH6NPF5au5aVrtcw0DvEgLLKMuVq6QvzE1mu+x9AFhhIEE3jVvzGWs7x+IBGJ2hfG8Kb57q5sDsPmddrc0s2doavGt3j59SpKkbETAVxcSwwHbpAEsYTNPM1KhVl7EPpQp+gNotyPx7hI11xG47CrYE7+4xlCFpaDwvf9FWescjE9qNrcgCXvSeme0GAOo6QjsttWQcRguwWZb6OG1VPN2xZcfyUeEGLHhPkrziDDf4SHNaCcXXJ9CtFdyRMVueZNWqaoSKhpFI91MMLSXju3pGbSzJlM8FPf/oxZbRADvlZZCyb8fbb4mQVBZZ3GWV4hj4PCrLA1qQvEqs9XLsRnoal9WaSQhWRzLJmCurnGGRc6wxyAAejp0pAR70k0M8R+ziXphTbSz5jU2xp2cFe1EhegrqPqjFAtYWbYwsm9X969oYf76RSVpD5DfI8iDfFILBkfvnZaZtHikQ2tfNY1T0QOYafZ+dfiQjWZxqrDxXDWbc/jYZSbOzpgJ0HvC9wodOgTk5d5d9dmNrnM0LH8bvtI4zgktUZdf/DkYM10EF8yMhbFqvpMTi+TaLBUNd9aLSzSGAqu41xsKxsEYHFPhxozYZMPCafc4U5t8Ja7k34czb9pTsN2JFnwl8AmZSpI39KzBoEcD8fz0CAcio2KlaDIhPF8V0HkEbwc2c0mkpBazhOMI1d4cxnKG15nlJ+haP4D9g/H1z7jIEHS7enL9st+r19iJpqLFuJiKD2NT7LXyBzaAcFxIJ/fo4roeZSvHUyfgqUjSVcPiszEAuk4Fgqjxih+ln6TZW8b5sbDIvrB1Ul++c1B63XbFgHdVJTaRPzIXeh5f5u+QYvfa7pHyQV0ZUIv4SnfFMvTC0g0/fdaaBd9rcpxu/CBpbobKZgCIyVRDZGdPlZs8UGyu7+Hxb64E/k0YIIyG0d7ZSIcU1dOwyAQt25Ow5B4W/oUhgU+Gf+qB/Eqf+V11+GylEkiyGag2sSabnAwgaqTr549u7USX8FH6EnKLv1g9jl2zIU7C6GM3aeDn8kP+9aBM0Agrl165RV4/UHaXPnrBjs3YOHlrMK9jziNkwwt6+rC5FPPvSm2uVuOQouD4+Rk/8X2VoT+8bijB9PNpfsOsNhiSOVgntu7dzfzJItraFExs2ylPt0vanTgZJP3SIxPvZsgaDSBNmxIh0KPLS+EZkJ1Xy0gY8WVOZDbYF9v0GJta6+GUy7ek8lisYumJ1nyw90NF5n7L6H1aFMYqA/WI2COJA7pWaf9Ugf5pniETIJNyNXtonwZOLeCG380p2a2m5Fs4WDJIbVCtkJ77ah+h3HMvJJ0fzW8OXfnZDuzbWB935lP5zr2+vOc7CL44LjNt8p2deJJKd+d8n1mwKwxWxUjkxJRVlpIqwq1a+Sfeu1oNGDaOXyS/LVoiWAi4/RFFK77j8sVBWyTeqc13DCYWKdEbHTgEcIdtBewm3fvU99V8J4gYLJijdis2O/D+3FBz8kG/SwAXwjzKgO1TmXuA3syLPxxfnEUxttkUPpzQJgAzcN6o79tpHr3QWX3TVy4USKZJPX/G7/sFv7TB2RKaM9LvG8518UTl/oNK6/mqMpSOqsv0xRVzNjumgamqz/e3LG3e1lkrW5SquqlrDJIrN90AProjO2hsva2vAv1ZNPbHVfvH6K8KnMmDbXcZImS+YAXafdXLVILS/Q0MSKuRaLPQABT6AsH1SpBlkiSLXyhT/gT5IbfD6Z1Jx0n7l33o2uGW4lgd8BRn8WUeEHBHEn2SCXVQwlREQtvN7iSC2y8qSngF4ytc3vgOucrGccauebyUn9sdKmkhMom+XHRGLg4yr7NW/ZAq8UDCTjimw0unj204NYoihtZTNdXwgmCpqzA6Y4a3S/braI7FEXELgpjVSnB+dqkyFq3Tny2G8lAz1OtN0TZdE3wgbqL8XtsE5Ut1NayTqmPNmEhJVC0f6ZfMop0HP5VawTxA+lq1XoeRAoIGH0ojuV+9O13sh2V2zoxj5jVyNGuZDtqZVlEeSIRI05PVi7nZfKw+EuT5YTkdX/qnx/AmQXABJR8mEbt5A8Oab2RqMdG+P0zvDI0gODnGDSO2w4ZOrD1zi5LnYaIljibbOMhpDWcwsd6Ry5eUmiLQ24OpaErO6a3/sYLybm9xOJLqfn7DNg/5SKBxEfKNyyUYP4KtkSMQI5Xo7dHcIhqH4l3CRK/gB7WtFU6bj0mReNJIitL8grYbUyZpqDuMDT5s5WQsWjOEmRSbMiH7HIkEIPvRu0WxMnRCJKjGFWdlKGqK96T7jlsEHCjsPjk/9VEQ4W5qB2tRAFGJ5YGgbmyYxqxGxduvkNdd3IZKcIbvtEtH4X7aHeyV4Dcn4wkEzUNRRhISM51Av5I1mwi2lj3DP8d6K9iFzNVDCSb+eb9pBu+SEqYrvFC8WKSi8OcZDj50KV871120hgz6n6OZy1KOh8OzKNuCKFt9mVlUfJKzD9gcuL53q+oTHGGIKFz4+4/zLC13N3l3y4Fn9dzM02uGyBGoJXmF3jrwW9OguOsh1FVykE1suM6kC/e005VRngkgcn29tixbfGSx7k8JzTId+5wTXE1HgKXCtGlwA7L6FxS+RUGGP2az1Em91D7THACjjqlVdoDOltQ7Yb4S8n4kG/m/CvtFfQB0e/e/JMgICLGKds6v5THENB7WYOdJ0P5s3GQzdbeXjUAG5Y2WCUBs5LZ6xDZzv1L7jfUHqBbmnHW7U4g+UTYB/tW7B0Ya0JAbpzWFSoVQH6CbY6q9fM8ccelwWdxeWdjZm+TcmBAHpje+emw8T5mUgl7Omvks7D2xk04/HjynzVyBN2dI3dBgxTkB1keL9tMN0WgyjY0ddKI8pigHP9lOa8hb7F2bZIa/FqS6JJPPHnlyPbVl+weIG7j4ocmWH/OkvaT4qtcbnafk2ocwOkjSqUob66ehit1UDMwKXreD2R92MZugTHNe/PWAZesANg9eBbm2p+4kqK52j8MW3AhqaffDN+kK195DUM4FLVYm8BQhOF+OWoM5tTD8LImCNRenutbU6qRxpaMDXCBU37/K3Y7eobcg/IaZaBuw44FteI67Hdgufk5VqCDjlK7jDBUtVq07hpPI9ymWW/m3nNLQlusNGDSBNYXOUBDRWNnHira/1eo9GEwVgpXn2tG1PUUxT15p/fbfGXCvpsj0QlzwErC0ge/Oqlsh7E0QhpqDAcvlBJOiXDD/bv01SkM269rmghWHJPUbmpq4trj7H6cCMXMIwWgOLaTXR0w3tamzJpReC8FXDNwkxSCbmg/ag17JdPyptz7mR3k6KvXor6tFCfEv85TW7CDWLEap1AC12Ym+LK9/CxdKPnXz9Qz4xNXGn3sG1wAfthifQfjDyiCnLo2uhuMzI9yKxH4PUTt52mReMLmnHFrrLpDYcPC+cU7ge55guYhGv/ANB92YzoXrI+Hs6gdXnnfE8GGhfydGwvKBKCtpDecGnu41Mz28j9/LTVtSV9WZEoxANMgPGo4BDbY2p69ixYGQWATdyg9TRDAK7f/Lrlubat60yuVZ9wcwqZ7NBP71mX6NEgdvfK1EgMnkZzsDQl/wWDHdAoOYCo4pKwY5I/V26cKTO4aMYcV/YDdgglOtas2KtIXBJAcgotsV4YfF+CDN4T5WdX808VdXh3/UXLrAdcMDF3QIXj1HyUHIOkXBH7DXICbJt9eNiowRXiuB0d1J/FqjPFe2IlNdXnwFwpRusB5PLSv0Lk/AdI1gQmao8wwLmnoh/L9riMbMMsWAOI+5B71d+lGTKlxx4hQn4ixRfedyZUUsRcpGrgAS1XqCKzggl0/LFuyQpe9BsgvZGkEHQ4ELkl6bcLtiHZ+7uFxmRjnV7v8PP1Whug1igIT3OTMnmb/dGJPuGKY5fRdvWoatxfNU3ABi+fY7eHiPqC0gQDpAC19twVfWBtBur+ST+y7fzmSE5Q0C3mcp8/31XIdqm7sEZJHtFnXBgaTyG+fWRGAY70K10IBvKH2TE6IMzm1k92/Cn2payTupKTtojgP3uaWIgFVgV0lD0WGR0PanqiKtrBFwqznvb/rz2PgpSjWd2BESLQpxY+6tmKXZnjvY9xfR12CQ8o/aKz1t+XxCSzy0uE5f/kaFUCrwxjL8gT7SEUJshp//5/yvPFJHgJlgsvXp+gRQCSzz+vS6rl3BhMsbj/HzwJYz8GsWppOQDGVswlOHEaFE/qhImhDrt2DUfNxtt21GW7KwJRn9/mtYIjlnnwgESPEpwoLyTru3SsVGzRxnZG6x+BiseUs57lTdb3H8KG7UPeH1SSjy9wZHELnar9x5cOtOR7lOvyjWm4Ab18Q+qoMxxLCFit0V8SmOu7AU8XGY3eSXb6Ly+kaQmDkRlOstgmcj+rD34KNz7LTvLL0O1Z9J/nCjp+1flOFgtbd7Yg0t5eNrPuppxYxJfSpnJRNL4S3YTffnV+x+zVsuioseET/On2wNi/TnL2rAQIKswi7Er3Sv48D/+PLsa2WJOSk6DqcCLmusILDiz0FwKEhMewrxtNyM2IAE0/6hiopIQoUgC6U8CLirhWbfVibSnCGZlF5uywIcaUlcEaYP/evokbi1NSquO62XNnWR4+fB3M1N7LaI5pwdHYOKEjg9OaSiTtEDypKGOVxZhdQS0jEvZ46foNS4SBpwZfPn60p6pQldNUmimhWeU5LUnEpZYjPJU6hmAsh4AKaLFfJANrZ9ou428yoEIFuiY9UgOYkqtSUocWxyijxK+NTtuDdbh7NJcyLIl6CUBWQjZiL34Bk0Qe3vmT9tpIKus3r5CvEdEu5Va2Wxm8CQJT9bESzuFBeH0QIRybKFAUVqNa9tCXukd1jwLXYKWsuMuFda8R1UjVG2cvAZ+R3lBV+nLksL4Ti6lubX3hKFcSyFsG5rK9pJt5nlSGIkBLP/HFqLL/KX0S96NdOo4CS+GYPBk+lBZxz6Yie12vvUj8l4t1ik/5PmvbLOTPCcaoPeZ7APUQIKIcxcNUDin3R1okbeAUGwt7Ja3G0ntQokBhlajisyXeqbfPLrTTKpTauclKp+DGdyBsbzFHEYtIqZnlLe5wjluF/UID6EgwWPGj0FVKM59Jom3+0Y1QTb+IKqHZv/0FIEEuVItlJHSixdza2w0UN80Hyc/eUGv6SBybC/EEs9cOcLBR1eeQXXe7p7hfIhtxxBrGhk9n7jom/4LXF125WzPmMCUiNyE8iO7sVSmRf/iSNFBveZWGPeCirfJ8a43fk5jCfA3NPEJyMAamu3Q5im0DKo8aonWXtye9iE8vraixlVTAGSXFMjP3+XiOE9jrnXTDzARnt7+9gvHctQpaAI0za6N7bq9R1lb55jILwmx4Ih4OA0K1/Xx7B9jytPFBRhEO8xqXLhxotsIRjnGRvnkMK/KJ1YhE9T2mNmclLYgMSn+7dzik8BzoHt+EcXstV8yNpTspqsnS96ATq3A66NbF449w9JqViBt4gWi7yVzt3kR4XSJ8iEB5anMqG+EsSyrMQVv0sMeEysGx+yYs6G2xPJw3zqTq4RzDQXPhYra/VMlt7E8zzl4D7L3HS3kkWf4ZkmFmnjcENPQdkmohl6p/gqkOg+8McyzNxxb5Fl19DsSr3MTuSMqhSKDn95ibzYCEdrZXJiKaqu7BFBuju+jSObOPchog2IsE/u/3U/UK2mntvSnD0qNkPYoRTskBnLJ3NJamL0V4sEbryX8NMr7MKMJ0+h2+xMKY4KERpvUrd0c6ABXWHqLdY1QTugC/5dhdoLy3+KwgG5FnL0MZw6qvOvHkKQRoQrcKLuwUld15s05QxurH67A9eAr02a/vUWNBIgP6vOa69ZZuZKElWttIerRDGIAkZ54fw7HBctSZtfspPxaliwbOEH/Laxot3ZQonzvXknSVodzZHA1Jw7BcNRsYvl+KJ0Y6pMRPpIbaN/QSuHtnjUoej+vlVhq5021xMUPKxCK/D8rSRbOmduHG85/JrIimgo5wXWP83lLvRaxwCxeTGVt44fTUqsfUARmQcS3f5DbHR9SZ4nJYIEvcCjIqLezJ3I6S7xBop57j3ZyMQX0Xxr5mc6IUmrlOXM9fJG5iDZQQ9rWsGZ0Y26GzTAEsD6pjPuDa1XAT1MRpxyZ8zN53sl1YEV0E0EHvZqcnBnqMTXRh6zC9PwDXEk3OHs2zLLIjBhY5+7lDxp1X0qcm8XtWorat33mUx+kEDDgaDUdpclQq/ZM6mMYoF433nKbCKDxCozugSPVaRjNPosMDy8FujvIJSb763XuBGBIYLS9x+HZhYiUa9xod0xKV9aRt7yczWWlLgfK8qn4fULHMBSP48m/wTWfDBdTH8uDAKt5WM033+2bCpxDhmZtE+d7XP65yBTOf9/EWaCG+Gs9/5kVbWS0JlfoDH6Si2tVCzCRGfV0XZAUWfXOMJ5F9dkMagbwaeqVqqbVONDQGg8zID5MUV7IkazdAz4JLOXsn1RuZnoZNIGV2Na15+dRKYUAmXFmkWBJpPMBwT8N4bd8VZwBnhm3WzH9S0sbpoP0sgf2OmPvQ6smMyfkVK+OLjXYubmtioAhdwDb5/pLRg3PGwfHEz6v9OOe4AK8iw2cma49tV44In8Rc9jGcqSQlFXPdlC8366ke4U/ITFy0/SQBl1vWvGk40KycwWGaLf8cCtEi/4X2W8961i6lYnpfNQhGcQyC8s2oIOW+Pw545Thq3ZBEyNC8YDr/pzCEmBI8U3A4IiQJoHiD9kUMNd8wfzysC2Kqc4OGeWYsJxmDev4Jn4HV+vqpgN6xxSEMABhRMdTteHiJAgnQEX9BR2V1sNqh5EcMvQNYYa5+bblQn7Rli1UFCtQkP6ECmGkxmPNkg2CGS2mmf0/WEuTZSyPMtbbrnftPgleOmJ3jSm0m1EU9fQHQo1NZti+KczpJ8mSYIVtXzXh4rNJcL3Fm7Bbftpjmj5UnuDpPk8HvqKOj2DGJyk4R0Md1x7umiH0DTOXaLwO0EI94k7n6R8nfqiwekgUQZ1rRek0HViM5YN0JLWp4f4NRE8ErcGNSHZd58+9Kx8lmkc9ogfQmX0rX1kB8QQzNbH+eVDee0jOQNUgQcew3y+0QbifXrtLHXDIxsqsej41Kz7vfcQRE1zUnY2phYNILK8a657zyHNMzPiRhxs28s1JX2kiCMEloubOXnc8BzU+n7LM9wztf63eFWN/eWHXVivSdCWg5DfWsk2CF8aFJrOP277QEPdkWlOlewCVEkLjyd5wUn9ZzaKOJKnDQDLfliiRLTKlU8TOeQj8jOU8FfpM9tayJTDpxw6sVlZuJRAILfxn+QAGIB/W1FGDjuuVu62hFDBdvzVSfge95Ebf9pclp0GrpV3S+gwBWn5J7aGiim/fRyIN7YVVXJsnAnVeq90vDdAV0XearTqjT2Ck/AMkBW6T/ls/6VUVnFWs01wxkahKR0tRwyLRKgHefm3RWie/pTVQpUMZw+/7ozQSW+7vuZd8lsvT1iX5rwlpiaFnOnDbHsr1As6vLETd5HVbcBCGbJHcS7ax9Byd50jdYyagUtjAaHYX8ryyuR/bDkw1o4j8+hXMfbzy+CVmgrfRDyl4dn+5LxrqRAXLoDKpQREAHqdLSsVSJh1s8KnZ/SsUVq27cq+O6LMSBmhT4X3E750rmWwCsoCre6bT//oFWYALjp2SbcxnULBaTvnYDHtfEbO1m/3c9nJk8ZO5KHQTV88ivTWN/S2EXwmisTPdcupMrvI8e48QZdkZu9WHyKron7MKhGFJw6Z0KZ3tleVrvvJo89siUwByPY+Hs4gkKPBQbLQOaedcv/xeM+Ih8rl1eHEC/C65xWVciToVqSGp9HfbhVzFSrO6kBnv7mJwnRLvMEwqiNankVdJJMw4icU3lKyw/ecNSWIUddqlbThYMiq8nHjRRufs+28cq0OI9zhpvxFvFgSZE/eAYvm0x+9lZO+EH9NkBngaqU1NMYhdombNuy3awUN9p0mJQ//e9L65YbShgoc+ZUlNy+c6F6gDEHXV0JrzevPIZFAe2RyRa2dNqzLvihAAMCszYueqszzXRkSyobx5+LTLK2V3lfg3wbS9DzP3QW7VHdHbjZcttQRvtjrGveJnNn2DE2ZDIbvkCrT0H8RzbGDdmIq4P1ey+hoY/W6NuZKOz4dv4HUNznxdKV1Wf3MvqUv35r2jTKvpPWBUWNm5fytX/QJwp6qkIOsSx7Y67BSCbCDVLM8/VcMG+T0j+INrgL9sfT1ICtACH8BI0G6ViUZPVzzCmQHW2oVIwZjAoFl6+meO/pD8teO1E+1y03mCpYfW9S8qhtH2GhlFlebPf4NbezVv9xbXKWz0xezRNQWqUqtYRTUbuzK7KTvjG4rQHfzBpVmK4wDLnSIwdSzTSk1fPNeY0WOpPZTLlvQ59xwgfFrb326vT2hS1JAZ9E6sujFtKTiJ7bxI6o4cBhDaX+adXREThhR+MwA4TqD7rga/o9iY7d6TVRe14CS2S3iSQsD0R6ApnhG/2Wa0A0AY2NtWTjmabdKU+KgIRDP9RQYVjXiF1qC+xyNVG03I9vpmEpY/G/zC4nLOKgXAZ/uTikHI9Afbkhfgfgo9arWbix5eH7WUo9RQygDzwCnVSjbXc7MihEufVj6WGbK963pw8VjY3RS8IH1cy2yZbIcKLO5CgAUcXJfF2+McnDLKtXxyZaf7SPA6KJq+zF2NHyfoeTOwHhGqNcnHVr1hT73pcoyXyfvCYBnG1Bp/aR9t8hoI7CXM3UZOisWGA1SHZ2jf7k9GlRnp3mF/c1AV+JjvUsnZrsybEOQJg/dn/9eJkyykQHjbF56zgcPX6DdMG03WKUMlYz+uOZ+5DZy9E9MZOZ9GMoLFdrIPPQQLjv+GlCMpoyHPXkzIODjHAID2PrnaRpqWVHh0rnieDILKq+Emrd5RnjgE9pDUXWTmHaKuqqYlcgEz4zbi46dbWrAAFBjsQq1rLHIiPJEcwFLCOY4JNlXRXQJqCUKXk2d1RSBGzDP6HDSpo863BhVRFFF6uIpjQV7j5ebFe3UkkO/+coIo2BTAcgBqOtQ134s9a4QJvofuqBYMGOBMsWZ+sn/2AOxDx6SfAnDFGw==";const i5=parseInt(yo.replace(/\D+/g,"")),r5=i5>=162?class extends an{constructor(n=1,e=1,t=1,i={}){super(n,e,{...i,count:t}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}:class extends an{constructor(n=1,e=1,t=1,i={}){super(n,e,i),this.isWebGLMultipleRenderTargets=!0;const r=this.texture;this.texture=[];for(let s=0;s<t;s++)this.texture[s]=r.clone(),this.texture[s].isRenderTargetTexture=!0}setSize(n,e,t=1){if(this.width!==n||this.height!==e||this.depth!==t){this.width=n,this.height=e,this.depth=t;for(let i=0,r=this.texture.length;i<r;i++)this.texture[i].image.width=n,this.texture[i].image.height=e,this.texture[i].image.depth=t;this.dispose()}this.viewport.set(0,0,n,e),this.scissor.set(0,0,n,e)}copy(n){this.dispose(),this.width=n.width,this.height=n.height,this.depth=n.depth,this.scissor.copy(n.scissor),this.scissorTest=n.scissorTest,this.viewport.copy(n.viewport),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,n.depthTexture!==null&&(this.depthTexture=n.depthTexture.clone()),this.texture.length=0;for(let e=0,t=n.texture.length;e<t;e++)this.texture[e]=n.texture[e].clone(),this.texture[e].isRenderTargetTexture=!0;return this}},s5=Uint8Array.from(atob(Mb),n=>n.charCodeAt(0));function wb(n,e,t){if(e.getQueryParameter(n,e.QUERY_RESULT_AVAILABLE)){const s=e.getQueryParameter(n,e.QUERY_RESULT)/1e6;t.lastTime=t.lastTime===0?s:t.timeRollingAverage*t.lastTime+(1-t.timeRollingAverage)*s}else setTimeout(()=>{wb(n,e,t)},1)}class a5 extends Ai{constructor(e,t,i=512,r=512){super(),this.width=i,this.height=r,this.clear=!0,this.camera=t,this.scene=e,this.autosetGamma=!0,this.configuration=new Proxy({aoSamples:16,aoRadius:5,aoTones:0,denoiseSamples:8,denoiseRadius:12,distanceFalloff:1,intensity:5,denoiseIterations:2,renderMode:0,biasOffset:0,biasMultiplier:0,color:new Je(0,0,0),gammaCorrection:!0,logarithmicDepthBuffer:!1,screenSpaceRadius:!1,halfRes:!1,depthAwareUpsampling:!0,colorMultiply:!0,transparencyAware:!1,accumulate:!1},{set:(s,a,l)=>{const c=s[a];return s[a]=l,l.equals?l.equals(c)||this.firstFrame():c!==l&&this.firstFrame(),a==="aoSamples"&&c!==l&&this.configureAOPass(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),a==="denoiseSamples"&&c!==l&&this.configureDenoisePass(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),a==="halfRes"&&c!==l&&(this.configureAOPass(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),this.configureHalfResTargets(),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),this.setSize(this.width,this.height)),a==="depthAwareUpsampling"&&c!==l&&this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),a==="gammaCorrection"&&(this.autosetGamma=!1),a==="transparencyAware"&&c!==l&&(this.autoDetectTransparency=!1,this.configureTransparencyTarget()),!0}}),this.samples=[],this.samplesDenoise=[],this.autoDetectTransparency=!0,this.frames=0,this.lastViewMatrix=new vt,this.lastProjectionMatrix=new vt,this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer),this.configureSampleDependentPasses(),this.configureHalfResTargets(),this.detectTransparency(),this.configureTransparencyTarget(),this.copyQuad=new $u(new tn({uniforms:{tDiffuse:{value:null}},depthWrite:!1,vertexShader:`
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = vec4(position, 1);
            }
            `,fragmentShader:`
            uniform sampler2D tDiffuse;
            varying vec2 vUv;
            void main() {
                gl_FragColor = texture2D(tDiffuse, vUv);
            }
            `})),this.writeTargetInternal=new an(this.width,this.height,{minFilter:Et,magFilter:Et,depthBuffer:!1,format:Dn}),this.readTargetInternal=new an(this.width,this.height,{minFilter:Et,magFilter:Et,depthBuffer:!1,format:Dn}),this.outputTargetInternal=new an(this.width,this.height,{minFilter:Et,magFilter:Et,depthBuffer:!1}),this.accumulationRenderTarget=new an(this.width,this.height,{minFilter:Et,magFilter:Et,depthBuffer:!1,format:Dn,type:Tr,stencilBuffer:!1,depthBuffer:!1,alpha:!0}),this.accumulationQuad=new $u(new tn({uniforms:{frame:{value:0},tDiffuse:{value:null}},transparent:!0,opacity:1,vertexShader:`
             varying vec2 vUv;
             void main() {
                 vUv = uv;
                 gl_Position = vec4(position, 1);
             }`,fragmentShader:`
             uniform sampler2D tDiffuse;
             uniform float frame;
                varying vec2 vUv;
                void main() {
                    vec4 color = texture2D(tDiffuse, vUv);
                    gl_FragColor = vec4(color.rgb, 1.0 / (frame + 1.0));
                }
                `})),this.bluenoise=new ho(s5,128,128),this.bluenoise.colorSpace=Ha,this.bluenoise.wrapS=Ga,this.bluenoise.wrapT=Ga,this.bluenoise.minFilter=$t,this.bluenoise.magFilter=$t,this.bluenoise.needsUpdate=!0,this.lastTime=0,this.timeRollingAverage=.99,this.needsDepthTexture=!0,this.needsSwap=!0,this._r=new _e,this._c=new Je}configureHalfResTargets(){this.firstFrame(),this.configuration.halfRes?(this.depthDownsampleTarget=new r5(this.width/2,this.height/2,2),this.depthDownsampleTarget.textures=this.depthDownsampleTarget.texture,this.depthDownsampleTarget.textures[0].format=dv,this.depthDownsampleTarget.textures[0].type=li,this.depthDownsampleTarget.textures[0].minFilter=$t,this.depthDownsampleTarget.textures[0].magFilter=$t,this.depthDownsampleTarget.textures[0].depthBuffer=!1,this.depthDownsampleTarget.textures[1].format=Dn,this.depthDownsampleTarget.textures[1].type=Tr,this.depthDownsampleTarget.textures[1].minFilter=$t,this.depthDownsampleTarget.textures[1].magFilter=$t,this.depthDownsampleTarget.textures[1].depthBuffer=!1,this.depthDownsampleQuad=new $u(new tn(n5))):(this.depthDownsampleTarget&&(this.depthDownsampleTarget.dispose(),this.depthDownsampleTarget=null),this.depthDownsampleQuad&&(this.depthDownsampleQuad.dispose(),this.depthDownsampleQuad=null))}detectTransparency(){if(this.autoDetectTransparency){let e=!1;this.scene.traverse(t=>{t.material&&t.material.transparent&&(e=!0)}),e&&(this.configuration.transparencyAware=!0)}}configureTransparencyTarget(){this.configuration.transparencyAware?(this.transparencyRenderTargetDWFalse=new an(this.width,this.height,{minFilter:Et,magFilter:$t,type:Tr,format:Dn}),this.transparencyRenderTargetDWTrue=new an(this.width,this.height,{minFilter:Et,magFilter:$t,type:Tr,format:Dn}),this.transparencyRenderTargetDWTrue.depthTexture=new Lp(this.width,this.height,za),this.depthCopyPass=new $u(new tn({uniforms:{depthTexture:{value:this.depthTexture}},vertexShader:`
            varying vec2 vUv;
            void main() {
                vUv = uv;
                gl_Position = vec4(position, 1);
            }`,fragmentShader:`
            uniform sampler2D depthTexture;
            varying vec2 vUv;
            void main() {
               gl_FragDepth = texture2D(depthTexture, vUv).r + 0.00001;
               gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
            }
            `}))):(this.transparencyRenderTargetDWFalse&&(this.transparencyRenderTargetDWFalse.dispose(),this.transparencyRenderTargetDWFalse=null),this.transparencyRenderTargetDWTrue&&(this.transparencyRenderTargetDWTrue.dispose(),this.transparencyRenderTargetDWTrue=null),this.depthCopyPass&&(this.depthCopyPass.dispose(),this.depthCopyPass=null))}renderTransparency(e){const t=this.scene.background,i=e.getClearColor(new Je),r=e.getClearAlpha(),s=new Map,a=e.autoClearDepth;this.scene.traverse(l=>{s.set(l,l.visible)}),this.scene.background=null,e.autoClearDepth=!1,e.setClearColor(new Je(0,0,0),0),this.depthCopyPass.material.uniforms.depthTexture.value=this.depthTexture,e.setRenderTarget(this.transparencyRenderTargetDWFalse),this.scene.traverse(l=>{l.material&&(l.visible=s.get(l)&&(l.material.transparent&&!l.material.depthWrite&&!l.userData.treatAsOpaque||!!l.userData.cannotReceiveAO))}),e.clear(!0,!0,!0),this.depthCopyPass.render(e),e.render(this.scene,this.camera),e.setRenderTarget(this.transparencyRenderTargetDWTrue),this.scene.traverse(l=>{l.material&&(l.visible=s.get(l)&&l.material.transparent&&l.material.depthWrite&&!l.userData.treatAsOpaque)}),e.clear(!0,!0,!0),this.depthCopyPass.render(e),e.render(this.scene,this.camera),this.scene.traverse(l=>{l.visible=s.get(l)}),e.setClearColor(i,r),this.scene.background=t,e.autoClearDepth=a}configureSampleDependentPasses(){this.configureAOPass(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera)}configureAOPass(e=!1,t=!1){this.firstFrame(),this.samples=this.generateHemisphereSamples(this.configuration.aoSamples);const i={...$z};i.fragmentShader=i.fragmentShader.replace("16",this.configuration.aoSamples).replace("16.0",this.configuration.aoSamples+".0"),e&&(i.fragmentShader=`#define LOGDEPTH
`+i.fragmentShader),t&&(i.fragmentShader=`#define ORTHO
`+i.fragmentShader),this.configuration.halfRes&&(i.fragmentShader=`#define HALFRES
`+i.fragmentShader),this.effectShaderQuad?(this.effectShaderQuad.material.dispose(),this.effectShaderQuad.material=new tn(i)):this.effectShaderQuad=new $u(new tn(i))}configureDenoisePass(e=!1,t=!1){this.firstFrame(),this.samplesDenoise=this.generateDenoiseSamples(this.configuration.denoiseSamples,11);const i={...t5};i.fragmentShader=i.fragmentShader.replace("16",this.configuration.denoiseSamples),e&&(i.fragmentShader=`#define LOGDEPTH
`+i.fragmentShader),t&&(i.fragmentShader=`#define ORTHO
`+i.fragmentShader),this.poissonBlurQuad?(this.poissonBlurQuad.material.dispose(),this.poissonBlurQuad.material=new tn(i)):this.poissonBlurQuad=new $u(new tn(i))}configureEffectCompositer(e=!1,t=!1){this.firstFrame();const i={...e5};e&&(i.fragmentShader=`#define LOGDEPTH
`+i.fragmentShader),t&&(i.fragmentShader=`#define ORTHO
`+i.fragmentShader),this.configuration.halfRes&&this.configuration.depthAwareUpsampling&&(i.fragmentShader=`#define HALFRES
`+i.fragmentShader),this.effectCompositerQuad?(this.effectCompositerQuad.material.dispose(),this.effectCompositerQuad.material=new tn(i)):this.effectCompositerQuad=new $u(new tn(i))}generateHemisphereSamples(e){const t=[];for(let i=0;i<e;i++){const r=2.399963*i,s=Math.sqrt(i+.5)/Math.sqrt(e),a=s*Math.cos(r),l=s*Math.sin(r),c=Math.sqrt(1-(a*a+l*l));t.push(new Q(a,l,c))}return t}generateDenoiseSamples(e,t){const i=2*Math.PI*t/e,r=1/e,s=r,a=[];let l=r,c=0;for(let f=0;f<e;f++)a.push(new _e(Math.cos(c),Math.sin(c)).multiplyScalar(Math.pow(l,.75))),l+=s,c+=i;return a}setSize(e,t){this.firstFrame(),this.width=e,this.height=t;const i=this.configuration.halfRes?.5:1;this.writeTargetInternal.setSize(e*i,t*i),this.readTargetInternal.setSize(e*i,t*i),this.accumulationRenderTarget.setSize(e*i,t*i),this.configuration.halfRes&&this.depthDownsampleTarget.setSize(e*i,t*i),this.configuration.transparencyAware&&(this.transparencyRenderTargetDWFalse.setSize(e,t),this.transparencyRenderTargetDWTrue.setSize(e,t)),this.outputTargetInternal.setSize(e,t)}setDepthTexture(e){this.depthTexture=e}firstFrame(){this.needsFrame=!0}render(e,t,i){const r=e.xr.enabled;e.xr.enabled=!1,e.capabilities.logarithmicDepthBuffer!==this.configuration.logarithmicDepthBuffer&&(this.configuration.logarithmicDepthBuffer=e.capabilities.logarithmicDepthBuffer,this.configureAOPass(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),this.configureDenoisePass(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera),this.configureEffectCompositer(this.configuration.logarithmicDepthBuffer,this.camera.isOrthographicCamera)),this.detectTransparency(),(t.texture.type!==this.outputTargetInternal.texture.type||t.texture.format!==this.outputTargetInternal.texture.format)&&(this.outputTargetInternal.texture.type=t.texture.type,this.outputTargetInternal.texture.format=t.texture.format,this.outputTargetInternal.texture.needsUpdate=!0),this.camera.updateMatrixWorld(),this.lastViewMatrix.equals(this.camera.matrixWorldInverse)&&this.lastProjectionMatrix.equals(this.camera.projectionMatrix)&&this.configuration.accumulate&&!this.needsFrame?this.frame++:(this.configuration.accumulate&&(e.setRenderTarget(this.accumulationRenderTarget),e.clear(!0,!0,!0)),this.frame=0,this.needsFrame=!1),this.lastViewMatrix.copy(this.camera.matrixWorldInverse),this.lastProjectionMatrix.copy(this.camera.projectionMatrix);let s,a,l;this.debugMode&&(s=e.getContext(),a=s.getExtension("EXT_disjoint_timer_query_webgl2"),a===null&&(console.error("EXT_disjoint_timer_query_webgl2 not available, disabling debug mode."),this.debugMode=!1)),this.debugMode&&(l=s.createQuery(),s.beginQuery(a.TIME_ELAPSED_EXT,l)),this.configuration.transparencyAware&&this.renderTransparency(e),this._r.set(this.width,this.height);let c=this.configuration.aoRadius;if(this.configuration.halfRes&&this.configuration.screenSpaceRadius&&(c*=.5),this.frame<1024/this.configuration.aoSamples){this.configuration.halfRes&&(e.setRenderTarget(this.depthDownsampleTarget),this.depthDownsampleQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.depthDownsampleQuad.material.uniforms.resolution.value=this._r,this.depthDownsampleQuad.material.uniforms.near.value=this.camera.near,this.depthDownsampleQuad.material.uniforms.far.value=this.camera.far,this.depthDownsampleQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.depthDownsampleQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.depthDownsampleQuad.material.uniforms.logDepth.value=this.configuration.logarithmicDepthBuffer,this.depthDownsampleQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.depthDownsampleQuad.render(e)),this.effectShaderQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectShaderQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[0]:this.depthTexture,this.effectShaderQuad.material.uniforms.sceneNormal.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[1]:null,this.effectShaderQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.effectShaderQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.effectShaderQuad.material.uniforms.projViewMat.value=this.camera.projectionMatrix.clone().multiply(this.camera.matrixWorldInverse.clone()),this.effectShaderQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectShaderQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectShaderQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new Q),this.effectShaderQuad.material.uniforms.biasAdjustment.value=new _e(this.configuration.biasOffset,this.configuration.biasMultiplier),this.effectShaderQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.effectShaderQuad.material.uniforms.time.value=performance.now()/1e3,this.effectShaderQuad.material.uniforms.samples.value=this.samples,this.effectShaderQuad.material.uniforms.bluenoise.value=this.bluenoise,this.effectShaderQuad.material.uniforms.radius.value=c,this.effectShaderQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectShaderQuad.material.uniforms.near.value=this.camera.near,this.effectShaderQuad.material.uniforms.far.value=this.camera.far,this.effectShaderQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectShaderQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectShaderQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectShaderQuad.material.uniforms.frame.value=this.frame,e.setRenderTarget(this.writeTargetInternal),this.effectShaderQuad.render(e);for(let p=0;p<this.configuration.denoiseIterations;p++)[this.writeTargetInternal,this.readTargetInternal]=[this.readTargetInternal,this.writeTargetInternal],this.poissonBlurQuad.material.uniforms.tDiffuse.value=this.readTargetInternal.texture,this.poissonBlurQuad.material.uniforms.sceneDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[0]:this.depthTexture,this.poissonBlurQuad.material.uniforms.projMat.value=this.camera.projectionMatrix,this.poissonBlurQuad.material.uniforms.viewMat.value=this.camera.matrixWorldInverse,this.poissonBlurQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.poissonBlurQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.poissonBlurQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new Q),this.poissonBlurQuad.material.uniforms.resolution.value=this.configuration.halfRes?this._r.clone().multiplyScalar(.5).floor():this._r,this.poissonBlurQuad.material.uniforms.time.value=performance.now()/1e3,this.poissonBlurQuad.material.uniforms.blueNoise.value=this.bluenoise,this.poissonBlurQuad.material.uniforms.radius.value=this.configuration.denoiseRadius*(this.configuration.halfRes?.5:1),this.poissonBlurQuad.material.uniforms.worldRadius.value=c,this.poissonBlurQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.poissonBlurQuad.material.uniforms.index.value=p,this.poissonBlurQuad.material.uniforms.poissonDisk.value=this.samplesDenoise,this.poissonBlurQuad.material.uniforms.near.value=this.camera.near,this.poissonBlurQuad.material.uniforms.far.value=this.camera.far,this.poissonBlurQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.poissonBlurQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,e.setRenderTarget(this.writeTargetInternal),this.poissonBlurQuad.render(e);e.setRenderTarget(this.accumulationRenderTarget);const f=e.autoClear;e.autoClear=!1,this.accumulationQuad.material.uniforms.tDiffuse.value=this.writeTargetInternal.texture,this.accumulationQuad.material.uniforms.frame.value=this.frame,this.accumulationQuad.render(e),e.autoClear=f}this.configuration.transparencyAware&&(this.effectCompositerQuad.material.uniforms.transparencyDWFalse.value=this.transparencyRenderTargetDWFalse.texture,this.effectCompositerQuad.material.uniforms.transparencyDWTrue.value=this.transparencyRenderTargetDWTrue.texture,this.effectCompositerQuad.material.uniforms.transparencyDWTrueDepth.value=this.transparencyRenderTargetDWTrue.depthTexture,this.effectCompositerQuad.material.uniforms.transparencyAware.value=!0),this.effectCompositerQuad.material.uniforms.sceneDiffuse.value=t.texture,this.effectCompositerQuad.material.uniforms.sceneDepth.value=this.depthTexture,this.effectCompositerQuad.material.uniforms.aoTones.value=this.configuration.aoTones,this.effectCompositerQuad.material.uniforms.near.value=this.camera.near,this.effectCompositerQuad.material.uniforms.far.value=this.camera.far,this.effectCompositerQuad.material.uniforms.projectionMatrixInv.value=this.camera.projectionMatrixInverse,this.effectCompositerQuad.material.uniforms.viewMatrixInv.value=this.camera.matrixWorld,this.effectCompositerQuad.material.uniforms.logDepth.value=e.capabilities.logarithmicDepthBuffer,this.effectCompositerQuad.material.uniforms.ortho.value=this.camera.isOrthographicCamera,this.effectCompositerQuad.material.uniforms.downsampledDepth.value=this.configuration.halfRes?this.depthDownsampleTarget.textures[0]:this.depthTexture,this.effectCompositerQuad.material.uniforms.resolution.value=this._r,this.effectCompositerQuad.material.uniforms.blueNoise.value=this.bluenoise,this.effectCompositerQuad.material.uniforms.intensity.value=this.configuration.intensity,this.effectCompositerQuad.material.uniforms.renderMode.value=this.configuration.renderMode,this.effectCompositerQuad.material.uniforms.screenSpaceRadius.value=this.configuration.screenSpaceRadius,this.effectCompositerQuad.material.uniforms.radius.value=c,this.effectCompositerQuad.material.uniforms.distanceFalloff.value=this.configuration.distanceFalloff,this.effectCompositerQuad.material.uniforms.gammaCorrection.value=this.autosetGamma?this.renderToScreen:this.configuration.gammaCorrection,this.effectCompositerQuad.material.uniforms.tDiffuse.value=this.accumulationRenderTarget.texture,this.effectCompositerQuad.material.uniforms.color.value=this._c.copy(this.configuration.color).convertSRGBToLinear(),this.effectCompositerQuad.material.uniforms.colorMultiply.value=this.configuration.colorMultiply,this.effectCompositerQuad.material.uniforms.cameraPos.value=this.camera.getWorldPosition(new Q),this.effectCompositerQuad.material.uniforms.fog.value=!!this.scene.fog,this.scene.fog&&(this.scene.fog.isFog?(this.effectCompositerQuad.material.uniforms.fogExp.value=!1,this.effectCompositerQuad.material.uniforms.fogNear.value=this.scene.fog.near,this.effectCompositerQuad.material.uniforms.fogFar.value=this.scene.fog.far):this.scene.fog.isFogExp2?(this.effectCompositerQuad.material.uniforms.fogExp.value=!0,this.effectCompositerQuad.material.uniforms.fogDensity.value=this.scene.fog.density):console.error(`Unsupported fog type ${this.scene.fog.constructor.name} in SSAOPass.`)),e.setRenderTarget(this.outputTargetInternal),this.effectCompositerQuad.render(e),e.setRenderTarget(this.renderToScreen?null:i),this.copyQuad.material.uniforms.tDiffuse.value=this.outputTargetInternal.texture,this.copyQuad.render(e),this.debugMode&&(s.endQuery(a.TIME_ELAPSED_EXT),wb(l,s,this)),e.xr.enabled=r}enableDebugMode(){this.debugMode=!0}disableDebugMode(){this.debugMode=!1}setDisplayMode(e){this.configuration.renderMode=["Combined","AO","No AO","Split","Split AO"].indexOf(e)}setQualityMode(e){e==="Performance"?(this.configuration.aoSamples=8,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Low"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=4,this.configuration.denoiseRadius=12):e==="Medium"?(this.configuration.aoSamples=16,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=12):e==="High"?(this.configuration.aoSamples=64,this.configuration.denoiseSamples=8,this.configuration.denoiseRadius=6):e==="Ultra"&&(this.configuration.aoSamples=64,this.configuration.denoiseSamples=16,this.configuration.denoiseRadius=6)}}Uint8Array.from(atob(Mb),n=>n.charCodeAt(0));function Px(){return Px=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Px.apply(this,arguments)}var o5=`#define GLSLIFY 1
uniform float blur;uniform float blurSharpness;uniform int blurKernel;vec3 denoise(vec3 center,sampler2D tex,vec2 uv,vec2 invTexSize,float blur,float blurSharpness,int blurKernel){vec3 color;float total;vec3 col;float weight;for(int x=-blurKernel;x<=blurKernel;x++){for(int y=-blurKernel;y<=blurKernel;y++){col=textureLod(tex,uv+vec2(x,y)*invTexSize,0.).rgb;weight=1.0-abs(dot(col-center,vec3(0.25)));weight=pow(weight,blurSharpness);color+=col*weight;total+=weight;}}return color/total;}`,l5=`#define GLSLIFY 1
#define MODE_DEFAULT 0
#define MODE_REFLECTIONS 1
#define MODE_RAW_REFLECTION 2
#define MODE_BLURRED_REFLECTIONS 3
#define MODE_INPUT 4
#define MODE_BLUR_MIX 5
#define FLOAT_EPSILON 0.00001
uniform sampler2D inputTexture;uniform sampler2D reflectionsTexture;uniform float samples;
#include <boxBlur>
void mainImage(const in vec4 inputColor,const in vec2 uv,out vec4 outputColor){vec4 reflectionsTexel=texture2D(reflectionsTexture,vUv);ivec2 size=textureSize(reflectionsTexture,0);vec2 invTexSize=1./vec2(size.x,size.y);vec3 reflectionClr=reflectionsTexel.xyz;if(blur>FLOAT_EPSILON){vec3 blurredReflectionsColor=denoise(reflectionsTexel.rgb,reflectionsTexture,vUv,invTexSize,blur,blurSharpness,blurKernel);reflectionClr=mix(reflectionClr,blurredReflectionsColor.rgb,blur);}
#if RENDER_MODE == MODE_DEFAULT
outputColor=vec4(inputColor.rgb+reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_REFLECTIONS
outputColor=vec4(reflectionClr,1.0);
#endif
#if RENDER_MODE == MODE_RAW_REFLECTION
outputColor=vec4(reflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLURRED_REFLECTIONS
outputColor=vec4(blurredReflectionsTexel.xyz,1.0);
#endif
#if RENDER_MODE == MODE_INPUT
outputColor=vec4(inputColor.xyz,1.0);
#endif
#if RENDER_MODE == MODE_BLUR_MIX
outputColor=vec4(vec3(blur),1.0);
#endif
}`,Tb=`#define GLSLIFY 1
vec3 getViewPosition(const float depth){float clipW=_projectionMatrix[2][3]*depth+_projectionMatrix[3][3];vec4 clipPosition=vec4((vec3(vUv,depth)-0.5)*2.0,1.0);clipPosition*=clipW;return(_inverseProjectionMatrix*clipPosition).xyz;}float getViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return perspectiveDepthToViewZ(depth,cameraNear,cameraFar);
#else
return orthographicDepthToViewZ(depth,cameraNear,cameraFar);
#endif
}vec3 screenSpaceToWorldSpace(const vec2 uv,const float depth){vec4 ndc=vec4((uv.x-0.5)*2.0,(uv.y-0.5)*2.0,(depth-0.5)*2.0,1.0);vec4 clip=_inverseProjectionMatrix*ndc;vec4 view=cameraMatrixWorld*(clip/clip.w);return view.xyz;}
#define Scale (vec3(0.8, 0.8, 0.8))
#define K (19.19)
vec3 hash(vec3 a){a=fract(a*Scale);a+=dot(a,a.yxz+K);return fract((a.xxy+a.yxx)*a.zyx);}float fresnel_dielectric_cos(float cosi,float eta){float c=abs(cosi);float g=eta*eta-1.0+c*c;float result;if(g>0.0){g=sqrt(g);float A=(g-c)/(g+c);float B=(c*(g+c)-1.0)/(c*(g-c)+1.0);result=0.5*A*A*(1.0+B*B);}else{result=1.0;}return result;}float fresnel_dielectric(vec3 Incoming,vec3 Normal,float eta){float cosine=dot(Incoming,Normal);return min(1.0,5.0*fresnel_dielectric_cos(cosine,eta));}`,u5=`#define GLSLIFY 1
#define INV_EULER 0.36787944117144233
alpha=velocityDisocclusion<FLOAT_EPSILON ?(alpha+0.0075): 0.0;alpha=clamp(alpha,0.0,1.0);bool needsBlur=!didReproject||velocityDisocclusion>0.5;
#ifdef boxBlur
if(needsBlur)inputColor=boxBlurredColor;
#endif
if(alpha==1.0){outputColor=accumulatedColor;}else{float m=mix(alpha,1.0,blend);if(needsBlur)m=0.0;outputColor=accumulatedColor*m+inputColor*(1.0-m);}`;class c5 extends tn{constructor(){super({type:"MRTMaterial",defines:{USE_UV:"",TEMPORAL_RESOLVE:""},uniforms:{opacity:new Ee(1),normalMap:new Ee(null),normalScale:new Ee(new _e(1,1)),uvTransform:new Ee(new sn),roughness:new Ee(1),roughnessMap:new Ee(null)},vertexShader:`
                #ifdef USE_MRT
                 varying vec2 vHighPrecisionZW;
                #endif
                #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <common>
                #include <uv_pars_vertex>
                #include <displacementmap_pars_vertex>
                #include <normal_pars_vertex>
                #include <morphtarget_pars_vertex>
                #include <skinning_pars_vertex>
                #include <logdepthbuf_pars_vertex>
                #include <clipping_planes_pars_vertex>
                void main() {
                    #include <uv_vertex>
                    #include <beginnormal_vertex>
                    #include <morphnormal_vertex>
                    #include <skinbase_vertex>
                    #include <skinnormal_vertex>
                    #include <defaultnormal_vertex>
                    #include <normal_vertex>
                    #include <begin_vertex>
                    #include <morphtarget_vertex>
                    #include <skinning_vertex>
                    #include <displacementmap_vertex>
                    #include <project_vertex>
                    #include <logdepthbuf_vertex>
                    #include <clipping_planes_vertex>
                    #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                        vViewPosition = - mvPosition.xyz;
                    #endif
                    #ifdef USE_MRT
                        vHighPrecisionZW = gl_Position.zw;
                    #endif 
                    #ifdef USE_UV
                        vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
                    #endif
                }
            `,fragmentShader:`
                 #define NORMAL
                #if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )
                    varying vec3 vViewPosition;
                #endif
                #include <packing>
                #include <uv_pars_fragment>
                #include <normal_pars_fragment>
                #include <bumpmap_pars_fragment>
                #include <normalmap_pars_fragment>
                #include <logdepthbuf_pars_fragment>
                #include <clipping_planes_pars_fragment>
                #include <roughnessmap_pars_fragment>
                
                #ifdef USE_MRT
                layout(location = 0) out vec4 gNormal;
                layout(location = 1) out vec4 gDepth;
                
                varying vec2 vHighPrecisionZW;
                #endif
                uniform float roughness;
                void main() {
                    #include <clipping_planes_fragment>
                    #include <logdepthbuf_fragment>
                    #include <normal_fragment_begin>
                    #include <normal_fragment_maps>

                    float roughnessFactor = roughness;
                    
                    if(roughness > 10.0e9){
                        roughnessFactor = 1.;
                    }else{
                        #ifdef useRoughnessMap
                            vec4 texelRoughness = texture2D( roughnessMap, vUv );
                            // reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture
                            roughnessFactor *= texelRoughness.g;
                        #endif
                    }

                    vec3 normalColor = packNormalToRGB( normal );
                    #ifdef USE_MRT
                        float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        vec4 depthColor = packDepthToRGBA( fragCoordZ );
                        gNormal = vec4( normalColor, roughnessFactor );
                        gDepth = depthColor;
                    #else
                        gl_FragColor = vec4(normalColor, roughnessFactor);
                    #endif
                }
            `,toneMapped:!1}),this.normalMapType=cl,this.normalScale=new _e(1,1),Object.defineProperty(this,"glslVersion",{get(){return"USE_MRT"in this.defines?$g:null},set(e){}})}}var f5=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,h5=`#define GLSLIFY 1
varying vec2 vUv;uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D normalTexture;uniform sampler2D depthTexture;uniform sampler2D envMap;uniform mat4 _projectionMatrix;uniform mat4 _inverseProjectionMatrix;uniform mat4 cameraMatrixWorld;uniform float cameraNear;uniform float cameraFar;uniform float rayDistance;uniform float intensity;uniform float maxDepthDifference;uniform float roughnessFade;uniform float maxRoughness;uniform float fade;uniform float thickness;uniform float ior;uniform float samples;uniform float jitter;uniform float jitterRoughness;
#define INVALID_RAY_COORDS vec2(-1.0);
#define EARLY_OUT_COLOR vec4(0.0, 0.0, 0.0, 1.0)
#define FLOAT_EPSILON 0.00001
float nearMinusFar;float nearMulFar;float farMinusNear;
#include <packing>
#include <helperFunctions>
vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference);float fastGetViewZ(const in float depth);vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness);void main(){vec4 depthTexel=textureLod(depthTexture,vUv,0.0);if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON){gl_FragColor=EARLY_OUT_COLOR;return;}float unpackedDepth=unpackRGBAToDepth(depthTexel);vec4 normalTexel=textureLod(normalTexture,vUv,0.0);float roughness=normalTexel.a;float specular=1.0-roughness;nearMinusFar=cameraNear-cameraFar;nearMulFar=cameraNear*cameraFar;farMinusNear=cameraFar-cameraNear;normalTexel.rgb=unpackRGBToNormal(normalTexel.rgb);float depth=fastGetViewZ(unpackedDepth);vec3 viewPos=getViewPosition(depth);vec3 viewDir=normalize(viewPos);vec3 viewNormal=normalTexel.xyz;vec3 worldPos=screenSpaceToWorldSpace(vUv,unpackedDepth);vec3 jitt=vec3(0.0);if(jitterRoughness!=0.0||jitter!=0.0){vec3 randomJitter=hash(50.0*samples*worldPos)-0.5;float spread=((2.0-specular)+roughness*jitterRoughness);float jitterMix=jitter*0.25+jitterRoughness*roughness;if(jitterMix>1.0)jitterMix=1.0;jitt=mix(vec3(0.0),randomJitter*spread,jitterMix);}viewNormal+=jitt;float fresnelFactor=fresnel_dielectric(viewDir,viewNormal,ior);vec3 iblRadiance=getIBLRadiance(-viewDir,viewNormal,0.)*fresnelFactor;float lastFrameAlpha=textureLod(accumulatedTexture,vUv,0.0).a;if(roughness>maxRoughness||(roughness>1.0-FLOAT_EPSILON&&roughnessFade>1.0-FLOAT_EPSILON)){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec3 reflected=reflect(viewDir,viewNormal);vec3 rayDir=reflected*-viewPos.z;vec3 hitPos=viewPos;float rayHitDepthDifference;vec2 coords=RayMarch(rayDir,hitPos,rayHitDepthDifference);if(coords.x==-1.0){gl_FragColor=vec4(iblRadiance,lastFrameAlpha);return;}vec4 SSRTexel=textureLod(inputTexture,coords.xy,0.0);vec4 SSRTexelReflected=textureLod(accumulatedTexture,coords.xy,0.0);vec3 SSR=SSRTexel.rgb+SSRTexelReflected.rgb;float roughnessFactor=mix(specular,1.0,max(0.0,1.0-roughnessFade));vec2 coordsNDC=(coords.xy*2.0-1.0);float screenFade=0.1;float maxDimension=min(1.0,max(abs(coordsNDC.x),abs(coordsNDC.y)));float reflectionIntensity=1.0-(max(0.0,maxDimension-screenFade)/(1.0-screenFade));reflectionIntensity=max(0.,reflectionIntensity);vec3 finalSSR=mix(iblRadiance,SSR,reflectionIntensity)*roughnessFactor;if(fade!=0.0){vec3 hitWorldPos=screenSpaceToWorldSpace(coords,rayHitDepthDifference);float reflectionDistance=distance(hitWorldPos,worldPos)+1.0;float opacity=1.0/(reflectionDistance*fade*0.1);if(opacity>1.0)opacity=1.0;finalSSR*=opacity;}finalSSR*=fresnelFactor*intensity;finalSSR=min(vec3(1.0),finalSSR);float alpha=hitPos.z==1.0 ? 1.0 : SSRTexelReflected.a;alpha=min(lastFrameAlpha,alpha);gl_FragColor=vec4(finalSSR,alpha);}vec2 RayMarch(vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){dir=normalize(dir);dir*=rayDistance/float(steps);float depth;vec4 projectedCoord;vec4 lastProjectedCoord;float unpackedDepth;vec4 depthTexel;for(int i=0;i<steps;i++){hitPos+=dir;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;
#ifndef missedRays
if(projectedCoord.x<0.0||projectedCoord.x>1.0||projectedCoord.y<0.0||projectedCoord.y>1.0){return INVALID_RAY_COORDS;}
#endif
depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;if(rayHitDepthDifference>=0.0&&rayHitDepthDifference<thickness){
#if refineSteps == 0
if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;
#else
return BinarySearch(dir,hitPos,rayHitDepthDifference);
#endif
}
#ifndef missedRays
if(hitPos.z>0.0){return INVALID_RAY_COORDS;}
#endif
lastProjectedCoord=projectedCoord;}hitPos.z=1.0;
#ifndef missedRays
return INVALID_RAY_COORDS;
#endif
rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}vec2 BinarySearch(in vec3 dir,inout vec3 hitPos,inout float rayHitDepthDifference){float depth;vec4 projectedCoord;vec2 lastMinProjectedCoordXY;float unpackedDepth;vec4 depthTexel;for(int i=0;i<refineSteps;i++){projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;depthTexel=textureLod(depthTexture,projectedCoord.xy,0.0);unpackedDepth=unpackRGBAToDepth(depthTexel);depth=fastGetViewZ(unpackedDepth);rayHitDepthDifference=depth-hitPos.z;dir*=0.5;if(rayHitDepthDifference>0.0){hitPos-=dir;}else{hitPos+=dir;}}if(dot(depthTexel.rgb,depthTexel.rgb)<FLOAT_EPSILON)return INVALID_RAY_COORDS;if(abs(rayHitDepthDifference)>maxDepthDifference)return INVALID_RAY_COORDS;projectedCoord=_projectionMatrix*vec4(hitPos,1.0);projectedCoord.xy/=projectedCoord.w;projectedCoord.xy=projectedCoord.xy*0.5+0.5;rayHitDepthDifference=unpackedDepth;return projectedCoord.xy;}float fastGetViewZ(const in float depth){
#ifdef PERSPECTIVE_CAMERA
return nearMulFar/(farMinusNear*depth-cameraFar);
#else
return depth*nearMinusFar-cameraNear;
#endif
}
#include <common>
#include <cube_uv_reflection_fragment>
vec3 getIBLRadiance(const in vec3 viewDir,const in vec3 normal,const in float roughness){
#if defined(ENVMAP_TYPE_CUBE_UV)
vec3 reflectVec=reflect(-viewDir,normal);reflectVec=normalize(mix(reflectVec,normal,roughness*roughness));reflectVec=inverseTransformDirection(reflectVec,viewMatrix);vec4 envMapColor=textureCubeUV(envMap,reflectVec,roughness);return envMapColor.rgb*intensity;
#else
return vec3(0.0);
#endif
}`;class d5 extends tn{constructor(){super({type:"ReflectionsMaterial",uniforms:{inputTexture:new Ee(null),accumulatedTexture:new Ee(null),normalTexture:new Ee(null),depthTexture:new Ee(null),_projectionMatrix:new Ee(new vt),_inverseProjectionMatrix:new Ee(new vt),cameraMatrixWorld:new Ee(new vt),cameraNear:new Ee(0),cameraFar:new Ee(0),rayDistance:new Ee(0),intensity:new Ee(0),roughnessFade:new Ee(0),fade:new Ee(0),thickness:new Ee(0),ior:new Ee(0),maxDepthDifference:new Ee(0),jitter:new Ee(0),jitterRoughness:new Ee(0),maxRoughness:new Ee(0),samples:new Ee(0),envMap:new Ee(null),envMapPosition:new Ee(new Q),envMapSize:new Ee(new Q),viewMatrix:new Ee(new vt)},defines:{steps:20,refineSteps:5,CUBEUV_TEXEL_WIDTH:0,CUBEUV_TEXEL_HEIGHT:0,CUBEUV_MAX_MIP:0,vWorldPosition:"worldPos"},fragmentShader:h5.replace("#include <helperFunctions>",Tb),vertexShader:f5,toneMapped:!1,depthWrite:!1,depthTest:!1})}}const Eb=n=>{const e=[n],t=[];for(;e.length!==0;){const i=e.shift();i.material&&t.push(i);for(const r of i.children)r.visible&&e.push(r)}return t},p5=n=>{const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}},Jw=(n,e,t)=>{n.uniforms.envMap.value=e;const i=p5({envMapCubeUVHeight:t});n.defines.ENVMAP_TYPE_CUBE_UV="",n.defines.CUBEUV_TEXEL_WIDTH=i.texelWidth,n.defines.CUBEUV_TEXEL_HEIGHT=i.texelHeight,n.defines.CUBEUV_MAX_MIP=i.maxMip+".0",n.needsUpdate=!0},m5=()=>{try{const n=document.createElement("canvas");return!!(window.WebGL2RenderingContext&&n.getContext("webgl2"))}catch{return!1}};class g5 extends Ai{constructor(e,t={}){super("ReflectionsPass"),this.ssrEffect=void 0,this.cachedMaterials=new WeakMap,this.USE_MRT=!1,this.webgl1DepthPass=null,this.visibleMeshes=[],this.ssrEffect=e,this._scene=e._scene,this._camera=e._camera,this.fullscreenMaterial=new d5,e._camera.isPerspectiveCamera&&(this.fullscreenMaterial.defines.PERSPECTIVE_CAMERA="");const i=t.width||typeof window<"u"?window.innerWidth:2e3,r=t.height||typeof window<"u"?window.innerHeight:1e3;this.renderTarget=new an(i,r,{minFilter:Et,magFilter:Et,type:Tr,depthBuffer:!1}),this.renderPass=new _h(this._scene,this._camera),this.USE_MRT=m5(),this.USE_MRT?(this.gBuffersRenderTarget=new RE(i,r,2,{minFilter:Et,magFilter:Et}),this.normalTexture=this.gBuffersRenderTarget.texture[0],this.depthTexture=this.gBuffersRenderTarget.texture[1]):(this.webgl1DepthPass=new W1(this._scene,this._camera),this.webgl1DepthPass.renderTarget.minFilter=Et,this.webgl1DepthPass.renderTarget.magFilter=Et,this.webgl1DepthPass.renderTarget.texture.minFilter=Et,this.webgl1DepthPass.renderTarget.texture.magFilter=Et,this.webgl1DepthPass.setSize(typeof window<"u"?window.innerWidth:2e3,typeof window<"u"?window.innerHeight:1e3),this.gBuffersRenderTarget=new an(i,r,{minFilter:Et,magFilter:Et}),this.normalTexture=this.gBuffersRenderTarget.texture,this.depthTexture=this.webgl1DepthPass.texture),this.fullscreenMaterial.uniforms.normalTexture.value=this.normalTexture,this.fullscreenMaterial.uniforms.depthTexture.value=this.depthTexture,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.uniforms.cameraMatrixWorld.value=this._camera.matrixWorld,this.fullscreenMaterial.uniforms._projectionMatrix.value=this._camera.projectionMatrix,this.fullscreenMaterial.uniforms._inverseProjectionMatrix.value=this._camera.projectionMatrixInverse}setSize(e,t){this.renderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.gBuffersRenderTarget.setSize(e*this.ssrEffect.resolutionScale,t*this.ssrEffect.resolutionScale),this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.ssrEffect.temporalResolvePass.accumulatedTexture,this.fullscreenMaterial.needsUpdate=!0}dispose(){this.renderTarget.dispose(),this.gBuffersRenderTarget.dispose(),this.renderPass.dispose(),this.USE_MRT||this.webgl1DepthPass.dispose(),this.fullscreenMaterial.dispose(),this.normalTexture=null,this.depthTexture=null,this.velocityTexture=null}keepMaterialMapUpdated(e,t,i,r){this.ssrEffect[r]?t[i]!==e[i]&&(e[i]=t[i],e.uniforms[i].value=t[i],t[i]?e.defines[r]="":delete e.defines[r],e.needsUpdate=!0):e[i]!==void 0&&(e[i]=void 0,e.uniforms[i].value=void 0,delete e.defines[r],e.needsUpdate=!0)}setMRTMaterialInScene(){this.visibleMeshes=Eb(this._scene);for(const e of this.visibleMeshes)if(e.material){const t=e.material;let[i,r]=this.cachedMaterials.get(e)||[];if(t!==i){r&&r.dispose(),r=new c5,this.USE_MRT&&(r.defines.USE_MRT=""),r.normalScale=t.normalScale,r.uniforms.normalScale.value=t.normalScale;const s=t.map||t.normalMap||t.roughnessMap||t.metalnessMap;s&&(r.uniforms.uvTransform.value=s.matrix),this.cachedMaterials.set(e,[t,r])}this.keepMaterialMapUpdated(r,t,"normalMap","useNormalMap"),this.keepMaterialMapUpdated(r,t,"roughnessMap","useRoughnessMap"),r.uniforms.roughness.value=this.ssrEffect.selection.size===0||this.ssrEffect.selection.has(e)?t.roughness||0:1e11,e.material=r}}unsetMRTMaterialInScene(){for(const t of this.visibleMeshes){var e;if(((e=t.material)==null?void 0:e.type)==="MRTMaterial"){t.visible=!0;const[i]=this.cachedMaterials.get(t);t.material=i}}}render(e,t){this.setMRTMaterialInScene(),e.setRenderTarget(this.gBuffersRenderTarget),this.renderPass.render(e,this.gBuffersRenderTarget),this.unsetMRTMaterialInScene(),this.USE_MRT||this.webgl1DepthPass.renderPass.render(e,this.webgl1DepthPass.renderTarget),this.fullscreenMaterial.uniforms.inputTexture.value=t.texture,this.fullscreenMaterial.uniforms.samples.value=this.ssrEffect.temporalResolvePass.samples,this.fullscreenMaterial.uniforms.cameraNear.value=this._camera.near,this.fullscreenMaterial.uniforms.cameraFar.value=this._camera.far,this.fullscreenMaterial.uniforms.viewMatrix.value.copy(this._camera.matrixWorldInverse),e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera)}}const $w={intensity:1,exponent:1,distance:10,fade:0,roughnessFade:1,thickness:10,ior:1.45,maxRoughness:1,maxDepthDifference:10,blend:.9,correction:1,correctionRadius:1,blur:.5,blurKernel:1,blurSharpness:10,jitter:0,jitterRoughness:0,steps:20,refineSteps:5,missedRays:!0,useNormalMap:!0,useRoughnessMap:!0,resolutionScale:1,velocityResolutionScale:1};var v5=`#define GLSLIFY 1
varying vec2 vUv;void main(){vUv=position.xy*0.5+0.5;gl_Position=vec4(position.xy,1.0,1.0);}`,y5=`#define GLSLIFY 1
uniform sampler2D inputTexture;uniform sampler2D accumulatedTexture;uniform sampler2D velocityTexture;uniform sampler2D lastVelocityTexture;uniform float blend;uniform float correction;uniform float exponent;uniform float samples;uniform vec2 invTexSize;uniform mat4 curInverseProjectionMatrix;uniform mat4 curCameraMatrixWorld;uniform mat4 prevInverseProjectionMatrix;uniform mat4 prevCameraMatrixWorld;varying vec2 vUv;
#define MAX_NEIGHBOR_DEPTH_DIFFERENCE 0.001
#define FLOAT_EPSILON 0.00001
#define FLOAT_ONE_MINUS_EPSILON 0.99999
vec3 transformexponent;vec3 undoColorTransformExponent;vec3 transformColor(vec3 color){if(exponent==1.0)return color;return pow(abs(color),transformexponent);}vec3 undoColorTransform(vec3 color){if(exponent==1.0)return color;return max(pow(abs(color),undoColorTransformExponent),vec3(0.0));}void main(){if(exponent!=1.0){transformexponent=vec3(1.0/exponent);undoColorTransformExponent=vec3(exponent);}vec4 inputTexel=textureLod(inputTexture,vUv,0.0);vec4 accumulatedTexel;vec3 inputColor=transformColor(inputTexel.rgb);vec3 accumulatedColor;float alpha=inputTexel.a;float velocityDisocclusion;bool didReproject=false;
#ifdef boxBlur
vec3 boxBlurredColor=inputTexel.rgb;
#endif
vec4 velocity=textureLod(velocityTexture,vUv,0.0);bool isMoving=alpha<1.0||dot(velocity.xy,velocity.xy)>0.0;if(isMoving){vec3 minNeighborColor=inputColor;vec3 maxNeighborColor=inputColor;vec3 col;vec2 neighborUv;vec2 reprojectedUv=vUv-velocity.xy;vec4 lastVelocity=textureLod(lastVelocityTexture,reprojectedUv,0.0);float depth=velocity.b;float closestDepth=depth;float lastClosestDepth=lastVelocity.b;float neighborDepth;float lastNeighborDepth;for(int x=-correctionRadius;x<=correctionRadius;x++){for(int y=-correctionRadius;y<=correctionRadius;y++){if(x!=0||y!=0){neighborUv=vUv+vec2(x,y)*invTexSize;vec4 neigborVelocity=textureLod(velocityTexture,neighborUv,0.0);neighborDepth=neigborVelocity.b;col=textureLod(inputTexture,neighborUv,0.0).xyz;int absX=abs(x);int absY=abs(y);
#ifdef dilation
if(absX==1&&absY==1){if(neighborDepth>closestDepth){velocity=neigborVelocity;closestDepth=neighborDepth;}vec4 lastNeighborVelocity=textureLod(velocityTexture,vUv+vec2(x,y)*invTexSize,0.0);lastNeighborDepth=lastNeighborVelocity.b;if(neighborDepth>closestDepth){lastVelocity=lastNeighborVelocity;lastClosestDepth=lastNeighborDepth;}}
#endif
if(abs(depth-neighborDepth)<MAX_NEIGHBOR_DEPTH_DIFFERENCE){
#ifdef boxBlur
if(absX<=2&&absY<=2)boxBlurredColor+=col;
#endif
col=transformColor(col);minNeighborColor=min(col,minNeighborColor);maxNeighborColor=max(col,maxNeighborColor);}}}}float velocityLength=length(lastVelocity.xy-velocity.xy);velocityDisocclusion=(velocityLength-0.000005)*10.0;velocityDisocclusion*=velocityDisocclusion;reprojectedUv=vUv-velocity.xy;
#ifdef boxBlur
float pxRadius=correctionRadius>5 ? 121.0 : pow(float(correctionRadius*2+1),2.0);boxBlurredColor/=pxRadius;boxBlurredColor=transformColor(boxBlurredColor);
#endif
if(reprojectedUv.x>=0.0&&reprojectedUv.x<=1.0&&reprojectedUv.y>=0.0&&reprojectedUv.y<=1.0){accumulatedTexel=textureLod(accumulatedTexture,reprojectedUv,0.0);accumulatedColor=transformColor(accumulatedTexel.rgb);vec3 clampedColor=clamp(accumulatedColor,minNeighborColor,maxNeighborColor);accumulatedColor=mix(accumulatedColor,clampedColor,correction);didReproject=true;}else{
#ifdef boxBlur
accumulatedColor=boxBlurredColor;
#else
accumulatedColor=inputColor;
#endif
}if(velocity.r>FLOAT_ONE_MINUS_EPSILON&&velocity.g>FLOAT_ONE_MINUS_EPSILON){alpha=0.0;velocityDisocclusion=1.0;}}else{accumulatedColor=transformColor(textureLod(accumulatedTexture,vUv,0.0).rgb);}vec3 outputColor=inputColor;
#include <custom_compose_shader>
gl_FragColor=vec4(undoColorTransform(outputColor),alpha);}`;class x5 extends tn{constructor(e){const t=y5.replace("#include <custom_compose_shader>",e);super({type:"TemporalResolveMaterial",uniforms:{inputTexture:new Ee(null),accumulatedTexture:new Ee(null),velocityTexture:new Ee(null),lastVelocityTexture:new Ee(null),samples:new Ee(1),blend:new Ee(.5),correction:new Ee(1),exponent:new Ee(1),invTexSize:new Ee(new _e)},defines:{correctionRadius:1},vertexShader:v5,fragmentShader:t})}}const S5=`
		#ifdef USE_SKINNING
		#ifdef BONE_TEXTURE
			uniform sampler2D prevBoneTexture;
			mat4 getPrevBoneMatrix( const in float i ) {
				float j = i * 4.0;
				float x = mod( j, float( boneTextureSize ) );
				float y = floor( j / float( boneTextureSize ) );
				float dx = 1.0 / float( boneTextureSize );
				float dy = 1.0 / float( boneTextureSize );
				y = dy * ( y + 0.5 );
				vec4 v1 = texture2D( prevBoneTexture, vec2( dx * ( x + 0.5 ), y ) );
				vec4 v2 = texture2D( prevBoneTexture, vec2( dx * ( x + 1.5 ), y ) );
				vec4 v3 = texture2D( prevBoneTexture, vec2( dx * ( x + 2.5 ), y ) );
				vec4 v4 = texture2D( prevBoneTexture, vec2( dx * ( x + 3.5 ), y ) );
				mat4 bone = mat4( v1, v2, v3, v4 );
				return bone;
			}
		#else
			uniform mat4 prevBoneMatrices[ MAX_BONES ];
			mat4 getPrevBoneMatrix( const in float i ) {
				mat4 bone = prevBoneMatrices[ int(i) ];
				return bone;
			}
		#endif
		#endif
`,_5=`
		vec3 transformed;

		// Get the normal
		${Nt.skinbase_vertex}
		${Nt.beginnormal_vertex}
		${Nt.skinnormal_vertex}
		${Nt.defaultnormal_vertex}

		// Get the current vertex position
		transformed = vec3( position );
		${Nt.skinning_vertex}
		newPosition = velocityMatrix * vec4( transformed, 1.0 );

		// Get the previous vertex position
		transformed = vec3( position );
		${Nt.skinbase_vertex.replace(/mat4 /g,"").replace(/getBoneMatrix/g,"getPrevBoneMatrix")}
		${Nt.skinning_vertex.replace(/vec4 /g,"")}
		prevPosition = prevVelocityMatrix * vec4( transformed, 1.0 );

		gl_Position = newPosition;
`;class M5 extends tn{constructor(){super({uniforms:{prevVelocityMatrix:{value:new vt},velocityMatrix:{value:new vt},prevBoneTexture:{value:null},interpolateGeometry:{value:0},intensity:{value:1},boneTexture:{value:null},alphaTest:{value:0},map:{value:null},alphaMap:{value:null},opacity:{value:1}},vertexShader:`
                    #define MAX_BONES 1024
                    
                    ${Nt.skinning_pars_vertex}
                    ${S5}
        
                    uniform mat4 velocityMatrix;
                    uniform mat4 prevVelocityMatrix;
                    uniform float interpolateGeometry;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
					varying vec2 vHighPrecisionZW;
        
                    void main() {
        
                        ${_5}

						vHighPrecisionZW = gl_Position.zw;
        
                    }`,fragmentShader:`
                    uniform float intensity;
                    varying vec4 prevPosition;
                    varying vec4 newPosition;
					varying vec2 vHighPrecisionZW;
        
                    void main() {
						#ifdef FULL_MOVEMENT
						gl_FragColor = vec4( 1., 1., 1. - gl_FragCoord.z, 0. );
						return;
						#endif

                        vec2 pos0 = (prevPosition.xy / prevPosition.w) * 0.5 + 0.5;
                        vec2 pos1 = (newPosition.xy / newPosition.w) * 0.5 + 0.5;
        
                        vec2 vel = pos1 - pos0;

						float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
                        
                        gl_FragColor = vec4( vel, 1. - fragCoordZ, 0. );
        
                    }`}),this.isVelocityMaterial=!0}}const w5=new Je(0),T5=["visible","wireframe","side"];class E5 extends Ai{constructor(e,t){var i,r;super("VelocityPass"),this.cachedMaterials=new WeakMap,this.lastCameraTransform={position:new Q,quaternion:new Qi},this.visibleMeshes=[],this.renderedMeshesThisFrame=0,this.renderedMeshesLastFrame=0,this._scene=e,this._camera=t,this.renderTarget=new an(((i=window)==null?void 0:i.innerWidth)||1e3,((r=window)==null?void 0:r.innerHeight)||1e3,{type:Tr})}setVelocityMaterialInScene(){this.renderedMeshesThisFrame=0,this.visibleMeshes=Eb(this._scene);for(const i of this.visibleMeshes){var e;const r=i.material;let[s,a]=this.cachedMaterials.get(i)||[];if(r!==s){var t;a=new M5,a.lastMatrixWorld=new vt,i.material=a,(t=i.skeleton)!=null&&t.boneTexture&&this.saveBoneTexture(i),this.cachedMaterials.set(i,[r,a])}if(a.uniforms.velocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,i.modelViewMatrix),i.userData.needsUpdatedReflections||r.map instanceof YE?("FULL_MOVEMENT"in a.defines||(a.needsUpdate=!0),a.defines.FULL_MOVEMENT=""):"FULL_MOVEMENT"in a.defines&&(delete a.defines.FULL_MOVEMENT,a.needsUpdate=!0),i.visible=this.cameraMovedThisFrame||!i.matrixWorld.equals(a.lastMatrixWorld)||i.skeleton||"FULL_MOVEMENT"in a.defines,i.material=a,!!i.visible){this.renderedMeshesThisFrame++;for(const l of T5)a[l]=r[l];(e=i.skeleton)!=null&&e.boneTexture&&(a.defines.USE_SKINNING="",a.defines.BONE_TEXTURE="",a.uniforms.boneTexture.value=i.skeleton.boneTexture)}}}saveBoneTexture(e){let t=e.material.uniforms.prevBoneTexture.value;if(t&&t.image.width===e.skeleton.boneTexture.width)t=e.material.uniforms.prevBoneTexture.value,t.image.data.set(e.skeleton.boneTexture.image.data);else{var i;(i=t)==null||i.dispose();const r=e.skeleton.boneTexture.image.data.slice(),s=e.skeleton.boneTexture.image.width;t=new ho(r,s,s,Dn,li),e.material.uniforms.prevBoneTexture.value=t,t.needsUpdate=!0}}unsetVelocityMaterialInScene(){for(const t of this.visibleMeshes)if(t.material.isVelocityMaterial){var e;t.visible=!0,t.material.lastMatrixWorld.copy(t.matrixWorld),t.material.uniforms.prevVelocityMatrix.value.multiplyMatrices(this._camera.projectionMatrix,t.modelViewMatrix),(e=t.skeleton)!=null&&e.boneTexture&&this.saveBoneTexture(t),t.material=this.cachedMaterials.get(t)[0]}}setSize(e,t){this.renderTarget.setSize(e,t)}renderVelocity(e){if(e.setRenderTarget(this.renderTarget),this.renderedMeshesThisFrame>0){const{background:t}=this._scene;this._scene.background=w5,e.render(this._scene,this._camera),this._scene.background=t}else e.clearColor()}checkCameraMoved(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));return e>1e-6||t>1e-6?(this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion),!0):!1}render(e){this.cameraMovedThisFrame=this.checkCameraMoved(),this.setVelocityMaterialInScene(),(this.renderedMeshesThisFrame>0||this.renderedMeshesLastFrame>0)&&this.renderVelocity(e),this.unsetVelocityMaterialInScene(),this.renderedMeshesLastFrame=this.renderedMeshesThisFrame}}const eT=new _e;class b5 extends Ai{constructor(e,t,i,r={}){super("TemporalResolvePass"),this.velocityPass=null,this.velocityResolutionScale=1,this.samples=1,this.lastCameraTransform={position:new Q,quaternion:new Qi},this._scene=e,this._camera=t,this.renderTarget=new an(1,1,{minFilter:Et,magFilter:Et,type:Tr,depthBuffer:!1}),this.velocityPass=new E5(e,t),this.fullscreenMaterial=new x5(i),this.fullscreenMaterial.defines.correctionRadius=r.correctionRadius||1,r.dilation&&(this.fullscreenMaterial.defines.dilation=""),r.boxBlur&&(this.fullscreenMaterial.defines.boxBlur=""),this.setupFramebuffers(1,1),this.checkCanUseSharedVelocityTexture()}dispose(){this._scene.userData.velocityTexture===this.velocityPass.renderTarget.texture&&(delete this._scene.userData.velocityTexture,delete this._scene.userData.lastVelocityTexture),this.renderTarget.dispose(),this.accumulatedTexture.dispose(),this.fullscreenMaterial.dispose(),this.velocityPass.dispose()}setSize(e,t){this.renderTarget.setSize(e,t),this.velocityPass.setSize(e*this.velocityResolutionScale,t*this.velocityResolutionScale),this.velocityPass.renderTarget.texture.minFilter=this.velocityResolutionScale===1?$t:Et,this.velocityPass.renderTarget.texture.magFilter=this.velocityResolutionScale===1?$t:Et,this.velocityPass.renderTarget.texture.needsUpdate=!0,this.fullscreenMaterial.uniforms.invTexSize.value.set(1/e,1/t),this.setupFramebuffers(e,t)}setupFramebuffers(e,t){this.accumulatedTexture&&this.accumulatedTexture.dispose(),this.lastVelocityTexture&&this.lastVelocityTexture.dispose(),this.accumulatedTexture=new px(e,t,Dn),this.accumulatedTexture.minFilter=Et,this.accumulatedTexture.magFilter=Et,this.accumulatedTexture.type=Tr,this.lastVelocityTexture=new px(e*this.velocityResolutionScale,t*this.velocityResolutionScale,Dn),this.lastVelocityTexture.minFilter=this.velocityResolutionScale===1?$t:Et,this.lastVelocityTexture.magFilter=this.velocityResolutionScale===1?$t:Et,this.lastVelocityTexture.type=Tr,this.fullscreenMaterial.uniforms.accumulatedTexture.value=this.accumulatedTexture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0}checkCanUseSharedVelocityTexture(){return this._scene.userData.velocityTexture&&this.velocityPass.renderTarget.texture!==this._scene.userData.velocityTexture?this.velocityPass.renderTarget.texture===this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this._scene.userData.lastVelocityTexture,this.fullscreenMaterial.uniforms.velocityTexture.value=this._scene.userData.velocityTexture,this.fullscreenMaterial.needsUpdate=!0):this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value&&(this.fullscreenMaterial.uniforms.velocityTexture.value=this.velocityPass.renderTarget.texture,this.fullscreenMaterial.uniforms.lastVelocityTexture.value=this.lastVelocityTexture,this.fullscreenMaterial.needsUpdate=!0,this._scene.userData.velocityTexture||(this._scene.userData.velocityTexture=this.velocityPass.renderTarget.texture,this._scene.userData.lastVelocityTexture=this.lastVelocityTexture)),this.velocityPass.renderTarget.texture!==this.fullscreenMaterial.uniforms.velocityTexture.value}checkNeedsResample(){const e=this.lastCameraTransform.position.distanceToSquared(this._camera.position),t=8*(1-this.lastCameraTransform.quaternion.dot(this._camera.quaternion));(e>1e-6||t>1e-6)&&(this.samples=1,this.lastCameraTransform.position.copy(this._camera.position),this.lastCameraTransform.quaternion.copy(this._camera.quaternion))}render(e){this.samples++,this.checkNeedsResample(),this.fullscreenMaterial.uniforms.samples.value=this.samples,e.setRenderTarget(this.renderTarget),e.render(this.scene,this.camera),e.copyFramebufferToTexture(eT,this.accumulatedTexture),e.setRenderTarget(this.velocityPass.renderTarget),e.copyFramebufferToTexture(eT,this.lastVelocityTexture)}}const tT=function(e,t){let i=1,r=0;for(;e>0;)i/=t,r+=i*(e%t),e=~~(e/t);return r},A5=n=>{const e=[];let t=1;const i=t+n;for(;t<i;t++)e.push([tT(t,2)-.5,tT(t,3)-.5]);return e};function nT(n){return n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}const C5=`
#if defined( USE_ENVMAP ) || defined(  ) || defined ( USE_SHADOWMAP )
    vec4 worldPosition = modelMatrix * vec4( transformed, 1.0 );

    #ifdef BOX_PROJECTED_ENV_MAP
        vWorldPosition = worldPosition.xyz;
    #endif
#endif
`,R5=`
#ifdef BOX_PROJECTED_ENV_MAP
    uniform vec3 envMapSize;
    uniform vec3 envMapPosition;
    varying vec3 vWorldPosition;
    
    vec3 parallaxCorrectNormal( vec3 v, vec3 cubeSize, vec3 cubePos ) {
        vec3 nDir = normalize( v );

        vec3 rbmax = ( .5 * cubeSize + cubePos - vWorldPosition ) / nDir;
        vec3 rbmin = ( -.5 * cubeSize + cubePos - vWorldPosition ) / nDir;

        vec3 rbminmax;

        rbminmax.x = ( nDir.x > 0. ) ? rbmax.x : rbmin.x;
        rbminmax.y = ( nDir.y > 0. ) ? rbmax.y : rbmin.y;
        rbminmax.z = ( nDir.z > 0. ) ? rbmax.z : rbmin.z;

        float correction = min( min( rbminmax.x, rbminmax.y ), rbminmax.z );
        vec3 boxIntersection = vWorldPosition + nDir * correction;
        
        return boxIntersection - cubePos;
    }
#endif
`,P5=`
#ifdef BOX_PROJECTED_ENV_MAP
    worldNormal = parallaxCorrectNormal( worldNormal, envMapSize, envMapPosition );
#endif
`,D5=`
#ifdef BOX_PROJECTED_ENV_MAP
    reflectVec = parallaxCorrectNormal( reflectVec, envMapSize, envMapPosition );
#endif
`;function L5(n,e,t){n.defines.BOX_PROJECTED_ENV_MAP="",n.uniforms.envMapPosition={value:e},n.uniforms.envMapSize={value:t};const i=new RegExp(nT("vec3 worldNormal = inverseTransformDirection ( normal , viewMatrix ) ;").replaceAll(" ","\\s*"),"g"),r=new RegExp(nT("reflectVec = inverseTransformDirection ( reflectVec , viewMatrix ) ;").replaceAll(" ","\\s*"),"g");n.vertexShader=`varying vec3 vWorldPosition;
`+n.vertexShader.replace("#include <worldpos_vertex>",C5),n.fragmentShader=R5+`
`+n.fragmentShader.replace("#include <envmap_physical_pars_fragment>",Nt.envmap_physical_pars_fragment).replace(i,`vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
                ${P5}`).replace(r,`reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
                ${D5}`)}const I5=l5.replace("#include <helperFunctions>",Tb).replace("#include <boxBlur>",o5),U5=["blur","blurSharpness","blurKernel"],N5=new gv(1);let Lg;class F5 extends es{constructor(e,t,i=$w){super("SSREffect",I5,{type:"FinalSSRMaterial",uniforms:new Map([["reflectionsTexture",new Ee(null)],["blur",new Ee(0)],["blurSharpness",new Ee(0)],["blurKernel",new Ee(0)]]),defines:new Map([["RENDER_MODE","0"]])}),this.haltonSequence=A5(1024),this.haltonIndex=0,this.selection=new G1,this.lastSize=void 0,this.cubeCamera=new u1(.001,1e3,N5),this.usingBoxProjectedEnvMap=!1,this._scene=e,this._camera=t,i=Px({},$w,i,{boxBlur:!0,dilation:!0}),this.temporalResolvePass=new b5(e,t,u5,i),this.uniforms.get("reflectionsTexture").value=this.temporalResolvePass.renderTarget.texture,this.reflectionsPass=new g5(this,i),this.temporalResolvePass.fullscreenMaterial.uniforms.inputTexture.value=this.reflectionsPass.renderTarget.texture,this.lastSize={width:i.width,height:i.height,resolutionScale:i.resolutionScale,velocityResolutionScale:i.velocityResolutionScale},this.setSize(i.width,i.height),this.makeOptionsReactive(i)}makeOptionsReactive(e){let t=!1;const i=this.reflectionsPass.fullscreenMaterial.uniforms,r=Object.keys(i);for(const s of Object.keys(e))Object.defineProperty(this,s,{get(){return e[s]},set(a){if(!(e[s]===a&&t))switch(e[s]=a,U5.includes(s)||this.setSize(this.lastSize.width,this.lastSize.height,!0),s){case"resolutionScale":this.setSize(this.lastSize.width,this.lastSize.height);break;case"velocityResolutionScale":this.temporalResolvePass.velocityResolutionScale=a,this.setSize(this.lastSize.width,this.lastSize.height,!0);break;case"blur":this.uniforms.get("blur").value=a;break;case"blurSharpness":this.uniforms.get("blurSharpness").value=a;break;case"blurKernel":this.uniforms.get("blurKernel").value=a;break;case"steps":this.reflectionsPass.fullscreenMaterial.defines.steps=parseInt(a),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"refineSteps":this.reflectionsPass.fullscreenMaterial.defines.refineSteps=parseInt(a),this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"missedRays":a?this.reflectionsPass.fullscreenMaterial.defines.missedRays="":delete this.reflectionsPass.fullscreenMaterial.defines.missedRays,this.reflectionsPass.fullscreenMaterial.needsUpdate=t;break;case"correctionRadius":this.temporalResolvePass.fullscreenMaterial.defines.correctionRadius=Math.round(a),this.temporalResolvePass.fullscreenMaterial.needsUpdate=t;break;case"blend":this.temporalResolvePass.fullscreenMaterial.uniforms.blend.value=a;break;case"correction":this.temporalResolvePass.fullscreenMaterial.uniforms.correction.value=a;break;case"exponent":this.temporalResolvePass.fullscreenMaterial.uniforms.exponent.value=a;break;case"distance":i.rayDistance.value=a;default:r.includes(s)&&(i[s].value=a)}}}),this[s]=e[s];t=!0}setSize(e,t,i=!1){!i&&e===this.lastSize.width&&t===this.lastSize.height&&this.resolutionScale===this.lastSize.resolutionScale&&this.velocityResolutionScale===this.lastSize.velocityResolutionScale||(this.temporalResolvePass.setSize(e,t),this.reflectionsPass.setSize(e,t),this.lastSize={width:e,height:t,resolutionScale:this.resolutionScale,velocityResolutionScale:this.velocityResolutionScale})}generateBoxProjectedEnvMapFallback(e,t=new Q,i=new Q,r=512){this.cubeCamera.renderTarget.dispose(),this.cubeCamera.renderTarget=new gv(r),this.cubeCamera.position.copy(t),this.cubeCamera.updateMatrixWorld(),this.cubeCamera.update(e,this._scene),Lg||(Lg=new nv(e),Lg.compileCubemapShader());const s=Lg.fromCubemap(this.cubeCamera.renderTarget.texture).texture;s.minFilter=Et,s.magFilter=Et;const a=this.reflectionsPass.fullscreenMaterial;return L5(a,t,i),a.fragmentShader=a.fragmentShader.replace("vec3 worldPos","worldPos").replace("varying vec3 vWorldPosition;","vec3 worldPos;"),a.uniforms.envMapPosition.value.copy(t),a.uniforms.envMapSize.value.copy(i),Jw(a,s,r),this.usingBoxProjectedEnvMap=!0,s}setIBLRadiance(e,t){this._scene.traverse(i=>{if(i.material){var r;const s=(r=t.properties.get(i.material))==null?void 0:r.uniforms;s&&"disableIBLRadiance"in s&&(s.disableIBLRadiance.value=e)}})}deleteBoxProjectedEnvMapFallback(){const e=this.reflectionsPass.fullscreenMaterial;e.uniforms.envMap.value=null,e.fragmentShader=e.fragmentShader.replace("worldPos = ","vec3 worldPos = "),delete e.defines.BOX_PROJECTED_ENV_MAP,e.needsUpdate=!0,this.usingBoxProjectedEnvMap=!1}dispose(){super.dispose(),this.reflectionsPass.dispose(),this.temporalResolvePass.dispose()}update(e,t){if(!this.usingBoxProjectedEnvMap&&this._scene.environment){const l=this.reflectionsPass.fullscreenMaterial;let c=null;if(this._scene.traverse(f=>{if(!c&&f.material&&!f.material.envMap){const p=e.properties.get(f.material);"envMap"in p&&p.envMap instanceof Qn&&(c=p.envMap)}}),c){const f=this._scene.environment.image.height;Jw(l,c,f)}}this.haltonIndex=(this.haltonIndex+1)%this.haltonSequence.length;const[i,r]=this.haltonSequence[this.haltonIndex],{width:s,height:a}=this.lastSize;this.temporalResolvePass.velocityPass.render(e),this._camera.setViewOffset&&this._camera.setViewOffset(s,a,i,r,s,a),this.reflectionsPass.render(e,t),this.temporalResolvePass.render(e),this._camera.clearViewOffset()}static patchDirectEnvIntensity(e=0){e===0?Nt.envmap_physical_pars_fragment=Nt.envmap_physical_pars_fragment.replace("vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {","vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) { return vec3(0.0);"):Nt.envmap_physical_pars_fragment=Nt.envmap_physical_pars_fragment.replace("vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );","vec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness ) * "+e.toFixed(5)+";")}}const lu=K.createContext(null),k5=np.memo(K.forwardRef(({children:n,camera:e,scene:t,resolutionScale:i,enabled:r=!0,renderPriority:s=1,autoClear:a=!0,depthBuffer:l,disableNormalPass:c,stencilBuffer:f,multisampling:p=8,frameBufferType:g=Tr},v)=>{const{gl:y,scene:S,camera:T,size:w}=$r(),M=t||S,A=e||T,[b,R,I]=K.useMemo(()=>{const U=tO(),O=new MB(y,{depthBuffer:l,stencilBuffer:f,multisampling:p>0&&U?p:0,frameBufferType:g});O.addPass(new _h(M,A));let $=null,Y=null;return c||(Y=new Dz(M,A),Y.enabled=!1,O.addPass(Y),i!==void 0&&U&&($=new yb({normalBuffer:Y.texture,resolutionScale:i}),$.enabled=!1,O.addPass($))),[O,Y,$]},[A,y,l,f,p,g,M,c,i]);K.useEffect(()=>b==null?void 0:b.setSize(w.width,w.height),[b,w]),ou((U,O)=>{r&&(y.autoClear=a,b.render(O))},r?s:0);const k=K.useRef(null),F=Ik(k);K.useLayoutEffect(()=>{const U=[];if(k.current&&F.current&&b){const O=F.current.objects;for(let $=0;$<O.length;$++){const Y=O[$];if(Y instanceof es){const q=[];for(;O[$]instanceof es;)q.push(O[$++]);$--;const J=new Pz(A,...q);U.push(J)}else Y instanceof Ai&&U.push(Y)}for(const $ of U)b==null||b.addPass($);R&&(R.enabled=!0),I&&(I.enabled=!0)}return()=>{for(const O of U)b==null||b.removePass(O);R&&(R.enabled=!1),I&&(I.enabled=!1)}},[b,n,A,R,I,F]);const z=K.useMemo(()=>({composer:b,normalPass:R,downSamplingPass:I,resolutionScale:i,camera:A,scene:M}),[b,R,I,i,A,M]);return K.useImperativeHandle(v,()=>b,[b]),pe.jsx(lu.Provider,{value:z,children:pe.jsx("group",{ref:k,children:n})})})),O5=K.forwardRef(function({target:e,depthTexture:t,...i},r){const s=$r(c=>c.invalidate),{camera:a}=K.useContext(lu),l=K.useMemo(()=>{const c=new D4(a,i),f=c.maskPass.getFullscreenMaterial();return f.maskFunction=V1.MULTIPLY_RGB_SET_ALPHA,c},[a,i]);return K.useLayoutEffect(()=>{if(e&&typeof e!="number"){const c=e instanceof Q?new Q().set(e.x,e.y,e.z):new Q().set(e[0],e[1],e[2]);l.target=c}t&&l.setDepthTexture(t.texture,t.packing),s()},[e,t,l]),pe.jsx("primitive",{ref:r,object:l,dispose:null})});K.forwardRef(({target:n=void 0,mouse:e=!1,debug:t=void 0,manual:i=!1,smoothTime:r=.25,...s},a)=>{const l=K.useRef(null),c=K.useRef(null),f=K.useRef(null),p=$r(({scene:I})=>I),g=$r(({pointer:I})=>I),{composer:v,camera:y}=K.useContext(lu),[S]=K.useState(()=>new Cz),[T]=K.useState(()=>new pb);K.useEffect(()=>(v.addPass(S),v.addPass(T),()=>{v.removePass(S),v.removePass(T)}),[v,S,T]),K.useEffect(()=>()=>{S.dispose(),T.dispose()},[S,T]);const[w]=K.useState(()=>new Q(0,0,0)),[M]=K.useState(()=>new Q(0,0,0)),A=K.useCallback(async(I,k)=>(M.x=I,M.y=k,M.z=await S.readDepth(M),M.z=M.z*2-1,1-M.z>1e-7?M.unproject(y):!1),[M,S,y]),b=K.useCallback(async(I,k=!0)=>{var F;if(n)w.set(...n);else{const{x:z,y:U}=e?g:{x:0,y:0},O=await A(z,U);O&&w.copy(O)}k&&(!((F=l.current)===null||F===void 0)&&F.target)&&(r>0&&I>0?Qz.damp3(l.current.target,w,r,I):l.current.target.copy(w))},[n,w,e,A,r,g]);ou(async(I,k)=>{var F;i||b(k),c.current&&c.current.position.copy(w),f.current&&(!((F=l.current)===null||F===void 0)&&F.target)&&f.current.position.copy(l.current.target)});const R=K.useMemo(()=>({dofRef:l,hitpoint:w,update:b}),[w,b]);return K.useImperativeHandle(a,()=>R,[R]),pe.jsxs(pe.Fragment,{children:[t?Y2(pe.jsxs(pe.Fragment,{children:[pe.jsxs("mesh",{ref:c,children:[pe.jsx("sphereGeometry",{args:[t,16,16]}),pe.jsx("meshBasicMaterial",{color:"#00ff00",opacity:1,transparent:!0,depthWrite:!1})]}),pe.jsxs("mesh",{ref:f,children:[pe.jsx("sphereGeometry",{args:[t/2,16,16]}),pe.jsx("meshBasicMaterial",{color:"#00ff00",opacity:.5,transparent:!0,depthWrite:!1})]})]}),p):null,pe.jsx(O5,{ref:l,...s,target:w})]})});const Ql=n=>typeof n=="object"&&n!=null&&"current"in n?n.current:n;let B5=0;const iT=new WeakMap,z5=(n,e)=>np.forwardRef(function({blendFunction:i=e==null?void 0:e.blendFunction,opacity:r=e==null?void 0:e.opacity,...s},a){let l=iT.get(n);if(!l){const p=`@react-three/postprocessing/${n.name}-${B5++}`;U2({[p]:n}),iT.set(n,l=p)}const c=$r(p=>p.camera),f=np.useMemo(()=>{var p,g;return[...(p=e==null?void 0:e.args)!==null&&p!==void 0?p:[],...(g=s.args)!==null&&g!==void 0?g:[{...e,...s}]]},[JSON.stringify(s)]);return pe.jsx(l,{camera:c,"blendMode-blendFunction":i,"blendMode-opacity-value":r,...s,ref:a,args:f})}),Yg=(n,e)=>{const t=n[e];return np.useMemo(()=>typeof t=="number"?new _e(t,t):t?new _e(...t):new _e,[t])},H5=z5(mb,{blendFunction:Zt.ADD});K.forwardRef(function(e,t){const i=Yg(e,"offset"),r=K.useMemo(()=>new T4({...e,offset:i}),[i,e]);return pe.jsx("primitive",{ref:t,object:r,dispose:null})});K.forwardRef(function({blendFunction:e=Zt.NORMAL},t){const i=K.useMemo(()=>new _4(e),[e]);return pe.jsx("primitive",{ref:t,object:i,dispose:null})});K.forwardRef(function({active:e=!0,...t},i){const r=$r(f=>f.invalidate),s=Yg(t,"delay"),a=Yg(t,"duration"),l=Yg(t,"strength"),c=K.useMemo(()=>new U4({...t,delay:s,duration:a,strength:l}),[s,a,t,l]);return K.useLayoutEffect(()=>{c.mode=e?t.mode||ic.SPORADIC:ic.DISABLED,r()},[e,c,r,t.mode]),pe.jsx("primitive",{ref:i,object:c,dispose:null})});K.forwardRef(function(e,t){const{camera:i}=K.useContext(lu),r=K.useMemo(()=>new B4(i,Ql(e.sun),e),[i,e]);return K.useLayoutEffect(()=>void(r.lightSource=Ql(e.sun)),[r,e.sun]),pe.jsx("primitive",{ref:t,object:r,dispose:null})});K.forwardRef(function({size:e,...t},i){const r=$r(a=>a.invalidate),s=K.useMemo(()=>new H4(t),[t]);return K.useLayoutEffect(()=>{e&&s.setSize(e.width,e.height),r()},[s,e]),pe.jsx("primitive",{ref:i,object:s,dispose:null})});const j1=K.createContext(null);K.forwardRef(function({selection:e=[],selectionLayer:t=10,blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:l,hiddenEdgeColor:c,width:f,height:p,kernelSize:g,blur:v,xRay:y,...S},T){const w=$r(I=>I.invalidate),{scene:M,camera:A}=K.useContext(lu),b=K.useMemo(()=>new nz(M,A,{blendFunction:i,patternTexture:r,edgeStrength:s,pulseSpeed:a,visibleEdgeColor:l,hiddenEdgeColor:c,width:f,height:p,kernelSize:g,blur:v,xRay:y,...S}),[i,v,A,s,p,c,g,r,S,a,M,l,f,y]),R=K.useContext(j1);return K.useEffect(()=>{if(!R&&e)return b.selection.set(Array.isArray(e)?e.map(Ql):[Ql(e)]),w(),()=>{b.selection.clear(),w()}},[b,e,R,w]),K.useEffect(()=>{b.selectionLayer=t,w()},[b,w,t]),K.useRef(),K.useEffect(()=>{var I;if(R&&R.enabled&&!((I=R.selected)===null||I===void 0)&&I.length)return b.selection.set(R.selected),w(),()=>{b.selection.clear(),w()}},[R,b.selection,w]),pe.jsx("primitive",{ref:T,object:b})});K.forwardRef(function({granularity:e=5},t){const i=K.useMemo(()=>new rz(e),[e]);return pe.jsx("primitive",{ref:t,object:i,dispose:null})});const G5=(n,e)=>n.layers.enable(e.selection.layer),V5=(n,e)=>n.layers.disable(e.selection.layer);K.forwardRef(function({selection:e=[],selectionLayer:t=10,lights:i=[],luminanceThreshold:r,luminanceSmoothing:s,intensity:a,width:l,height:c,kernelSize:f,mipmapBlur:p,...g},v){i.length===0&&console.warn("SelectiveBloom requires lights to work.");const y=$r(A=>A.invalidate),{scene:S,camera:T}=K.useContext(lu),w=K.useMemo(()=>new sz(S,T,{blendFunction:Zt.ADD,luminanceThreshold:r,luminanceSmoothing:s,intensity:a,width:l,height:c,kernelSize:f,mipmapBlur:p,...g}),[S,T,r,s,a,l,c,f,p,g]),M=K.useContext(j1);return K.useEffect(()=>{if(!M&&e)return w.selection.set(Array.isArray(e)?e.map(Ql):[Ql(e)]),y(),()=>{w.selection.clear(),y()}},[w,e,M,y]),K.useEffect(()=>{w.selection.layer=t,y()},[w,y,t]),K.useEffect(()=>{if(i&&i.length>0)return i.forEach(A=>G5(Ql(A),w)),y(),()=>{i.forEach(A=>V5(Ql(A),w)),y()}},[w,y,i,t]),K.useEffect(()=>{var A;if(M&&M.enabled&&!((A=M.selected)===null||A===void 0)&&A.length)return w.selection.set(M.selected),y(),()=>{w.selection.clear(),y()}},[M,w.selection,y]),pe.jsx("primitive",{ref:v,object:w,dispose:null})});K.forwardRef(function(e,t){const{camera:i,normalPass:r,downSamplingPass:s,resolutionScale:a}=K.useContext(lu),l=K.useMemo(()=>r===null&&s===null?(console.error("Please enable the NormalPass in the EffectComposer in order to use SSAO."),{}):new dz(i,r&&!s?r.texture:null,{blendFunction:Zt.MULTIPLY,samples:30,rings:4,distanceThreshold:1,distanceFalloff:0,rangeThreshold:.5,rangeFalloff:.1,luminanceInfluence:.9,radius:20,bias:.5,intensity:1,color:void 0,normalDepthBuffer:s?s.texture:null,resolutionScale:a??1,depthAwareUpsampling:!0,...e}),[i,r,e]);return pe.jsx("primitive",{ref:t,object:l,dispose:null})});K.forwardRef((n,e)=>{const{camera:t,scene:i,size:r}=$r(),s=K.useMemo(()=>new a5(i,t,r.width,r.height),[]);return K.useLayoutEffect(()=>{Object.assign(s.configuration,n)},[n]),pe.jsx("primitive",{ref:e,object:s})});K.forwardRef(function({textureSrc:e,texture:t,...i},r){const s=B1(v2,e);K.useLayoutEffect(()=>{s.encoding=al,s.wrapS=s.wrapT=Ga},[s]);const a=K.useMemo(()=>new gz({...i,texture:s||t}),[i,s,t]);return pe.jsx("primitive",{ref:r,object:a,dispose:null})});K.forwardRef(function({lut:e,tetrahedralInterpolation:t,...i},r){const s=K.useMemo(()=>new Y4(e,i),[e,i]),a=$r(l=>l.invalidate);return K.useLayoutEffect(()=>{t&&(s.tetrahedralInterpolation=t),e&&(s.lut=e),a()},[s,a,e,t]),pe.jsx("primitive",{ref:r,object:s,dispose:null})});K.forwardRef(function({ENABLE_BLUR:e=!0,USE_MRT:t=!0,...i},r){const{invalidate:s}=$r(),{scene:a,camera:l}=K.useContext(lu),c=K.useMemo(()=>new F5(a,l,{ENABLE_BLUR:e,USE_MRT:t,...i}),[a,l,e,t,i]),f=K.useContext(j1);return K.useEffect(()=>{var p;if(f&&f.enabled&&!((p=f.selected)===null||p===void 0)&&p.length)return c.selection.set(f.selected),s(),()=>{c.selection.clear(),s()}},[f]),pe.jsx("primitive",{ref:r,object:c,...i})});const W5="_home_jxjvl_1",j5={home:W5};function X5(){const{isDarkMode:n}=ov(),e={background:n?"#006494":"",atomColor:n?new Je(6,.5,2):new Je(2,1,6),electronColor:n?new Je(10,1,10):new Je(1,6,10),trailColor:n?new Je(1,20,20):new Je(20,2,20)};return pe.jsx("div",{className:j5.home,style:{background:e.background},children:pe.jsxs(J2,{camera:{position:[0,0,10]},children:[pe.jsx(hB,{speed:4,rotationIntensity:1,floatIntensity:2,children:pe.jsx(bb,{themeColors:e})}),pe.jsx(mB,{saturation:0,count:400,speed:6}),pe.jsx(k5,{children:pe.jsx(H5,{mipmapBlur:!0,luminanceThreshold:1,radius:.1})})]})})}function bb({themeColors:n}){const e=K.useMemo(()=>new Ip(0,0,3,1.15,0,2*Math.PI,!1,0).getPoints(100).map(t=>new Q(t.x,t.y,0)),[]);return pe.jsxs("group",{children:[pe.jsx(tp,{position:[0,0,.5],speed:100,points:e,themeColors:n}),pe.jsx(tp,{position:[0,0,.5],rotation:[0,0,Math.PI/3],speed:100,points:e,themeColors:n}),pe.jsx(tp,{position:[0,0,.5],rotation:[0,0,-Math.PI/3],speed:100,points:e,themeColors:n}),pe.jsx(hb,{args:[.25,34,34],children:pe.jsx("meshBasicMaterial",{color:n.atomColor})})]})}function tp({points:n,speed:e,themeColors:t,...i}){const r=K.useRef();return ou(s=>{if(!n||n.length===0)return;const a=s.clock.getElapsedTime()*e%n.length,l=Math.floor(a);r.current.position.copy(n[l])}),pe.jsx("group",{...i,children:pe.jsx(cB,{width:7,length:2,color:t.trailColor,attenuation:s=>s*s,children:pe.jsx("mesh",{ref:r,children:pe.jsx(hb,{args:[.2,64,64],children:pe.jsx("meshBasicMaterial",{color:t.electronColor})})})})})}bb.propTypes={themeColors:vs.PropTypes.shape({background:vs.PropTypes.string.isRequired,atomColor:vs.PropTypes.instanceOf(Je).isRequired,electronColor:vs.PropTypes.instanceOf(Je).isRequired,trailColor:vs.PropTypes.instanceOf(Je).isRequired,starsColor:vs.PropTypes.string.isRequired}).isRequired};tp.propTypes={radius:vs.PropTypes.number,points:vs.PropTypes.arrayOf(vs.PropTypes.instanceOf(Q)).isRequired,speed:vs.PropTypes.number,themeColors:vs.PropTypes.object.isRequired};tp.defaultProps={radius:2.75,speed:6};const Y5={};function Ab({mouse:n}){const e=K.useRef();return ou(()=>{e.current&&(e.current.position.x=n.x*2,e.current.position.y=n.y*2,e.current.rotation.x+=.01,e.current.rotation.y+=.01)}),pe.jsxs("mesh",{ref:e,scale:[4,4,4],className:Y5.container,children:[pe.jsx("boxGeometry",{}),pe.jsx("ambientLight",{}),pe.jsx("pointLight",{}),pe.jsx("meshStandardMaterial",{color:"#4b98c5"}),pe.jsx(Cg,{position:[0,.3,.5],fontSize:.1,color:"#1f2937",anchorX:"center",anchorY:"middle",scale:[1,1,1],children:"What I am learning"}),pe.jsx(Cg,{position:[0,.1,.5],fontSize:.1,color:"#1f2937",anchorX:"center",anchorY:"middle",scale:[1,1,1],children:"NOW: NodeJS"}),pe.jsx(Cg,{position:[0,-.3,-.5],fontSize:.09,color:"#1f2937",anchorX:"center",anchorY:"middle",scale:[1,1,1],children:"What I am learning"}),pe.jsx(Cg,{position:[0,-.5,-.5],fontSize:.09,color:"#1f2937",anchorX:"center",anchorY:"middle",scale:[1,1,1],children:"NOW: NodeJS"})]})}Ab.propTypes={mouse:Mr.shape({x:Mr.number.isRequired,y:Mr.number.isRequired}).isRequired};function q5(){const[n,e]=K.useState({x:0,y:0});K.useEffect(()=>{const a=l=>{const{innerWidth:c,innerHeight:f}=window;e({x:l.clientX/c*2-1,y:-(l.clientY/f)*2+1})};return window.addEventListener("mousemove",a),()=>window.removeEventListener("mousemove",a)},[]);const t=K.useRef(null),i=K.useRef(null),r=K.useRef(null),s=(a,l)=>{a.preventDefault(),l==="about"&&t.current.scrollIntoView({behavior:"smooth"}),l==="projects"&&i.current.scrollIntoView({behavior:"smooth"}),l==="contact"&&r.current.scrollIntoView({behavior:"smooth"})};return pe.jsxs(pe.Fragment,{children:[pe.jsx(AT,{scrollTo:s}),pe.jsxs(sC,{children:[pe.jsx(zd,{path:"/",element:pe.jsx(X5,{})}),pe.jsx(zd,{path:"about",element:pe.jsx(pR,{})}),pe.jsx(zd,{path:"video",element:pe.jsx(aR,{})}),pe.jsx(zd,{path:"*",element:pe.jsx(cR,{})})]}),pe.jsx("div",{ref:i,children:pe.jsx(HR,{})}),pe.jsxs(J2,{children:[pe.jsx("ambientLight",{}),pe.jsx("pointLight",{}),pe.jsx(Ab,{mouse:n})]}),pe.jsx(pP,{}),pe.jsx("div",{ref:r,children:pe.jsx(uP,{})})]})}function Z5(){return pe.jsx(cT,{children:pe.jsx(q5,{})})}const K5="_chatContainer_n81jq_21",Q5="_chatBubble_n81jq_41",rT={chatContainer:K5,chatBubble:Q5};function J5(){return pe.jsx("div",{className:`${rT.chatBubble} ${rT.chatContainer}`,children:"Express Your Feedback To My Assistant.Chat Now!"})}function $5(){const{started:n,startAnimation:e}=aT();return pe.jsx(RC,{children:n?pe.jsxs(pe.Fragment,{children:[pe.jsx(Z5,{}),pe.jsx(J5,{})]}):pe.jsx(pA,{onStart:e})})}function eH(){return pe.jsx(oT,{children:pe.jsx($5,{})})}oA.createRoot(document.getElementById("root")).render(pe.jsx(K.StrictMode,{children:pe.jsx(eH,{})}));
